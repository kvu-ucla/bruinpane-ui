var uv=Object.defineProperty;var Pf=e=>{throw TypeError(e)};var cv=(e,t,n)=>t in e?uv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var te=(e,t,n)=>cv(e,typeof t!="symbol"?t+"":t,n),Bl=(e,t,n)=>t.has(e)||Pf("Cannot "+n);var $=(e,t,n)=>(Bl(e,t,"read from private field"),n?n.call(e):t.get(e)),we=(e,t,n)=>t.has(e)?Pf("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),fe=(e,t,n,r)=>(Bl(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),De=(e,t,n)=>(Bl(e,t,"access private method"),n);var No=(e,t,n,r)=>({set _(i){fe(e,t,i,n)},get _(){return $(e,t,r)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function dv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Bp={exports:{}},sl={},Up={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eo=Symbol.for("react.element"),fv=Symbol.for("react.portal"),hv=Symbol.for("react.fragment"),pv=Symbol.for("react.strict_mode"),_v=Symbol.for("react.profiler"),mv=Symbol.for("react.provider"),gv=Symbol.for("react.context"),yv=Symbol.for("react.forward_ref"),vv=Symbol.for("react.suspense"),Sv=Symbol.for("react.memo"),wv=Symbol.for("react.lazy"),Of=Symbol.iterator;function Ev(e){return e===null||typeof e!="object"?null:(e=Of&&e[Of]||e["@@iterator"],typeof e=="function"?e:null)}var jp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Fp=Object.assign,Vp={};function ua(e,t,n){this.props=e,this.context=t,this.refs=Vp,this.updater=n||jp}ua.prototype.isReactComponent={};ua.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ua.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function zp(){}zp.prototype=ua.prototype;function Uc(e,t,n){this.props=e,this.context=t,this.refs=Vp,this.updater=n||jp}var jc=Uc.prototype=new zp;jc.constructor=Uc;Fp(jc,ua.prototype);jc.isPureReactComponent=!0;var Mf=Array.isArray,$p=Object.prototype.hasOwnProperty,Fc={current:null},Gp={key:!0,ref:!0,__self:!0,__source:!0};function Hp(e,t,n){var r,i={},a=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)$p.call(t,r)&&!Gp.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var d=Array(l),h=0;h<l;h++)d[h]=arguments[h+2];i.children=d}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Eo,type:e,key:a,ref:o,props:i,_owner:Fc.current}}function bv(e,t){return{$$typeof:Eo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Vc(e){return typeof e=="object"&&e!==null&&e.$$typeof===Eo}function Av(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Df=/\/+/g;function Ul(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Av(""+e.key):t.toString(36)}function os(e,t,n,r,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Eo:case fv:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+Ul(o,0):r,Mf(i)?(n="",e!=null&&(n=e.replace(Df,"$&/")+"/"),os(i,t,n,"",function(h){return h})):i!=null&&(Vc(i)&&(i=bv(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Df,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Mf(e))for(var l=0;l<e.length;l++){a=e[l];var d=r+Ul(a,l);o+=os(a,t,n,d,i)}else if(d=Ev(e),typeof d=="function")for(e=d.call(e),l=0;!(a=e.next()).done;)a=a.value,d=r+Ul(a,l++),o+=os(a,t,n,d,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Bo(e,t,n){if(e==null)return e;var r=[],i=0;return os(e,r,"","",function(a){return t.call(n,a,i++)}),r}function kv(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ut={current:null},ss={transition:null},Rv={ReactCurrentDispatcher:Ut,ReactCurrentBatchConfig:ss,ReactCurrentOwner:Fc};function Wp(){throw Error("act(...) is not supported in production builds of React.")}Pe.Children={map:Bo,forEach:function(e,t,n){Bo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Bo(e,function(){t++}),t},toArray:function(e){return Bo(e,function(t){return t})||[]},only:function(e){if(!Vc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Pe.Component=ua;Pe.Fragment=hv;Pe.Profiler=_v;Pe.PureComponent=Uc;Pe.StrictMode=pv;Pe.Suspense=vv;Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rv;Pe.act=Wp;Pe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Fp({},e.props),i=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=Fc.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(d in t)$p.call(t,d)&&!Gp.hasOwnProperty(d)&&(r[d]=t[d]===void 0&&l!==void 0?l[d]:t[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){l=Array(d);for(var h=0;h<d;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:Eo,type:e.type,key:i,ref:a,props:r,_owner:o}};Pe.createContext=function(e){return e={$$typeof:gv,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:mv,_context:e},e.Consumer=e};Pe.createElement=Hp;Pe.createFactory=function(e){var t=Hp.bind(null,e);return t.type=e,t};Pe.createRef=function(){return{current:null}};Pe.forwardRef=function(e){return{$$typeof:yv,render:e}};Pe.isValidElement=Vc;Pe.lazy=function(e){return{$$typeof:wv,_payload:{_status:-1,_result:e},_init:kv}};Pe.memo=function(e,t){return{$$typeof:Sv,type:e,compare:t===void 0?null:t}};Pe.startTransition=function(e){var t=ss.transition;ss.transition={};try{e()}finally{ss.transition=t}};Pe.unstable_act=Wp;Pe.useCallback=function(e,t){return Ut.current.useCallback(e,t)};Pe.useContext=function(e){return Ut.current.useContext(e)};Pe.useDebugValue=function(){};Pe.useDeferredValue=function(e){return Ut.current.useDeferredValue(e)};Pe.useEffect=function(e,t){return Ut.current.useEffect(e,t)};Pe.useId=function(){return Ut.current.useId()};Pe.useImperativeHandle=function(e,t,n){return Ut.current.useImperativeHandle(e,t,n)};Pe.useInsertionEffect=function(e,t){return Ut.current.useInsertionEffect(e,t)};Pe.useLayoutEffect=function(e,t){return Ut.current.useLayoutEffect(e,t)};Pe.useMemo=function(e,t){return Ut.current.useMemo(e,t)};Pe.useReducer=function(e,t,n){return Ut.current.useReducer(e,t,n)};Pe.useRef=function(e){return Ut.current.useRef(e)};Pe.useState=function(e){return Ut.current.useState(e)};Pe.useSyncExternalStore=function(e,t,n){return Ut.current.useSyncExternalStore(e,t,n)};Pe.useTransition=function(){return Ut.current.useTransition()};Pe.version="18.3.1";Up.exports=Pe;var q=Up.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xv=q,Cv=Symbol.for("react.element"),Tv=Symbol.for("react.fragment"),Lv=Object.prototype.hasOwnProperty,Pv=xv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ov={key:!0,ref:!0,__self:!0,__source:!0};function qp(e,t,n){var r,i={},a=null,o=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Lv.call(t,r)&&!Ov.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Cv,type:e,key:a,ref:o,props:i,_owner:Pv.current}}sl.Fragment=Tv;sl.jsx=qp;sl.jsxs=qp;Bp.exports=sl;var V=Bp.exports,Kp={exports:{}},en={},Qp={exports:{}},Yp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(J,N){var P=J.length;J.push(N);e:for(;0<P;){var H=P-1>>>1,X=J[H];if(0<i(X,N))J[H]=N,J[P]=X,P=H;else break e}}function n(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var N=J[0],P=J.pop();if(P!==N){J[0]=P;e:for(var H=0,X=J.length,he=X>>>1;H<he;){var me=2*(H+1)-1,je=J[me],Re=me+1,ee=J[Re];if(0>i(je,P))Re<X&&0>i(ee,je)?(J[H]=ee,J[Re]=P,H=Re):(J[H]=je,J[me]=P,H=me);else if(Re<X&&0>i(ee,P))J[H]=ee,J[Re]=P,H=Re;else break e}}return N}function i(J,N){var P=J.sortIndex-N.sortIndex;return P!==0?P:J.id-N.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var d=[],h=[],_=1,y=null,g=3,m=!1,C=!1,w=!1,O=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(J){for(var N=n(h);N!==null;){if(N.callback===null)r(h);else if(N.startTime<=J)r(h),N.sortIndex=N.expirationTime,t(d,N);else break;N=n(h)}}function T(J){if(w=!1,x(J),!C)if(n(d)!==null)C=!0,de(j);else{var N=n(h);N!==null&&xe(T,N.startTime-J)}}function j(J,N){C=!1,w&&(w=!1,b(R),R=-1),m=!0;var P=g;try{for(x(N),y=n(d);y!==null&&(!(y.expirationTime>N)||J&&!M());){var H=y.callback;if(typeof H=="function"){y.callback=null,g=y.priorityLevel;var X=H(y.expirationTime<=N);N=e.unstable_now(),typeof X=="function"?y.callback=X:y===n(d)&&r(d),x(N)}else r(d);y=n(d)}if(y!==null)var he=!0;else{var me=n(h);me!==null&&xe(T,me.startTime-N),he=!1}return he}finally{y=null,g=P,m=!1}}var W=!1,B=null,R=-1,L=5,k=-1;function M(){return!(e.unstable_now()-k<L)}function Y(){if(B!==null){var J=e.unstable_now();k=J;var N=!0;try{N=B(!0,J)}finally{N?ie():(W=!1,B=null)}}else W=!1}var ie;if(typeof E=="function")ie=function(){E(Y)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,ne=Q.port2;Q.port1.onmessage=Y,ie=function(){ne.postMessage(null)}}else ie=function(){O(Y,0)};function de(J){B=J,W||(W=!0,ie())}function xe(J,N){R=O(function(){J(e.unstable_now())},N)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(J){J.callback=null},e.unstable_continueExecution=function(){C||m||(C=!0,de(j))},e.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<J?Math.floor(1e3/J):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(J){switch(g){case 1:case 2:case 3:var N=3;break;default:N=g}var P=g;g=N;try{return J()}finally{g=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(J,N){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var P=g;g=J;try{return N()}finally{g=P}},e.unstable_scheduleCallback=function(J,N,P){var H=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?H+P:H):P=H,J){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=P+X,J={id:_++,callback:N,priorityLevel:J,startTime:P,expirationTime:X,sortIndex:-1},P>H?(J.sortIndex=P,t(h,J),n(d)===null&&J===n(h)&&(w?(b(R),R=-1):w=!0,xe(T,P-H))):(J.sortIndex=X,t(d,J),C||m||(C=!0,de(j))),J},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(J){var N=g;return function(){var P=g;g=N;try{return J.apply(this,arguments)}finally{g=P}}}})(Yp);Qp.exports=Yp;var Mv=Qp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dv=q,Zt=Mv;function ae(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Xp=new Set,qa={};function hi(e,t){ea(e,t),ea(e+"Capture",t)}function ea(e,t){for(qa[e]=t,e=0;e<t.length;e++)Xp.add(t[e])}var Xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vu=Object.prototype.hasOwnProperty,Iv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,If={},Nf={};function Nv(e){return vu.call(Nf,e)?!0:vu.call(If,e)?!1:Iv.test(e)?Nf[e]=!0:(If[e]=!0,!1)}function Bv(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Uv(e,t,n,r){if(t===null||typeof t>"u"||Bv(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function jt(e,t,n,r,i,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var Et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Et[e]=new jt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Et[t]=new jt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Et[e]=new jt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Et[e]=new jt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Et[e]=new jt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Et[e]=new jt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Et[e]=new jt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Et[e]=new jt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Et[e]=new jt(e,5,!1,e.toLowerCase(),null,!1,!1)});var zc=/[\-:]([a-z])/g;function $c(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(zc,$c);Et[t]=new jt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(zc,$c);Et[t]=new jt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(zc,$c);Et[t]=new jt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Et[e]=new jt(e,1,!1,e.toLowerCase(),null,!1,!1)});Et.xlinkHref=new jt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Et[e]=new jt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Gc(e,t,n,r){var i=Et.hasOwnProperty(t)?Et[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Uv(t,n,i,r)&&(n=null),r||i===null?Nv(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var rr=Dv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Uo=Symbol.for("react.element"),Si=Symbol.for("react.portal"),wi=Symbol.for("react.fragment"),Hc=Symbol.for("react.strict_mode"),Su=Symbol.for("react.profiler"),Zp=Symbol.for("react.provider"),Jp=Symbol.for("react.context"),Wc=Symbol.for("react.forward_ref"),wu=Symbol.for("react.suspense"),Eu=Symbol.for("react.suspense_list"),qc=Symbol.for("react.memo"),ur=Symbol.for("react.lazy"),e_=Symbol.for("react.offscreen"),Bf=Symbol.iterator;function Ea(e){return e===null||typeof e!="object"?null:(e=Bf&&e[Bf]||e["@@iterator"],typeof e=="function"?e:null)}var Je=Object.assign,jl;function Pa(e){if(jl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);jl=t&&t[1]||""}return`
`+jl+e}var Fl=!1;function Vl(e,t){if(!e||Fl)return"";Fl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var r=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){r=h}e.call(t.prototype)}else{try{throw Error()}catch(h){r=h}e()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var d=`
`+i[o].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=o&&0<=l);break}}}finally{Fl=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Pa(e):""}function jv(e){switch(e.tag){case 5:return Pa(e.type);case 16:return Pa("Lazy");case 13:return Pa("Suspense");case 19:return Pa("SuspenseList");case 0:case 2:case 15:return e=Vl(e.type,!1),e;case 11:return e=Vl(e.type.render,!1),e;case 1:return e=Vl(e.type,!0),e;default:return""}}function bu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case wi:return"Fragment";case Si:return"Portal";case Su:return"Profiler";case Hc:return"StrictMode";case wu:return"Suspense";case Eu:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Jp:return(e.displayName||"Context")+".Consumer";case Zp:return(e._context.displayName||"Context")+".Provider";case Wc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case qc:return t=e.displayName||null,t!==null?t:bu(e.type)||"Memo";case ur:t=e._payload,e=e._init;try{return bu(e(t))}catch{}}return null}function Fv(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bu(t);case 8:return t===Hc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Or(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function t_(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Vv(e){var t=t_(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function jo(e){e._valueTracker||(e._valueTracker=Vv(e))}function n_(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=t_(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Es(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Au(e,t){var n=t.checked;return Je({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Uf(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Or(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function r_(e,t){t=t.checked,t!=null&&Gc(e,"checked",t,!1)}function ku(e,t){r_(e,t);var n=Or(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ru(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ru(e,t.type,Or(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function jf(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ru(e,t,n){(t!=="number"||Es(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Oa=Array.isArray;function Mi(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Or(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function xu(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ae(91));return Je({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ff(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ae(92));if(Oa(n)){if(1<n.length)throw Error(ae(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Or(n)}}function i_(e,t){var n=Or(t.value),r=Or(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Vf(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function a_(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?a_(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Fo,o_=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Fo=Fo||document.createElement("div"),Fo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Fo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ka(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Na={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zv=["Webkit","ms","Moz","O"];Object.keys(Na).forEach(function(e){zv.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Na[t]=Na[e]})});function s_(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Na.hasOwnProperty(e)&&Na[e]?(""+t).trim():t+"px"}function l_(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=s_(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var $v=Je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tu(e,t){if(t){if($v[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ae(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ae(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ae(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ae(62))}}function Lu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pu=null;function Kc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ou=null,Di=null,Ii=null;function zf(e){if(e=ko(e)){if(typeof Ou!="function")throw Error(ae(280));var t=e.stateNode;t&&(t=fl(t),Ou(e.stateNode,e.type,t))}}function u_(e){Di?Ii?Ii.push(e):Ii=[e]:Di=e}function c_(){if(Di){var e=Di,t=Ii;if(Ii=Di=null,zf(e),t)for(e=0;e<t.length;e++)zf(t[e])}}function d_(e,t){return e(t)}function f_(){}var zl=!1;function h_(e,t,n){if(zl)return e(t,n);zl=!0;try{return d_(e,t,n)}finally{zl=!1,(Di!==null||Ii!==null)&&(f_(),c_())}}function Qa(e,t){var n=e.stateNode;if(n===null)return null;var r=fl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ae(231,t,typeof n));return n}var Mu=!1;if(Xn)try{var ba={};Object.defineProperty(ba,"passive",{get:function(){Mu=!0}}),window.addEventListener("test",ba,ba),window.removeEventListener("test",ba,ba)}catch{Mu=!1}function Gv(e,t,n,r,i,a,o,l,d){var h=Array.prototype.slice.call(arguments,3);try{t.apply(n,h)}catch(_){this.onError(_)}}var Ba=!1,bs=null,As=!1,Du=null,Hv={onError:function(e){Ba=!0,bs=e}};function Wv(e,t,n,r,i,a,o,l,d){Ba=!1,bs=null,Gv.apply(Hv,arguments)}function qv(e,t,n,r,i,a,o,l,d){if(Wv.apply(this,arguments),Ba){if(Ba){var h=bs;Ba=!1,bs=null}else throw Error(ae(198));As||(As=!0,Du=h)}}function pi(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function p_(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function $f(e){if(pi(e)!==e)throw Error(ae(188))}function Kv(e){var t=e.alternate;if(!t){if(t=pi(e),t===null)throw Error(ae(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return $f(i),e;if(a===r)return $f(i),t;a=a.sibling}throw Error(ae(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(ae(189))}}if(n.alternate!==r)throw Error(ae(190))}if(n.tag!==3)throw Error(ae(188));return n.stateNode.current===n?e:t}function __(e){return e=Kv(e),e!==null?m_(e):null}function m_(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=m_(e);if(t!==null)return t;e=e.sibling}return null}var g_=Zt.unstable_scheduleCallback,Gf=Zt.unstable_cancelCallback,Qv=Zt.unstable_shouldYield,Yv=Zt.unstable_requestPaint,nt=Zt.unstable_now,Xv=Zt.unstable_getCurrentPriorityLevel,Qc=Zt.unstable_ImmediatePriority,y_=Zt.unstable_UserBlockingPriority,ks=Zt.unstable_NormalPriority,Zv=Zt.unstable_LowPriority,v_=Zt.unstable_IdlePriority,ll=null,In=null;function Jv(e){if(In&&typeof In.onCommitFiberRoot=="function")try{In.onCommitFiberRoot(ll,e,void 0,(e.current.flags&128)===128)}catch{}}var En=Math.clz32?Math.clz32:n0,e0=Math.log,t0=Math.LN2;function n0(e){return e>>>=0,e===0?32:31-(e0(e)/t0|0)|0}var Vo=64,zo=4194304;function Ma(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Rs(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Ma(l):(a&=o,a!==0&&(r=Ma(a)))}else o=n&~i,o!==0?r=Ma(o):a!==0&&(r=Ma(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-En(t),i=1<<n,r|=e[n],t&=~i;return r}function r0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function i0(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-En(a),l=1<<o,d=i[o];d===-1?(!(l&n)||l&r)&&(i[o]=r0(l,t)):d<=t&&(e.expiredLanes|=l),a&=~l}}function Iu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function S_(){var e=Vo;return Vo<<=1,!(Vo&4194240)&&(Vo=64),e}function $l(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function bo(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-En(t),e[t]=n}function a0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-En(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}function Yc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-En(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var $e=0;function w_(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var E_,Xc,b_,A_,k_,Nu=!1,$o=[],br=null,Ar=null,kr=null,Ya=new Map,Xa=new Map,dr=[],o0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hf(e,t){switch(e){case"focusin":case"focusout":br=null;break;case"dragenter":case"dragleave":Ar=null;break;case"mouseover":case"mouseout":kr=null;break;case"pointerover":case"pointerout":Ya.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xa.delete(t.pointerId)}}function Aa(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=ko(t),t!==null&&Xc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function s0(e,t,n,r,i){switch(t){case"focusin":return br=Aa(br,e,t,n,r,i),!0;case"dragenter":return Ar=Aa(Ar,e,t,n,r,i),!0;case"mouseover":return kr=Aa(kr,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Ya.set(a,Aa(Ya.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Xa.set(a,Aa(Xa.get(a)||null,e,t,n,r,i)),!0}return!1}function R_(e){var t=Vr(e.target);if(t!==null){var n=pi(t);if(n!==null){if(t=n.tag,t===13){if(t=p_(n),t!==null){e.blockedOn=t,k_(e.priority,function(){b_(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ls(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Bu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Pu=r,n.target.dispatchEvent(r),Pu=null}else return t=ko(n),t!==null&&Xc(t),e.blockedOn=n,!1;t.shift()}return!0}function Wf(e,t,n){ls(e)&&n.delete(t)}function l0(){Nu=!1,br!==null&&ls(br)&&(br=null),Ar!==null&&ls(Ar)&&(Ar=null),kr!==null&&ls(kr)&&(kr=null),Ya.forEach(Wf),Xa.forEach(Wf)}function ka(e,t){e.blockedOn===t&&(e.blockedOn=null,Nu||(Nu=!0,Zt.unstable_scheduleCallback(Zt.unstable_NormalPriority,l0)))}function Za(e){function t(i){return ka(i,e)}if(0<$o.length){ka($o[0],e);for(var n=1;n<$o.length;n++){var r=$o[n];r.blockedOn===e&&(r.blockedOn=null)}}for(br!==null&&ka(br,e),Ar!==null&&ka(Ar,e),kr!==null&&ka(kr,e),Ya.forEach(t),Xa.forEach(t),n=0;n<dr.length;n++)r=dr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<dr.length&&(n=dr[0],n.blockedOn===null);)R_(n),n.blockedOn===null&&dr.shift()}var Ni=rr.ReactCurrentBatchConfig,xs=!0;function u0(e,t,n,r){var i=$e,a=Ni.transition;Ni.transition=null;try{$e=1,Zc(e,t,n,r)}finally{$e=i,Ni.transition=a}}function c0(e,t,n,r){var i=$e,a=Ni.transition;Ni.transition=null;try{$e=4,Zc(e,t,n,r)}finally{$e=i,Ni.transition=a}}function Zc(e,t,n,r){if(xs){var i=Bu(e,t,n,r);if(i===null)Jl(e,t,r,Cs,n),Hf(e,r);else if(s0(i,e,t,n,r))r.stopPropagation();else if(Hf(e,r),t&4&&-1<o0.indexOf(e)){for(;i!==null;){var a=ko(i);if(a!==null&&E_(a),a=Bu(e,t,n,r),a===null&&Jl(e,t,r,Cs,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Jl(e,t,r,null,n)}}var Cs=null;function Bu(e,t,n,r){if(Cs=null,e=Kc(r),e=Vr(e),e!==null)if(t=pi(e),t===null)e=null;else if(n=t.tag,n===13){if(e=p_(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Cs=e,null}function x_(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xv()){case Qc:return 1;case y_:return 4;case ks:case Zv:return 16;case v_:return 536870912;default:return 16}default:return 16}}var wr=null,Jc=null,us=null;function C_(){if(us)return us;var e,t=Jc,n=t.length,r,i="value"in wr?wr.value:wr.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[a-r];r++);return us=i.slice(e,1<r?1-r:void 0)}function cs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Go(){return!0}function qf(){return!1}function tn(e){function t(n,r,i,a,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Go:qf,this.isPropagationStopped=qf,this}return Je(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Go)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Go)},persist:function(){},isPersistent:Go}),t}var ca={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ed=tn(ca),Ao=Je({},ca,{view:0,detail:0}),d0=tn(Ao),Gl,Hl,Ra,ul=Je({},Ao,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:td,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ra&&(Ra&&e.type==="mousemove"?(Gl=e.screenX-Ra.screenX,Hl=e.screenY-Ra.screenY):Hl=Gl=0,Ra=e),Gl)},movementY:function(e){return"movementY"in e?e.movementY:Hl}}),Kf=tn(ul),f0=Je({},ul,{dataTransfer:0}),h0=tn(f0),p0=Je({},Ao,{relatedTarget:0}),Wl=tn(p0),_0=Je({},ca,{animationName:0,elapsedTime:0,pseudoElement:0}),m0=tn(_0),g0=Je({},ca,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),y0=tn(g0),v0=Je({},ca,{data:0}),Qf=tn(v0),S0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},w0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},E0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function b0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=E0[e])?!!t[e]:!1}function td(){return b0}var A0=Je({},Ao,{key:function(e){if(e.key){var t=S0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=cs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?w0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:td,charCode:function(e){return e.type==="keypress"?cs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?cs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),k0=tn(A0),R0=Je({},ul,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yf=tn(R0),x0=Je({},Ao,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:td}),C0=tn(x0),T0=Je({},ca,{propertyName:0,elapsedTime:0,pseudoElement:0}),L0=tn(T0),P0=Je({},ul,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),O0=tn(P0),M0=[9,13,27,32],nd=Xn&&"CompositionEvent"in window,Ua=null;Xn&&"documentMode"in document&&(Ua=document.documentMode);var D0=Xn&&"TextEvent"in window&&!Ua,T_=Xn&&(!nd||Ua&&8<Ua&&11>=Ua),Xf=" ",Zf=!1;function L_(e,t){switch(e){case"keyup":return M0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function P_(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ei=!1;function I0(e,t){switch(e){case"compositionend":return P_(t);case"keypress":return t.which!==32?null:(Zf=!0,Xf);case"textInput":return e=t.data,e===Xf&&Zf?null:e;default:return null}}function N0(e,t){if(Ei)return e==="compositionend"||!nd&&L_(e,t)?(e=C_(),us=Jc=wr=null,Ei=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return T_&&t.locale!=="ko"?null:t.data;default:return null}}var B0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!B0[e.type]:t==="textarea"}function O_(e,t,n,r){u_(r),t=Ts(t,"onChange"),0<t.length&&(n=new ed("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ja=null,Ja=null;function U0(e){$_(e,0)}function cl(e){var t=ki(e);if(n_(t))return e}function j0(e,t){if(e==="change")return t}var M_=!1;if(Xn){var ql;if(Xn){var Kl="oninput"in document;if(!Kl){var eh=document.createElement("div");eh.setAttribute("oninput","return;"),Kl=typeof eh.oninput=="function"}ql=Kl}else ql=!1;M_=ql&&(!document.documentMode||9<document.documentMode)}function th(){ja&&(ja.detachEvent("onpropertychange",D_),Ja=ja=null)}function D_(e){if(e.propertyName==="value"&&cl(Ja)){var t=[];O_(t,Ja,e,Kc(e)),h_(U0,t)}}function F0(e,t,n){e==="focusin"?(th(),ja=t,Ja=n,ja.attachEvent("onpropertychange",D_)):e==="focusout"&&th()}function V0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return cl(Ja)}function z0(e,t){if(e==="click")return cl(t)}function $0(e,t){if(e==="input"||e==="change")return cl(t)}function G0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var An=typeof Object.is=="function"?Object.is:G0;function eo(e,t){if(An(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!vu.call(t,i)||!An(e[i],t[i]))return!1}return!0}function nh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rh(e,t){var n=nh(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=nh(n)}}function I_(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?I_(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function N_(){for(var e=window,t=Es();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Es(e.document)}return t}function rd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function H0(e){var t=N_(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&I_(n.ownerDocument.documentElement,n)){if(r!==null&&rd(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=rh(n,a);var o=rh(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var W0=Xn&&"documentMode"in document&&11>=document.documentMode,bi=null,Uu=null,Fa=null,ju=!1;function ih(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ju||bi==null||bi!==Es(r)||(r=bi,"selectionStart"in r&&rd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Fa&&eo(Fa,r)||(Fa=r,r=Ts(Uu,"onSelect"),0<r.length&&(t=new ed("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=bi)))}function Ho(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ai={animationend:Ho("Animation","AnimationEnd"),animationiteration:Ho("Animation","AnimationIteration"),animationstart:Ho("Animation","AnimationStart"),transitionend:Ho("Transition","TransitionEnd")},Ql={},B_={};Xn&&(B_=document.createElement("div").style,"AnimationEvent"in window||(delete Ai.animationend.animation,delete Ai.animationiteration.animation,delete Ai.animationstart.animation),"TransitionEvent"in window||delete Ai.transitionend.transition);function dl(e){if(Ql[e])return Ql[e];if(!Ai[e])return e;var t=Ai[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in B_)return Ql[e]=t[n];return e}var U_=dl("animationend"),j_=dl("animationiteration"),F_=dl("animationstart"),V_=dl("transitionend"),z_=new Map,ah="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){z_.set(e,t),hi(t,[e])}for(var Yl=0;Yl<ah.length;Yl++){var Xl=ah[Yl],q0=Xl.toLowerCase(),K0=Xl[0].toUpperCase()+Xl.slice(1);Dr(q0,"on"+K0)}Dr(U_,"onAnimationEnd");Dr(j_,"onAnimationIteration");Dr(F_,"onAnimationStart");Dr("dblclick","onDoubleClick");Dr("focusin","onFocus");Dr("focusout","onBlur");Dr(V_,"onTransitionEnd");ea("onMouseEnter",["mouseout","mouseover"]);ea("onMouseLeave",["mouseout","mouseover"]);ea("onPointerEnter",["pointerout","pointerover"]);ea("onPointerLeave",["pointerout","pointerover"]);hi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hi("onBeforeInput",["compositionend","keypress","textInput","paste"]);hi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Da="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Q0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Da));function oh(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,qv(r,t,void 0,e),e.currentTarget=null}function $_(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],d=l.instance,h=l.currentTarget;if(l=l.listener,d!==a&&i.isPropagationStopped())break e;oh(i,l,h),a=d}else for(o=0;o<r.length;o++){if(l=r[o],d=l.instance,h=l.currentTarget,l=l.listener,d!==a&&i.isPropagationStopped())break e;oh(i,l,h),a=d}}}if(As)throw e=Du,As=!1,Du=null,e}function We(e,t){var n=t[Gu];n===void 0&&(n=t[Gu]=new Set);var r=e+"__bubble";n.has(r)||(G_(t,e,2,!1),n.add(r))}function Zl(e,t,n){var r=0;t&&(r|=4),G_(n,e,r,t)}var Wo="_reactListening"+Math.random().toString(36).slice(2);function to(e){if(!e[Wo]){e[Wo]=!0,Xp.forEach(function(n){n!=="selectionchange"&&(Q0.has(n)||Zl(n,!1,e),Zl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Wo]||(t[Wo]=!0,Zl("selectionchange",!1,t))}}function G_(e,t,n,r){switch(x_(t)){case 1:var i=u0;break;case 4:i=c0;break;default:i=Zc}n=i.bind(null,t,n,e),i=void 0,!Mu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Jl(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var d=o.tag;if((d===3||d===4)&&(d=o.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Vr(l),o===null)return;if(d=o.tag,d===5||d===6){r=a=o;continue e}l=l.parentNode}}r=r.return}h_(function(){var h=a,_=Kc(n),y=[];e:{var g=z_.get(e);if(g!==void 0){var m=ed,C=e;switch(e){case"keypress":if(cs(n)===0)break e;case"keydown":case"keyup":m=k0;break;case"focusin":C="focus",m=Wl;break;case"focusout":C="blur",m=Wl;break;case"beforeblur":case"afterblur":m=Wl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Kf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=h0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=C0;break;case U_:case j_:case F_:m=m0;break;case V_:m=L0;break;case"scroll":m=d0;break;case"wheel":m=O0;break;case"copy":case"cut":case"paste":m=y0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Yf}var w=(t&4)!==0,O=!w&&e==="scroll",b=w?g!==null?g+"Capture":null:g;w=[];for(var E=h,x;E!==null;){x=E;var T=x.stateNode;if(x.tag===5&&T!==null&&(x=T,b!==null&&(T=Qa(E,b),T!=null&&w.push(no(E,T,x)))),O)break;E=E.return}0<w.length&&(g=new m(g,C,null,n,_),y.push({event:g,listeners:w}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",g&&n!==Pu&&(C=n.relatedTarget||n.fromElement)&&(Vr(C)||C[Zn]))break e;if((m||g)&&(g=_.window===_?_:(g=_.ownerDocument)?g.defaultView||g.parentWindow:window,m?(C=n.relatedTarget||n.toElement,m=h,C=C?Vr(C):null,C!==null&&(O=pi(C),C!==O||C.tag!==5&&C.tag!==6)&&(C=null)):(m=null,C=h),m!==C)){if(w=Kf,T="onMouseLeave",b="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(w=Yf,T="onPointerLeave",b="onPointerEnter",E="pointer"),O=m==null?g:ki(m),x=C==null?g:ki(C),g=new w(T,E+"leave",m,n,_),g.target=O,g.relatedTarget=x,T=null,Vr(_)===h&&(w=new w(b,E+"enter",C,n,_),w.target=x,w.relatedTarget=O,T=w),O=T,m&&C)t:{for(w=m,b=C,E=0,x=w;x;x=vi(x))E++;for(x=0,T=b;T;T=vi(T))x++;for(;0<E-x;)w=vi(w),E--;for(;0<x-E;)b=vi(b),x--;for(;E--;){if(w===b||b!==null&&w===b.alternate)break t;w=vi(w),b=vi(b)}w=null}else w=null;m!==null&&sh(y,g,m,w,!1),C!==null&&O!==null&&sh(y,O,C,w,!0)}}e:{if(g=h?ki(h):window,m=g.nodeName&&g.nodeName.toLowerCase(),m==="select"||m==="input"&&g.type==="file")var j=j0;else if(Jf(g))if(M_)j=$0;else{j=V0;var W=F0}else(m=g.nodeName)&&m.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(j=z0);if(j&&(j=j(e,h))){O_(y,j,n,_);break e}W&&W(e,g,h),e==="focusout"&&(W=g._wrapperState)&&W.controlled&&g.type==="number"&&Ru(g,"number",g.value)}switch(W=h?ki(h):window,e){case"focusin":(Jf(W)||W.contentEditable==="true")&&(bi=W,Uu=h,Fa=null);break;case"focusout":Fa=Uu=bi=null;break;case"mousedown":ju=!0;break;case"contextmenu":case"mouseup":case"dragend":ju=!1,ih(y,n,_);break;case"selectionchange":if(W0)break;case"keydown":case"keyup":ih(y,n,_)}var B;if(nd)e:{switch(e){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Ei?L_(e,n)&&(R="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(T_&&n.locale!=="ko"&&(Ei||R!=="onCompositionStart"?R==="onCompositionEnd"&&Ei&&(B=C_()):(wr=_,Jc="value"in wr?wr.value:wr.textContent,Ei=!0)),W=Ts(h,R),0<W.length&&(R=new Qf(R,e,null,n,_),y.push({event:R,listeners:W}),B?R.data=B:(B=P_(n),B!==null&&(R.data=B)))),(B=D0?I0(e,n):N0(e,n))&&(h=Ts(h,"onBeforeInput"),0<h.length&&(_=new Qf("onBeforeInput","beforeinput",null,n,_),y.push({event:_,listeners:h}),_.data=B))}$_(y,t)})}function no(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ts(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Qa(e,n),a!=null&&r.unshift(no(e,a,i)),a=Qa(e,t),a!=null&&r.push(no(e,a,i))),e=e.return}return r}function vi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function sh(e,t,n,r,i){for(var a=t._reactName,o=[];n!==null&&n!==r;){var l=n,d=l.alternate,h=l.stateNode;if(d!==null&&d===r)break;l.tag===5&&h!==null&&(l=h,i?(d=Qa(n,a),d!=null&&o.unshift(no(n,d,l))):i||(d=Qa(n,a),d!=null&&o.push(no(n,d,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Y0=/\r\n?/g,X0=/\u0000|\uFFFD/g;function lh(e){return(typeof e=="string"?e:""+e).replace(Y0,`
`).replace(X0,"")}function qo(e,t,n){if(t=lh(t),lh(e)!==t&&n)throw Error(ae(425))}function Ls(){}var Fu=null,Vu=null;function zu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var $u=typeof setTimeout=="function"?setTimeout:void 0,Z0=typeof clearTimeout=="function"?clearTimeout:void 0,uh=typeof Promise=="function"?Promise:void 0,J0=typeof queueMicrotask=="function"?queueMicrotask:typeof uh<"u"?function(e){return uh.resolve(null).then(e).catch(e1)}:$u;function e1(e){setTimeout(function(){throw e})}function eu(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Za(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Za(t)}function Rr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ch(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),Dn="__reactFiber$"+da,ro="__reactProps$"+da,Zn="__reactContainer$"+da,Gu="__reactEvents$"+da,t1="__reactListeners$"+da,n1="__reactHandles$"+da;function Vr(e){var t=e[Dn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Zn]||n[Dn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ch(e);e!==null;){if(n=e[Dn])return n;e=ch(e)}return t}e=n,n=e.parentNode}return null}function ko(e){return e=e[Dn]||e[Zn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ki(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ae(33))}function fl(e){return e[ro]||null}var Hu=[],Ri=-1;function Ir(e){return{current:e}}function qe(e){0>Ri||(e.current=Hu[Ri],Hu[Ri]=null,Ri--)}function He(e,t){Ri++,Hu[Ri]=e.current,e.current=t}var Mr={},Pt=Ir(Mr),Ht=Ir(!1),ai=Mr;function ta(e,t){var n=e.type.contextTypes;if(!n)return Mr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Wt(e){return e=e.childContextTypes,e!=null}function Ps(){qe(Ht),qe(Pt)}function dh(e,t,n){if(Pt.current!==Mr)throw Error(ae(168));He(Pt,t),He(Ht,n)}function H_(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(ae(108,Fv(e)||"Unknown",i));return Je({},n,r)}function Os(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Mr,ai=Pt.current,He(Pt,e),He(Ht,Ht.current),!0}function fh(e,t,n){var r=e.stateNode;if(!r)throw Error(ae(169));n?(e=H_(e,t,ai),r.__reactInternalMemoizedMergedChildContext=e,qe(Ht),qe(Pt),He(Pt,e)):qe(Ht),He(Ht,n)}var Gn=null,hl=!1,tu=!1;function W_(e){Gn===null?Gn=[e]:Gn.push(e)}function r1(e){hl=!0,W_(e)}function Nr(){if(!tu&&Gn!==null){tu=!0;var e=0,t=$e;try{var n=Gn;for($e=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Gn=null,hl=!1}catch(i){throw Gn!==null&&(Gn=Gn.slice(e+1)),g_(Qc,Nr),i}finally{$e=t,tu=!1}}return null}var xi=[],Ci=0,Ms=null,Ds=0,on=[],sn=0,oi=null,qn=1,Kn="";function jr(e,t){xi[Ci++]=Ds,xi[Ci++]=Ms,Ms=e,Ds=t}function q_(e,t,n){on[sn++]=qn,on[sn++]=Kn,on[sn++]=oi,oi=e;var r=qn;e=Kn;var i=32-En(r)-1;r&=~(1<<i),n+=1;var a=32-En(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,qn=1<<32-En(t)+i|n<<i|r,Kn=a+e}else qn=1<<a|n<<i|r,Kn=e}function id(e){e.return!==null&&(jr(e,1),q_(e,1,0))}function ad(e){for(;e===Ms;)Ms=xi[--Ci],xi[Ci]=null,Ds=xi[--Ci],xi[Ci]=null;for(;e===oi;)oi=on[--sn],on[sn]=null,Kn=on[--sn],on[sn]=null,qn=on[--sn],on[sn]=null}var Xt=null,Yt=null,Ke=!1,wn=null;function K_(e,t){var n=ln(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function hh(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Xt=e,Yt=Rr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Xt=e,Yt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=oi!==null?{id:qn,overflow:Kn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ln(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Xt=e,Yt=null,!0):!1;default:return!1}}function Wu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function qu(e){if(Ke){var t=Yt;if(t){var n=t;if(!hh(e,t)){if(Wu(e))throw Error(ae(418));t=Rr(n.nextSibling);var r=Xt;t&&hh(e,t)?K_(r,n):(e.flags=e.flags&-4097|2,Ke=!1,Xt=e)}}else{if(Wu(e))throw Error(ae(418));e.flags=e.flags&-4097|2,Ke=!1,Xt=e}}}function ph(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Xt=e}function Ko(e){if(e!==Xt)return!1;if(!Ke)return ph(e),Ke=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!zu(e.type,e.memoizedProps)),t&&(t=Yt)){if(Wu(e))throw Q_(),Error(ae(418));for(;t;)K_(e,t),t=Rr(t.nextSibling)}if(ph(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ae(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Yt=Rr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Yt=null}}else Yt=Xt?Rr(e.stateNode.nextSibling):null;return!0}function Q_(){for(var e=Yt;e;)e=Rr(e.nextSibling)}function na(){Yt=Xt=null,Ke=!1}function od(e){wn===null?wn=[e]:wn.push(e)}var i1=rr.ReactCurrentBatchConfig;function xa(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ae(309));var r=n.stateNode}if(!r)throw Error(ae(147,e));var i=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var l=i.refs;o===null?delete l[a]:l[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(ae(284));if(!n._owner)throw Error(ae(290,e))}return e}function Qo(e,t){throw e=Object.prototype.toString.call(t),Error(ae(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _h(e){var t=e._init;return t(e._payload)}function Y_(e){function t(b,E){if(e){var x=b.deletions;x===null?(b.deletions=[E],b.flags|=16):x.push(E)}}function n(b,E){if(!e)return null;for(;E!==null;)t(b,E),E=E.sibling;return null}function r(b,E){for(b=new Map;E!==null;)E.key!==null?b.set(E.key,E):b.set(E.index,E),E=E.sibling;return b}function i(b,E){return b=Lr(b,E),b.index=0,b.sibling=null,b}function a(b,E,x){return b.index=x,e?(x=b.alternate,x!==null?(x=x.index,x<E?(b.flags|=2,E):x):(b.flags|=2,E)):(b.flags|=1048576,E)}function o(b){return e&&b.alternate===null&&(b.flags|=2),b}function l(b,E,x,T){return E===null||E.tag!==6?(E=lu(x,b.mode,T),E.return=b,E):(E=i(E,x),E.return=b,E)}function d(b,E,x,T){var j=x.type;return j===wi?_(b,E,x.props.children,T,x.key):E!==null&&(E.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===ur&&_h(j)===E.type)?(T=i(E,x.props),T.ref=xa(b,E,x),T.return=b,T):(T=gs(x.type,x.key,x.props,null,b.mode,T),T.ref=xa(b,E,x),T.return=b,T)}function h(b,E,x,T){return E===null||E.tag!==4||E.stateNode.containerInfo!==x.containerInfo||E.stateNode.implementation!==x.implementation?(E=uu(x,b.mode,T),E.return=b,E):(E=i(E,x.children||[]),E.return=b,E)}function _(b,E,x,T,j){return E===null||E.tag!==7?(E=ri(x,b.mode,T,j),E.return=b,E):(E=i(E,x),E.return=b,E)}function y(b,E,x){if(typeof E=="string"&&E!==""||typeof E=="number")return E=lu(""+E,b.mode,x),E.return=b,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Uo:return x=gs(E.type,E.key,E.props,null,b.mode,x),x.ref=xa(b,null,E),x.return=b,x;case Si:return E=uu(E,b.mode,x),E.return=b,E;case ur:var T=E._init;return y(b,T(E._payload),x)}if(Oa(E)||Ea(E))return E=ri(E,b.mode,x,null),E.return=b,E;Qo(b,E)}return null}function g(b,E,x,T){var j=E!==null?E.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return j!==null?null:l(b,E,""+x,T);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Uo:return x.key===j?d(b,E,x,T):null;case Si:return x.key===j?h(b,E,x,T):null;case ur:return j=x._init,g(b,E,j(x._payload),T)}if(Oa(x)||Ea(x))return j!==null?null:_(b,E,x,T,null);Qo(b,x)}return null}function m(b,E,x,T,j){if(typeof T=="string"&&T!==""||typeof T=="number")return b=b.get(x)||null,l(E,b,""+T,j);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Uo:return b=b.get(T.key===null?x:T.key)||null,d(E,b,T,j);case Si:return b=b.get(T.key===null?x:T.key)||null,h(E,b,T,j);case ur:var W=T._init;return m(b,E,x,W(T._payload),j)}if(Oa(T)||Ea(T))return b=b.get(x)||null,_(E,b,T,j,null);Qo(E,T)}return null}function C(b,E,x,T){for(var j=null,W=null,B=E,R=E=0,L=null;B!==null&&R<x.length;R++){B.index>R?(L=B,B=null):L=B.sibling;var k=g(b,B,x[R],T);if(k===null){B===null&&(B=L);break}e&&B&&k.alternate===null&&t(b,B),E=a(k,E,R),W===null?j=k:W.sibling=k,W=k,B=L}if(R===x.length)return n(b,B),Ke&&jr(b,R),j;if(B===null){for(;R<x.length;R++)B=y(b,x[R],T),B!==null&&(E=a(B,E,R),W===null?j=B:W.sibling=B,W=B);return Ke&&jr(b,R),j}for(B=r(b,B);R<x.length;R++)L=m(B,b,R,x[R],T),L!==null&&(e&&L.alternate!==null&&B.delete(L.key===null?R:L.key),E=a(L,E,R),W===null?j=L:W.sibling=L,W=L);return e&&B.forEach(function(M){return t(b,M)}),Ke&&jr(b,R),j}function w(b,E,x,T){var j=Ea(x);if(typeof j!="function")throw Error(ae(150));if(x=j.call(x),x==null)throw Error(ae(151));for(var W=j=null,B=E,R=E=0,L=null,k=x.next();B!==null&&!k.done;R++,k=x.next()){B.index>R?(L=B,B=null):L=B.sibling;var M=g(b,B,k.value,T);if(M===null){B===null&&(B=L);break}e&&B&&M.alternate===null&&t(b,B),E=a(M,E,R),W===null?j=M:W.sibling=M,W=M,B=L}if(k.done)return n(b,B),Ke&&jr(b,R),j;if(B===null){for(;!k.done;R++,k=x.next())k=y(b,k.value,T),k!==null&&(E=a(k,E,R),W===null?j=k:W.sibling=k,W=k);return Ke&&jr(b,R),j}for(B=r(b,B);!k.done;R++,k=x.next())k=m(B,b,R,k.value,T),k!==null&&(e&&k.alternate!==null&&B.delete(k.key===null?R:k.key),E=a(k,E,R),W===null?j=k:W.sibling=k,W=k);return e&&B.forEach(function(Y){return t(b,Y)}),Ke&&jr(b,R),j}function O(b,E,x,T){if(typeof x=="object"&&x!==null&&x.type===wi&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Uo:e:{for(var j=x.key,W=E;W!==null;){if(W.key===j){if(j=x.type,j===wi){if(W.tag===7){n(b,W.sibling),E=i(W,x.props.children),E.return=b,b=E;break e}}else if(W.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===ur&&_h(j)===W.type){n(b,W.sibling),E=i(W,x.props),E.ref=xa(b,W,x),E.return=b,b=E;break e}n(b,W);break}else t(b,W);W=W.sibling}x.type===wi?(E=ri(x.props.children,b.mode,T,x.key),E.return=b,b=E):(T=gs(x.type,x.key,x.props,null,b.mode,T),T.ref=xa(b,E,x),T.return=b,b=T)}return o(b);case Si:e:{for(W=x.key;E!==null;){if(E.key===W)if(E.tag===4&&E.stateNode.containerInfo===x.containerInfo&&E.stateNode.implementation===x.implementation){n(b,E.sibling),E=i(E,x.children||[]),E.return=b,b=E;break e}else{n(b,E);break}else t(b,E);E=E.sibling}E=uu(x,b.mode,T),E.return=b,b=E}return o(b);case ur:return W=x._init,O(b,E,W(x._payload),T)}if(Oa(x))return C(b,E,x,T);if(Ea(x))return w(b,E,x,T);Qo(b,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,E!==null&&E.tag===6?(n(b,E.sibling),E=i(E,x),E.return=b,b=E):(n(b,E),E=lu(x,b.mode,T),E.return=b,b=E),o(b)):n(b,E)}return O}var ra=Y_(!0),X_=Y_(!1),Is=Ir(null),Ns=null,Ti=null,sd=null;function ld(){sd=Ti=Ns=null}function ud(e){var t=Is.current;qe(Is),e._currentValue=t}function Ku(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Bi(e,t){Ns=e,sd=Ti=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Gt=!0),e.firstContext=null)}function dn(e){var t=e._currentValue;if(sd!==e)if(e={context:e,memoizedValue:t,next:null},Ti===null){if(Ns===null)throw Error(ae(308));Ti=e,Ns.dependencies={lanes:0,firstContext:e}}else Ti=Ti.next=e;return t}var zr=null;function cd(e){zr===null?zr=[e]:zr.push(e)}function Z_(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,cd(t)):(n.next=i.next,i.next=n),t.interleaved=n,Jn(e,r)}function Jn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var cr=!1;function dd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function J_(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Qn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function xr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ue&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Jn(e,n)}return i=r.interleaved,i===null?(t.next=t,cd(r)):(t.next=i.next,i.next=t),r.interleaved=t,Jn(e,n)}function ds(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Yc(e,n)}}function mh(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bs(e,t,n,r){var i=e.updateQueue;cr=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var d=l,h=d.next;d.next=null,o===null?a=h:o.next=h,o=d;var _=e.alternate;_!==null&&(_=_.updateQueue,l=_.lastBaseUpdate,l!==o&&(l===null?_.firstBaseUpdate=h:l.next=h,_.lastBaseUpdate=d))}if(a!==null){var y=i.baseState;o=0,_=h=d=null,l=a;do{var g=l.lane,m=l.eventTime;if((r&g)===g){_!==null&&(_=_.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var C=e,w=l;switch(g=t,m=n,w.tag){case 1:if(C=w.payload,typeof C=="function"){y=C.call(m,y,g);break e}y=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=w.payload,g=typeof C=="function"?C.call(m,y,g):C,g==null)break e;y=Je({},y,g);break e;case 2:cr=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,g=i.effects,g===null?i.effects=[l]:g.push(l))}else m={eventTime:m,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},_===null?(h=_=m,d=y):_=_.next=m,o|=g;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;g=l,l=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(_===null&&(d=y),i.baseState=d,i.firstBaseUpdate=h,i.lastBaseUpdate=_,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);li|=o,e.lanes=o,e.memoizedState=y}}function gh(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ae(191,i));i.call(r)}}}var Ro={},Nn=Ir(Ro),io=Ir(Ro),ao=Ir(Ro);function $r(e){if(e===Ro)throw Error(ae(174));return e}function fd(e,t){switch(He(ao,t),He(io,e),He(Nn,Ro),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Cu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Cu(t,e)}qe(Nn),He(Nn,t)}function ia(){qe(Nn),qe(io),qe(ao)}function em(e){$r(ao.current);var t=$r(Nn.current),n=Cu(t,e.type);t!==n&&(He(io,e),He(Nn,n))}function hd(e){io.current===e&&(qe(Nn),qe(io))}var Xe=Ir(0);function Us(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var nu=[];function pd(){for(var e=0;e<nu.length;e++)nu[e]._workInProgressVersionPrimary=null;nu.length=0}var fs=rr.ReactCurrentDispatcher,ru=rr.ReactCurrentBatchConfig,si=0,Ze=null,ct=null,_t=null,js=!1,Va=!1,oo=0,a1=0;function kt(){throw Error(ae(321))}function _d(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!An(e[n],t[n]))return!1;return!0}function md(e,t,n,r,i,a){if(si=a,Ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fs.current=e===null||e.memoizedState===null?u1:c1,e=n(r,i),Va){a=0;do{if(Va=!1,oo=0,25<=a)throw Error(ae(301));a+=1,_t=ct=null,t.updateQueue=null,fs.current=d1,e=n(r,i)}while(Va)}if(fs.current=Fs,t=ct!==null&&ct.next!==null,si=0,_t=ct=Ze=null,js=!1,t)throw Error(ae(300));return e}function gd(){var e=oo!==0;return oo=0,e}function Tn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?Ze.memoizedState=_t=e:_t=_t.next=e,_t}function fn(){if(ct===null){var e=Ze.alternate;e=e!==null?e.memoizedState:null}else e=ct.next;var t=_t===null?Ze.memoizedState:_t.next;if(t!==null)_t=t,ct=e;else{if(e===null)throw Error(ae(310));ct=e,e={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},_t===null?Ze.memoizedState=_t=e:_t=_t.next=e}return _t}function so(e,t){return typeof t=="function"?t(e):t}function iu(e){var t=fn(),n=t.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=e;var r=ct,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var l=o=null,d=null,h=a;do{var _=h.lane;if((si&_)===_)d!==null&&(d=d.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:e(r,h.action);else{var y={lane:_,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};d===null?(l=d=y,o=r):d=d.next=y,Ze.lanes|=_,li|=_}h=h.next}while(h!==null&&h!==a);d===null?o=r:d.next=l,An(r,t.memoizedState)||(Gt=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=d,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do a=i.lane,Ze.lanes|=a,li|=a,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function au(e){var t=fn(),n=t.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=e(a,o.action),o=o.next;while(o!==i);An(a,t.memoizedState)||(Gt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function tm(){}function nm(e,t){var n=Ze,r=fn(),i=t(),a=!An(r.memoizedState,i);if(a&&(r.memoizedState=i,Gt=!0),r=r.queue,yd(am.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||_t!==null&&_t.memoizedState.tag&1){if(n.flags|=2048,lo(9,im.bind(null,n,r,i,t),void 0,null),mt===null)throw Error(ae(349));si&30||rm(n,t,i)}return i}function rm(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ze.updateQueue,t===null?(t={lastEffect:null,stores:null},Ze.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function im(e,t,n,r){t.value=n,t.getSnapshot=r,om(t)&&sm(e)}function am(e,t,n){return n(function(){om(t)&&sm(e)})}function om(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!An(e,n)}catch{return!0}}function sm(e){var t=Jn(e,1);t!==null&&bn(t,e,1,-1)}function yh(e){var t=Tn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:e},t.queue=e,e=e.dispatch=l1.bind(null,Ze,e),[t.memoizedState,e]}function lo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ze.updateQueue,t===null?(t={lastEffect:null,stores:null},Ze.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function lm(){return fn().memoizedState}function hs(e,t,n,r){var i=Tn();Ze.flags|=e,i.memoizedState=lo(1|t,n,void 0,r===void 0?null:r)}function pl(e,t,n,r){var i=fn();r=r===void 0?null:r;var a=void 0;if(ct!==null){var o=ct.memoizedState;if(a=o.destroy,r!==null&&_d(r,o.deps)){i.memoizedState=lo(t,n,a,r);return}}Ze.flags|=e,i.memoizedState=lo(1|t,n,a,r)}function vh(e,t){return hs(8390656,8,e,t)}function yd(e,t){return pl(2048,8,e,t)}function um(e,t){return pl(4,2,e,t)}function cm(e,t){return pl(4,4,e,t)}function dm(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function fm(e,t,n){return n=n!=null?n.concat([e]):null,pl(4,4,dm.bind(null,t,e),n)}function vd(){}function hm(e,t){var n=fn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&_d(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function pm(e,t){var n=fn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&_d(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function _m(e,t,n){return si&21?(An(n,t)||(n=S_(),Ze.lanes|=n,li|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Gt=!0),e.memoizedState=n)}function o1(e,t){var n=$e;$e=n!==0&&4>n?n:4,e(!0);var r=ru.transition;ru.transition={};try{e(!1),t()}finally{$e=n,ru.transition=r}}function mm(){return fn().memoizedState}function s1(e,t,n){var r=Tr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},gm(e))ym(t,n);else if(n=Z_(e,t,n,r),n!==null){var i=Bt();bn(n,e,r,i),vm(n,t,r)}}function l1(e,t,n){var r=Tr(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(gm(e))ym(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,l=a(o,n);if(i.hasEagerState=!0,i.eagerState=l,An(l,o)){var d=t.interleaved;d===null?(i.next=i,cd(t)):(i.next=d.next,d.next=i),t.interleaved=i;return}}catch{}finally{}n=Z_(e,t,i,r),n!==null&&(i=Bt(),bn(n,e,r,i),vm(n,t,r))}}function gm(e){var t=e.alternate;return e===Ze||t!==null&&t===Ze}function ym(e,t){Va=js=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function vm(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Yc(e,n)}}var Fs={readContext:dn,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useInsertionEffect:kt,useLayoutEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useMutableSource:kt,useSyncExternalStore:kt,useId:kt,unstable_isNewReconciler:!1},u1={readContext:dn,useCallback:function(e,t){return Tn().memoizedState=[e,t===void 0?null:t],e},useContext:dn,useEffect:vh,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,hs(4194308,4,dm.bind(null,t,e),n)},useLayoutEffect:function(e,t){return hs(4194308,4,e,t)},useInsertionEffect:function(e,t){return hs(4,2,e,t)},useMemo:function(e,t){var n=Tn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Tn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=s1.bind(null,Ze,e),[r.memoizedState,e]},useRef:function(e){var t=Tn();return e={current:e},t.memoizedState=e},useState:yh,useDebugValue:vd,useDeferredValue:function(e){return Tn().memoizedState=e},useTransition:function(){var e=yh(!1),t=e[0];return e=o1.bind(null,e[1]),Tn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ze,i=Tn();if(Ke){if(n===void 0)throw Error(ae(407));n=n()}else{if(n=t(),mt===null)throw Error(ae(349));si&30||rm(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,vh(am.bind(null,r,a,e),[e]),r.flags|=2048,lo(9,im.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Tn(),t=mt.identifierPrefix;if(Ke){var n=Kn,r=qn;n=(r&~(1<<32-En(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=oo++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=a1++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},c1={readContext:dn,useCallback:hm,useContext:dn,useEffect:yd,useImperativeHandle:fm,useInsertionEffect:um,useLayoutEffect:cm,useMemo:pm,useReducer:iu,useRef:lm,useState:function(){return iu(so)},useDebugValue:vd,useDeferredValue:function(e){var t=fn();return _m(t,ct.memoizedState,e)},useTransition:function(){var e=iu(so)[0],t=fn().memoizedState;return[e,t]},useMutableSource:tm,useSyncExternalStore:nm,useId:mm,unstable_isNewReconciler:!1},d1={readContext:dn,useCallback:hm,useContext:dn,useEffect:yd,useImperativeHandle:fm,useInsertionEffect:um,useLayoutEffect:cm,useMemo:pm,useReducer:au,useRef:lm,useState:function(){return au(so)},useDebugValue:vd,useDeferredValue:function(e){var t=fn();return ct===null?t.memoizedState=e:_m(t,ct.memoizedState,e)},useTransition:function(){var e=au(so)[0],t=fn().memoizedState;return[e,t]},useMutableSource:tm,useSyncExternalStore:nm,useId:mm,unstable_isNewReconciler:!1};function gn(e,t){if(e&&e.defaultProps){t=Je({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Qu(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Je({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var _l={isMounted:function(e){return(e=e._reactInternals)?pi(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Bt(),i=Tr(e),a=Qn(r,i);a.payload=t,n!=null&&(a.callback=n),t=xr(e,a,i),t!==null&&(bn(t,e,i,r),ds(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Bt(),i=Tr(e),a=Qn(r,i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=xr(e,a,i),t!==null&&(bn(t,e,i,r),ds(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Bt(),r=Tr(e),i=Qn(n,r);i.tag=2,t!=null&&(i.callback=t),t=xr(e,i,r),t!==null&&(bn(t,e,r,n),ds(t,e,r))}};function Sh(e,t,n,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!eo(n,r)||!eo(i,a):!0}function Sm(e,t,n){var r=!1,i=Mr,a=t.contextType;return typeof a=="object"&&a!==null?a=dn(a):(i=Wt(t)?ai:Pt.current,r=t.contextTypes,a=(r=r!=null)?ta(e,i):Mr),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=_l,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function wh(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&_l.enqueueReplaceState(t,t.state,null)}function Yu(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},dd(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=dn(a):(a=Wt(t)?ai:Pt.current,i.context=ta(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Qu(e,t,a,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&_l.enqueueReplaceState(i,i.state,null),Bs(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function aa(e,t){try{var n="",r=t;do n+=jv(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function ou(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Xu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var f1=typeof WeakMap=="function"?WeakMap:Map;function wm(e,t,n){n=Qn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){zs||(zs=!0,sc=r),Xu(e,t)},n}function Em(e,t,n){n=Qn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Xu(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Xu(e,t),typeof r!="function"&&(Cr===null?Cr=new Set([this]):Cr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Eh(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new f1;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=R1.bind(null,e,t,n),t.then(e,e))}function bh(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ah(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Qn(-1,1),t.tag=2,xr(n,t,1))),n.lanes|=1),e)}var h1=rr.ReactCurrentOwner,Gt=!1;function Nt(e,t,n,r){t.child=e===null?X_(t,null,n,r):ra(t,e.child,n,r)}function kh(e,t,n,r,i){n=n.render;var a=t.ref;return Bi(t,i),r=md(e,t,n,r,a,i),n=gd(),e!==null&&!Gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,er(e,t,i)):(Ke&&n&&id(t),t.flags|=1,Nt(e,t,r,i),t.child)}function Rh(e,t,n,r,i){if(e===null){var a=n.type;return typeof a=="function"&&!xd(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,bm(e,t,a,r,i)):(e=gs(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:eo,n(o,r)&&e.ref===t.ref)return er(e,t,i)}return t.flags|=1,e=Lr(a,r),e.ref=t.ref,e.return=t,t.child=e}function bm(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(eo(a,r)&&e.ref===t.ref)if(Gt=!1,t.pendingProps=r=a,(e.lanes&i)!==0)e.flags&131072&&(Gt=!0);else return t.lanes=e.lanes,er(e,t,i)}return Zu(e,t,n,r,i)}function Am(e,t,n){var r=t.pendingProps,i=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(Pi,Qt),Qt|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,He(Pi,Qt),Qt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,He(Pi,Qt),Qt|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,He(Pi,Qt),Qt|=r;return Nt(e,t,i,n),t.child}function km(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Zu(e,t,n,r,i){var a=Wt(n)?ai:Pt.current;return a=ta(t,a),Bi(t,i),n=md(e,t,n,r,a,i),r=gd(),e!==null&&!Gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,er(e,t,i)):(Ke&&r&&id(t),t.flags|=1,Nt(e,t,n,i),t.child)}function xh(e,t,n,r,i){if(Wt(n)){var a=!0;Os(t)}else a=!1;if(Bi(t,i),t.stateNode===null)ps(e,t),Sm(t,n,r),Yu(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var d=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=dn(h):(h=Wt(n)?ai:Pt.current,h=ta(t,h));var _=n.getDerivedStateFromProps,y=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function";y||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||d!==h)&&wh(t,o,r,h),cr=!1;var g=t.memoizedState;o.state=g,Bs(t,r,o,i),d=t.memoizedState,l!==r||g!==d||Ht.current||cr?(typeof _=="function"&&(Qu(t,n,_,r),d=t.memoizedState),(l=cr||Sh(t,n,l,r,g,d,h))?(y||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=d),o.props=r,o.state=d,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,J_(e,t),l=t.memoizedProps,h=t.type===t.elementType?l:gn(t.type,l),o.props=h,y=t.pendingProps,g=o.context,d=n.contextType,typeof d=="object"&&d!==null?d=dn(d):(d=Wt(n)?ai:Pt.current,d=ta(t,d));var m=n.getDerivedStateFromProps;(_=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==y||g!==d)&&wh(t,o,r,d),cr=!1,g=t.memoizedState,o.state=g,Bs(t,r,o,i);var C=t.memoizedState;l!==y||g!==C||Ht.current||cr?(typeof m=="function"&&(Qu(t,n,m,r),C=t.memoizedState),(h=cr||Sh(t,n,h,r,g,C,d)||!1)?(_||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,C,d),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,C,d)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=C),o.props=r,o.state=C,o.context=d,r=h):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return Ju(e,t,n,r,a,i)}function Ju(e,t,n,r,i,a){km(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&fh(t,n,!1),er(e,t,a);r=t.stateNode,h1.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=ra(t,e.child,null,a),t.child=ra(t,null,l,a)):Nt(e,t,l,a),t.memoizedState=r.state,i&&fh(t,n,!0),t.child}function Rm(e){var t=e.stateNode;t.pendingContext?dh(e,t.pendingContext,t.pendingContext!==t.context):t.context&&dh(e,t.context,!1),fd(e,t.containerInfo)}function Ch(e,t,n,r,i){return na(),od(i),t.flags|=256,Nt(e,t,n,r),t.child}var ec={dehydrated:null,treeContext:null,retryLane:0};function tc(e){return{baseLanes:e,cachePool:null,transitions:null}}function xm(e,t,n){var r=t.pendingProps,i=Xe.current,a=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),He(Xe,i&1),e===null)return qu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,a?(r=t.mode,a=t.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=yl(o,r,0,null),e=ri(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=tc(n),t.memoizedState=ec,e):Sd(t,o));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return p1(e,t,o,r,l,i,n);if(a){a=r.fallback,o=t.mode,i=e.child,l=i.sibling;var d={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=d,t.deletions=null):(r=Lr(i,d),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=Lr(l,a):(a=ri(a,o,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,o=e.child.memoizedState,o=o===null?tc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~n,t.memoizedState=ec,r}return a=e.child,e=a.sibling,r=Lr(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Sd(e,t){return t=yl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Yo(e,t,n,r){return r!==null&&od(r),ra(t,e.child,null,n),e=Sd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function p1(e,t,n,r,i,a,o){if(n)return t.flags&256?(t.flags&=-257,r=ou(Error(ae(422))),Yo(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=yl({mode:"visible",children:r.children},i,0,null),a=ri(a,i,o,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&ra(t,e.child,null,o),t.child.memoizedState=tc(o),t.memoizedState=ec,a);if(!(t.mode&1))return Yo(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(ae(419)),r=ou(a,r,void 0),Yo(e,t,o,r)}if(l=(o&e.childLanes)!==0,Gt||l){if(r=mt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Jn(e,i),bn(r,e,i,-1))}return Rd(),r=ou(Error(ae(421))),Yo(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=x1.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,Yt=Rr(i.nextSibling),Xt=t,Ke=!0,wn=null,e!==null&&(on[sn++]=qn,on[sn++]=Kn,on[sn++]=oi,qn=e.id,Kn=e.overflow,oi=t),t=Sd(t,r.children),t.flags|=4096,t)}function Th(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ku(e.return,t,n)}function su(e,t,n,r,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Cm(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Nt(e,t,r.children,n),r=Xe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Th(e,n,t);else if(e.tag===19)Th(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(He(Xe,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Us(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),su(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Us(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}su(t,!0,n,null,a);break;case"together":su(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ps(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function er(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),li|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ae(153));if(t.child!==null){for(e=t.child,n=Lr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Lr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function _1(e,t,n){switch(t.tag){case 3:Rm(t),na();break;case 5:em(t);break;case 1:Wt(t.type)&&Os(t);break;case 4:fd(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;He(Is,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(He(Xe,Xe.current&1),t.flags|=128,null):n&t.child.childLanes?xm(e,t,n):(He(Xe,Xe.current&1),e=er(e,t,n),e!==null?e.sibling:null);He(Xe,Xe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Cm(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),He(Xe,Xe.current),r)break;return null;case 22:case 23:return t.lanes=0,Am(e,t,n)}return er(e,t,n)}var Tm,nc,Lm,Pm;Tm=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};nc=function(){};Lm=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,$r(Nn.current);var a=null;switch(n){case"input":i=Au(e,i),r=Au(e,r),a=[];break;case"select":i=Je({},i,{value:void 0}),r=Je({},r,{value:void 0}),a=[];break;case"textarea":i=xu(e,i),r=xu(e,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ls)}Tu(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(qa.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in r){var d=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&d!==l&&(d!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in d)d.hasOwnProperty(o)&&l[o]!==d[o]&&(n||(n={}),n[o]=d[o])}else n||(a||(a=[]),a.push(h,n)),n=d;else h==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,l=l?l.__html:void 0,d!=null&&l!==d&&(a=a||[]).push(h,d)):h==="children"?typeof d!="string"&&typeof d!="number"||(a=a||[]).push(h,""+d):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(qa.hasOwnProperty(h)?(d!=null&&h==="onScroll"&&We("scroll",e),a||l===d||(a=[])):(a=a||[]).push(h,d))}n&&(a=a||[]).push("style",n);var h=a;(t.updateQueue=h)&&(t.flags|=4)}};Pm=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ca(e,t){if(!Ke)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Rt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function m1(e,t,n){var r=t.pendingProps;switch(ad(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(t),null;case 1:return Wt(t.type)&&Ps(),Rt(t),null;case 3:return r=t.stateNode,ia(),qe(Ht),qe(Pt),pd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ko(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,wn!==null&&(cc(wn),wn=null))),nc(e,t),Rt(t),null;case 5:hd(t);var i=$r(ao.current);if(n=t.type,e!==null&&t.stateNode!=null)Lm(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ae(166));return Rt(t),null}if(e=$r(Nn.current),Ko(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Dn]=t,r[ro]=a,e=(t.mode&1)!==0,n){case"dialog":We("cancel",r),We("close",r);break;case"iframe":case"object":case"embed":We("load",r);break;case"video":case"audio":for(i=0;i<Da.length;i++)We(Da[i],r);break;case"source":We("error",r);break;case"img":case"image":case"link":We("error",r),We("load",r);break;case"details":We("toggle",r);break;case"input":Uf(r,a),We("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},We("invalid",r);break;case"textarea":Ff(r,a),We("invalid",r)}Tu(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&qo(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&qo(r.textContent,l,e),i=["children",""+l]):qa.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&We("scroll",r)}switch(n){case"input":jo(r),jf(r,a,!0);break;case"textarea":jo(r),Vf(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Ls)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=a_(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Dn]=t,e[ro]=r,Tm(e,t,!1,!1),t.stateNode=e;e:{switch(o=Lu(n,r),n){case"dialog":We("cancel",e),We("close",e),i=r;break;case"iframe":case"object":case"embed":We("load",e),i=r;break;case"video":case"audio":for(i=0;i<Da.length;i++)We(Da[i],e);i=r;break;case"source":We("error",e),i=r;break;case"img":case"image":case"link":We("error",e),We("load",e),i=r;break;case"details":We("toggle",e),i=r;break;case"input":Uf(e,r),i=Au(e,r),We("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Je({},r,{value:void 0}),We("invalid",e);break;case"textarea":Ff(e,r),i=xu(e,r),We("invalid",e);break;default:i=r}Tu(n,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var d=l[a];a==="style"?l_(e,d):a==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&o_(e,d)):a==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Ka(e,d):typeof d=="number"&&Ka(e,""+d):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(qa.hasOwnProperty(a)?d!=null&&a==="onScroll"&&We("scroll",e):d!=null&&Gc(e,a,d,o))}switch(n){case"input":jo(e),jf(e,r,!1);break;case"textarea":jo(e),Vf(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Or(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?Mi(e,!!r.multiple,a,!1):r.defaultValue!=null&&Mi(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Ls)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Rt(t),null;case 6:if(e&&t.stateNode!=null)Pm(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ae(166));if(n=$r(ao.current),$r(Nn.current),Ko(t)){if(r=t.stateNode,n=t.memoizedProps,r[Dn]=t,(a=r.nodeValue!==n)&&(e=Xt,e!==null))switch(e.tag){case 3:qo(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&qo(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Dn]=t,t.stateNode=r}return Rt(t),null;case 13:if(qe(Xe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ke&&Yt!==null&&t.mode&1&&!(t.flags&128))Q_(),na(),t.flags|=98560,a=!1;else if(a=Ko(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(ae(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ae(317));a[Dn]=t}else na(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Rt(t),a=!1}else wn!==null&&(cc(wn),wn=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Xe.current&1?dt===0&&(dt=3):Rd())),t.updateQueue!==null&&(t.flags|=4),Rt(t),null);case 4:return ia(),nc(e,t),e===null&&to(t.stateNode.containerInfo),Rt(t),null;case 10:return ud(t.type._context),Rt(t),null;case 17:return Wt(t.type)&&Ps(),Rt(t),null;case 19:if(qe(Xe),a=t.memoizedState,a===null)return Rt(t),null;if(r=(t.flags&128)!==0,o=a.rendering,o===null)if(r)Ca(a,!1);else{if(dt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Us(e),o!==null){for(t.flags|=128,Ca(a,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return He(Xe,Xe.current&1|2),t.child}e=e.sibling}a.tail!==null&&nt()>oa&&(t.flags|=128,r=!0,Ca(a,!1),t.lanes=4194304)}else{if(!r)if(e=Us(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ca(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Ke)return Rt(t),null}else 2*nt()-a.renderingStartTime>oa&&n!==1073741824&&(t.flags|=128,r=!0,Ca(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(n=a.last,n!==null?n.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=nt(),t.sibling=null,n=Xe.current,He(Xe,r?n&1|2:n&1),t):(Rt(t),null);case 22:case 23:return kd(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Qt&1073741824&&(Rt(t),t.subtreeFlags&6&&(t.flags|=8192)):Rt(t),null;case 24:return null;case 25:return null}throw Error(ae(156,t.tag))}function g1(e,t){switch(ad(t),t.tag){case 1:return Wt(t.type)&&Ps(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ia(),qe(Ht),qe(Pt),pd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return hd(t),null;case 13:if(qe(Xe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ae(340));na()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return qe(Xe),null;case 4:return ia(),null;case 10:return ud(t.type._context),null;case 22:case 23:return kd(),null;case 24:return null;default:return null}}var Xo=!1,Tt=!1,y1=typeof WeakSet=="function"?WeakSet:Set,pe=null;function Li(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){tt(e,t,r)}else n.current=null}function rc(e,t,n){try{n()}catch(r){tt(e,t,r)}}var Lh=!1;function v1(e,t){if(Fu=xs,e=N_(),rd(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,d=-1,h=0,_=0,y=e,g=null;t:for(;;){for(var m;y!==n||i!==0&&y.nodeType!==3||(l=o+i),y!==a||r!==0&&y.nodeType!==3||(d=o+r),y.nodeType===3&&(o+=y.nodeValue.length),(m=y.firstChild)!==null;)g=y,y=m;for(;;){if(y===e)break t;if(g===n&&++h===i&&(l=o),g===a&&++_===r&&(d=o),(m=y.nextSibling)!==null)break;y=g,g=y.parentNode}y=m}n=l===-1||d===-1?null:{start:l,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Vu={focusedElem:e,selectionRange:n},xs=!1,pe=t;pe!==null;)if(t=pe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,pe=e;else for(;pe!==null;){t=pe;try{var C=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var w=C.memoizedProps,O=C.memoizedState,b=t.stateNode,E=b.getSnapshotBeforeUpdate(t.elementType===t.type?w:gn(t.type,w),O);b.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(T){tt(t,t.return,T)}if(e=t.sibling,e!==null){e.return=t.return,pe=e;break}pe=t.return}return C=Lh,Lh=!1,C}function za(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&rc(t,n,a)}i=i.next}while(i!==r)}}function ml(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ic(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Om(e){var t=e.alternate;t!==null&&(e.alternate=null,Om(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Dn],delete t[ro],delete t[Gu],delete t[t1],delete t[n1])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Mm(e){return e.tag===5||e.tag===3||e.tag===4}function Ph(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Mm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ac(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ls));else if(r!==4&&(e=e.child,e!==null))for(ac(e,t,n),e=e.sibling;e!==null;)ac(e,t,n),e=e.sibling}function oc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(oc(e,t,n),e=e.sibling;e!==null;)oc(e,t,n),e=e.sibling}var vt=null,Sn=!1;function or(e,t,n){for(n=n.child;n!==null;)Dm(e,t,n),n=n.sibling}function Dm(e,t,n){if(In&&typeof In.onCommitFiberUnmount=="function")try{In.onCommitFiberUnmount(ll,n)}catch{}switch(n.tag){case 5:Tt||Li(n,t);case 6:var r=vt,i=Sn;vt=null,or(e,t,n),vt=r,Sn=i,vt!==null&&(Sn?(e=vt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):vt.removeChild(n.stateNode));break;case 18:vt!==null&&(Sn?(e=vt,n=n.stateNode,e.nodeType===8?eu(e.parentNode,n):e.nodeType===1&&eu(e,n),Za(e)):eu(vt,n.stateNode));break;case 4:r=vt,i=Sn,vt=n.stateNode.containerInfo,Sn=!0,or(e,t,n),vt=r,Sn=i;break;case 0:case 11:case 14:case 15:if(!Tt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&rc(n,t,o),i=i.next}while(i!==r)}or(e,t,n);break;case 1:if(!Tt&&(Li(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){tt(n,t,l)}or(e,t,n);break;case 21:or(e,t,n);break;case 22:n.mode&1?(Tt=(r=Tt)||n.memoizedState!==null,or(e,t,n),Tt=r):or(e,t,n);break;default:or(e,t,n)}}function Oh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new y1),t.forEach(function(r){var i=C1.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function mn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:vt=l.stateNode,Sn=!1;break e;case 3:vt=l.stateNode.containerInfo,Sn=!0;break e;case 4:vt=l.stateNode.containerInfo,Sn=!0;break e}l=l.return}if(vt===null)throw Error(ae(160));Dm(a,o,i),vt=null,Sn=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(h){tt(i,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Im(t,e),t=t.sibling}function Im(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mn(t,e),xn(e),r&4){try{za(3,e,e.return),ml(3,e)}catch(w){tt(e,e.return,w)}try{za(5,e,e.return)}catch(w){tt(e,e.return,w)}}break;case 1:mn(t,e),xn(e),r&512&&n!==null&&Li(n,n.return);break;case 5:if(mn(t,e),xn(e),r&512&&n!==null&&Li(n,n.return),e.flags&32){var i=e.stateNode;try{Ka(i,"")}catch(w){tt(e,e.return,w)}}if(r&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,o=n!==null?n.memoizedProps:a,l=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&r_(i,a),Lu(l,o);var h=Lu(l,a);for(o=0;o<d.length;o+=2){var _=d[o],y=d[o+1];_==="style"?l_(i,y):_==="dangerouslySetInnerHTML"?o_(i,y):_==="children"?Ka(i,y):Gc(i,_,y,h)}switch(l){case"input":ku(i,a);break;case"textarea":i_(i,a);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?Mi(i,!!a.multiple,m,!1):g!==!!a.multiple&&(a.defaultValue!=null?Mi(i,!!a.multiple,a.defaultValue,!0):Mi(i,!!a.multiple,a.multiple?[]:"",!1))}i[ro]=a}catch(w){tt(e,e.return,w)}}break;case 6:if(mn(t,e),xn(e),r&4){if(e.stateNode===null)throw Error(ae(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(w){tt(e,e.return,w)}}break;case 3:if(mn(t,e),xn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Za(t.containerInfo)}catch(w){tt(e,e.return,w)}break;case 4:mn(t,e),xn(e);break;case 13:mn(t,e),xn(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(bd=nt())),r&4&&Oh(e);break;case 22:if(_=n!==null&&n.memoizedState!==null,e.mode&1?(Tt=(h=Tt)||_,mn(t,e),Tt=h):mn(t,e),xn(e),r&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!_&&e.mode&1)for(pe=e,_=e.child;_!==null;){for(y=pe=_;pe!==null;){switch(g=pe,m=g.child,g.tag){case 0:case 11:case 14:case 15:za(4,g,g.return);break;case 1:Li(g,g.return);var C=g.stateNode;if(typeof C.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,C.props=t.memoizedProps,C.state=t.memoizedState,C.componentWillUnmount()}catch(w){tt(r,n,w)}}break;case 5:Li(g,g.return);break;case 22:if(g.memoizedState!==null){Dh(y);continue}}m!==null?(m.return=g,pe=m):Dh(y)}_=_.sibling}e:for(_=null,y=e;;){if(y.tag===5){if(_===null){_=y;try{i=y.stateNode,h?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=y.stateNode,d=y.memoizedProps.style,o=d!=null&&d.hasOwnProperty("display")?d.display:null,l.style.display=s_("display",o))}catch(w){tt(e,e.return,w)}}}else if(y.tag===6){if(_===null)try{y.stateNode.nodeValue=h?"":y.memoizedProps}catch(w){tt(e,e.return,w)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===e)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===e)break e;for(;y.sibling===null;){if(y.return===null||y.return===e)break e;_===y&&(_=null),y=y.return}_===y&&(_=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:mn(t,e),xn(e),r&4&&Oh(e);break;case 21:break;default:mn(t,e),xn(e)}}function xn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Mm(n)){var r=n;break e}n=n.return}throw Error(ae(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ka(i,""),r.flags&=-33);var a=Ph(e);oc(e,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Ph(e);ac(e,l,o);break;default:throw Error(ae(161))}}catch(d){tt(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function S1(e,t,n){pe=e,Nm(e)}function Nm(e,t,n){for(var r=(e.mode&1)!==0;pe!==null;){var i=pe,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Xo;if(!o){var l=i.alternate,d=l!==null&&l.memoizedState!==null||Tt;l=Xo;var h=Tt;if(Xo=o,(Tt=d)&&!h)for(pe=i;pe!==null;)o=pe,d=o.child,o.tag===22&&o.memoizedState!==null?Ih(i):d!==null?(d.return=o,pe=d):Ih(i);for(;a!==null;)pe=a,Nm(a),a=a.sibling;pe=i,Xo=l,Tt=h}Mh(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,pe=a):Mh(e)}}function Mh(e){for(;pe!==null;){var t=pe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Tt||ml(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Tt)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:gn(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&gh(t,a,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}gh(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var _=h.memoizedState;if(_!==null){var y=_.dehydrated;y!==null&&Za(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}Tt||t.flags&512&&ic(t)}catch(g){tt(t,t.return,g)}}if(t===e){pe=null;break}if(n=t.sibling,n!==null){n.return=t.return,pe=n;break}pe=t.return}}function Dh(e){for(;pe!==null;){var t=pe;if(t===e){pe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,pe=n;break}pe=t.return}}function Ih(e){for(;pe!==null;){var t=pe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ml(4,t)}catch(d){tt(t,n,d)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(d){tt(t,i,d)}}var a=t.return;try{ic(t)}catch(d){tt(t,a,d)}break;case 5:var o=t.return;try{ic(t)}catch(d){tt(t,o,d)}}}catch(d){tt(t,t.return,d)}if(t===e){pe=null;break}var l=t.sibling;if(l!==null){l.return=t.return,pe=l;break}pe=t.return}}var w1=Math.ceil,Vs=rr.ReactCurrentDispatcher,wd=rr.ReactCurrentOwner,un=rr.ReactCurrentBatchConfig,Ue=0,mt=null,ot=null,wt=0,Qt=0,Pi=Ir(0),dt=0,uo=null,li=0,gl=0,Ed=0,$a=null,zt=null,bd=0,oa=1/0,$n=null,zs=!1,sc=null,Cr=null,Zo=!1,Er=null,$s=0,Ga=0,lc=null,_s=-1,ms=0;function Bt(){return Ue&6?nt():_s!==-1?_s:_s=nt()}function Tr(e){return e.mode&1?Ue&2&&wt!==0?wt&-wt:i1.transition!==null?(ms===0&&(ms=S_()),ms):(e=$e,e!==0||(e=window.event,e=e===void 0?16:x_(e.type)),e):1}function bn(e,t,n,r){if(50<Ga)throw Ga=0,lc=null,Error(ae(185));bo(e,n,r),(!(Ue&2)||e!==mt)&&(e===mt&&(!(Ue&2)&&(gl|=n),dt===4&&fr(e,wt)),qt(e,r),n===1&&Ue===0&&!(t.mode&1)&&(oa=nt()+500,hl&&Nr()))}function qt(e,t){var n=e.callbackNode;i0(e,t);var r=Rs(e,e===mt?wt:0);if(r===0)n!==null&&Gf(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Gf(n),t===1)e.tag===0?r1(Nh.bind(null,e)):W_(Nh.bind(null,e)),J0(function(){!(Ue&6)&&Nr()}),n=null;else{switch(w_(r)){case 1:n=Qc;break;case 4:n=y_;break;case 16:n=ks;break;case 536870912:n=v_;break;default:n=ks}n=Gm(n,Bm.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Bm(e,t){if(_s=-1,ms=0,Ue&6)throw Error(ae(327));var n=e.callbackNode;if(Ui()&&e.callbackNode!==n)return null;var r=Rs(e,e===mt?wt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Gs(e,r);else{t=r;var i=Ue;Ue|=2;var a=jm();(mt!==e||wt!==t)&&($n=null,oa=nt()+500,ni(e,t));do try{A1();break}catch(l){Um(e,l)}while(!0);ld(),Vs.current=a,Ue=i,ot!==null?t=0:(mt=null,wt=0,t=dt)}if(t!==0){if(t===2&&(i=Iu(e),i!==0&&(r=i,t=uc(e,i))),t===1)throw n=uo,ni(e,0),fr(e,r),qt(e,nt()),n;if(t===6)fr(e,r);else{if(i=e.current.alternate,!(r&30)&&!E1(i)&&(t=Gs(e,r),t===2&&(a=Iu(e),a!==0&&(r=a,t=uc(e,a))),t===1))throw n=uo,ni(e,0),fr(e,r),qt(e,nt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(ae(345));case 2:Fr(e,zt,$n);break;case 3:if(fr(e,r),(r&130023424)===r&&(t=bd+500-nt(),10<t)){if(Rs(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Bt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=$u(Fr.bind(null,e,zt,$n),t);break}Fr(e,zt,$n);break;case 4:if(fr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-En(r);a=1<<o,o=t[o],o>i&&(i=o),r&=~a}if(r=i,r=nt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*w1(r/1960))-r,10<r){e.timeoutHandle=$u(Fr.bind(null,e,zt,$n),r);break}Fr(e,zt,$n);break;case 5:Fr(e,zt,$n);break;default:throw Error(ae(329))}}}return qt(e,nt()),e.callbackNode===n?Bm.bind(null,e):null}function uc(e,t){var n=$a;return e.current.memoizedState.isDehydrated&&(ni(e,t).flags|=256),e=Gs(e,t),e!==2&&(t=zt,zt=n,t!==null&&cc(t)),e}function cc(e){zt===null?zt=e:zt.push.apply(zt,e)}function E1(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!An(a(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function fr(e,t){for(t&=~Ed,t&=~gl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-En(t),r=1<<n;e[n]=-1,t&=~r}}function Nh(e){if(Ue&6)throw Error(ae(327));Ui();var t=Rs(e,0);if(!(t&1))return qt(e,nt()),null;var n=Gs(e,t);if(e.tag!==0&&n===2){var r=Iu(e);r!==0&&(t=r,n=uc(e,r))}if(n===1)throw n=uo,ni(e,0),fr(e,t),qt(e,nt()),n;if(n===6)throw Error(ae(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Fr(e,zt,$n),qt(e,nt()),null}function Ad(e,t){var n=Ue;Ue|=1;try{return e(t)}finally{Ue=n,Ue===0&&(oa=nt()+500,hl&&Nr())}}function ui(e){Er!==null&&Er.tag===0&&!(Ue&6)&&Ui();var t=Ue;Ue|=1;var n=un.transition,r=$e;try{if(un.transition=null,$e=1,e)return e()}finally{$e=r,un.transition=n,Ue=t,!(Ue&6)&&Nr()}}function kd(){Qt=Pi.current,qe(Pi)}function ni(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Z0(n)),ot!==null)for(n=ot.return;n!==null;){var r=n;switch(ad(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ps();break;case 3:ia(),qe(Ht),qe(Pt),pd();break;case 5:hd(r);break;case 4:ia();break;case 13:qe(Xe);break;case 19:qe(Xe);break;case 10:ud(r.type._context);break;case 22:case 23:kd()}n=n.return}if(mt=e,ot=e=Lr(e.current,null),wt=Qt=t,dt=0,uo=null,Ed=gl=li=0,zt=$a=null,zr!==null){for(t=0;t<zr.length;t++)if(n=zr[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}n.pending=r}zr=null}return e}function Um(e,t){do{var n=ot;try{if(ld(),fs.current=Fs,js){for(var r=Ze.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}js=!1}if(si=0,_t=ct=Ze=null,Va=!1,oo=0,wd.current=null,n===null||n.return===null){dt=1,uo=t,ot=null;break}e:{var a=e,o=n.return,l=n,d=t;if(t=wt,l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var h=d,_=l,y=_.tag;if(!(_.mode&1)&&(y===0||y===11||y===15)){var g=_.alternate;g?(_.updateQueue=g.updateQueue,_.memoizedState=g.memoizedState,_.lanes=g.lanes):(_.updateQueue=null,_.memoizedState=null)}var m=bh(o);if(m!==null){m.flags&=-257,Ah(m,o,l,a,t),m.mode&1&&Eh(a,h,t),t=m,d=h;var C=t.updateQueue;if(C===null){var w=new Set;w.add(d),t.updateQueue=w}else C.add(d);break e}else{if(!(t&1)){Eh(a,h,t),Rd();break e}d=Error(ae(426))}}else if(Ke&&l.mode&1){var O=bh(o);if(O!==null){!(O.flags&65536)&&(O.flags|=256),Ah(O,o,l,a,t),od(aa(d,l));break e}}a=d=aa(d,l),dt!==4&&(dt=2),$a===null?$a=[a]:$a.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var b=wm(a,d,t);mh(a,b);break e;case 1:l=d;var E=a.type,x=a.stateNode;if(!(a.flags&128)&&(typeof E.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Cr===null||!Cr.has(x)))){a.flags|=65536,t&=-t,a.lanes|=t;var T=Em(a,l,t);mh(a,T);break e}}a=a.return}while(a!==null)}Vm(n)}catch(j){t=j,ot===n&&n!==null&&(ot=n=n.return);continue}break}while(!0)}function jm(){var e=Vs.current;return Vs.current=Fs,e===null?Fs:e}function Rd(){(dt===0||dt===3||dt===2)&&(dt=4),mt===null||!(li&268435455)&&!(gl&268435455)||fr(mt,wt)}function Gs(e,t){var n=Ue;Ue|=2;var r=jm();(mt!==e||wt!==t)&&($n=null,ni(e,t));do try{b1();break}catch(i){Um(e,i)}while(!0);if(ld(),Ue=n,Vs.current=r,ot!==null)throw Error(ae(261));return mt=null,wt=0,dt}function b1(){for(;ot!==null;)Fm(ot)}function A1(){for(;ot!==null&&!Qv();)Fm(ot)}function Fm(e){var t=$m(e.alternate,e,Qt);e.memoizedProps=e.pendingProps,t===null?Vm(e):ot=t,wd.current=null}function Vm(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=g1(n,t),n!==null){n.flags&=32767,ot=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{dt=6,ot=null;return}}else if(n=m1(n,t,Qt),n!==null){ot=n;return}if(t=t.sibling,t!==null){ot=t;return}ot=t=e}while(t!==null);dt===0&&(dt=5)}function Fr(e,t,n){var r=$e,i=un.transition;try{un.transition=null,$e=1,k1(e,t,n,r)}finally{un.transition=i,$e=r}return null}function k1(e,t,n,r){do Ui();while(Er!==null);if(Ue&6)throw Error(ae(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ae(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(a0(e,a),e===mt&&(ot=mt=null,wt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Zo||(Zo=!0,Gm(ks,function(){return Ui(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=un.transition,un.transition=null;var o=$e;$e=1;var l=Ue;Ue|=4,wd.current=null,v1(e,n),Im(n,e),H0(Vu),xs=!!Fu,Vu=Fu=null,e.current=n,S1(n),Yv(),Ue=l,$e=o,un.transition=a}else e.current=n;if(Zo&&(Zo=!1,Er=e,$s=i),a=e.pendingLanes,a===0&&(Cr=null),Jv(n.stateNode),qt(e,nt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(zs)throw zs=!1,e=sc,sc=null,e;return $s&1&&e.tag!==0&&Ui(),a=e.pendingLanes,a&1?e===lc?Ga++:(Ga=0,lc=e):Ga=0,Nr(),null}function Ui(){if(Er!==null){var e=w_($s),t=un.transition,n=$e;try{if(un.transition=null,$e=16>e?16:e,Er===null)var r=!1;else{if(e=Er,Er=null,$s=0,Ue&6)throw Error(ae(331));var i=Ue;for(Ue|=4,pe=e.current;pe!==null;){var a=pe,o=a.child;if(pe.flags&16){var l=a.deletions;if(l!==null){for(var d=0;d<l.length;d++){var h=l[d];for(pe=h;pe!==null;){var _=pe;switch(_.tag){case 0:case 11:case 15:za(8,_,a)}var y=_.child;if(y!==null)y.return=_,pe=y;else for(;pe!==null;){_=pe;var g=_.sibling,m=_.return;if(Om(_),_===h){pe=null;break}if(g!==null){g.return=m,pe=g;break}pe=m}}}var C=a.alternate;if(C!==null){var w=C.child;if(w!==null){C.child=null;do{var O=w.sibling;w.sibling=null,w=O}while(w!==null)}}pe=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,pe=o;else e:for(;pe!==null;){if(a=pe,a.flags&2048)switch(a.tag){case 0:case 11:case 15:za(9,a,a.return)}var b=a.sibling;if(b!==null){b.return=a.return,pe=b;break e}pe=a.return}}var E=e.current;for(pe=E;pe!==null;){o=pe;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,pe=x;else e:for(o=E;pe!==null;){if(l=pe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ml(9,l)}}catch(j){tt(l,l.return,j)}if(l===o){pe=null;break e}var T=l.sibling;if(T!==null){T.return=l.return,pe=T;break e}pe=l.return}}if(Ue=i,Nr(),In&&typeof In.onPostCommitFiberRoot=="function")try{In.onPostCommitFiberRoot(ll,e)}catch{}r=!0}return r}finally{$e=n,un.transition=t}}return!1}function Bh(e,t,n){t=aa(n,t),t=wm(e,t,1),e=xr(e,t,1),t=Bt(),e!==null&&(bo(e,1,t),qt(e,t))}function tt(e,t,n){if(e.tag===3)Bh(e,e,n);else for(;t!==null;){if(t.tag===3){Bh(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Cr===null||!Cr.has(r))){e=aa(n,e),e=Em(t,e,1),t=xr(t,e,1),e=Bt(),t!==null&&(bo(t,1,e),qt(t,e));break}}t=t.return}}function R1(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Bt(),e.pingedLanes|=e.suspendedLanes&n,mt===e&&(wt&n)===n&&(dt===4||dt===3&&(wt&130023424)===wt&&500>nt()-bd?ni(e,0):Ed|=n),qt(e,t)}function zm(e,t){t===0&&(e.mode&1?(t=zo,zo<<=1,!(zo&130023424)&&(zo=4194304)):t=1);var n=Bt();e=Jn(e,t),e!==null&&(bo(e,t,n),qt(e,n))}function x1(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),zm(e,n)}function C1(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ae(314))}r!==null&&r.delete(t),zm(e,n)}var $m;$m=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ht.current)Gt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Gt=!1,_1(e,t,n);Gt=!!(e.flags&131072)}else Gt=!1,Ke&&t.flags&1048576&&q_(t,Ds,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ps(e,t),e=t.pendingProps;var i=ta(t,Pt.current);Bi(t,n),i=md(null,t,r,e,i,n);var a=gd();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Wt(r)?(a=!0,Os(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,dd(t),i.updater=_l,t.stateNode=i,i._reactInternals=t,Yu(t,r,e,n),t=Ju(null,t,r,!0,a,n)):(t.tag=0,Ke&&a&&id(t),Nt(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ps(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=L1(r),e=gn(r,e),i){case 0:t=Zu(null,t,r,e,n);break e;case 1:t=xh(null,t,r,e,n);break e;case 11:t=kh(null,t,r,e,n);break e;case 14:t=Rh(null,t,r,gn(r.type,e),n);break e}throw Error(ae(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gn(r,i),Zu(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gn(r,i),xh(e,t,r,i,n);case 3:e:{if(Rm(t),e===null)throw Error(ae(387));r=t.pendingProps,a=t.memoizedState,i=a.element,J_(e,t),Bs(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=aa(Error(ae(423)),t),t=Ch(e,t,r,n,i);break e}else if(r!==i){i=aa(Error(ae(424)),t),t=Ch(e,t,r,n,i);break e}else for(Yt=Rr(t.stateNode.containerInfo.firstChild),Xt=t,Ke=!0,wn=null,n=X_(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(na(),r===i){t=er(e,t,n);break e}Nt(e,t,r,n)}t=t.child}return t;case 5:return em(t),e===null&&qu(t),r=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,o=i.children,zu(r,i)?o=null:a!==null&&zu(r,a)&&(t.flags|=32),km(e,t),Nt(e,t,o,n),t.child;case 6:return e===null&&qu(t),null;case 13:return xm(e,t,n);case 4:return fd(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ra(t,null,r,n):Nt(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gn(r,i),kh(e,t,r,i,n);case 7:return Nt(e,t,t.pendingProps,n),t.child;case 8:return Nt(e,t,t.pendingProps.children,n),t.child;case 12:return Nt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,He(Is,r._currentValue),r._currentValue=o,a!==null)if(An(a.value,o)){if(a.children===i.children&&!Ht.current){t=er(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var d=l.firstContext;d!==null;){if(d.context===r){if(a.tag===1){d=Qn(-1,n&-n),d.tag=2;var h=a.updateQueue;if(h!==null){h=h.shared;var _=h.pending;_===null?d.next=d:(d.next=_.next,_.next=d),h.pending=d}}a.lanes|=n,d=a.alternate,d!==null&&(d.lanes|=n),Ku(a.return,n,t),l.lanes|=n;break}d=d.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(ae(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Ku(o,n,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Nt(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Bi(t,n),i=dn(i),r=r(i),t.flags|=1,Nt(e,t,r,n),t.child;case 14:return r=t.type,i=gn(r,t.pendingProps),i=gn(r.type,i),Rh(e,t,r,i,n);case 15:return bm(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gn(r,i),ps(e,t),t.tag=1,Wt(r)?(e=!0,Os(t)):e=!1,Bi(t,n),Sm(t,r,i),Yu(t,r,i,n),Ju(null,t,r,!0,e,n);case 19:return Cm(e,t,n);case 22:return Am(e,t,n)}throw Error(ae(156,t.tag))};function Gm(e,t){return g_(e,t)}function T1(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ln(e,t,n,r){return new T1(e,t,n,r)}function xd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function L1(e){if(typeof e=="function")return xd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Wc)return 11;if(e===qc)return 14}return 2}function Lr(e,t){var n=e.alternate;return n===null?(n=ln(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function gs(e,t,n,r,i,a){var o=2;if(r=e,typeof e=="function")xd(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case wi:return ri(n.children,i,a,t);case Hc:o=8,i|=8;break;case Su:return e=ln(12,n,t,i|2),e.elementType=Su,e.lanes=a,e;case wu:return e=ln(13,n,t,i),e.elementType=wu,e.lanes=a,e;case Eu:return e=ln(19,n,t,i),e.elementType=Eu,e.lanes=a,e;case e_:return yl(n,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Zp:o=10;break e;case Jp:o=9;break e;case Wc:o=11;break e;case qc:o=14;break e;case ur:o=16,r=null;break e}throw Error(ae(130,e==null?e:typeof e,""))}return t=ln(o,n,t,i),t.elementType=e,t.type=r,t.lanes=a,t}function ri(e,t,n,r){return e=ln(7,e,r,t),e.lanes=n,e}function yl(e,t,n,r){return e=ln(22,e,r,t),e.elementType=e_,e.lanes=n,e.stateNode={isHidden:!1},e}function lu(e,t,n){return e=ln(6,e,null,t),e.lanes=n,e}function uu(e,t,n){return t=ln(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function P1(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$l(0),this.expirationTimes=$l(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$l(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Cd(e,t,n,r,i,a,o,l,d){return e=new P1(e,t,n,l,d),t===1?(t=1,a===!0&&(t|=8)):t=0,a=ln(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},dd(a),e}function O1(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Si,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Hm(e){if(!e)return Mr;e=e._reactInternals;e:{if(pi(e)!==e||e.tag!==1)throw Error(ae(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Wt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ae(171))}if(e.tag===1){var n=e.type;if(Wt(n))return H_(e,n,t)}return t}function Wm(e,t,n,r,i,a,o,l,d){return e=Cd(n,r,!0,e,i,a,o,l,d),e.context=Hm(null),n=e.current,r=Bt(),i=Tr(n),a=Qn(r,i),a.callback=t??null,xr(n,a,i),e.current.lanes=i,bo(e,i,r),qt(e,r),e}function vl(e,t,n,r){var i=t.current,a=Bt(),o=Tr(i);return n=Hm(n),t.context===null?t.context=n:t.pendingContext=n,t=Qn(a,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=xr(i,t,o),e!==null&&(bn(e,i,o,a),ds(e,i,o)),o}function Hs(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Uh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Td(e,t){Uh(e,t),(e=e.alternate)&&Uh(e,t)}function M1(){return null}var qm=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ld(e){this._internalRoot=e}Sl.prototype.render=Ld.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ae(409));vl(e,t,null,null)};Sl.prototype.unmount=Ld.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ui(function(){vl(null,e,null,null)}),t[Zn]=null}};function Sl(e){this._internalRoot=e}Sl.prototype.unstable_scheduleHydration=function(e){if(e){var t=A_();e={blockedOn:null,target:e,priority:t};for(var n=0;n<dr.length&&t!==0&&t<dr[n].priority;n++);dr.splice(n,0,e),n===0&&R_(e)}};function Pd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function wl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function jh(){}function D1(e,t,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var h=Hs(o);a.call(h)}}var o=Wm(t,r,e,0,null,!1,!1,"",jh);return e._reactRootContainer=o,e[Zn]=o.current,to(e.nodeType===8?e.parentNode:e),ui(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=Hs(d);l.call(h)}}var d=Cd(e,0,!1,null,null,!1,!1,"",jh);return e._reactRootContainer=d,e[Zn]=d.current,to(e.nodeType===8?e.parentNode:e),ui(function(){vl(t,d,n,r)}),d}function El(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var d=Hs(o);l.call(d)}}vl(t,o,e,i)}else o=D1(n,t,e,i,r);return Hs(o)}E_=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ma(t.pendingLanes);n!==0&&(Yc(t,n|1),qt(t,nt()),!(Ue&6)&&(oa=nt()+500,Nr()))}break;case 13:ui(function(){var r=Jn(e,1);if(r!==null){var i=Bt();bn(r,e,1,i)}}),Td(e,1)}};Xc=function(e){if(e.tag===13){var t=Jn(e,134217728);if(t!==null){var n=Bt();bn(t,e,134217728,n)}Td(e,134217728)}};b_=function(e){if(e.tag===13){var t=Tr(e),n=Jn(e,t);if(n!==null){var r=Bt();bn(n,e,t,r)}Td(e,t)}};A_=function(){return $e};k_=function(e,t){var n=$e;try{return $e=e,t()}finally{$e=n}};Ou=function(e,t,n){switch(t){case"input":if(ku(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=fl(r);if(!i)throw Error(ae(90));n_(r),ku(r,i)}}}break;case"textarea":i_(e,n);break;case"select":t=n.value,t!=null&&Mi(e,!!n.multiple,t,!1)}};d_=Ad;f_=ui;var I1={usingClientEntryPoint:!1,Events:[ko,ki,fl,u_,c_,Ad]},Ta={findFiberByHostInstance:Vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},N1={bundleType:Ta.bundleType,version:Ta.version,rendererPackageName:Ta.rendererPackageName,rendererConfig:Ta.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=__(e),e===null?null:e.stateNode},findFiberByHostInstance:Ta.findFiberByHostInstance||M1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jo.isDisabled&&Jo.supportsFiber)try{ll=Jo.inject(N1),In=Jo}catch{}}en.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I1;en.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pd(t))throw Error(ae(200));return O1(e,t,null,n)};en.createRoot=function(e,t){if(!Pd(e))throw Error(ae(299));var n=!1,r="",i=qm;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Cd(e,1,!1,null,null,n,!1,r,i),e[Zn]=t.current,to(e.nodeType===8?e.parentNode:e),new Ld(t)};en.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ae(188)):(e=Object.keys(e).join(","),Error(ae(268,e)));return e=__(t),e=e===null?null:e.stateNode,e};en.flushSync=function(e){return ui(e)};en.hydrate=function(e,t,n){if(!wl(t))throw Error(ae(200));return El(null,e,t,!0,n)};en.hydrateRoot=function(e,t,n){if(!Pd(e))throw Error(ae(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",o=qm;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Wm(t,null,e,1,n??null,i,!1,a,o),e[Zn]=t.current,to(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Sl(t)};en.render=function(e,t,n){if(!wl(t))throw Error(ae(200));return El(null,e,t,!1,n)};en.unmountComponentAtNode=function(e){if(!wl(e))throw Error(ae(40));return e._reactRootContainer?(ui(function(){El(null,null,e,!1,function(){e._reactRootContainer=null,e[Zn]=null})}),!0):!1};en.unstable_batchedUpdates=Ad;en.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!wl(n))throw Error(ae(200));if(e==null||e._reactInternals===void 0)throw Error(ae(38));return El(e,t,n,!1,r)};en.version="18.3.1-next-f1338f8080-20240426";function Km(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Km)}catch(e){console.error(e)}}Km(),Kp.exports=en;var B1=Kp.exports,Qm,Fh=B1;Qm=Fh.createRoot,Fh.hydrateRoot;var xo=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},U1={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},hr,Bc,xp,j1=(xp=class{constructor(){we(this,hr,U1);we(this,Bc,!1)}setTimeoutProvider(e){fe(this,hr,e)}setTimeout(e,t){return $(this,hr).setTimeout(e,t)}clearTimeout(e){$(this,hr).clearTimeout(e)}setInterval(e,t){return $(this,hr).setInterval(e,t)}clearInterval(e){$(this,hr).clearInterval(e)}},hr=new WeakMap,Bc=new WeakMap,xp),Gr=new j1;function F1(e){setTimeout(e,0)}var ci=typeof window>"u"||"Deno"in globalThis;function Vt(){}function V1(e,t){return typeof e=="function"?e(t):e}function dc(e){return typeof e=="number"&&e>=0&&e!==1/0}function Ym(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Pr(e,t){return typeof e=="function"?e(t):e}function an(e,t){return typeof e=="function"?e(t):e}function Vh(e,t){const{type:n="all",exact:r,fetchStatus:i,predicate:a,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==Od(o,t.options))return!1}else if(!fo(t.queryKey,o))return!1}if(n!=="all"){const d=t.isActive();if(n==="active"&&!d||n==="inactive"&&d)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||i&&i!==t.state.fetchStatus||a&&!a(t))}function zh(e,t){const{exact:n,status:r,predicate:i,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(co(t.options.mutationKey)!==co(a))return!1}else if(!fo(t.options.mutationKey,a))return!1}return!(r&&t.state.status!==r||i&&!i(t))}function Od(e,t){return((t==null?void 0:t.queryKeyHashFn)||co)(e)}function co(e){return JSON.stringify(e,(t,n)=>hc(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function fo(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>fo(e[n],t[n])):!1}var z1=Object.prototype.hasOwnProperty;function Xm(e,t,n=0){if(e===t)return e;if(n>500)return t;const r=$h(e)&&$h(t);if(!r&&!(hc(e)&&hc(t)))return t;const a=(r?e:Object.keys(e)).length,o=r?t:Object.keys(t),l=o.length,d=r?new Array(l):{};let h=0;for(let _=0;_<l;_++){const y=r?_:o[_],g=e[y],m=t[y];if(g===m){d[y]=g,(r?_<a:z1.call(e,y))&&h++;continue}if(g===null||m===null||typeof g!="object"||typeof m!="object"){d[y]=m;continue}const C=Xm(g,m,n+1);d[y]=C,C===g&&h++}return a===l&&h===a?e:d}function fc(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function $h(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function hc(e){if(!Gh(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!Gh(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Gh(e){return Object.prototype.toString.call(e)==="[object Object]"}function $1(e){return new Promise(t=>{Gr.setTimeout(t,e)})}function pc(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?Xm(e,t):t}function G1(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function H1(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Md=Symbol();function Zm(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Md?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Jm(e,t){return typeof e=="function"?e(...t):!!e}function W1(e,t,n){let r=!1,i;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(i??(i=t()),r||(r=!0,i.aborted?n():i.addEventListener("abort",n,{once:!0})),i)}),e}var qr,pr,zi,Cp,q1=(Cp=class extends xo{constructor(){super();we(this,qr);we(this,pr);we(this,zi);fe(this,zi,t=>{if(!ci&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){$(this,pr)||this.setEventListener($(this,zi))}onUnsubscribe(){var t;this.hasListeners()||((t=$(this,pr))==null||t.call(this),fe(this,pr,void 0))}setEventListener(t){var n;fe(this,zi,t),(n=$(this,pr))==null||n.call(this),fe(this,pr,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){$(this,qr)!==t&&(fe(this,qr,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof $(this,qr)=="boolean"?$(this,qr):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},qr=new WeakMap,pr=new WeakMap,zi=new WeakMap,Cp),Dd=new q1;function _c(){let e,t;const n=new Promise((i,a)=>{e=i,t=a});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),e(i)},n.reject=i=>{r({status:"rejected",reason:i}),t(i)},n}var K1=F1;function Q1(){let e=[],t=0,n=l=>{l()},r=l=>{l()},i=K1;const a=l=>{t?e.push(l):i(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&i(()=>{r(()=>{l.forEach(d=>{n(d)})})})};return{batch:l=>{let d;t++;try{d=l()}finally{t--,t||o()}return d},batchCalls:l=>(...d)=>{a(()=>{l(...d)})},schedule:a,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{i=l}}}var St=Q1(),$i,_r,Gi,Tp,Y1=(Tp=class extends xo{constructor(){super();we(this,$i,!0);we(this,_r);we(this,Gi);fe(this,Gi,t=>{if(!ci&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){$(this,_r)||this.setEventListener($(this,Gi))}onUnsubscribe(){var t;this.hasListeners()||((t=$(this,_r))==null||t.call(this),fe(this,_r,void 0))}setEventListener(t){var n;fe(this,Gi,t),(n=$(this,_r))==null||n.call(this),fe(this,_r,t(this.setOnline.bind(this)))}setOnline(t){$(this,$i)!==t&&(fe(this,$i,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return $(this,$i)}},$i=new WeakMap,_r=new WeakMap,Gi=new WeakMap,Tp),Ws=new Y1;function X1(e){return Math.min(1e3*2**e,3e4)}function eg(e){return(e??"online")==="online"?Ws.isOnline():!0}var mc=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function tg(e){let t=!1,n=0,r;const i=_c(),a=()=>i.status!=="pending",o=w=>{var O;if(!a()){const b=new mc(w);g(b),(O=e.onCancel)==null||O.call(e,b)}},l=()=>{t=!0},d=()=>{t=!1},h=()=>Dd.isFocused()&&(e.networkMode==="always"||Ws.isOnline())&&e.canRun(),_=()=>eg(e.networkMode)&&e.canRun(),y=w=>{a()||(r==null||r(),i.resolve(w))},g=w=>{a()||(r==null||r(),i.reject(w))},m=()=>new Promise(w=>{var O;r=b=>{(a()||h())&&w(b)},(O=e.onPause)==null||O.call(e)}).then(()=>{var w;r=void 0,a()||(w=e.onContinue)==null||w.call(e)}),C=()=>{if(a())return;let w;const O=n===0?e.initialPromise:void 0;try{w=O??e.fn()}catch(b){w=Promise.reject(b)}Promise.resolve(w).then(y).catch(b=>{var W;if(a())return;const E=e.retry??(ci?0:3),x=e.retryDelay??X1,T=typeof x=="function"?x(n,b):x,j=E===!0||typeof E=="number"&&n<E||typeof E=="function"&&E(n,b);if(t||!j){g(b);return}n++,(W=e.onFail)==null||W.call(e,n,b),$1(T).then(()=>h()?void 0:m()).then(()=>{t?g(b):C()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(r==null||r(),i),cancelRetry:l,continueRetry:d,canStart:_,start:()=>(_()?C():m().then(C),i)}}var Kr,Lp,ng=(Lp=class{constructor(){we(this,Kr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),dc(this.gcTime)&&fe(this,Kr,Gr.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(ci?1/0:5*60*1e3))}clearGcTimeout(){$(this,Kr)&&(Gr.clearTimeout($(this,Kr)),fe(this,Kr,void 0))}},Kr=new WeakMap,Lp),Qr,Hi,rn,Yr,ht,go,Xr,yn,zn,Pp,Z1=(Pp=class extends ng{constructor(t){super();we(this,yn);we(this,Qr);we(this,Hi);we(this,rn);we(this,Yr);we(this,ht);we(this,go);we(this,Xr);fe(this,Xr,!1),fe(this,go,t.defaultOptions),this.setOptions(t.options),this.observers=[],fe(this,Yr,t.client),fe(this,rn,$(this,Yr).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,fe(this,Qr,Wh(this.options)),this.state=t.state??$(this,Qr),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=$(this,ht))==null?void 0:t.promise}setOptions(t){if(this.options={...$(this,go),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=Wh(this.options);n.data!==void 0&&(this.setState(Hh(n.data,n.dataUpdatedAt)),fe(this,Qr,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&$(this,rn).remove(this)}setData(t,n){const r=pc(this.state.data,t,this.options);return De(this,yn,zn).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){De(this,yn,zn).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,i;const n=(r=$(this,ht))==null?void 0:r.promise;return(i=$(this,ht))==null||i.cancel(t),n?n.then(Vt).catch(Vt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState($(this,Qr))}isActive(){return this.observers.some(t=>an(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Md||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Pr(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Ym(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=$(this,ht))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=$(this,ht))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),$(this,rn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||($(this,ht)&&($(this,Xr)?$(this,ht).cancel({revert:!0}):$(this,ht).cancelRetry()),this.scheduleGc()),$(this,rn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||De(this,yn,zn).call(this,{type:"invalidate"})}async fetch(t,n){var d,h,_,y,g,m,C,w,O,b,E,x;if(this.state.fetchStatus!=="idle"&&((d=$(this,ht))==null?void 0:d.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if($(this,ht))return $(this,ht).continueRetry(),$(this,ht).promise}if(t&&this.setOptions(t),!this.options.queryFn){const T=this.observers.find(j=>j.options.queryFn);T&&this.setOptions(T.options)}const r=new AbortController,i=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>(fe(this,Xr,!0),r.signal)})},a=()=>{const T=Zm(this.options,n),W=(()=>{const B={client:$(this,Yr),queryKey:this.queryKey,meta:this.meta};return i(B),B})();return fe(this,Xr,!1),this.options.persister?this.options.persister(T,W,this):T(W)},l=(()=>{const T={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:$(this,Yr),state:this.state,fetchFn:a};return i(T),T})();(h=this.options.behavior)==null||h.onFetch(l,this),fe(this,Hi,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((_=l.fetchOptions)==null?void 0:_.meta))&&De(this,yn,zn).call(this,{type:"fetch",meta:(y=l.fetchOptions)==null?void 0:y.meta}),fe(this,ht,tg({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:T=>{T instanceof mc&&T.revert&&this.setState({...$(this,Hi),fetchStatus:"idle"}),r.abort()},onFail:(T,j)=>{De(this,yn,zn).call(this,{type:"failed",failureCount:T,error:j})},onPause:()=>{De(this,yn,zn).call(this,{type:"pause"})},onContinue:()=>{De(this,yn,zn).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const T=await $(this,ht).start();if(T===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(T),(m=(g=$(this,rn).config).onSuccess)==null||m.call(g,T,this),(w=(C=$(this,rn).config).onSettled)==null||w.call(C,T,this.state.error,this),T}catch(T){if(T instanceof mc){if(T.silent)return $(this,ht).promise;if(T.revert){if(this.state.data===void 0)throw T;return this.state.data}}throw De(this,yn,zn).call(this,{type:"error",error:T}),(b=(O=$(this,rn).config).onError)==null||b.call(O,T,this),(x=(E=$(this,rn).config).onSettled)==null||x.call(E,this.state.data,T,this),T}finally{this.scheduleGc()}}},Qr=new WeakMap,Hi=new WeakMap,rn=new WeakMap,Yr=new WeakMap,ht=new WeakMap,go=new WeakMap,Xr=new WeakMap,yn=new WeakSet,zn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...rg(r.data,this.options),fetchMeta:t.meta??null};case"success":const i={...r,...Hh(t.data,t.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return fe(this,Hi,t.manual?i:void 0),i;case"error":const a=t.error;return{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),St.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),$(this,rn).notify({query:this,type:"updated",action:t})})},Pp);function rg(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:eg(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Hh(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Wh(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Ft,Ie,yo,It,Zr,Wi,Hn,mr,vo,qi,Ki,Jr,ei,gr,Qi,Ve,Ia,gc,yc,vc,Sc,wc,Ec,bc,ig,Op,J1=(Op=class extends xo{constructor(t,n){super();we(this,Ve);we(this,Ft);we(this,Ie);we(this,yo);we(this,It);we(this,Zr);we(this,Wi);we(this,Hn);we(this,mr);we(this,vo);we(this,qi);we(this,Ki);we(this,Jr);we(this,ei);we(this,gr);we(this,Qi,new Set);this.options=n,fe(this,Ft,t),fe(this,mr,null),fe(this,Hn,_c()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&($(this,Ie).addObserver(this),qh($(this,Ie),this.options)?De(this,Ve,Ia).call(this):this.updateResult(),De(this,Ve,Sc).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ac($(this,Ie),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ac($(this,Ie),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,De(this,Ve,wc).call(this),De(this,Ve,Ec).call(this),$(this,Ie).removeObserver(this)}setOptions(t){const n=this.options,r=$(this,Ie);if(this.options=$(this,Ft).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof an(this.options.enabled,$(this,Ie))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");De(this,Ve,bc).call(this),$(this,Ie).setOptions(this.options),n._defaulted&&!fc(this.options,n)&&$(this,Ft).getQueryCache().notify({type:"observerOptionsUpdated",query:$(this,Ie),observer:this});const i=this.hasListeners();i&&Kh($(this,Ie),r,this.options,n)&&De(this,Ve,Ia).call(this),this.updateResult(),i&&($(this,Ie)!==r||an(this.options.enabled,$(this,Ie))!==an(n.enabled,$(this,Ie))||Pr(this.options.staleTime,$(this,Ie))!==Pr(n.staleTime,$(this,Ie)))&&De(this,Ve,gc).call(this);const a=De(this,Ve,yc).call(this);i&&($(this,Ie)!==r||an(this.options.enabled,$(this,Ie))!==an(n.enabled,$(this,Ie))||a!==$(this,gr))&&De(this,Ve,vc).call(this,a)}getOptimisticResult(t){const n=$(this,Ft).getQueryCache().build($(this,Ft),t),r=this.createResult(n,t);return tS(this,r)&&(fe(this,It,r),fe(this,Wi,this.options),fe(this,Zr,$(this,Ie).state)),r}getCurrentResult(){return $(this,It)}trackResult(t,n){return new Proxy(t,{get:(r,i)=>(this.trackProp(i),n==null||n(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&$(this,Hn).status==="pending"&&$(this,Hn).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,i))})}trackProp(t){$(this,Qi).add(t)}getCurrentQuery(){return $(this,Ie)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=$(this,Ft).defaultQueryOptions(t),r=$(this,Ft).getQueryCache().build($(this,Ft),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return De(this,Ve,Ia).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),$(this,It)))}createResult(t,n){var L;const r=$(this,Ie),i=this.options,a=$(this,It),o=$(this,Zr),l=$(this,Wi),h=t!==r?t.state:$(this,yo),{state:_}=t;let y={..._},g=!1,m;if(n._optimisticResults){const k=this.hasListeners(),M=!k&&qh(t,n),Y=k&&Kh(t,r,n,i);(M||Y)&&(y={...y,...rg(_.data,t.options)}),n._optimisticResults==="isRestoring"&&(y.fetchStatus="idle")}let{error:C,errorUpdatedAt:w,status:O}=y;m=y.data;let b=!1;if(n.placeholderData!==void 0&&m===void 0&&O==="pending"){let k;a!=null&&a.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(k=a.data,b=!0):k=typeof n.placeholderData=="function"?n.placeholderData((L=$(this,Ki))==null?void 0:L.state.data,$(this,Ki)):n.placeholderData,k!==void 0&&(O="success",m=pc(a==null?void 0:a.data,k,n),g=!0)}if(n.select&&m!==void 0&&!b)if(a&&m===(o==null?void 0:o.data)&&n.select===$(this,vo))m=$(this,qi);else try{fe(this,vo,n.select),m=n.select(m),m=pc(a==null?void 0:a.data,m,n),fe(this,qi,m),fe(this,mr,null)}catch(k){fe(this,mr,k)}$(this,mr)&&(C=$(this,mr),m=$(this,qi),w=Date.now(),O="error");const E=y.fetchStatus==="fetching",x=O==="pending",T=O==="error",j=x&&E,W=m!==void 0,R={status:O,fetchStatus:y.fetchStatus,isPending:x,isSuccess:O==="success",isError:T,isInitialLoading:j,isLoading:j,data:m,dataUpdatedAt:y.dataUpdatedAt,error:C,errorUpdatedAt:w,failureCount:y.fetchFailureCount,failureReason:y.fetchFailureReason,errorUpdateCount:y.errorUpdateCount,isFetched:y.dataUpdateCount>0||y.errorUpdateCount>0,isFetchedAfterMount:y.dataUpdateCount>h.dataUpdateCount||y.errorUpdateCount>h.errorUpdateCount,isFetching:E,isRefetching:E&&!x,isLoadingError:T&&!W,isPaused:y.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:T&&W,isStale:Id(t,n),refetch:this.refetch,promise:$(this,Hn),isEnabled:an(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const k=R.data!==void 0,M=R.status==="error"&&!k,Y=ne=>{M?ne.reject(R.error):k&&ne.resolve(R.data)},ie=()=>{const ne=fe(this,Hn,R.promise=_c());Y(ne)},Q=$(this,Hn);switch(Q.status){case"pending":t.queryHash===r.queryHash&&Y(Q);break;case"fulfilled":(M||R.data!==Q.value)&&ie();break;case"rejected":(!M||R.error!==Q.reason)&&ie();break}}return R}updateResult(){const t=$(this,It),n=this.createResult($(this,Ie),this.options);if(fe(this,Zr,$(this,Ie).state),fe(this,Wi,this.options),$(this,Zr).data!==void 0&&fe(this,Ki,$(this,Ie)),fc(n,t))return;fe(this,It,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:i}=this.options,a=typeof i=="function"?i():i;if(a==="all"||!a&&!$(this,Qi).size)return!0;const o=new Set(a??$(this,Qi));return this.options.throwOnError&&o.add("error"),Object.keys($(this,It)).some(l=>{const d=l;return $(this,It)[d]!==t[d]&&o.has(d)})};De(this,Ve,ig).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&De(this,Ve,Sc).call(this)}},Ft=new WeakMap,Ie=new WeakMap,yo=new WeakMap,It=new WeakMap,Zr=new WeakMap,Wi=new WeakMap,Hn=new WeakMap,mr=new WeakMap,vo=new WeakMap,qi=new WeakMap,Ki=new WeakMap,Jr=new WeakMap,ei=new WeakMap,gr=new WeakMap,Qi=new WeakMap,Ve=new WeakSet,Ia=function(t){De(this,Ve,bc).call(this);let n=$(this,Ie).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(Vt)),n},gc=function(){De(this,Ve,wc).call(this);const t=Pr(this.options.staleTime,$(this,Ie));if(ci||$(this,It).isStale||!dc(t))return;const r=Ym($(this,It).dataUpdatedAt,t)+1;fe(this,Jr,Gr.setTimeout(()=>{$(this,It).isStale||this.updateResult()},r))},yc=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval($(this,Ie)):this.options.refetchInterval)??!1},vc=function(t){De(this,Ve,Ec).call(this),fe(this,gr,t),!(ci||an(this.options.enabled,$(this,Ie))===!1||!dc($(this,gr))||$(this,gr)===0)&&fe(this,ei,Gr.setInterval(()=>{(this.options.refetchIntervalInBackground||Dd.isFocused())&&De(this,Ve,Ia).call(this)},$(this,gr)))},Sc=function(){De(this,Ve,gc).call(this),De(this,Ve,vc).call(this,De(this,Ve,yc).call(this))},wc=function(){$(this,Jr)&&(Gr.clearTimeout($(this,Jr)),fe(this,Jr,void 0))},Ec=function(){$(this,ei)&&(Gr.clearInterval($(this,ei)),fe(this,ei,void 0))},bc=function(){const t=$(this,Ft).getQueryCache().build($(this,Ft),this.options);if(t===$(this,Ie))return;const n=$(this,Ie);fe(this,Ie,t),fe(this,yo,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},ig=function(t){St.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n($(this,It))}),$(this,Ft).getQueryCache().notify({query:$(this,Ie),type:"observerResultsUpdated"})})},Op);function eS(e,t){return an(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function qh(e,t){return eS(e,t)||e.state.data!==void 0&&Ac(e,t,t.refetchOnMount)}function Ac(e,t,n){if(an(t.enabled,e)!==!1&&Pr(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&Id(e,t)}return!1}function Kh(e,t,n,r){return(e!==t||an(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&Id(e,n)}function Id(e,t){return an(t.enabled,e)!==!1&&e.isStaleByTime(Pr(t.staleTime,e))}function tS(e,t){return!fc(e.getCurrentResult(),t)}function Qh(e){return{onFetch:(t,n)=>{var _,y,g,m,C;const r=t.options,i=(g=(y=(_=t.fetchOptions)==null?void 0:_.meta)==null?void 0:y.fetchMore)==null?void 0:g.direction,a=((m=t.state.data)==null?void 0:m.pages)||[],o=((C=t.state.data)==null?void 0:C.pageParams)||[];let l={pages:[],pageParams:[]},d=0;const h=async()=>{let w=!1;const O=x=>{W1(x,()=>t.signal,()=>w=!0)},b=Zm(t.options,t.fetchOptions),E=async(x,T,j)=>{if(w)return Promise.reject();if(T==null&&x.pages.length)return Promise.resolve(x);const B=(()=>{const M={client:t.client,queryKey:t.queryKey,pageParam:T,direction:j?"backward":"forward",meta:t.options.meta};return O(M),M})(),R=await b(B),{maxPages:L}=t.options,k=j?H1:G1;return{pages:k(x.pages,R,L),pageParams:k(x.pageParams,T,L)}};if(i&&a.length){const x=i==="backward",T=x?nS:Yh,j={pages:a,pageParams:o},W=T(r,j);l=await E(j,W,x)}else{const x=e??a.length;do{const T=d===0?o[0]??r.initialPageParam:Yh(r,l);if(d>0&&T==null)break;l=await E(l,T),d++}while(d<x)}return l};t.options.persister?t.fetchFn=()=>{var w,O;return(O=(w=t.options).persister)==null?void 0:O.call(w,h,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=h}}}function Yh(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function nS(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var So,Pn,xt,ti,On,sr,Mp,rS=(Mp=class extends ng{constructor(t){super();we(this,On);we(this,So);we(this,Pn);we(this,xt);we(this,ti);fe(this,So,t.client),this.mutationId=t.mutationId,fe(this,xt,t.mutationCache),fe(this,Pn,[]),this.state=t.state||iS(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){$(this,Pn).includes(t)||($(this,Pn).push(t),this.clearGcTimeout(),$(this,xt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){fe(this,Pn,$(this,Pn).filter(n=>n!==t)),this.scheduleGc(),$(this,xt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){$(this,Pn).length||(this.state.status==="pending"?this.scheduleGc():$(this,xt).remove(this))}continue(){var t;return((t=$(this,ti))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,d,h,_,y,g,m,C,w,O,b,E,x,T,j,W,B;const n=()=>{De(this,On,sr).call(this,{type:"continue"})},r={client:$(this,So),meta:this.options.meta,mutationKey:this.options.mutationKey};fe(this,ti,tg({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(R,L)=>{De(this,On,sr).call(this,{type:"failed",failureCount:R,error:L})},onPause:()=>{De(this,On,sr).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>$(this,xt).canRun(this)}));const i=this.state.status==="pending",a=!$(this,ti).canStart();try{if(i)n();else{De(this,On,sr).call(this,{type:"pending",variables:t,isPaused:a}),$(this,xt).config.onMutate&&await $(this,xt).config.onMutate(t,this,r);const L=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,t,r));L!==this.state.context&&De(this,On,sr).call(this,{type:"pending",context:L,variables:t,isPaused:a})}const R=await $(this,ti).start();return await((h=(d=$(this,xt).config).onSuccess)==null?void 0:h.call(d,R,t,this.state.context,this,r)),await((y=(_=this.options).onSuccess)==null?void 0:y.call(_,R,t,this.state.context,r)),await((m=(g=$(this,xt).config).onSettled)==null?void 0:m.call(g,R,null,this.state.variables,this.state.context,this,r)),await((w=(C=this.options).onSettled)==null?void 0:w.call(C,R,null,t,this.state.context,r)),De(this,On,sr).call(this,{type:"success",data:R}),R}catch(R){try{await((b=(O=$(this,xt).config).onError)==null?void 0:b.call(O,R,t,this.state.context,this,r))}catch(L){Promise.reject(L)}try{await((x=(E=this.options).onError)==null?void 0:x.call(E,R,t,this.state.context,r))}catch(L){Promise.reject(L)}try{await((j=(T=$(this,xt).config).onSettled)==null?void 0:j.call(T,void 0,R,this.state.variables,this.state.context,this,r))}catch(L){Promise.reject(L)}try{await((B=(W=this.options).onSettled)==null?void 0:B.call(W,void 0,R,t,this.state.context,r))}catch(L){Promise.reject(L)}throw De(this,On,sr).call(this,{type:"error",error:R}),R}finally{$(this,xt).runNext(this)}}},So=new WeakMap,Pn=new WeakMap,xt=new WeakMap,ti=new WeakMap,On=new WeakSet,sr=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),St.batch(()=>{$(this,Pn).forEach(r=>{r.onMutationUpdate(t)}),$(this,xt).notify({mutation:this,type:"updated",action:t})})},Mp);function iS(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Wn,vn,wo,Dp,aS=(Dp=class extends xo{constructor(t={}){super();we(this,Wn);we(this,vn);we(this,wo);this.config=t,fe(this,Wn,new Set),fe(this,vn,new Map),fe(this,wo,0)}build(t,n,r){const i=new rS({client:t,mutationCache:this,mutationId:++No(this,wo)._,options:t.defaultMutationOptions(n),state:r});return this.add(i),i}add(t){$(this,Wn).add(t);const n=es(t);if(typeof n=="string"){const r=$(this,vn).get(n);r?r.push(t):$(this,vn).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if($(this,Wn).delete(t)){const n=es(t);if(typeof n=="string"){const r=$(this,vn).get(n);if(r)if(r.length>1){const i=r.indexOf(t);i!==-1&&r.splice(i,1)}else r[0]===t&&$(this,vn).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=es(t);if(typeof n=="string"){const r=$(this,vn).get(n),i=r==null?void 0:r.find(a=>a.state.status==="pending");return!i||i===t}else return!0}runNext(t){var r;const n=es(t);if(typeof n=="string"){const i=(r=$(this,vn).get(n))==null?void 0:r.find(a=>a!==t&&a.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){St.batch(()=>{$(this,Wn).forEach(t=>{this.notify({type:"removed",mutation:t})}),$(this,Wn).clear(),$(this,vn).clear()})}getAll(){return Array.from($(this,Wn))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>zh(n,r))}findAll(t={}){return this.getAll().filter(n=>zh(t,n))}notify(t){St.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return St.batch(()=>Promise.all(t.map(n=>n.continue().catch(Vt))))}},Wn=new WeakMap,vn=new WeakMap,wo=new WeakMap,Dp);function es(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Mn,Ip,oS=(Ip=class extends xo{constructor(t={}){super();we(this,Mn);this.config=t,fe(this,Mn,new Map)}build(t,n,r){const i=n.queryKey,a=n.queryHash??Od(i,n);let o=this.get(a);return o||(o=new Z1({client:t,queryKey:i,queryHash:a,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(i)}),this.add(o)),o}add(t){$(this,Mn).has(t.queryHash)||($(this,Mn).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=$(this,Mn).get(t.queryHash);n&&(t.destroy(),n===t&&$(this,Mn).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){St.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return $(this,Mn).get(t)}getAll(){return[...$(this,Mn).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Vh(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>Vh(t,r)):n}notify(t){St.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){St.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){St.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Mn=new WeakMap,Ip),et,yr,vr,Yi,Xi,Sr,Zi,Ji,Np,sS=(Np=class{constructor(e={}){we(this,et);we(this,yr);we(this,vr);we(this,Yi);we(this,Xi);we(this,Sr);we(this,Zi);we(this,Ji);fe(this,et,e.queryCache||new oS),fe(this,yr,e.mutationCache||new aS),fe(this,vr,e.defaultOptions||{}),fe(this,Yi,new Map),fe(this,Xi,new Map),fe(this,Sr,0)}mount(){No(this,Sr)._++,$(this,Sr)===1&&(fe(this,Zi,Dd.subscribe(async e=>{e&&(await this.resumePausedMutations(),$(this,et).onFocus())})),fe(this,Ji,Ws.subscribe(async e=>{e&&(await this.resumePausedMutations(),$(this,et).onOnline())})))}unmount(){var e,t;No(this,Sr)._--,$(this,Sr)===0&&((e=$(this,Zi))==null||e.call(this),fe(this,Zi,void 0),(t=$(this,Ji))==null||t.call(this),fe(this,Ji,void 0))}isFetching(e){return $(this,et).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return $(this,yr).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=$(this,et).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=$(this,et).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(Pr(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return $(this,et).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),i=$(this,et).get(r.queryHash),a=i==null?void 0:i.state.data,o=V1(t,a);if(o!==void 0)return $(this,et).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return St.batch(()=>$(this,et).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=$(this,et).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=$(this,et);St.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=$(this,et);return St.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=St.batch(()=>$(this,et).findAll(e).map(i=>i.cancel(n)));return Promise.all(r).then(Vt).catch(Vt)}invalidateQueries(e,t={}){return St.batch(()=>($(this,et).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=St.batch(()=>$(this,et).findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,n);return n.throwOnError||(a=a.catch(Vt)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(Vt)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=$(this,et).build(this,t);return n.isStaleByTime(Pr(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Vt).catch(Vt)}fetchInfiniteQuery(e){return e.behavior=Qh(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Vt).catch(Vt)}ensureInfiniteQueryData(e){return e.behavior=Qh(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Ws.isOnline()?$(this,yr).resumePausedMutations():Promise.resolve()}getQueryCache(){return $(this,et)}getMutationCache(){return $(this,yr)}getDefaultOptions(){return $(this,vr)}setDefaultOptions(e){fe(this,vr,e)}setQueryDefaults(e,t){$(this,Yi).set(co(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...$(this,Yi).values()],n={};return t.forEach(r=>{fo(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){$(this,Xi).set(co(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...$(this,Xi).values()],n={};return t.forEach(r=>{fo(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...$(this,vr).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Od(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Md&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...$(this,vr).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){$(this,et).clear(),$(this,yr).clear()}},et=new WeakMap,yr=new WeakMap,vr=new WeakMap,Yi=new WeakMap,Xi=new WeakMap,Sr=new WeakMap,Zi=new WeakMap,Ji=new WeakMap,Np),ag=q.createContext(void 0),og=e=>{const t=q.useContext(ag);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},lS=({client:e,children:t})=>(q.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),V.jsx(ag.Provider,{value:e,children:t})),sg=q.createContext(!1),uS=()=>q.useContext(sg);sg.Provider;function cS(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var dS=q.createContext(cS()),fS=()=>q.useContext(dS),hS=(e,t,n)=>{const r=n!=null&&n.state.error&&typeof e.throwOnError=="function"?Jm(e.throwOnError,[n.state.error,n]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||r)&&(t.isReset()||(e.retryOnMount=!1))},pS=e=>{q.useEffect(()=>{e.clearReset()},[e])},_S=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(i&&e.data===void 0||Jm(n,[e.error,r])),mS=e=>{if(e.suspense){const n=i=>i==="static"?i:Math.max(i??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...i)=>n(r(...i)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},gS=(e,t)=>e.isLoading&&e.isFetching&&!t,yS=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Xh=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function vS(e,t,n){var g,m,C,w;const r=uS(),i=fS(),a=og(),o=a.defaultQueryOptions(e);(m=(g=a.getDefaultOptions().queries)==null?void 0:g._experimental_beforeQuery)==null||m.call(g,o);const l=a.getQueryCache().get(o.queryHash);o._optimisticResults=r?"isRestoring":"optimistic",mS(o),hS(o,i,l),pS(i);const d=!a.getQueryCache().get(o.queryHash),[h]=q.useState(()=>new t(a,o)),_=h.getOptimisticResult(o),y=!r&&e.subscribed!==!1;if(q.useSyncExternalStore(q.useCallback(O=>{const b=y?h.subscribe(St.batchCalls(O)):Vt;return h.updateResult(),b},[h,y]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),q.useEffect(()=>{h.setOptions(o)},[o,h]),yS(o,_))throw Xh(o,h,i);if(_S({result:_,errorResetBoundary:i,throwOnError:o.throwOnError,query:l,suspense:o.suspense}))throw _.error;if((w=(C=a.getDefaultOptions().queries)==null?void 0:C._experimental_afterQuery)==null||w.call(C,o,_),o.experimental_prefetchInRender&&!ci&&gS(_,r)){const O=d?Xh(o,h,i):l==null?void 0:l.promise;O==null||O.catch(Vt).finally(()=>{h.updateResult()})}return o.notifyOnChangeProps?_:h.trackResult(_)}function lg(e,t){return vS(e,J1)}var SS=function(){return null};/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Zh="popstate";function wS(e={}){function t(i,a){let{pathname:o="/",search:l="",hash:d=""}=_i(i.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),kc("",{pathname:o,search:l,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let o=i.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let d=i.location.href,h=d.indexOf("#");l=h===-1?d:d.slice(0,h)}return l+"#"+(typeof a=="string"?a:ho(a))}function r(i,a){Jt(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return bS(t,n,r,e)}function Qe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Jt(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function ES(){return Math.random().toString(36).substring(2,10)}function Jh(e,t){return{usr:e.state,key:e.key,idx:t}}function kc(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?_i(t):t,state:n,key:t&&t.key||r||ES()}}function ho({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function _i(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function bS(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,l="POP",d=null,h=_();h==null&&(h=0,o.replaceState({...o.state,idx:h},""));function _(){return(o.state||{idx:null}).idx}function y(){l="POP";let O=_(),b=O==null?null:O-h;h=O,d&&d({action:l,location:w.location,delta:b})}function g(O,b){l="PUSH";let E=kc(w.location,O,b);n&&n(E,O),h=_()+1;let x=Jh(E,h),T=w.createHref(E);try{o.pushState(x,"",T)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;i.location.assign(T)}a&&d&&d({action:l,location:w.location,delta:1})}function m(O,b){l="REPLACE";let E=kc(w.location,O,b);n&&n(E,O),h=_();let x=Jh(E,h),T=w.createHref(E);o.replaceState(x,"",T),a&&d&&d({action:l,location:w.location,delta:0})}function C(O){return AS(O)}let w={get action(){return l},get location(){return e(i,o)},listen(O){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(Zh,y),d=O,()=>{i.removeEventListener(Zh,y),d=null}},createHref(O){return t(i,O)},createURL:C,encodeLocation(O){let b=C(O);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:g,replace:m,go(O){return o.go(O)}};return w}function AS(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Qe(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:ho(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function ug(e,t,n="/"){return kS(e,t,n,!1)}function kS(e,t,n,r){let i=typeof t=="string"?_i(t):t,a=tr(i.pathname||"/",n);if(a==null)return null;let o=cg(e);RS(o);let l=null;for(let d=0;l==null&&d<o.length;++d){let h=BS(a);l=IS(o[d],h,r)}return l}function cg(e,t=[],n=[],r="",i=!1){let a=(o,l,d=i,h)=>{let _={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(r)&&d)return;Qe(_.relativePath.startsWith(r),`Absolute route path "${_.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(r.length)}let y=Yn([r,_.relativePath]),g=n.concat(_);o.children&&o.children.length>0&&(Qe(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),cg(o.children,t,g,y,d)),!(o.path==null&&!o.index)&&t.push({path:y,score:MS(y,o.index),routesMeta:g})};return e.forEach((o,l)=>{var d;if(o.path===""||!((d=o.path)!=null&&d.includes("?")))a(o,l);else for(let h of dg(o.path))a(o,l,!0,h)}),t}function dg(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=dg(r.join("/")),l=[];return l.push(...o.map(d=>d===""?a:[a,d].join("/"))),i&&l.push(...o),l.map(d=>e.startsWith("/")&&d===""?"/":d)}function RS(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:DS(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var xS=/^:[\w-]+$/,CS=3,TS=2,LS=1,PS=10,OS=-2,ep=e=>e==="*";function MS(e,t){let n=e.split("/"),r=n.length;return n.some(ep)&&(r+=OS),t&&(r+=TS),n.filter(i=>!ep(i)).reduce((i,a)=>i+(xS.test(a)?CS:a===""?LS:PS),r)}function DS(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function IS(e,t,n=!1){let{routesMeta:r}=e,i={},a="/",o=[];for(let l=0;l<r.length;++l){let d=r[l],h=l===r.length-1,_=a==="/"?t:t.slice(a.length)||"/",y=qs({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},_),g=d.route;if(!y&&h&&n&&!r[r.length-1].route.index&&(y=qs({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},_)),!y)return null;Object.assign(i,y.params),o.push({params:i,pathname:Yn([a,y.pathname]),pathnameBase:VS(Yn([a,y.pathnameBase])),route:g}),y.pathnameBase!=="/"&&(a=Yn([a,y.pathnameBase]))}return o}function qs(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=NS(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((h,{paramName:_,isOptional:y},g)=>{if(_==="*"){let C=l[g]||"";o=a.slice(0,a.length-C.length).replace(/(.)\/+$/,"$1")}const m=l[g];return y&&!m?h[_]=void 0:h[_]=(m||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:o,pattern:e}}function NS(e,t=!1,n=!0){Jt(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,d)=>(r.push({paramName:l,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function BS(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Jt(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function tr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}var US=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function jS(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?_i(e):e,a;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?a=tp(n.substring(1),"/"):a=tp(n,t)):a=t,{pathname:a,search:zS(r),hash:$S(i)}}function tp(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function cu(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function FS(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Nd(e){let t=FS(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function Bd(e,t,n,r=!1){let i;typeof e=="string"?i=_i(e):(i={...e},Qe(!i.pathname||!i.pathname.includes("?"),cu("?","pathname","search",i)),Qe(!i.pathname||!i.pathname.includes("#"),cu("#","pathname","hash",i)),Qe(!i.search||!i.search.includes("#"),cu("#","search","hash",i)));let a=e===""||i.pathname==="",o=a?"/":i.pathname,l;if(o==null)l=n;else{let y=t.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),y-=1;i.pathname=g.join("/")}l=y>=0?t[y]:"/"}let d=jS(i,l),h=o&&o!=="/"&&o.endsWith("/"),_=(a||o===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(h||_)&&(d.pathname+="/"),d}var Yn=e=>e.join("/").replace(/\/\/+/g,"/"),VS=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),zS=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,$S=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,GS=class{constructor(e,t,n,r=!1){this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function HS(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function WS(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var fg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function hg(e,t){let n=e;if(typeof n!="string"||!US.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(fg)try{let a=new URL(window.location.href),o=n.startsWith("//")?new URL(a.protocol+n):new URL(n),l=tr(o.pathname,t);o.origin===a.origin&&l!=null?n=l+o.search+o.hash:i=!0}catch{Jt(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var pg=["POST","PUT","PATCH","DELETE"];new Set(pg);var qS=["GET",...pg];new Set(qS);var fa=q.createContext(null);fa.displayName="DataRouter";var bl=q.createContext(null);bl.displayName="DataRouterState";var KS=q.createContext(!1),_g=q.createContext({isTransitioning:!1});_g.displayName="ViewTransition";var QS=q.createContext(new Map);QS.displayName="Fetchers";var YS=q.createContext(null);YS.displayName="Await";var nn=q.createContext(null);nn.displayName="Navigation";var Co=q.createContext(null);Co.displayName="Location";var pn=q.createContext({outlet:null,matches:[],isDataRoute:!1});pn.displayName="Route";var Ud=q.createContext(null);Ud.displayName="RouteError";var mg="REACT_ROUTER_ERROR",XS="REDIRECT",ZS="ROUTE_ERROR_RESPONSE";function JS(e){if(e.startsWith(`${mg}:${XS}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function ew(e){if(e.startsWith(`${mg}:${ZS}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new GS(t.status,t.statusText,t.data)}catch{}}function tw(e,{relative:t}={}){Qe(ha(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=q.useContext(nn),{hash:i,pathname:a,search:o}=To(e,{relative:t}),l=a;return n!=="/"&&(l=a==="/"?n:Yn([n,a])),r.createHref({pathname:l,search:o,hash:i})}function ha(){return q.useContext(Co)!=null}function Bn(){return Qe(ha(),"useLocation() may be used only in the context of a <Router> component."),q.useContext(Co).location}var gg="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function yg(e){q.useContext(nn).static||q.useLayoutEffect(e)}function jd(){let{isDataRoute:e}=q.useContext(pn);return e?gw():nw()}function nw(){Qe(ha(),"useNavigate() may be used only in the context of a <Router> component.");let e=q.useContext(fa),{basename:t,navigator:n}=q.useContext(nn),{matches:r}=q.useContext(pn),{pathname:i}=Bn(),a=JSON.stringify(Nd(r)),o=q.useRef(!1);return yg(()=>{o.current=!0}),q.useCallback((d,h={})=>{if(Jt(o.current,gg),!o.current)return;if(typeof d=="number"){n.go(d);return}let _=Bd(d,JSON.parse(a),i,h.relative==="path");e==null&&t!=="/"&&(_.pathname=_.pathname==="/"?t:Yn([t,_.pathname])),(h.replace?n.replace:n.push)(_,h.state,h)},[t,n,a,i,e])}var rw=q.createContext(null);function iw(e){let t=q.useContext(pn).outlet;return q.useMemo(()=>t&&q.createElement(rw.Provider,{value:e},t),[t,e])}function aw(){let{matches:e}=q.useContext(pn),t=e[e.length-1];return t?t.params:{}}function To(e,{relative:t}={}){let{matches:n}=q.useContext(pn),{pathname:r}=Bn(),i=JSON.stringify(Nd(n));return q.useMemo(()=>Bd(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function ow(e,t){return vg(e,t)}function vg(e,t,n,r,i){var E;Qe(ha(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=q.useContext(nn),{matches:o}=q.useContext(pn),l=o[o.length-1],d=l?l.params:{},h=l?l.pathname:"/",_=l?l.pathnameBase:"/",y=l&&l.route;{let x=y&&y.path||"";wg(h,!y||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let g=Bn(),m;if(t){let x=typeof t=="string"?_i(t):t;Qe(_==="/"||((E=x.pathname)==null?void 0:E.startsWith(_)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${x.pathname}" was given in the \`location\` prop.`),m=x}else m=g;let C=m.pathname||"/",w=C;if(_!=="/"){let x=_.replace(/^\//,"").split("/");w="/"+C.replace(/^\//,"").split("/").slice(x.length).join("/")}let O=ug(e,{pathname:w});Jt(y||O!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Jt(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=dw(O&&O.map(x=>Object.assign({},x,{params:Object.assign({},d,x.params),pathname:Yn([_,a.encodeLocation?a.encodeLocation(x.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?_:Yn([_,a.encodeLocation?a.encodeLocation(x.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:x.pathnameBase])})),o,n,r,i);return t&&b?q.createElement(Co.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},b):b}function sw(){let e=mw(),t=HS(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=q.createElement(q.Fragment,null,q.createElement("p",null," Hey developer "),q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",q.createElement("code",{style:a},"ErrorBoundary")," or"," ",q.createElement("code",{style:a},"errorElement")," prop on your route.")),q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},t),n?q.createElement("pre",{style:i},n):null,o)}var lw=q.createElement(sw,null),Sg=class extends q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const n=ew(e.digest);n&&(e=n)}let t=e!==void 0?q.createElement(pn.Provider,{value:this.props.routeContext},q.createElement(Ud.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?q.createElement(uw,{error:e},t):t}};Sg.contextType=KS;var du=new WeakMap;function uw({children:e,error:t}){let{basename:n}=q.useContext(nn);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let r=JS(t.digest);if(r){let i=du.get(t);if(i)throw i;let a=hg(r.location,n);if(fg&&!du.get(t))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw du.set(t,o),o}return q.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return e}function cw({routeContext:e,match:t,children:n}){let r=q.useContext(fa);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),q.createElement(pn.Provider,{value:e},n)}function dw(e,t=[],n=null,r=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,o=n==null?void 0:n.errors;if(o!=null){let _=a.findIndex(y=>y.route.id&&(o==null?void 0:o[y.route.id])!==void 0);Qe(_>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,_+1))}let l=!1,d=-1;if(n)for(let _=0;_<a.length;_++){let y=a[_];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=_),y.route.id){let{loaderData:g,errors:m}=n,C=y.route.loader&&!g.hasOwnProperty(y.route.id)&&(!m||m[y.route.id]===void 0);if(y.route.lazy||C){l=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}let h=n&&r?(_,y)=>{var g,m;r(_,{location:n.location,params:((m=(g=n.matches)==null?void 0:g[0])==null?void 0:m.params)??{},unstable_pattern:WS(n.matches),errorInfo:y})}:void 0;return a.reduceRight((_,y,g)=>{let m,C=!1,w=null,O=null;n&&(m=o&&y.route.id?o[y.route.id]:void 0,w=y.route.errorElement||lw,l&&(d<0&&g===0?(wg("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),C=!0,O=null):d===g&&(C=!0,O=y.route.hydrateFallbackElement||null)));let b=t.concat(a.slice(0,g+1)),E=()=>{let x;return m?x=w:C?x=O:y.route.Component?x=q.createElement(y.route.Component,null):y.route.element?x=y.route.element:x=_,q.createElement(cw,{match:y,routeContext:{outlet:_,matches:b,isDataRoute:n!=null},children:x})};return n&&(y.route.ErrorBoundary||y.route.errorElement||g===0)?q.createElement(Sg,{location:n.location,revalidation:n.revalidation,component:w,error:m,children:E(),routeContext:{outlet:null,matches:b,isDataRoute:!0},onError:h}):E()},null)}function Fd(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fw(e){let t=q.useContext(fa);return Qe(t,Fd(e)),t}function hw(e){let t=q.useContext(bl);return Qe(t,Fd(e)),t}function pw(e){let t=q.useContext(pn);return Qe(t,Fd(e)),t}function Vd(e){let t=pw(e),n=t.matches[t.matches.length-1];return Qe(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function _w(){return Vd("useRouteId")}function mw(){var r;let e=q.useContext(Ud),t=hw("useRouteError"),n=Vd("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function gw(){let{router:e}=fw("useNavigate"),t=Vd("useNavigate"),n=q.useRef(!1);return yg(()=>{n.current=!0}),q.useCallback(async(i,a={})=>{Jt(n.current,gg),n.current&&(typeof i=="number"?await e.navigate(i):await e.navigate(i,{fromRouteId:t,...a}))},[e,t])}var np={};function wg(e,t,n){!t&&!np[e]&&(np[e]=!0,Jt(!1,n))}q.memo(yw);function yw({routes:e,future:t,state:n,onError:r}){return vg(e,void 0,n,r,t)}function vw({to:e,replace:t,state:n,relative:r}){Qe(ha(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=q.useContext(nn);Jt(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=q.useContext(pn),{pathname:o}=Bn(),l=jd(),d=Bd(e,Nd(a),o,r==="path"),h=JSON.stringify(d);return q.useEffect(()=>{l(JSON.parse(h),{replace:t,state:n,relative:r})},[l,h,r,t,n]),null}function Sw(e){return iw(e.context)}function Dt(e){Qe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ww({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:a=!1,unstable_useTransitions:o}){Qe(!ha(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),d=q.useMemo(()=>({basename:l,navigator:i,static:a,unstable_useTransitions:o,future:{}}),[l,i,a,o]);typeof n=="string"&&(n=_i(n));let{pathname:h="/",search:_="",hash:y="",state:g=null,key:m="default"}=n,C=q.useMemo(()=>{let w=tr(h,l);return w==null?null:{location:{pathname:w,search:_,hash:y,state:g,key:m},navigationType:r}},[l,h,_,y,g,m,r]);return Jt(C!=null,`<Router basename="${l}"> is not able to match the URL "${h}${_}${y}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:q.createElement(nn.Provider,{value:d},q.createElement(Co.Provider,{children:t,value:C}))}function Ew({children:e,location:t}){return ow(Rc(e),t)}function Rc(e,t=[]){let n=[];return q.Children.forEach(e,(r,i)=>{if(!q.isValidElement(r))return;let a=[...t,i];if(r.type===q.Fragment){n.push.apply(n,Rc(r.props.children,a));return}Qe(r.type===Dt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Qe(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Rc(r.props.children,a)),n.push(o)}),n}var ys="get",vs="application/x-www-form-urlencoded";function Al(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function bw(e){return Al(e)&&e.tagName.toLowerCase()==="button"}function Aw(e){return Al(e)&&e.tagName.toLowerCase()==="form"}function kw(e){return Al(e)&&e.tagName.toLowerCase()==="input"}function Rw(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function xw(e,t){return e.button===0&&(!t||t==="_self")&&!Rw(e)}function xc(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function Cw(e,t){let n=xc(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(a=>{n.append(i,a)})}),n}var ts=null;function Tw(){if(ts===null)try{new FormData(document.createElement("form"),0),ts=!1}catch{ts=!0}return ts}var Lw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function fu(e){return e!=null&&!Lw.has(e)?(Jt(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vs}"`),null):e}function Pw(e,t){let n,r,i,a,o;if(Aw(e)){let l=e.getAttribute("action");r=l?tr(l,t):null,n=e.getAttribute("method")||ys,i=fu(e.getAttribute("enctype"))||vs,a=new FormData(e)}else if(bw(e)||kw(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||l.getAttribute("action");if(r=d?tr(d,t):null,n=e.getAttribute("formmethod")||l.getAttribute("method")||ys,i=fu(e.getAttribute("formenctype"))||fu(l.getAttribute("enctype"))||vs,a=new FormData(l,e),!Tw()){let{name:h,type:_,value:y}=e;if(_==="image"){let g=h?`${h}.`:"";a.append(`${g}x`,"0"),a.append(`${g}y`,"0")}else h&&a.append(h,y)}}else{if(Al(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ys,r=null,i=vs,o=e}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function zd(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ow(e,t,n,r){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:t&&tr(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function Mw(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Dw(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Iw(e,t,n){let r=await Promise.all(e.map(async i=>{let a=t.routes[i.route.id];if(a){let o=await Mw(a,n);return o.links?o.links():[]}return[]}));return jw(r.flat(1).filter(Dw).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function rp(e,t,n,r,i,a){let o=(d,h)=>n[h]?d.route.id!==n[h].route.id:!0,l=(d,h)=>{var _;return n[h].pathname!==d.pathname||((_=n[h].route.path)==null?void 0:_.endsWith("*"))&&n[h].params["*"]!==d.params["*"]};return a==="assets"?t.filter((d,h)=>o(d,h)||l(d,h)):a==="data"?t.filter((d,h)=>{var y;let _=r.routes[d.route.id];if(!_||!_.hasLoader)return!1;if(o(d,h)||l(d,h))return!0;if(d.route.shouldRevalidate){let g=d.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((y=n[0])==null?void 0:y.params)||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function Nw(e,t,{includeHydrateFallback:n}={}){return Bw(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function Bw(e){return[...new Set(e)]}function Uw(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function jw(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let a=JSON.stringify(Uw(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function Eg(){let e=q.useContext(fa);return zd(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Fw(){let e=q.useContext(bl);return zd(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var $d=q.createContext(void 0);$d.displayName="FrameworkContext";function bg(){let e=q.useContext($d);return zd(e,"You must render this element inside a <HydratedRouter> element"),e}function Vw(e,t){let n=q.useContext($d),[r,i]=q.useState(!1),[a,o]=q.useState(!1),{onFocus:l,onBlur:d,onMouseEnter:h,onMouseLeave:_,onTouchStart:y}=t,g=q.useRef(null);q.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let w=b=>{b.forEach(E=>{o(E.isIntersecting)})},O=new IntersectionObserver(w,{threshold:.5});return g.current&&O.observe(g.current),()=>{O.disconnect()}}},[e]),q.useEffect(()=>{if(r){let w=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(w)}}},[r]);let m=()=>{i(!0)},C=()=>{i(!1),o(!1)};return n?e!=="intent"?[a,g,{}]:[a,g,{onFocus:La(l,m),onBlur:La(d,C),onMouseEnter:La(h,m),onMouseLeave:La(_,C),onTouchStart:La(y,m)}]:[!1,g,{}]}function La(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function zw({page:e,...t}){let{router:n}=Eg(),r=q.useMemo(()=>ug(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?q.createElement(Gw,{page:e,matches:r,...t}):null}function $w(e){let{manifest:t,routeModules:n}=bg(),[r,i]=q.useState([]);return q.useEffect(()=>{let a=!1;return Iw(e,t,n).then(o=>{a||i(o)}),()=>{a=!0}},[e,t,n]),r}function Gw({page:e,matches:t,...n}){let r=Bn(),{future:i,manifest:a,routeModules:o}=bg(),{basename:l}=Eg(),{loaderData:d,matches:h}=Fw(),_=q.useMemo(()=>rp(e,t,h,a,r,"data"),[e,t,h,a,r]),y=q.useMemo(()=>rp(e,t,h,a,r,"assets"),[e,t,h,a,r]),g=q.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let w=new Set,O=!1;if(t.forEach(E=>{var T;let x=a.routes[E.route.id];!x||!x.hasLoader||(!_.some(j=>j.route.id===E.route.id)&&E.route.id in d&&((T=o[E.route.id])!=null&&T.shouldRevalidate)||x.hasClientLoader?O=!0:w.add(E.route.id))}),w.size===0)return[];let b=Ow(e,l,i.unstable_trailingSlashAwareDataRequests,"data");return O&&w.size>0&&b.searchParams.set("_routes",t.filter(E=>w.has(E.route.id)).map(E=>E.route.id).join(",")),[b.pathname+b.search]},[l,i.unstable_trailingSlashAwareDataRequests,d,r,a,_,t,e,o]),m=q.useMemo(()=>Nw(y,a),[y,a]),C=$w(y);return q.createElement(q.Fragment,null,g.map(w=>q.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),m.map(w=>q.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),C.map(({key:w,link:O})=>q.createElement("link",{key:w,nonce:n.nonce,...O,crossOrigin:O.crossOrigin??n.crossOrigin})))}function Hw(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var Ww=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ww&&(window.__reactRouterVersion="7.13.0")}catch{}function qw({basename:e,children:t,unstable_useTransitions:n,window:r}){let i=q.useRef();i.current==null&&(i.current=wS({window:r,v5Compat:!0}));let a=i.current,[o,l]=q.useState({action:a.action,location:a.location}),d=q.useCallback(h=>{n===!1?l(h):q.startTransition(()=>l(h))},[n]);return q.useLayoutEffect(()=>a.listen(d),[a,d]),q.createElement(ww,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a,unstable_useTransitions:n})}var Ag=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,di=q.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:l,target:d,to:h,preventScrollReset:_,viewTransition:y,unstable_defaultShouldRevalidate:g,...m},C){let{basename:w,unstable_useTransitions:O}=q.useContext(nn),b=typeof h=="string"&&Ag.test(h),E=hg(h,w);h=E.to;let x=tw(h,{relative:i}),[T,j,W]=Vw(r,m),B=Xw(h,{replace:o,state:l,target:d,preventScrollReset:_,relative:i,viewTransition:y,unstable_defaultShouldRevalidate:g,unstable_useTransitions:O});function R(k){t&&t(k),k.defaultPrevented||B(k)}let L=q.createElement("a",{...m,...W,href:E.absoluteURL||x,onClick:E.isExternal||a?t:R,ref:Hw(C,j),target:d,"data-discover":!b&&n==="render"?"true":void 0});return T&&!b?q.createElement(q.Fragment,null,L,q.createElement(zw,{page:x})):L});di.displayName="Link";var Kw=q.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:l,children:d,...h},_){let y=To(o,{relative:h.relative}),g=Bn(),m=q.useContext(bl),{navigator:C,basename:w}=q.useContext(nn),O=m!=null&&rE(y)&&l===!0,b=C.encodeLocation?C.encodeLocation(y).pathname:y.pathname,E=g.pathname,x=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;n||(E=E.toLowerCase(),x=x?x.toLowerCase():null,b=b.toLowerCase()),x&&w&&(x=tr(x,w)||x);const T=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let j=E===b||!i&&E.startsWith(b)&&E.charAt(T)==="/",W=x!=null&&(x===b||!i&&x.startsWith(b)&&x.charAt(b.length)==="/"),B={isActive:j,isPending:W,isTransitioning:O},R=j?t:void 0,L;typeof r=="function"?L=r(B):L=[r,j?"active":null,W?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let k=typeof a=="function"?a(B):a;return q.createElement(di,{...h,"aria-current":R,className:L,ref:_,style:k,to:o,viewTransition:l},typeof d=="function"?d(B):d)});Kw.displayName="NavLink";var Qw=q.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:a,method:o=ys,action:l,onSubmit:d,relative:h,preventScrollReset:_,viewTransition:y,unstable_defaultShouldRevalidate:g,...m},C)=>{let{unstable_useTransitions:w}=q.useContext(nn),O=tE(),b=nE(l,{relative:h}),E=o.toLowerCase()==="get"?"get":"post",x=typeof l=="string"&&Ag.test(l),T=j=>{if(d&&d(j),j.defaultPrevented)return;j.preventDefault();let W=j.nativeEvent.submitter,B=(W==null?void 0:W.getAttribute("formmethod"))||o,R=()=>O(W||j.currentTarget,{fetcherKey:t,method:B,navigate:n,replace:i,state:a,relative:h,preventScrollReset:_,viewTransition:y,unstable_defaultShouldRevalidate:g});w&&n!==!1?q.startTransition(()=>R()):R()};return q.createElement("form",{ref:C,method:E,action:b,onSubmit:r?d:T,...m,"data-discover":!x&&e==="render"?"true":void 0})});Qw.displayName="Form";function Yw(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function kg(e){let t=q.useContext(fa);return Qe(t,Yw(e)),t}function Xw(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:o,unstable_defaultShouldRevalidate:l,unstable_useTransitions:d}={}){let h=jd(),_=Bn(),y=To(e,{relative:a});return q.useCallback(g=>{if(xw(g,t)){g.preventDefault();let m=n!==void 0?n:ho(_)===ho(y),C=()=>h(e,{replace:m,state:r,preventScrollReset:i,relative:a,viewTransition:o,unstable_defaultShouldRevalidate:l});d?q.startTransition(()=>C()):C()}},[_,h,y,n,r,t,e,i,a,o,l,d])}function Zw(e){Jt(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=q.useRef(xc(e)),n=q.useRef(!1),r=Bn(),i=q.useMemo(()=>Cw(r.search,n.current?null:t.current),[r.search]),a=jd(),o=q.useCallback((l,d)=>{const h=xc(typeof l=="function"?l(new URLSearchParams(i)):l);n.current=!0,a("?"+h,d)},[a,i]);return[i,o]}var Jw=0,eE=()=>`__${String(++Jw)}__`;function tE(){let{router:e}=kg("useSubmit"),{basename:t}=q.useContext(nn),n=_w(),r=e.fetch,i=e.navigate;return q.useCallback(async(a,o={})=>{let{action:l,method:d,encType:h,formData:_,body:y}=Pw(a,t);if(o.navigate===!1){let g=o.fetcherKey||eE();await r(g,n,o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:_,body:y,formMethod:o.method||d,formEncType:o.encType||h,flushSync:o.flushSync})}else await i(o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:_,body:y,formMethod:o.method||d,formEncType:o.encType||h,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,i,t,n])}function nE(e,{relative:t}={}){let{basename:n}=q.useContext(nn),r=q.useContext(pn);Qe(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...To(e||".",{relative:t})},o=Bn();if(e==null){a.search=o.search;let l=new URLSearchParams(a.search),d=l.getAll("index");if(d.some(_=>_==="")){l.delete("index"),d.filter(y=>y).forEach(y=>l.append("index",y));let _=l.toString();a.search=_?`?${_}`:""}}return(!e||e===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Yn([n,a.pathname])),ho(a)}function rE(e,{relative:t}={}){let n=q.useContext(_g);Qe(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=kg("useViewTransitionState"),i=To(e,{relative:t});if(!n.isTransitioning)return!1;let a=tr(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=tr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return qs(i.pathname,o)!=null||qs(i.pathname,a)!=null}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var iE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aE=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),mi=(e,t)=>{const n=q.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:l="",children:d,...h},_)=>q.createElement("svg",{ref:_,...iE,width:i,height:i,stroke:r,strokeWidth:o?Number(a)*24/Number(i):a,className:["lucide",`lucide-${aE(e)}`,l].join(" "),...h},[...t.map(([y,g])=>q.createElement(y,g)),...Array.isArray(d)?d:[d]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=mi("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sE=mi("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lE=mi("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uE=mi("Construction",[["rect",{x:"2",y:"6",width:"20",height:"8",rx:"1",key:"1estib"}],["path",{d:"M17 14v7",key:"7m2elx"}],["path",{d:"M7 14v7",key:"1cm7wv"}],["path",{d:"M17 3v3",key:"1v4jwn"}],["path",{d:"M7 3v3",key:"7o6guu"}],["path",{d:"M10 14 2.3 6.3",key:"1023jk"}],["path",{d:"m14 6 7.7 7.7",key:"1s8pl2"}],["path",{d:"m8 6 8 8",key:"hl96qh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cE=mi("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=mi("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=mi("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),hE=[{name:"Systems",path:"/systems",icon:dE}];function pE(){const e=Bn(),[t,n]=q.useState(!1);return V.jsxs("div",{className:"flex h-screen bg-base-100",children:[V.jsxs("aside",{className:`${t?"w-20":"w-64"} bg-base-200 border-r border-base-300 flex flex-col transition-all duration-300`,children:[V.jsxs("div",{className:`border-b border-base-300 flex items-center ${t?"justify-center p-4":"justify-between p-4"}`,children:[!t&&V.jsx("h1",{className:"text-2xl font-bold",children:V.jsx("img",{src:"./logo_dts.svg",alt:"UCLA Digital Technology Solutions logo",className:"h-16"})}),V.jsx("button",{onClick:()=>n(!t),className:"btn btn-ghost btn-sm btn-circle",title:t?"Expand sidebar":"Collapse sidebar",children:t?V.jsx(lE,{size:18}):V.jsx(sE,{size:18})})]}),V.jsx("nav",{className:`flex-1 overflow-y-auto ${t?"px-2 py-4":"p-4"}`,children:V.jsx("ul",{className:"nav-menu space-y-1",children:hE.map(r=>{const i=r.icon,a=e.pathname===r.path||e.pathname.startsWith(r.path+"/");return V.jsx("li",{children:V.jsxs(di,{to:r.path,className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors hover:bg-base-300 ${a?"bg-primary text-primary-content":""} ${t?"tooltip tooltip-right justify-center":""}`,"data-tip":t?r.name:void 0,children:[V.jsx(i,{size:20,className:"flex-shrink-0"}),!t&&V.jsx("span",{children:r.name})]})},r.path)})})}),V.jsx("div",{className:`border-t border-base-300 ${t?"p-3":"p-4"}`,children:V.jsxs("div",{className:`flex items-center ${t?"justify-center":"gap-3"}`,children:[V.jsx("div",{className:`avatar placeholder ${t?"tooltip tooltip-right":""}`,"data-tip":t?"KENNETH VU":void 0,children:V.jsx("div",{className:"bg-neutral text-neutral-content rounded-full w-10",children:V.jsx("span",{className:"text-xs",children:"KV"})})}),!t&&V.jsxs("div",{className:"flex-1",children:[V.jsx("div",{className:"text-sm font-medium",children:"KENNETH VU"}),V.jsx("div",{className:"text-xs text-base-content/60",children:"Admin"})]})]})})]}),V.jsxs("main",{className:"flex-1 overflow-auto flex flex-col",children:[V.jsx("div",{className:"border-b border-base-300 px-6 py-3 flex items-center justify-end"}),V.jsx("div",{className:"flex-1 overflow-auto",children:V.jsx(Sw,{})})]})]})}var Cc=function(e,t){return Cc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Cc(e,t)};function kn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Cc(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var po=function(){return po=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},po.apply(this,arguments)};function _E(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function mE(e,t,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(_){try{h(r.next(_))}catch(y){o(y)}}function d(_){try{h(r.throw(_))}catch(y){o(y)}}function h(_){_.done?a(_.value):i(_.value).then(l,d)}h((r=r.apply(e,[])).next())})}function Rg(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(h){return function(_){return d([h,_])}}function d(h){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,h[0]&&(n=0)),n;)try{if(r=1,i&&(a=h[0]&2?i.return:h[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,h[1])).done)return a;switch(i=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,i=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){n.label=h[1];break}if(h[0]===6&&n.label<a[1]){n.label=a[1],a=h;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(h);break}a[2]&&n.ops.pop(),n.trys.pop();continue}h=t.call(e,n)}catch(_){h=[6,_],i=0}finally{r=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function sa(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ks(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function Qs(e,t,n){if(arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}function ji(e){return this instanceof ji?(this.v=e,this):new ji(e)}function gE(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(m){return function(C){return Promise.resolve(C).then(m,y)}}function l(m,C){r[m]&&(i[m]=function(w){return new Promise(function(O,b){a.push([m,w,O,b])>1||d(m,w)})},C&&(i[m]=C(i[m])))}function d(m,C){try{h(r[m](C))}catch(w){g(a[0][3],w)}}function h(m){m.value instanceof ji?Promise.resolve(m.value.v).then(_,y):g(a[0][2],m)}function _(m){d("next",m)}function y(m){d("throw",m)}function g(m,C){m(C),a.shift(),a.length&&d(a[0][0],a[0][1])}}function yE(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof sa=="function"?sa(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=e[a]&&function(o){return new Promise(function(l,d){o=e[a](o),i(l,d,o.done,o.value)})}}function i(a,o,l,d){Promise.resolve(d).then(function(h){a({value:h,done:l})},o)}}function st(e){return typeof e=="function"}function Gd(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var hu=Gd(function(e){return function(t){e(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(n,r){return r+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function Ys(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var pa=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,r,i,a;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var l=sa(o),d=l.next();!d.done;d=l.next()){var h=d.value;h.remove(this)}}catch(w){t={error:w}}finally{try{d&&!d.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}else o.remove(this);var _=this.initialTeardown;if(st(_))try{_()}catch(w){a=w instanceof hu?w.errors:[w]}var y=this._finalizers;if(y){this._finalizers=null;try{for(var g=sa(y),m=g.next();!m.done;m=g.next()){var C=m.value;try{ip(C)}catch(w){a=a??[],w instanceof hu?a=Qs(Qs([],Ks(a)),Ks(w.errors)):a.push(w)}}}catch(w){r={error:w}}finally{try{m&&!m.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}}if(a)throw new hu(a)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)ip(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&Ys(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&Ys(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),xg=pa.EMPTY;function Cg(e){return e instanceof pa||e&&"closed"in e&&st(e.remove)&&st(e.add)&&st(e.unsubscribe)}function ip(e){st(e)?e():e.unsubscribe()}var vE={Promise:void 0},SE={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,Qs([e,t],Ks(n)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function Tg(e){SE.setTimeout(function(){throw e})}function ap(){}function Ss(e){e()}var kl=function(e){kn(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,Cg(n)&&n.add(r)):r.destination=bE,r}return t.create=function(n,r,i){return new Tc(n,r,i)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(pa),wE=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(r){ns(r)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(r){ns(r)}else ns(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){ns(n)}},e}(),Tc=function(e){kn(t,e);function t(n,r,i){var a=e.call(this)||this,o;return st(n)||!n?o={next:n??void 0,error:r??void 0,complete:i??void 0}:o=n,a.destination=new wE(o),a}return t}(kl);function ns(e){Tg(e)}function EE(e){throw e}var bE={closed:!0,next:ap,error:EE,complete:ap},Hd=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Wd(e){return e}function AE(e){return e.length===0?Wd:e.length===1?e[0]:function(t){return e.reduce(function(n,r){return r(n)},t)}}var gt=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var i=this,a=RE(t)?t:new Tc(t,n,r);return Ss(function(){var o=i,l=o.operator,d=o.source;a.add(l?l.call(a,d):d?i._subscribe(a):i._trySubscribe(a))}),a},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=op(n),new n(function(i,a){var o=new Tc({next:function(l){try{t(l)}catch(d){a(d),o.unsubscribe()}},error:a,complete:i});r.subscribe(o)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[Hd]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return AE(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=op(t),new t(function(r,i){var a;n.subscribe(function(o){return a=o},function(o){return i(o)},function(){return r(a)})})},e.create=function(t){return new e(t)},e}();function op(e){var t;return(t=e??vE.Promise)!==null&&t!==void 0?t:Promise}function kE(e){return e&&st(e.next)&&st(e.error)&&st(e.complete)}function RE(e){return e&&e instanceof kl||kE(e)&&Cg(e)}function xE(e){return st(e==null?void 0:e.lift)}function ir(e){return function(t){if(xE(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function hn(e,t,n,r,i){return new CE(e,t,n,r,i)}var CE=function(e){kn(t,e);function t(n,r,i,a,o,l){var d=e.call(this,n)||this;return d.onFinalize=o,d.shouldUnsubscribe=l,d._next=r?function(h){try{r(h)}catch(_){n.error(_)}}:e.prototype._next,d._error=a?function(h){try{a(h)}catch(_){n.error(_)}finally{this.unsubscribe()}}:e.prototype._error,d._complete=i?function(){try{i()}catch(h){n.error(h)}finally{this.unsubscribe()}}:e.prototype._complete,d}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t}(kl),TE=Gd(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),fi=function(e){kn(t,e);function t(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype.lift=function(n){var r=new Lc(this,this);return r.operator=n,r},t.prototype._throwIfClosed=function(){if(this.closed)throw new TE},t.prototype.next=function(n){var r=this;Ss(function(){var i,a;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var o=sa(r.currentObservers),l=o.next();!l.done;l=o.next()){var d=l.value;d.next(n)}}catch(h){i={error:h}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}}})},t.prototype.error=function(n){var r=this;Ss(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},t.prototype.complete=function(){var n=this;Ss(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},t.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},t.prototype._innerSubscribe=function(n){var r=this,i=this,a=i.hasError,o=i.isStopped,l=i.observers;return a||o?xg:(this.currentObservers=null,l.push(n),new pa(function(){r.currentObservers=null,Ys(l,n)}))},t.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,a=r.thrownError,o=r.isStopped;i?n.error(a):o&&n.complete()},t.prototype.asObservable=function(){var n=new gt;return n.source=this,n},t.create=function(n,r){return new Lc(n,r)},t}(gt),Lc=function(e){kn(t,e);function t(n,r){var i=e.call(this)||this;return i.destination=n,i.source=r,i}return t.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},t.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},t.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},t.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:xg},t}(fi),gi=function(e){kn(t,e);function t(n){var r=e.call(this)||this;return r._value=n,r}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(n){var r=e.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},t.prototype.getValue=function(){var n=this,r=n.hasError,i=n.thrownError,a=n._value;if(r)throw i;return this._throwIfClosed(),a},t.prototype.next=function(n){e.prototype.next.call(this,this._value=n)},t}(fi),qd={now:function(){return(qd.delegate||Date).now()},delegate:void 0},pu=function(e){kn(t,e);function t(n,r,i){n===void 0&&(n=1/0),r===void 0&&(r=1/0),i===void 0&&(i=qd);var a=e.call(this)||this;return a._bufferSize=n,a._windowTime=r,a._timestampProvider=i,a._buffer=[],a._infiniteTimeWindow=!0,a._infiniteTimeWindow=r===1/0,a._bufferSize=Math.max(1,n),a._windowTime=Math.max(1,r),a}return t.prototype.next=function(n){var r=this,i=r.isStopped,a=r._buffer,o=r._infiniteTimeWindow,l=r._timestampProvider,d=r._windowTime;i||(a.push(n),!o&&a.push(l.now()+d)),this._trimBuffer(),e.prototype.next.call(this,n)},t.prototype._subscribe=function(n){this._throwIfClosed(),this._trimBuffer();for(var r=this._innerSubscribe(n),i=this,a=i._infiniteTimeWindow,o=i._buffer,l=o.slice(),d=0;d<l.length&&!n.closed;d+=a?1:2)n.next(l[d]);return this._checkFinalizedStatuses(n),r},t.prototype._trimBuffer=function(){var n=this,r=n._bufferSize,i=n._timestampProvider,a=n._buffer,o=n._infiniteTimeWindow,l=(o?1:2)*r;if(r<1/0&&l<a.length&&a.splice(0,a.length-l),!o){for(var d=i.now(),h=0,_=1;_<a.length&&a[_]<=d;_+=2)h=_;h&&a.splice(0,h+1)}},t}(fi),LE=function(e){kn(t,e);function t(n,r){return e.call(this)||this}return t.prototype.schedule=function(n,r){return this},t}(pa),sp={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,Qs([e,t],Ks(n)))},clearInterval:function(e){return clearInterval(e)},delegate:void 0},PE=function(e){kn(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return t.prototype.schedule=function(n,r){var i;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var a=this.id,o=this.scheduler;return a!=null&&(this.id=this.recycleAsyncId(o,a,r)),this.pending=!0,this.delay=r,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,r),this},t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),sp.setInterval(n.flush.bind(n,this),i)},t.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;r!=null&&sp.clearInterval(r)},t.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(n,r){var i=!1,a;try{this.work(n)}catch(o){i=!0,a=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),a},t.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,i=n.scheduler,a=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Ys(a,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(LE),lp=function(){function e(t,n){n===void 0&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(t,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,t).schedule(r,n)},e.now=qd.now,e}(),OE=function(e){kn(t,e);function t(n,r){r===void 0&&(r=lp.now);var i=e.call(this,n,r)||this;return i.actions=[],i._active=!1,i}return t.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,i){for(;n=r.shift();)n.unsubscribe();throw i}},t}(lp),Lg=new OE(PE),ME=Lg,DE=new gt(function(e){return e.complete()});function IE(e){return e&&st(e.schedule)}var Pg=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function Og(e){return st(e==null?void 0:e.then)}function Mg(e){return st(e[Hd])}function Dg(e){return Symbol.asyncIterator&&st(e==null?void 0:e[Symbol.asyncIterator])}function Ig(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function NE(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ng=NE();function Bg(e){return st(e==null?void 0:e[Ng])}function Ug(e){return gE(this,arguments,function(){var t,n,r,i;return Rg(this,function(a){switch(a.label){case 0:t=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,ji(t.read())];case 3:return n=a.sent(),r=n.value,i=n.done,i?[4,ji(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,ji(r)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function jg(e){return st(e==null?void 0:e.getReader)}function ar(e){if(e instanceof gt)return e;if(e!=null){if(Mg(e))return BE(e);if(Pg(e))return UE(e);if(Og(e))return jE(e);if(Dg(e))return Fg(e);if(Bg(e))return FE(e);if(jg(e))return VE(e)}throw Ig(e)}function BE(e){return new gt(function(t){var n=e[Hd]();if(st(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function UE(e){return new gt(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function jE(e){return new gt(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,Tg)})}function FE(e){return new gt(function(t){var n,r;try{for(var i=sa(e),a=i.next();!a.done;a=i.next()){var o=a.value;if(t.next(o),t.closed)return}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()})}function Fg(e){return new gt(function(t){zE(e,t).catch(function(n){return t.error(n)})})}function VE(e){return Fg(Ug(e))}function zE(e,t){var n,r,i,a;return mE(this,void 0,void 0,function(){var o,l;return Rg(this,function(d){switch(d.label){case 0:d.trys.push([0,5,6,11]),n=yE(e),d.label=1;case 1:return[4,n.next()];case 2:if(r=d.sent(),!!r.done)return[3,4];if(o=r.value,t.next(o),t.closed)return[2];d.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return l=d.sent(),i={error:l},[3,11];case 6:return d.trys.push([6,,9,10]),r&&!r.done&&(a=n.return)?[4,a.call(n)]:[3,8];case 7:d.sent(),d.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function ii(e,t,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var a=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(a),!i)return a}function Vg(e,t){return t===void 0&&(t=0),ir(function(n,r){n.subscribe(hn(r,function(i){return ii(r,e,function(){return r.next(i)},t)},function(){return ii(r,e,function(){return r.complete()},t)},function(i){return ii(r,e,function(){return r.error(i)},t)}))})}function zg(e,t){return t===void 0&&(t=0),ir(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function $E(e,t){return ar(e).pipe(zg(t),Vg(t))}function GE(e,t){return ar(e).pipe(zg(t),Vg(t))}function HE(e,t){return new gt(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function WE(e,t){return new gt(function(n){var r;return ii(n,t,function(){r=e[Ng](),ii(n,t,function(){var i,a,o;try{i=r.next(),a=i.value,o=i.done}catch(l){n.error(l);return}o?n.complete():n.next(a)},0,!0)}),function(){return st(r==null?void 0:r.return)&&r.return()}})}function $g(e,t){if(!e)throw new Error("Iterable cannot be null");return new gt(function(n){ii(n,t,function(){var r=e[Symbol.asyncIterator]();ii(n,t,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function qE(e,t){return $g(Ug(e),t)}function KE(e,t){if(e!=null){if(Mg(e))return $E(e,t);if(Pg(e))return HE(e,t);if(Og(e))return GE(e,t);if(Dg(e))return $g(e,t);if(Bg(e))return WE(e,t);if(jg(e))return qE(e,t)}throw Ig(e)}function QE(e,t){return t?KE(e,t):ar(e)}function Gg(e,t){var n=st(e)?e:function(){return e},r=function(i){return i.error(n())};return new gt(r)}var YE=Gd(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});function XE(e,t){return new Promise(function(n,r){var i=!1,a;e.subscribe({next:function(o){a=o,i=!0},error:r,complete:function(){i?n(a):r(new YE)}})})}function ZE(e){return e instanceof Date&&!isNaN(e)}function Lo(e,t){return ir(function(n,r){var i=0;n.subscribe(hn(r,function(a){r.next(e.call(t,a,i++))}))})}function JE(e,t,n,r,i,a,o,l){var d=[],h=0,_=0,y=!1,g=function(){y&&!d.length&&!h&&t.complete()},m=function(w){return h<r?C(w):d.push(w)},C=function(w){h++;var O=!1;ar(n(w,_++)).subscribe(hn(t,function(b){t.next(b)},function(){O=!0},void 0,function(){if(O)try{h--;for(var b=function(){var E=d.shift();o||C(E)};d.length&&h<r;)b();g()}catch(E){t.error(E)}}))};return e.subscribe(hn(t,m,function(){y=!0,g()})),function(){}}function Hg(e,t,n){return n===void 0&&(n=1/0),st(t)?Hg(function(r,i){return Lo(function(a,o){return t(r,a,i,o)})(ar(e(r,i)))},n):(typeof t=="number"&&(n=t),ir(function(r,i){return JE(r,i,e,n)}))}function Kd(e,t,n){e===void 0&&(e=0),n===void 0&&(n=ME);var r=-1;return t!=null&&(IE(t)?n=t:r=t),new gt(function(i){var a=ZE(e)?+e-n.now():e;a<0&&(a=0);var o=0;return n.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},a)})}function eb(e,t){return ir(function(n,r){var i=0;n.subscribe(hn(r,function(a){return e.call(t,a,i++)&&r.next(a)}))})}function Wg(e){return e<=0?function(){return DE}:ir(function(t,n){var r=0;t.subscribe(hn(n,function(i){++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function tb(e){return Lo(function(){return e})}function nb(e,t){return Hg(function(n,r){return ar(e(n,r)).pipe(Wg(1),tb(n))})}function rb(e,t){t===void 0&&(t=Lg);var n=Kd(e,t);return nb(function(){return n})}function ib(e,t){return t===void 0&&(t=Wd),e=e??ab,ir(function(n,r){var i,a=!0;n.subscribe(hn(r,function(o){var l=t(o);(a||!e(i,l))&&(a=!1,i=l,r.next(o))}))})}function ab(e,t){return e===t}function ob(e){e===void 0&&(e=1/0);var t;e&&typeof e=="object"?t=e:t={count:e};var n=t.count,r=n===void 0?1/0:n,i=t.delay,a=t.resetOnSuccess,o=a===void 0?!1:a;return r<=0?Wd:ir(function(l,d){var h=0,_,y=function(){var g=!1;_=l.subscribe(hn(d,function(m){o&&(h=0),d.next(m)},void 0,function(m){if(h++<r){var C=function(){_?(_.unsubscribe(),_=null,y()):g=!0};if(i!=null){var w=typeof i=="number"?Kd(i):ar(i(m,h)),O=hn(d,function(){O.unsubscribe(),C()},function(){d.complete()});w.subscribe(O)}else C()}else d.error(m)})),g&&(_.unsubscribe(),_=null,y())};y()})}function up(e,t){return ir(function(n,r){var i=null,a=0,o=!1,l=function(){return o&&!i&&r.complete()};n.subscribe(hn(r,function(d){i==null||i.unsubscribe();var h=0,_=a++;ar(e(d,_)).subscribe(i=hn(r,function(y){return r.next(t?t(d,y,_,h++):y)},function(){i=null,l()}))},function(){o=!0,l()}))})}function Qd(e,t){t===void 0&&(t={});var n=t.selector,r=_E(t,["selector"]);return new gt(function(i){var a=new AbortController,o=a.signal,l=!0,d=r.signal;if(d)if(d.aborted)a.abort();else{var h=function(){o.aborted||a.abort()};d.addEventListener("abort",h),i.add(function(){return d.removeEventListener("abort",h)})}var _=po(po({},r),{signal:o}),y=function(g){l=!1,i.error(g)};return fetch(e,_).then(function(g){n?ar(n(g)).subscribe(hn(i,void 0,function(){l=!1,i.complete()},y)):(l=!1,i.next(g),i.complete())}).catch(y),function(){l&&a.abort()}})}const Vn=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],cp=[255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];function rs(e){if(e>=cp.length)throw new Error("Unable to parse base64 string.");const t=cp[e];if(t===255)throw new Error("Unable to parse base64 string.");return t}function qg(e){let t="",n,r=e.length;for(n=2;n<r;n+=3)t+=Vn[e[n-2]>>2],t+=Vn[(e[n-2]&3)<<4|e[n-1]>>4],t+=Vn[(e[n-1]&15)<<2|e[n]>>6],t+=Vn[e[n]&63];return n===r+1&&(t+=Vn[e[n-2]>>2],t+=Vn[(e[n-2]&3)<<4],t+="=="),n===r&&(t+=Vn[e[n-2]>>2],t+=Vn[(e[n-2]&3)<<4|e[n-1]>>4],t+=Vn[(e[n-1]&15)<<2],t+="="),t}function sb(e){if(e.length%4!==0)throw new Error("Unable to parse base64 string.");const t=e.indexOf("=");if(t!==-1&&t<e.length-2)throw new Error("Unable to parse base64 string.");let n=e.endsWith("==")?2:e.endsWith("=")?1:0,r=e.length,i=new Uint8Array(3*(r/4)),a;for(let o=0,l=0;o<r;o+=4,l+=3)a=rs(e.charCodeAt(o))<<18|rs(e.charCodeAt(o+1))<<12|rs(e.charCodeAt(o+2))<<6|rs(e.charCodeAt(o+3)),i[l]=a>>16,i[l+1]=a>>8&255,i[l+2]=a&255;return i.subarray(0,i.length-n)}function lb(e,t=new TextEncoder){return qg(t.encode(e))}var Pc={exports:{}},ub=Pc.exports,dp;function cb(){return dp||(dp=1,function(e){(function(t,n){var r={};n(r);var i=r.default;for(var a in r)i[a]=r[a];e.exports=i})(ub,function(t){t.__esModule=!0,t.digestLength=32,t.blockSize=64;var n=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function r(g,m,C,w,O){for(var b,E,x,T,j,W,B,R,L,k,M,Y,ie;O>=64;){for(b=m[0],E=m[1],x=m[2],T=m[3],j=m[4],W=m[5],B=m[6],R=m[7],k=0;k<16;k++)M=w+k*4,g[k]=(C[M]&255)<<24|(C[M+1]&255)<<16|(C[M+2]&255)<<8|C[M+3]&255;for(k=16;k<64;k++)L=g[k-2],Y=(L>>>17|L<<15)^(L>>>19|L<<13)^L>>>10,L=g[k-15],ie=(L>>>7|L<<25)^(L>>>18|L<<14)^L>>>3,g[k]=(Y+g[k-7]|0)+(ie+g[k-16]|0);for(k=0;k<64;k++)Y=(((j>>>6|j<<26)^(j>>>11|j<<21)^(j>>>25|j<<7))+(j&W^~j&B)|0)+(R+(n[k]+g[k]|0)|0)|0,ie=((b>>>2|b<<30)^(b>>>13|b<<19)^(b>>>22|b<<10))+(b&E^b&x^E&x)|0,R=B,B=W,W=j,j=T+Y|0,T=x,x=E,E=b,b=Y+ie|0;m[0]+=b,m[1]+=E,m[2]+=x,m[3]+=T,m[4]+=j,m[5]+=W,m[6]+=B,m[7]+=R,w+=64,O-=64}return w}var i=function(){function g(){this.digestLength=t.digestLength,this.blockSize=t.blockSize,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return g.prototype.reset=function(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},g.prototype.clean=function(){for(var m=0;m<this.buffer.length;m++)this.buffer[m]=0;for(var m=0;m<this.temp.length;m++)this.temp[m]=0;this.reset()},g.prototype.update=function(m,C){if(C===void 0&&(C=m.length),this.finished)throw new Error("SHA256: can't update because hash was finished.");var w=0;if(this.bytesHashed+=C,this.bufferLength>0){for(;this.bufferLength<64&&C>0;)this.buffer[this.bufferLength++]=m[w++],C--;this.bufferLength===64&&(r(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(C>=64&&(w=r(this.temp,this.state,m,w,C),C%=64);C>0;)this.buffer[this.bufferLength++]=m[w++],C--;return this},g.prototype.finish=function(m){if(!this.finished){var C=this.bytesHashed,w=this.bufferLength,O=C/536870912|0,b=C<<3,E=C%64<56?64:128;this.buffer[w]=128;for(var x=w+1;x<E-8;x++)this.buffer[x]=0;this.buffer[E-8]=O>>>24&255,this.buffer[E-7]=O>>>16&255,this.buffer[E-6]=O>>>8&255,this.buffer[E-5]=O>>>0&255,this.buffer[E-4]=b>>>24&255,this.buffer[E-3]=b>>>16&255,this.buffer[E-2]=b>>>8&255,this.buffer[E-1]=b>>>0&255,r(this.temp,this.state,this.buffer,0,E),this.finished=!0}for(var x=0;x<8;x++)m[x*4+0]=this.state[x]>>>24&255,m[x*4+1]=this.state[x]>>>16&255,m[x*4+2]=this.state[x]>>>8&255,m[x*4+3]=this.state[x]>>>0&255;return this},g.prototype.digest=function(){var m=new Uint8Array(this.digestLength);return this.finish(m),m},g.prototype._saveState=function(m){for(var C=0;C<this.state.length;C++)m[C]=this.state[C]},g.prototype._restoreState=function(m,C){for(var w=0;w<this.state.length;w++)this.state[w]=m[w];this.bytesHashed=C,this.finished=!1,this.bufferLength=0},g}();t.Hash=i;var a=function(){function g(m){this.inner=new i,this.outer=new i,this.blockSize=this.inner.blockSize,this.digestLength=this.inner.digestLength;var C=new Uint8Array(this.blockSize);if(m.length>this.blockSize)new i().update(m).finish(C).clean();else for(var w=0;w<m.length;w++)C[w]=m[w];for(var w=0;w<C.length;w++)C[w]^=54;this.inner.update(C);for(var w=0;w<C.length;w++)C[w]^=106;this.outer.update(C),this.istate=new Uint32Array(8),this.ostate=new Uint32Array(8),this.inner._saveState(this.istate),this.outer._saveState(this.ostate);for(var w=0;w<C.length;w++)C[w]=0}return g.prototype.reset=function(){return this.inner._restoreState(this.istate,this.inner.blockSize),this.outer._restoreState(this.ostate,this.outer.blockSize),this},g.prototype.clean=function(){for(var m=0;m<this.istate.length;m++)this.ostate[m]=this.istate[m]=0;this.inner.clean(),this.outer.clean()},g.prototype.update=function(m){return this.inner.update(m),this},g.prototype.finish=function(m){return this.outer.finished?this.outer.finish(m):(this.inner.finish(m),this.outer.update(m,this.digestLength).finish(m)),this},g.prototype.digest=function(){var m=new Uint8Array(this.digestLength);return this.finish(m),m},g}();t.HMAC=a;function o(g){var m=new i().update(g),C=m.digest();return m.clean(),C}t.hash=o,t.default=o;function l(g,m){var C=new a(g).update(m),w=C.digest();return C.clean(),w}t.hmac=l;function d(g,m,C,w){var O=w[0];if(O===0)throw new Error("hkdf: cannot expand more");m.reset(),O>1&&m.update(g),C&&m.update(C),m.update(w),m.finish(g),w[0]++}var h=new Uint8Array(t.digestLength);function _(g,m,C,w){m===void 0&&(m=h),w===void 0&&(w=32);for(var O=new Uint8Array([1]),b=l(m,g),E=new a(b),x=new Uint8Array(E.digestLength),T=x.length,j=new Uint8Array(w),W=0;W<w;W++)T===x.length&&(d(x,E,C,O),T=0),j[W]=x[T++];return E.clean(),x.fill(0),O.fill(0),j}t.hkdf=_;function y(g,m,C,w){for(var O=new a(g),b=O.digestLength,E=new Uint8Array(4),x=new Uint8Array(b),T=new Uint8Array(b),j=new Uint8Array(w),W=0;W*b<w;W++){var B=W+1;E[0]=B>>>24&255,E[1]=B>>>16&255,E[2]=B>>>8&255,E[3]=B>>>0&255,O.reset(),O.update(m),O.update(E),O.finish(T);for(var R=0;R<b;R++)x[R]=T[R];for(var R=2;R<=C;R++){O.reset(),O.update(T).finish(T);for(var L=0;L<b;L++)x[L]^=T[L]}for(var R=0;R<b&&W*b+R<w;R++)j[W*b+R]=x[R]}for(var W=0;W<b;W++)x[W]=T[W]=0;for(var W=0;W<4;W++)E[W]=0;return O.clean(),j}t.pbkdf2=y})}(Pc)),Pc.exports}var db=cb();const fb=new Int32Array(4),ut=class ut{constructor(){te(this,"_dataLength",0);te(this,"_bufferLength",0);te(this,"_state",new Int32Array(4));te(this,"_buffer",new ArrayBuffer(68));te(this,"_buffer8");te(this,"_buffer32");this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashStr(t,n=!1){return this.onePassHasher.start().appendStr(t).end(n)}static hashAsciiStr(t,n=!1){return this.onePassHasher.start().appendAsciiStr(t).end(n)}static _hex(t){const n=ut.hexChars,r=ut.hexOut;let i,a,o,l;for(l=0;l<4;l+=1)for(a=l*8,i=t[l],o=0;o<8;o+=2)r[a+1+o]=n.charAt(i&15),i>>>=4,r[a+0+o]=n.charAt(i&15),i>>>=4;return r.join("")}static _md5cycle(t,n){let r=t[0],i=t[1],a=t[2],o=t[3];r+=(i&a|~i&o)+n[0]-680876936|0,r=(r<<7|r>>>25)+i|0,o+=(r&i|~r&a)+n[1]-389564586|0,o=(o<<12|o>>>20)+r|0,a+=(o&r|~o&i)+n[2]+606105819|0,a=(a<<17|a>>>15)+o|0,i+=(a&o|~a&r)+n[3]-1044525330|0,i=(i<<22|i>>>10)+a|0,r+=(i&a|~i&o)+n[4]-176418897|0,r=(r<<7|r>>>25)+i|0,o+=(r&i|~r&a)+n[5]+1200080426|0,o=(o<<12|o>>>20)+r|0,a+=(o&r|~o&i)+n[6]-1473231341|0,a=(a<<17|a>>>15)+o|0,i+=(a&o|~a&r)+n[7]-45705983|0,i=(i<<22|i>>>10)+a|0,r+=(i&a|~i&o)+n[8]+1770035416|0,r=(r<<7|r>>>25)+i|0,o+=(r&i|~r&a)+n[9]-1958414417|0,o=(o<<12|o>>>20)+r|0,a+=(o&r|~o&i)+n[10]-42063|0,a=(a<<17|a>>>15)+o|0,i+=(a&o|~a&r)+n[11]-1990404162|0,i=(i<<22|i>>>10)+a|0,r+=(i&a|~i&o)+n[12]+1804603682|0,r=(r<<7|r>>>25)+i|0,o+=(r&i|~r&a)+n[13]-40341101|0,o=(o<<12|o>>>20)+r|0,a+=(o&r|~o&i)+n[14]-1502002290|0,a=(a<<17|a>>>15)+o|0,i+=(a&o|~a&r)+n[15]+1236535329|0,i=(i<<22|i>>>10)+a|0,r+=(i&o|a&~o)+n[1]-165796510|0,r=(r<<5|r>>>27)+i|0,o+=(r&a|i&~a)+n[6]-1069501632|0,o=(o<<9|o>>>23)+r|0,a+=(o&i|r&~i)+n[11]+643717713|0,a=(a<<14|a>>>18)+o|0,i+=(a&r|o&~r)+n[0]-373897302|0,i=(i<<20|i>>>12)+a|0,r+=(i&o|a&~o)+n[5]-701558691|0,r=(r<<5|r>>>27)+i|0,o+=(r&a|i&~a)+n[10]+38016083|0,o=(o<<9|o>>>23)+r|0,a+=(o&i|r&~i)+n[15]-660478335|0,a=(a<<14|a>>>18)+o|0,i+=(a&r|o&~r)+n[4]-405537848|0,i=(i<<20|i>>>12)+a|0,r+=(i&o|a&~o)+n[9]+568446438|0,r=(r<<5|r>>>27)+i|0,o+=(r&a|i&~a)+n[14]-1019803690|0,o=(o<<9|o>>>23)+r|0,a+=(o&i|r&~i)+n[3]-187363961|0,a=(a<<14|a>>>18)+o|0,i+=(a&r|o&~r)+n[8]+1163531501|0,i=(i<<20|i>>>12)+a|0,r+=(i&o|a&~o)+n[13]-1444681467|0,r=(r<<5|r>>>27)+i|0,o+=(r&a|i&~a)+n[2]-51403784|0,o=(o<<9|o>>>23)+r|0,a+=(o&i|r&~i)+n[7]+1735328473|0,a=(a<<14|a>>>18)+o|0,i+=(a&r|o&~r)+n[12]-1926607734|0,i=(i<<20|i>>>12)+a|0,r+=(i^a^o)+n[5]-378558|0,r=(r<<4|r>>>28)+i|0,o+=(r^i^a)+n[8]-2022574463|0,o=(o<<11|o>>>21)+r|0,a+=(o^r^i)+n[11]+1839030562|0,a=(a<<16|a>>>16)+o|0,i+=(a^o^r)+n[14]-35309556|0,i=(i<<23|i>>>9)+a|0,r+=(i^a^o)+n[1]-1530992060|0,r=(r<<4|r>>>28)+i|0,o+=(r^i^a)+n[4]+1272893353|0,o=(o<<11|o>>>21)+r|0,a+=(o^r^i)+n[7]-155497632|0,a=(a<<16|a>>>16)+o|0,i+=(a^o^r)+n[10]-1094730640|0,i=(i<<23|i>>>9)+a|0,r+=(i^a^o)+n[13]+681279174|0,r=(r<<4|r>>>28)+i|0,o+=(r^i^a)+n[0]-358537222|0,o=(o<<11|o>>>21)+r|0,a+=(o^r^i)+n[3]-722521979|0,a=(a<<16|a>>>16)+o|0,i+=(a^o^r)+n[6]+76029189|0,i=(i<<23|i>>>9)+a|0,r+=(i^a^o)+n[9]-640364487|0,r=(r<<4|r>>>28)+i|0,o+=(r^i^a)+n[12]-421815835|0,o=(o<<11|o>>>21)+r|0,a+=(o^r^i)+n[15]+530742520|0,a=(a<<16|a>>>16)+o|0,i+=(a^o^r)+n[2]-995338651|0,i=(i<<23|i>>>9)+a|0,r+=(a^(i|~o))+n[0]-198630844|0,r=(r<<6|r>>>26)+i|0,o+=(i^(r|~a))+n[7]+1126891415|0,o=(o<<10|o>>>22)+r|0,a+=(r^(o|~i))+n[14]-1416354905|0,a=(a<<15|a>>>17)+o|0,i+=(o^(a|~r))+n[5]-57434055|0,i=(i<<21|i>>>11)+a|0,r+=(a^(i|~o))+n[12]+1700485571|0,r=(r<<6|r>>>26)+i|0,o+=(i^(r|~a))+n[3]-1894986606|0,o=(o<<10|o>>>22)+r|0,a+=(r^(o|~i))+n[10]-1051523|0,a=(a<<15|a>>>17)+o|0,i+=(o^(a|~r))+n[1]-2054922799|0,i=(i<<21|i>>>11)+a|0,r+=(a^(i|~o))+n[8]+1873313359|0,r=(r<<6|r>>>26)+i|0,o+=(i^(r|~a))+n[15]-30611744|0,o=(o<<10|o>>>22)+r|0,a+=(r^(o|~i))+n[6]-1560198380|0,a=(a<<15|a>>>17)+o|0,i+=(o^(a|~r))+n[13]+1309151649|0,i=(i<<21|i>>>11)+a|0,r+=(a^(i|~o))+n[4]-145523070|0,r=(r<<6|r>>>26)+i|0,o+=(i^(r|~a))+n[11]-1120210379|0,o=(o<<10|o>>>22)+r|0,a+=(r^(o|~i))+n[2]+718787259|0,a=(a<<15|a>>>17)+o|0,i+=(o^(a|~r))+n[9]-343485551|0,i=(i<<21|i>>>11)+a|0,t[0]=r+t[0]|0,t[1]=i+t[1]|0,t[2]=a+t[2]|0,t[3]=o+t[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(ut.stateIdentity),this}appendStr(t){const n=this._buffer8,r=this._buffer32;let i=this._bufferLength,a,o;for(o=0;o<t.length;o+=1){if(a=t.charCodeAt(o),a<128)n[i++]=a;else if(a<2048)n[i++]=(a>>>6)+192,n[i++]=a&63|128;else if(a<55296||a>56319)n[i++]=(a>>>12)+224,n[i++]=a>>>6&63|128,n[i++]=a&63|128;else{if(a=(a-55296)*1024+(t.charCodeAt(++o)-56320)+65536,a>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");n[i++]=(a>>>18)+240,n[i++]=a>>>12&63|128,n[i++]=a>>>6&63|128,n[i++]=a&63|128}i>=64&&(this._dataLength+=64,ut._md5cycle(this._state,r),i-=64,r[0]=r[16])}return this._bufferLength=i,this}appendAsciiStr(t){const n=this._buffer8,r=this._buffer32;let i=this._bufferLength,a,o=0;for(;;){for(a=Math.min(t.length-o,64-i);a--;)n[i++]=t.charCodeAt(o++);if(i<64)break;this._dataLength+=64,ut._md5cycle(this._state,r),i=0}return this._bufferLength=i,this}appendByteArray(t){const n=this._buffer8,r=this._buffer32;let i=this._bufferLength,a,o=0;for(;;){for(a=Math.min(t.length-o,64-i);a--;)n[i++]=t[o++];if(i<64)break;this._dataLength+=64,ut._md5cycle(this._state,r),i=0}return this._bufferLength=i,this}getState(){const t=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[t[0],t[1],t[2],t[3]]}}setState(t){const n=t.buffer,r=t.state,i=this._state;let a;for(this._dataLength=t.length,this._bufferLength=t.buflen,i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],a=0;a<n.length;a+=1)this._buffer8[a]=n.charCodeAt(a)}end(t=!1){const n=this._bufferLength,r=this._buffer8,i=this._buffer32,a=(n>>2)+1;this._dataLength+=n;const o=this._dataLength*8;if(r[n]=128,r[n+1]=r[n+2]=r[n+3]=0,i.set(ut.buffer32Identity.subarray(a),a),n>55&&(ut._md5cycle(this._state,i),i.set(ut.buffer32Identity)),o<=4294967295)i[14]=o;else{const l=o.toString(16).match(/(.*?)(.{0,8})$/);if(l===null)return t?fb:"";const d=parseInt(l[2],16),h=parseInt(l[1],16)||0;i[14]=d,i[15]=h}return ut._md5cycle(this._state,i),t?this._state:ut._hex(this._state)}};te(ut,"stateIdentity",new Int32Array([1732584193,-271733879,-1732584194,271733878])),te(ut,"buffer32Identity",new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),te(ut,"hexChars","0123456789abcdef"),te(ut,"hexOut",[]),te(ut,"onePassHasher",new ut);let Xs=ut;if(Xs.hashStr("hello")!=="5d41402abc4b2a76b9719d911017c592")throw new Error("Md5 self test failed.");const fp=Symbol.for("constructDateFrom");function Kg(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&fp in e?e[fp](t):e instanceof Date?new e.constructor(t):new Date(t)}function Oc(e,t){return Kg(e,e)}function hb(e,t,n){return Kg(e,+Oc(e)+t)}function pb(e,t,n){return hb(e,t*1e3)}function _b(e,t){return+Oc(e)<+Oc(t)}function _e(e,t,n,r="debug",i){if(window.debug){const a=["color: #0288D1",`color:${i||"#009688"}`,"color: default"];n?hp()?console[r](`%c[PlaceOS]%c[${e}] %c${t}`,...a,n):console[r](`[PlaceOS][${e}] ${t}`,n):hp()?console[r](`%c[PlaceOS]%c[${e}] %c${t}`,...a):console[r](`[PlaceOS][${e}] ${t}`)}}function hp(){return!(document.documentMode||/Edge/.test(navigator.userAgent))}function Qg(){var i,a,o,l,d,h;const e=(i=window.location)!=null&&i.hash?(a=window.location)==null?void 0:a.hash.slice(1):((o=window.location)==null?void 0:o.href.split("#")[1])||"";let t=(l=window.location)!=null&&l.search?(d=window.location)==null?void 0:d.search.slice(1):((h=window.location)==null?void 0:h.href.split("?")[1])||"",n={};if(e)if(e.indexOf("?")>=0){const _=e.split("?");n=Ha(_[0]),t||(t=_[1])}else n=Ha(e);let r={};return t&&(r=Ha(t)),{...n,...r}}function Ha(e){const t={},n=e.split("&");for(const r of n){const i=r.split("=");i[1]&&(t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]))}return t}const pp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function mb(e=40){let t="";for(let n=0;n<e;n++)t+=pp.charAt(Math.floor(Math.random()*pp.length));return t}function Hr(e){var r,i,a,o,l;const t=(((r=window.location)==null?void 0:r.hash)||"").replace(new RegExp(`${e}[a-zA-Z0-9_+-.%=]*&?`,"g"),"").replace(/&&/g,"&").replace(/#&/g,"#").replace(/&$/g,"#"),n=(((i=window.location)==null?void 0:i.search)||"").replace(new RegExp(`${e}[a-zA-Z0-9_+-.%=]*&?`,"g"),"").replace(/&&/g,"&").replace(/\?&/g,"#").replace(/&$/g,"#");(a=window.history)!=null&&a.replaceState&&((l=window.history)==null||l.replaceState(null,"",`${(o=window.location)==null?void 0:o.pathname}${t}${n}`))}function gb(e){if(e.length===0)throw new Error("Input must not be of zero length");const t=e.split(","),n={};for(const r of t){const i=r.split(";");if(i.length!==2)throw new Error("Section could not be split on ';'");const a=i[0].replace(/<(.*)>/,"$1").trim(),o=i[1].replace(/rel="(.*)"/,"$1").trim();n[o]=a}return n}function yb(e,t){for(const n in e)e.hasOwnProperty(n)&&t.indexOf(e[n])>=0&&delete e[n];return e}function vb(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function Sb(){return window.location!==window.parent.location}function wb(e=Date.now(),t=60*1e3){return Math.floor(e/t)}class Eb{abort(){_e("Stub","Aborted")}}function Yd(e){let t="";if(e)for(const n in e)e.hasOwnProperty(n)&&e[n]!==void 0&&e[n]!==null&&(t+=`${t?"&":""}${n}=${encodeURIComponent(e[n])}`);return t}const Wa={};function nr(e,t,n=300){if(e&&t&&t instanceof Function)_a(e),Wa[e]=setTimeout(()=>{t(),delete Wa[e]},n);else throw new Error(e?"Cannot create named timeout without a name":"Cannot create a timeout without a callback")}function _a(e){Wa[e]&&(clearTimeout(Wa[e]),delete Wa[e])}const bb={id:"mock-authority",name:"localhost:4200",description:"",domain:"localhost:4200",login_url:"/login?continue={{url}}",logout_url:"/logout",session:!0,production:!1,config:{},version:"2.0.0"};let Oe={},rt=localStorage,pt;const Be={};let it="",la="";const _o=new gi(""),Xd=new gi("");let Yg="/api/engine/v2";const Oi=new gi(!1);Oi.asObservable();let Zs=0;function Zd(){var e,t;return`${`${Oe.secure||((e=window.location)==null?void 0:e.protocol.indexOf("https"))>=0?"https:":"http:"}//${Oe.host||((t=window.location)==null?void 0:t.host)}`}${Xg()}`}function Xg(){return Oe.version==="ACA Engine"?"/control/api":Yg}function Ab(){return!!Oe.token_header}function kb(){return it}function Rl(){return el("x-api-key",!1)||""}function cn(e=!0){if(Oe.mock)return"mock-token";if(!rt)return"";if(Rl()&&!Oe.ignore_api_key)return"x-api-key";const t=rt.getItem(`${it}_expires_at`)||"",n=_o.getValue();return _b(+t,new Date)&&(_e("Auth","Token expired. Requesting new token..."),tf(),Be.load_authority||(Zs+=1,nr("re-authorise",async()=>{delete Be.authorise,await ey().catch(r=>_e("Auth",`Failed to get token: ${r}`))},200*Math.min(20,Zs))),!e)?"":n||rt.getItem(`${it}_access_token`)||""}function Mc(){return Xd.getValue()||rt.getItem(`${it}_refresh_token`)||""}function Dc(){var e;return Oe.host||((e=window.location)==null?void 0:e.host)}function Rb(){return!!cn()}function xb(){return _o.pipe(Lo(e=>!!Rb()))}function Js(){return pt}function Jd(){return!!Oe.mock}function Cb(){return!!Oe.secure}function ef(){return el("trust")==="true"||el("trusted")==="true"}function Zg(){return!!Rl()&&!Oe.ignore_api_key||el("fixed_device")==="true"}function el(e,t=!0){let n=Qg()[e];if(rt){const r=`${kb()}_${e}`;n=n||rt.getItem(r)||rt.getItem(e)||"",t&&rt.setItem(r,`${n}`)}return n}async function Tb(e){return Oe=e||Oe,Oe.token_header=Oe.token_header??Sb(),window.AbortController||(window.AbortController=Eb),rt=Oe.storage==="session"?sessionStorage:localStorage,it=Xs.hashStr(Oe.redirect_uri,!1),Oe.delay&&Oe.delay>0&&await XE(Kd(Oe.delay)),nf()}function Jg(){return _e("Auth","Refreshing authorty."),pt=void 0,nf()}function tf(){_e("Auth","Invalidating tokens."),rt.removeItem(`${it}_access_token`),rt.removeItem(`${it}_expires_at`),_o.getValue()&&_o.next("")}function ey(e,t=pt){return Be.authorise||(Be.authorise=new Promise((n,r)=>{if(!t)return delete Be.authorise,r("Authority is not loaded");_e("Auth","Authorising user...");const i=()=>{if(cn(!1))_e("Auth","Valid token found."),delete Be.authorise,n(cn());else{const a=[()=>{_e("Auth","Successfully generated token."),n(cn()),delete Be.authorise},()=>{_e("Auth","Failed to generate token."),r("Failed to generate token"),setTimeout(()=>delete Be.authorise,200)}];Oe&&Oe.auth_type==="password"?(_e("Auth","Logging in with credentials."),jb(Oe).then(...a),Zs=0):la||Mc()?(_e("Auth",`Generating token with ${la?"code":"refresh token"}`),ny().then(...a),Zs=0):t.session?(_e("Auth","Users has session. Authorising application..."),Pb(e).then(...a)):(_e("Auth","No user session"),ty(t),r("No user session"),setTimeout(()=>delete Be.authorise,200))}};Mb().then(i,i)})),Be.authorise}function Lb(){const e=pt?pt.logout_url:"/logout";fetch(e,{method:"GET",redirect:"manual",headers:{Authorization:"Bearer "+cn()}}).then(t=>{var r;const n=t.headers.get("Location")||e;for(let i=0;i<rt.length;i++){const a=rt.key(i);a&&a.indexOf(it)>=0&&rt.removeItem(a)}(r=window.location)==null||r.assign(n)})}function nf(e=0){return Be.load_authority||(Be.load_authority=new Promise(t=>{var i;if(Oi.next(!1),Oe.mock){pt=bb,_e("Auth","System in mock mode"),Oi.next(!0),t();return}_e("Auth",`Fixed: ${Zg()} | Trusted: ${ef()}`),_e("Auth","Loading authority...");const n=Oe.secure||((i=window.location)==null?void 0:i.protocol.indexOf("https"))>=0,r=a=>{_e("Auth",`Failed to load authority(${a})`),Oi.next(!1),nr("load_authority",()=>{delete Be.load_authority,nf(e).then(o=>t())},300*Math.min(20,++e))};Qd(`${n?"https:":"http:"}//${Dc()}/auth/authority`,{credentials:"same-origin"}).subscribe(async a=>{if(!a.ok)return r(await a.text().catch(l=>l));pt=await a.json(),Yg=/[2-9]\.[0-9]+\.[0-9]+/g.test(pt.version||"")?"/api/engine/v2":"/control/api",_e("Auth","Loaded authority.",[],"group"),pt&&(_e("Auth",`Name: ${pt.name}`),_e("Auth",`Version: ${pt.version}`),_e("Auth",`Domain: ${pt.domain}`),_e("Auth",`Session: ${pt.session}`),_e("Auth",`Production: ${pt.production}`),_e("Auth",`Config Keys: ${Object.keys(pt.config||{}).length}`)),_e("Auth","",[],"groupEnd");const o=()=>{Oi.next(!0),_e("Auth","Application set online."),t()};delete Be.load_authority,ey("").then(o,o)},r)})),Be.load_authority}async function Pb(e){var n;const t=Ib(e);if(Oe.use_iframe)return Ob(t);(n=window.location)==null||n.assign(t)}function Ob(e){return Be.iframe_auth||(Be.iframe_auth=new Promise((t,n)=>{_e("Auth","Authorizing in an iFrame...");const r=document.createElement("iframe");r.style.position="absolute",r.style.top="0",r.style.left="0",r.style.height="1px",r.style.width="1px",r.style.zIndex="-1",r.id="place-authorize",r.src=`${e}`;const i=a=>{var o;if(a.origin===((o=window.location)==null?void 0:o.origin)&&a.data.type==="place-os"){const l=a.data;if(_e("Auth","Received credentials from iFrame..."),document.body.removeChild(r),_a("iframe_auth"),window.removeEventListener("message",i),delete Be.iframe_auth,l.token)return t(),rf({access_token:l.token,...l});la=l.code||"",ny().then(d=>t(d),d=>n(d))}};nr("iframe_auth",()=>{_e("Auth","Unable to resolve iFrame after 15 seconds..."),n()},15*1e3),window.addEventListener("message",i),r.onerror=a=>{_e("Auth","iFrame error.",a),delete Be.iframe_auth,n()},document.body.appendChild(r)})),Be.iframe_auth}let _p=!1;function ty(e){var t,n;if(Oe.handle_login!==!1&&!_p){_e("Auth","Redirecting to login page...");const r=(n=e.login_url)==null?void 0:n.replace("{{url}}",encodeURIComponent((t=window.location)==null?void 0:t.href));throw setTimeout(()=>{var i;return(i=window.location)==null?void 0:i.assign(r)},300),_p=!0,new Error("Redirecting to login page...")}else _e("Auth","Login being handled locally.");delete Be.authorise}function Mb(){return Be.check_token||(Be.check_token=new Promise(async(e,t)=>{cn()?(_e("Auth","Valid token found."),e(cn())):(_e("Auth","No token. Checking URL for auth credentials..."),await Db()?e(!0):t()),delete Be.check_token})),Be.check_token}function Db(){return Be.check_params||(Be.check_params=new Promise(e=>{_e("Auth","Checking for auth parameters...");let t=Qg();if((!t||Object.keys(t).length<=0)&&sessionStorage&&(t=JSON.parse(sessionStorage.getItem("ENGINE.auth.params")||"{}")),t&&(t.code||t.access_token||t.refresh_token)){t.code&&(la=t.code,Hr("code")),t.refresh_token&&(rt.setItem(`${it}_refresh_token`,t.refresh_token),Hr("refresh_token"));const n=rt.getItem(`${it}_nonce`)||"",r=(t.state||"").split(";");Hr("state"),Hr("token_type");const i=r[0];n===i?(rf(t),e(!!t.access_token)):e(!1)}else e(!1);nr("check_params_promise",()=>delete Be.check_params,50)})),Be.check_params}function Ib(e){const t=Fb();e=e?`${t};${e}`:t;const n=Oe?(Oe.auth_uri||"").indexOf("?")>=0:!1,r=(Oe?Oe.auth_uri:null)||"/auth/oauth/authorize",i=ef()||Oe.auth_type==="auth_code"?"code":"token";let a=`${r}${n?"&":"?"}response_type=${encodeURIComponent(i)}&client_id=${encodeURIComponent(it)}&state=${encodeURIComponent(e)}&redirect_uri=${encodeURIComponent(Oe.redirect_uri)}&scope=${encodeURIComponent(Oe.scope)}`;if(Oe.auth_type==="auth_code"){const{challenge:o,verify:l}=Nb();sessionStorage.setItem(`${it}_challenge`,o),a+="&code_challenge_method=S256",a+=`&code_challenge=${l}`}return a}const mp="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".split("");function Nb(e=43){const t=new Array(e).fill(0).map(()=>mp[Math.floor(Math.random()*mp.length)]).join(""),n=sb(lb(t)),r=qg(db.hash(n)).split("=")[0].replace(/\//g,"_").replace(/\+/g,"-");return{challenge:t,verify:r}}function Bb(){let e=(Oe.token_uri||"/auth/token")+`?client_id=${encodeURIComponent(it)}`,t="";if(e+=`&redirect_uri=${encodeURIComponent(Oe.redirect_uri)}`,Mc()){e+=`&refresh_token=${encodeURIComponent(Mc())}`,e+="&grant_type=refresh_token";const n=e.split("?");e=n[0],t=n[1]}else{e+=`&code=${encodeURIComponent(la)}`,e+="&grant_type=authorization_code";const n=sessionStorage.getItem(`${it}_challenge`);n&&(e+=`&code_verifier=${n}`,sessionStorage.removeItem(`${it}_challenge`)),la=""}return[e,t]}function Ub(e){const t=e.token_uri||"/auth/token",n=Yd({grant_type:"password",client_id:it,client_secret:e.client_secret,redirect_uri:e.redirect_uri,authority:pt==null?void 0:pt.id,scope:e.scope,username:e.username,password:e.password});return`${t}?${n}`}function ny(){return ry(...Bb())}function jb(e){return ry(Ub(e))}function ry(e,t=""){return Be.generate_tokens||(Be.generate_tokens=new Promise((n,r)=>{_e("Auth","Generating new token...");const i=a=>{_e("Auth","Error generating new tokens.",a),rt.removeItem(`${it}_refresh_token`),Xd.next(""),r(),delete Be.generate_tokens};Qd(e,{method:"POST",body:t,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).subscribe(async a=>{if(!a.ok)return i(a);const o=await a.json();rf(o),n(),delete Be.generate_tokens},i)})),Be.generate_tokens}function rf(e){const t=pb(new Date,Math.max(60,parseInt(e.expires_in,10)-300));_e("Auth","Tokens generated storing..."),ef()&&(e.access_token&&(rt.setItem(`${it}_access_token`,e.access_token),Hr("access_token")),e.refresh_token&&(rt.setItem(`${it}_refresh_token`,e.refresh_token),Hr("refresh_token"))),e.expires_in&&(rt.setItem(`${it}_expires_at`,`${t.valueOf()}`),Hr("expires_in")),Oi.next(!0),_o.next(e.access_token||""),Xd.next(e.refresh_token||"")}function Fb(){const e=mb();return rt.setItem(`${it}_nonce`,e),e}const iy={};let Vb=(e,t)=>{const n=new Error(`Mock endpoint not found: ${e} ${t}`);return n.status=404,_e("HTTP(M)",`404 ${e}:`,t),Gg(n)};function zb(e,t,n,r=iy){const i=$b(e,t,r);if(i){const a=Gb(t,i,n);return Hb(i,a)}return Vb(e,t)}function $b(e,t,n=iy){const r=t.replace(/(http|https):\/\/[a-zA-Z0-9.-]*:?([0-9]*)?/g,"").replace(/^\//,"").split("?")[0].split("/"),i=Object.keys(n).reduce((a,o)=>(o.indexOf(`${e}|`)===0&&a.push(n[o]),a),[]);for(const a of i)if(a.path_structure.length===r.length){let o=!0;for(let l=0;l<a.path_structure.length;l++)if(!a.path_structure[l]&&a.path_parts[l]!==r[l]){o=!1;break}if(o)return a}return null}function Gb(e,t,n){const r=e.replace(/(http|https):\/\/[a-zA-Z0-9.-]*:?([0-9]*)?/g,"").split("?"),i=r[0].replace(/^\//,""),a=r[1]||"",o=Ha(a),l=i.split("/"),d={};for(let _=0;_<t.path_structure.length;_++){const y=t.path_structure[_];y&&(d[y]=l[_])}const h={url:e,path:t.path,method:t.method,metadata:t.metadata,route_params:d,query_params:o,body:n};return _e("HTTP(M)",`MATCHED ${h.method}:`,h),h}function Hb(e,t){let n;try{n=e.callback?e.callback(t):e.metadata}catch(o){throw _e("HTTP(M)",`ERROR ${t.method}:`,[t.url,o]),o}const r=e.delay_variance||100,i=e.delay||300,a=Math.floor(Math.random()*r-r/2)+i;return _e("HTTP(M)",`RESP ${t.method}:`,[t.url,n]),QE([n]).pipe(rb(Math.max(200,a)))}const ay={};function Wb(e,t=ay){return t[e]||{}}function oy(e,t,n=Kb){return t||(t={response_type:"json"}),n("GET",e,{response_type:"json",...t})}async function qb(e,t,n=ay){if(e.headers){const r={};e.headers.forEach?e.headers.forEach((i,a)=>r[a.toLowerCase()]=i):Object.keys(e.headers).forEach(i=>r[i.toLowerCase()]=e.headers[i]),n[e.url||""]=r}switch(t){case"json":return await e.json().catch(()=>({}));case"text":return await e.text();case"void":return;default:return await e.json().catch(()=>({}))}}const sy=()=>(tf(),Jg().then(()=>Promise.resolve(),()=>new Promise(e=>{setTimeout(()=>{sy().then(()=>e())},1e3)})));function Kb(e,t,n,r=Jd,i=zb,a=qb){if(r()){const o=i(e,t,n==null?void 0:n.body);if(o)return o}return n.headers=n.headers||{},!n.headers["Content-Type"]&&!n.headers["content-type"]&&(n.headers["Content-Type"]="application/json"),xb().pipe(eb(o=>o),Wg(1),up(o=>{cn()==="x-api-key"?n.headers["X-API-Key"]=Rl():n.headers.Authorization=`Bearer ${cn()}`;const l={...n,method:e,credentials:"same-origin"};return["POST","PUT","PATCH"].includes(e)&&n.body!==void 0&&(l.body=typeof n.body=="string"?n.body:JSON.stringify(n.body)),Qd(t,l)}),up(o=>o.ok?a(o,n.response_type):Gg(o)),ob({count:4,delay:(o,l)=>new gt(d=>{if(o.status===511){ty(Js()),d.error(o);return}if(o.status!==401){d.error(o||{});return}_e("HTTP","Auth error",o);const h=Math.pow(2,l-1)*1e3;sy().then(()=>{d.next(h),d.complete()}).catch(()=>{d.error(o)})})}))}class Po{constructor(t={}){te(this,"id");te(this,"name");te(this,"created_at");te(this,"updated_at");te(this,"version");this.id=t.id||"",this.name=t.name||"",this.created_at=t.created_at||0,this.updated_at=t.updated_at||0,this.version=t.version||0}toJSON(){const t={...this};return t.version=this.version,delete t.created_at,yb(t,[void 0,null,""])}}let gp="";const ly=e=>e;function uy(e){const{query_params:t,fn:n,path:r,endpoint:i}=e,a=Yd(t),o=`${i||Zd()}${r?"/"+r:""}${a?"?"+a:""}`;return oy(o).pipe(Lo(l=>{const d=Qb(o,a);return{total:d.total||0,next:d.next?()=>uy({query_params:d.next,fn:n,endpoint:i,path:r}):null,data:l&&l instanceof Array?l.map(h=>(n||ly)(h)):l&&!(l instanceof Array)&&l.results?l.results.map(h=>h):[]}}))}function af(e){const{query_params:t,id:n,path:r,fn:i,options:a}=e,o=Yd(t),l=`${Zd()}/${r}/${n}${o?"?"+o:""}`;return oy(l,a).pipe(Lo(d=>(i||ly)(d)))}function Qb(e,t,n){const r=Wb(e[0]==="/"?`${location.origin}${e}`:e),i={total:0,next:null};if(r&&r["x-total-count"]){const a=+(r["x-total-count"]||0);t.length<2||t.length<12&&t.indexOf("offset=")>=0,i.total=a}return r&&r.link&&(gp=gb(r.link||"").next,i.next=Ha(gp.split("?")[1])),i}var Oo=(e=>(e[e.None=0]="None",e[e.Support=1]="Support",e[e.Admin=2]="Admin",e[e.NeverDisplay=3]="NeverDisplay",e))(Oo||{});class of extends Po{constructor(n={}){super(n);te(this,"parent_id");te(this,"updated_at");te(this,"encryption_level");te(this,"settings_string");te(this,"keys");te(this,"modified_by_id");this.parent_id=n.parent_id||"",this.updated_at=n.updated_at||Math.floor(new Date().getTime()/1e3),this.settings_string=n.settings_string||"",this.encryption_level=n.encryption_level||Oo.None,this.keys=n.keys||[],this.modified_by_id=n.modified_by_id||""}get value(){return this.settings_string}}var tl=(e=>(e[e.SSH=0]="SSH",e[e.Device=1]="Device",e[e.Service=2]="Service",e[e.Websocket=3]="Websocket",e[e.Logic=99]="Logic",e))(tl||{});class Yb extends Po{constructor(n={}){super(n);te(this,"class_name");te(this,"description");te(this,"module_name");te(this,"role");te(this,"default_uri");te(this,"default_port");te(this,"repository_id");te(this,"file_name");te(this,"commit");te(this,"ignore_connected");te(this,"update_available");te(this,"update_info");te(this,"settings");this.description=n.description||"",this.module_name=n.module_name||"",this.role=n.role??tl.Logic,this.default_uri=n.default_uri||"",this.default_port=n.default_port||1,this.ignore_connected=n.ignore_connected||!1,this.class_name=n.class_name||"",this.repository_id=n.repository_id||"",this.file_name=n.file_name||"",this.commit=n.commit||"",this.update_available=n.update_available||!1,this.update_info=n.update_info,this.settings=n.settings||[null,null,null,null],typeof this.settings!="object"&&(this.settings=[null,null,null,null]);for(const r in Oo)!isNaN(Number(r))&&!this.settings[r]&&(this.settings[r]=new of({parent_id:this.id,encryption_level:+r}))}}class cy extends Po{constructor(n={}){super(n);te(this,"settings",[null,null,null,null]);te(this,"display_name");te(this,"description");te(this,"email");te(this,"code");te(this,"capacity");te(this,"features");te(this,"bookable");te(this,"public");te(this,"installed_ui_devices");te(this,"support_url");te(this,"timetable_url");te(this,"camera_snapshot_url");te(this,"camera_url");te(this,"room_booking_url");te(this,"map_id");te(this,"modules");te(this,"images");te(this,"zones");te(this,"timezone");te(this,"module_list",[]);te(this,"signage");te(this,"playlists");te(this,"approval");te(this,"orientation");this.display_name=n.display_name||"",this.description=n.description||"",this.email=n.email||"",this.code=n.code||"",this.capacity=n.capacity||0,this.features=n.features||[],this.bookable=n.bookable||!1,this.public=n.public??!1,this.installed_ui_devices=n.installed_ui_devices||0,this.support_url=n.support_url||"",this.camera_snapshot_url=n.camera_snapshot_url||"",this.camera_url=n.camera_url||"",this.timetable_url=n.timetable_url||"",this.room_booking_url=n.room_booking_url||"",this.map_id=n.map_id||"",this.modules=n.modules||[],this.images=n.images||[],this.zones=n.zones||[],this.settings=n.settings||[null,null,null,null],this.timezone=n.timezone||"",this.signage=n.signage||!1,this.playlists=n.playlists||[],this.orientation=n.orientation||"unspecified",this.approval=n.approval||!1,typeof this.settings!="object"&&(this.settings=[null,null,null,null]);for(const r in Oo)!isNaN(Number(r))&&!this.settings[r]&&(this.settings[r]=new of({parent_id:this.id,encryption_level:+r}));n.module_data&&n.module_data instanceof Array&&(this.module_list=n.module_data.map(r=>new dy(r)))}}class dy extends Po{constructor(n={}){super(n);te(this,"connected");te(this,"running");te(this,"updated_at");te(this,"edge_id");te(this,"driver_id");te(this,"driver");te(this,"control_system_id");te(this,"system");te(this,"ip");te(this,"tls");te(this,"udp");te(this,"port");te(this,"makebreak");te(this,"uri");te(this,"custom_name");te(this,"role");te(this,"notes");te(this,"ignore_connected");te(this,"settings",[null,null,null,null]);te(this,"has_runtime_error");te(this,"error_timestamp");this.driver_id=n.driver_id||n.dependency_id||"",this.control_system_id=n.control_system_id||"",this.edge_id=n.edge_id||"",this.ip=n.ip||"",this.tls=n.tls||!1,this.udp=n.udp||!1,this.port=n.port||1,this.makebreak=n.makebreak||!1,this.uri=n.uri||"",this.custom_name=n.custom_name||"",this.role=n.role??tl.Logic,this.notes=n.notes||"",this.ignore_connected=n.ignore_connected||!1,this.connected=n.connected,this.running=n.running||!1,this.updated_at=n.updated_at||0,this.system=new cy(n.control_system||n.system),this.has_runtime_error=n.has_runtime_error||!1,this.error_timestamp=n.error_timestamp||0,this.driver=new Yb(n.dependency||n.driver),this.settings=n.settings||[null,null,null,null],typeof this.settings!="object"&&(this.settings=[null,null,null,null]);for(const r in Oo)!isNaN(Number(r))&&!this.settings[r]&&(this.settings[r]=new of({parent_id:this.id,encryption_level:+r}))}get system_id(){return this.control_system_id}toJSON(n=!1){const r=super.toJSON();return(r.role!==tl.Logic&&!n||!r.control_system_id)&&delete r.control_system_id,delete r.driver,delete r.system,delete r.error_timestamp,delete r.has_runtime_error,r}}const Xb="modules";function Zb(e){return new dy(e)}function Jb(e,t={}){return af({id:e,query_params:t,fn:Zb,path:Xb})}const fy="systems";function hy(e){return new cy(e)}function e2(e={}){return uy({query_params:e,fn:hy,path:fy})}function t2(e,t={}){return af({id:e,query_params:t,fn:hy,path:fy})}class n2 extends Po{constructor(n={}){super(n);te(this,"email_digest");te(this,"authority_id");te(this,"email");te(this,"phone");te(this,"country");te(this,"building");te(this,"groups");te(this,"image");te(this,"metadata");te(this,"login_name");te(this,"staff_id");te(this,"first_name");te(this,"last_name");te(this,"support");te(this,"sys_admin");te(this,"ui_theme");te(this,"card_number");te(this,"department");te(this,"work_preferences");te(this,"work_overrides");te(this,"photo_upload_id");te(this,"locatable");te(this,"password","");te(this,"confirm_password","");this.authority_id=n.authority_id||"",this.email=n.email||"",this.email_digest=n.email_digest||"",this.phone=n.phone||"",this.country=n.country||"",this.building=n.building||"",this.image=n.image||"",this.metadata=n.metadata||"",this.login_name=n.login_name||"",this.staff_id=n.staff_id||"",this.first_name=n.first_name||"",this.last_name=n.last_name||"",this.support=!!n.support,this.sys_admin=!!n.sys_admin,this.ui_theme=n.ui_theme||"",this.card_number=n.card_number||"",this.groups=n.groups||[],this.department=n.department||"",this.photo_upload_id=n.photo_upload_id||"",this.work_preferences=n.work_preferences||[],this.work_overrides=n.work_overrides||{},this.locatable=n.locatable??!0}}const r2="users";function i2(e){return new n2(e)}function a2(e,t={}){return af({id:e,query_params:t,fn:i2,path:r2})}var o2={url:"",deserializer:function(e){return JSON.parse(e.data)},serializer:function(e){return JSON.stringify(e)}},s2="WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }",l2=function(e){kn(t,e);function t(n,r){var i=e.call(this)||this;if(i._socket=null,n instanceof gt)i.destination=r,i.source=n;else{var a=i._config=po({},o2);if(i._output=new fi,typeof n=="string")a.url=n;else for(var o in n)n.hasOwnProperty(o)&&(a[o]=n[o]);if(!a.WebSocketCtor&&WebSocket)a.WebSocketCtor=WebSocket;else if(!a.WebSocketCtor)throw new Error("no WebSocket constructor can be found");i.destination=new pu}return i}return t.prototype.lift=function(n){var r=new t(this._config,this.destination);return r.operator=n,r.source=this,r},t.prototype._resetState=function(){this._socket=null,this.source||(this.destination=new pu),this._output=new fi},t.prototype.multiplex=function(n,r,i){var a=this;return new gt(function(o){try{a.next(n())}catch(d){o.error(d)}var l=a.subscribe({next:function(d){try{i(d)&&o.next(d)}catch(h){o.error(h)}},error:function(d){return o.error(d)},complete:function(){return o.complete()}});return function(){try{a.next(r())}catch(d){o.error(d)}l.unsubscribe()}})},t.prototype._connectSocket=function(){var n=this,r=this._config,i=r.WebSocketCtor,a=r.protocol,o=r.url,l=r.binaryType,d=this._output,h=null;try{h=a?new i(o,a):new i(o),this._socket=h,l&&(this._socket.binaryType=l)}catch(y){d.error(y);return}var _=new pa(function(){n._socket=null,h&&h.readyState===1&&h.close()});h.onopen=function(y){var g=n._socket;if(!g){h.close(),n._resetState();return}var m=n._config.openObserver;m&&m.next(y);var C=n.destination;n.destination=kl.create(function(w){if(h.readyState===1)try{var O=n._config.serializer;h.send(O(w))}catch(b){n.destination.error(b)}},function(w){var O=n._config.closingObserver;O&&O.next(void 0),w&&w.code?h.close(w.code,w.reason):d.error(new TypeError(s2)),n._resetState()},function(){var w=n._config.closingObserver;w&&w.next(void 0),h.close(),n._resetState()}),C&&C instanceof pu&&_.add(C.subscribe(n.destination))},h.onerror=function(y){n._resetState(),d.error(y)},h.onclose=function(y){h===n._socket&&n._resetState();var g=n._config.closeObserver;g&&g.next(y),y.wasClean?d.complete():d.error(y)},h.onmessage=function(y){try{var g=n._config.deserializer;d.next(g(y))}catch(m){d.error(m)}}},t.prototype._subscribe=function(n){var r=this,i=this.source;return i?i.subscribe(n):(this._socket||this._connectSocket(),this._output.subscribe(n),n.add(function(){var a=r._socket;r._output.observers.length===0&&(a&&(a.readyState===1||a.readyState===0)&&a.close(),r._resetState())}),n)},t.prototype.unsubscribe=function(){var n=this._socket;n&&(n.readyState===1||n.readyState===0)&&n.close(),this._resetState(),e.prototype.unsubscribe.call(this)},t}(Lc);function u2(e){return new l2(e)}var Ln=(e=>(e[e.PARSE_ERROR=0]="PARSE_ERROR",e[e.BAD_REQUEST=1]="BAD_REQUEST",e[e.ACCESS_DENIED=2]="ACCESS_DENIED",e[e.REQUEST_FAILED=3]="REQUEST_FAILED",e[e.UNKNOWN_CMD=4]="UNKNOWN_CMD",e[e.SYS_NOT_FOUND=5]="SYS_NOT_FOUND",e[e.MOD_NOT_FOUND=6]="MOD_NOT_FOUND",e[e.UNEXPECTED_FAILURE=7]="UNEXPECTED_FAILURE",e))(Ln||{}),py=(e=>(e.Info="info",e.Debug="debug",e.Warning="warn",e.Error="error",e.Fatal="fatal",e.Trace="trace",e))(py||{});const c2={};function d2(e){return c2[e]}const _y=15;let sf=0,$t,my=0;const Ct={},lf={},ma={},f2={},Wr=new gi(!1);ma._place_os_status=Wr.asObservable();const gy=new gi([0,0]);ma._place_os_sync=gy.asObservable();let yy=Date.now(),Fi,nl=0,lr=null,ws,uf=0;const cf=10*1e3,vy=new fi;ma._place_os_debug_events=vy.asObservable();function _u(){return Zd().indexOf("/control/")>=0?"/control/websocket":`${Xg()}/systems/control`}function Sy(){return Wr.getValue()}function h2(){return ma._place_os_status}function p2(e,t=lf,n=ma){const r=`${e.sys}|${e.mod}_${e.index}|${e.name}`;return t[r]||(t[r]=new gi(void 0),n[r]=t[r].asObservable()),n[r]}function _2(e,t=lf){const n=`${e.sys}|${e.mod}_${e.index}|${e.name}`;if(t[n])return t[n].getValue()}function yp(e,t=0,n=xl){const r={id:++sf,cmd:"bind",...e};return n(r,t)}function m2(e,t=0,n=xl){const r={id:++sf,cmd:"unbind",...e};return n(r,t)}function g2(e,t=cf,n=xl){const r={id:++sf,cmd:"exec",...e};return n(r,t)}function xl(e,t=cf,n=0){const r=`${e.cmd}|${e.sys}|${e.mod}${e.index}|${e.name}|${e.args}|${wb()}`;if(Ct[r])_e("WS","Request already in progress. Waiting...",e);else{const i={...e,key:r};i.promise=new Promise((a,o)=>{const l=()=>{delete Ct[r],Ct[r]=null,xl(e,t,n).then(d=>a(d),d=>o(d))};if($t&&Sy()){Jd()&&A2(e,$t,f2),i.resolve=a,i.reject=o;const d=`${e.sys}, ${e.mod}_${e.index}, ${e.name}`;_e("WS",`[${e.cmd.toUpperCase()}](${e.id}) ${d}`,e.args),$t.next(e),t>0&&nr(`${r}`,()=>{o("Request timed out."),delete Ct[r],Ct[r]=null},t)}else lr?setTimeout(()=>l(),1e3):df().then(()=>l())}),Ct[r]=i}return Ct[r].promise}function wy(e){if(e!=="pong"&&e instanceof Object){if(e.type==="notify"&&e.meta)S2(e.meta,e.value);else if(e.type==="success")y2(e);else if(e.type==="debug"){_e("WS",`[DEBUG] ${e.mod}${e.klass||""} `,e.msg);const t=e.meta||{mod:"",index:""};vy.next({mod_id:e.mod||"<empty>",module:`${t.mod}_${t.index}`,class_name:e.klass||"<empty>",message:e.msg||"<empty>",level:e.level||py.Debug,time:Math.floor(new Date().getTime()/1e3)})}else e.type==="error"?v2(e):e.cmd||_e("WS","Invalid websocket message",e,"error");_a(`${e.id}`)}else e==="pong"&&(uf=Date.now(),_e("WS","Pong!"))}function y2(e){const t=Object.keys(Ct).map(n=>Ct[n]).find(n=>(n==null?void 0:n.id)===e.id);_e("WS",`[SUCCESS](${e.id})`),t&&t.resolve&&(t.resolve(e.value),delete Ct[t.key])}function v2(e){let t="UNEXPECTED FAILURE";switch(e.code){case Ln.ACCESS_DENIED:t="ACCESS DENIED";break;case Ln.BAD_REQUEST:t="BAD REQUEST";break;case Ln.MOD_NOT_FOUND:t="MODULE NOT FOUND";break;case Ln.SYS_NOT_FOUND:t="SYSTEM NOT FOUND";break;case Ln.PARSE_ERROR:t="PARSE ERROR";break;case Ln.REQUEST_FAILED:t="REQUEST FAILED";break;case Ln.UNKNOWN_CMD:t="UNKNOWN COMMAND";break}_e("WS",`[ERROR] ${t}(${e.id}): ${e.msg}`,void 0,"error");const n=Object.keys(Ct).map(r=>Ct[r]).filter(r=>r).find(r=>r.id===e.id);n&&n.reject&&(n.reject(e),_a(`${n.key}`),delete Ct[n.key])}function S2(e,t,n=lf,r=ma){const i=`${e.sys}|${e.mod}_${e.index}|${e.name}`;n[i]||(n[i]=new gi(null),r[i]=n[i].asObservable());const a=`${e.sys}, ${e.mod}_${e.index}, ${e.name}`;_e("WS",`[NOTIFY] ${a} changed`,[n[i].getValue(),"",t]),n[i].next(t)}function df(e=0){return lr==null&&(lr=new Promise(t=>{if(e>40)return location.reload();nl++,yy=Date.now(),$t=Jd()?b2():w2(),$t?(_e("WS(Debug)","Authority:",[Js()]),_e("WS","Connecting to websocket..."),$t.subscribe(n=>{Wr.getValue()||(_e("WS","Connection established."),t()),Wr.next(!0),nl=0,mu(),wy(n)},n=>{$t=void 0,lr=null,Sp(),mu(),E2(n)},()=>{$t=void 0,lr=null,Sp(),_e("WS","Connection closed by browser."),Wr.next(!1),rl()}),Fi&&clearInterval(Fi),uf=Date.now(),vp(),Fi=setInterval(()=>vp(),_y*1e3),mu(),my+=1,ws=setTimeout(()=>{_e("WS","Unhealthy connection. Reconnecting..."),Wr.next(!1),lr=null,rl()},30*1e3)):($t?_e("WS",`Waiting on auth(${e}). Retrying in ${1e3*Math.min(10,e+1)}ms...`,[!!cn(),!!Js()],"info"):_e("WS",`Failed to create websocket(${e}). Retrying in ${1e3*Math.min(10,e+1)}ms...`,void 0,"error"),setTimeout(()=>{lr=null,df(e).then(n=>t(n))},1e3*Math.min(10,++e)))})),lr}function w2(){if(!Js()||!cn())return null;const e=Cb()||location.protocol.indexOf("https")>=0;let t=`ws${e?"s":""}://${Dc()}${_u()}${Zg()?"?fixed_device=true":""}`;const n=cn();let r=n==="x-api-key"?`api-key=${Rl()}`:`bearer_token=${n}`;return!Ab()&&!vb()?(_e("WS","Authenticating through cookie..."),r+=`;max-age=120;path=${_u()};`,r+=`${e?"secure;":""}samesite=strict`,document.cookie=r,_e("WS","Cookies:",[document.cookie,r])):(_e("WS","Authenticating through URL query parameter..."),t+=`${t.indexOf("?")>=0?"&":"?"}${r}`),_e("WS",`Creating websocket connection to ws${e?"s":""}://${Dc()}${_u()}`),u2({url:t,serializer:i=>typeof i=="object"?JSON.stringify(i):i,deserializer:i=>{let a=i.data;if(a==="pong")return a;try{return JSON.parse(i.data)}catch{return a}}})}function rl(){gy.next([my,Date.now()-yy]),$t&&Sy()&&($t.complete(),Fi&&(clearInterval(Fi),Fi=void 0)),_e("WS",`Reconnecting in ${Math.min(5e3,nl*300||1e3)}ms...`),nr("reconnect",()=>df(),Math.min(5e3,(nl+1)*300||1e3))}function vp(){if(Date.now()-uf>4*_y*1e3)return rl();$t==null||$t.next("ping")}function E2(e){Wr.next(!1),_e("WS","Websocket error:",e,void 0,"error"),e.status===401&&tf(),Jg(),rl()}function mu(){ws&&(clearTimeout(ws),ws=void 0)}function b2(){const e=new fi;return e.subscribe(t=>wy(t)),e}function A2(e,t,n){const r=`${e.sys}|${e.mod}_${e.index}|${e.name}`,i=d2(e.sys),a=i&&i[e.mod]?i[e.mod][e.index-1||0]:null;if(a){switch(e.cmd){case"bind":n[r]=a.listen(e.name).subscribe(o=>{setTimeout(()=>{t.next({type:"notify",value:o,meta:e})},Math.floor(Math.random()*100+50))});break;case"unbind":n[r]&&(n[r].unsubscribe(),delete n[r],_a(`${r}`));break}nr(`${e.id}-response`,()=>{const o={id:e.id,type:"success",value:e.cmd==="exec"?a.call(e.name,e.args):null};t.next(o)},10)}else nr(`${e.id}-error`,()=>t.next({id:e.id,type:"error",code:i?Ln.SYS_NOT_FOUND:Ln.MOD_NOT_FOUND}),10)}function Sp(){for(const e in Ct)Ct[e]&&delete Ct[e]}class wp{constructor(t,n){te(this,"name");te(this,"_pending",0);te(this,"_binding_count",0);te(this,"_stale_bindings",0);this._module=t,this.name=n,h2().pipe(ib()).subscribe(r=>{r&&(this._stale_bindings||this._pending===1)?(_e("VAR","Re-binding to status variable",this.binding()),this.rebind()):r||(_a(`rebind:${JSON.stringify(this.binding())}`),_e("VAR","Binding dropped due to disconnection, re-binding when possible.",this.binding()),this._stale_bindings=this._binding_count||this._stale_bindings,this._binding_count=0)})}get count(){return this._binding_count}get value(){return _2(this.binding())}listen(){return p2(this.binding())}subscribe(t){return this.listen().subscribe(t)}bindThenSubscribe(t){const n=this.bind();return this.listen().subscribe({next:t,complete:()=>n(),error:()=>n()})}bind(){return(this._binding_count<=0&&this._stale_bindings<=0||this._pending===2)&&(this._pending=1,yp(this.binding()).then(()=>{this._binding_count++,this._pending=0}).catch(()=>null)),()=>this.unbind()}unbind(){this._binding_count===1&&this._pending===0?(this._pending=2,m2(this.binding()).then(()=>{this._pending===2&&(this._pending=0),this._binding_count--})):this._binding_count=Math.max(this._binding_count-1,0)}async rebind(){!this._stale_bindings&&this._pending!==1||nr(`rebind:${JSON.stringify(this.binding())}`,async()=>{await yp(this.binding()),this._binding_count=this._stale_bindings||1,this._stale_bindings=0},100)}binding(){return{sys:this._module.system.id,mod:this._module.name,index:this._module.index,name:this.name}}}class k2{constructor(t,n){te(this,"_bindings",{});this._system=t,this._id=n}get id(){return`${this.name}_${this.index}`}get system(){return this._system}get index(){const t=this._id.split("_").pop();return parseInt(t||"",10)||1}get name(){const t=this._id.split("_");return t.pop(),t.join("_")}binding(t){return this._bindings[t]||(this._bindings[t]=new wp(this,t)),this._bindings[t]}variable(t){return this._bindings[t]||(this._bindings[t]=new wp(this,t)),this._bindings[t]}execute(t,n,r=cf){return g2({sys:this._system.id,mod:this.name,index:this.index,name:t,args:n},r)}}class R2{constructor(t){te(this,"id");te(this,"_module_list",{});this.id=t}module(t,n=1){if(!t)throw new Error("Invalid module ID");const r=t.split("_");r.length>1&&Number.isInteger(+r[r.length-1])&&(n=+r[r.length-1],r.pop()),n<1&&(n=1);const i=r.join("_");for(this._module_list[i]||(this._module_list[i]=[]);this._module_list[i].length<n;)this._module_list[i].push(new k2(this,`${i}_${this._module_list[i].length+1}`));return this._module_list[i][n-1]}}const gu={};function x2(e){return gu[e]||(gu[e]=new R2(e)),gu[e]}function C2(e,t,n=1){return x2(e).module(t,n)}var Ic=function(e,t){return Ic=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Ic(e,t)};function ga(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Ic(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function T2(e,t,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(_){try{h(r.next(_))}catch(y){o(y)}}function d(_){try{h(r.throw(_))}catch(y){o(y)}}function h(_){_.done?a(_.value):i(_.value).then(l,d)}h((r=r.apply(e,t||[])).next())})}function Ey(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(h){return function(_){return d([h,_])}}function d(h){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,h[0]&&(n=0)),n;)try{if(r=1,i&&(a=h[0]&2?i.return:h[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,h[1])).done)return a;switch(i=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,i=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){n.label=h[1];break}if(h[0]===6&&n.label<a[1]){n.label=a[1],a=h;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(h);break}a[2]&&n.ops.pop(),n.trys.pop();continue}h=t.call(e,n)}catch(_){h=[6,_],i=0}finally{r=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function mo(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function il(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function al(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}function Vi(e){return this instanceof Vi?(this.v=e,this):new Vi(e)}function L2(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(m){return function(C){return Promise.resolve(C).then(m,y)}}function l(m,C){r[m]&&(i[m]=function(w){return new Promise(function(O,b){a.push([m,w,O,b])>1||d(m,w)})},C&&(i[m]=C(i[m])))}function d(m,C){try{h(r[m](C))}catch(w){g(a[0][3],w)}}function h(m){m.value instanceof Vi?Promise.resolve(m.value.v).then(_,y):g(a[0][2],m)}function _(m){d("next",m)}function y(m){d("throw",m)}function g(m,C){m(C),a.shift(),a.length&&d(a[0][0],a[0][1])}}function P2(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof mo=="function"?mo(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=e[a]&&function(o){return new Promise(function(l,d){o=e[a](o),i(l,d,o.done,o.value)})}}function i(a,o,l,d){Promise.resolve(d).then(function(h){a({value:h,done:l})},o)}}function Lt(e){return typeof e=="function"}function by(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var yu=by(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function Nc(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Cl=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,r,i,a;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var l=mo(o),d=l.next();!d.done;d=l.next()){var h=d.value;h.remove(this)}}catch(w){t={error:w}}finally{try{d&&!d.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}else o.remove(this);var _=this.initialTeardown;if(Lt(_))try{_()}catch(w){a=w instanceof yu?w.errors:[w]}var y=this._finalizers;if(y){this._finalizers=null;try{for(var g=mo(y),m=g.next();!m.done;m=g.next()){var C=m.value;try{Ep(C)}catch(w){a=a??[],w instanceof yu?a=al(al([],il(a)),il(w.errors)):a.push(w)}}}catch(w){r={error:w}}finally{try{m&&!m.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}}if(a)throw new yu(a)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)Ep(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&Nc(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&Nc(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}();Cl.EMPTY;function Ay(e){return e instanceof Cl||e&&"closed"in e&&Lt(e.remove)&&Lt(e.add)&&Lt(e.unsubscribe)}function Ep(e){Lt(e)?e():e.unsubscribe()}var O2={Promise:void 0},M2={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,al([e,t],il(n)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function ky(e){M2.setTimeout(function(){throw e})}function bp(){}function D2(e){e()}var ff=function(e){ga(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,Ay(n)&&n.add(r)):r.destination=B2,r}return t.create=function(n,r,i){return new ol(n,r,i)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Cl),I2=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(r){is(r)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(r){is(r)}else is(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){is(n)}},e}(),ol=function(e){ga(t,e);function t(n,r,i){var a=e.call(this)||this,o;return Lt(n)||!n?o={next:n??void 0,error:r??void 0,complete:i??void 0}:o=n,a.destination=new I2(o),a}return t}(ff);function is(e){ky(e)}function N2(e){throw e}var B2={closed:!0,next:bp,error:N2,complete:bp},hf=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function U2(e){return e}function j2(e){return e.length===0?U2:e.length===1?e[0]:function(n){return e.reduce(function(r,i){return i(r)},n)}}var Br=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var i=this,a=V2(t)?t:new ol(t,n,r);return D2(function(){var o=i,l=o.operator,d=o.source;a.add(l?l.call(a,d):d?i._subscribe(a):i._trySubscribe(a))}),a},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=Ap(n),new n(function(i,a){var o=new ol({next:function(l){try{t(l)}catch(d){a(d),o.unsubscribe()}},error:a,complete:i});r.subscribe(o)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[hf]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return j2(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=Ap(t),new t(function(r,i){var a;n.subscribe(function(o){return a=o},function(o){return i(o)},function(){return r(a)})})},e.create=function(t){return new e(t)},e}();function Ap(e){var t;return(t=e??O2.Promise)!==null&&t!==void 0?t:Promise}function F2(e){return e&&Lt(e.next)&&Lt(e.error)&&Lt(e.complete)}function V2(e){return e&&e instanceof ff||F2(e)&&Ay(e)}function z2(e){return Lt(e==null?void 0:e.lift)}function Ry(e){return function(t){if(z2(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function pf(e,t,n,r,i){return new $2(e,t,n,r,i)}var $2=function(e){ga(t,e);function t(n,r,i,a,o,l){var d=e.call(this,n)||this;return d.onFinalize=o,d.shouldUnsubscribe=l,d._next=r?function(h){try{r(h)}catch(_){n.error(_)}}:e.prototype._next,d._error=a?function(h){try{a(h)}catch(_){n.error(_)}finally{this.unsubscribe()}}:e.prototype._error,d._complete=i?function(){try{i()}catch(h){n.error(h)}finally{this.unsubscribe()}}:e.prototype._complete,d}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t}(ff),G2={now:function(){return Date.now()}},H2=function(e){ga(t,e);function t(n,r){return e.call(this)||this}return t.prototype.schedule=function(n,r){return this},t}(Cl),kp={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,al([e,t],il(n)))},clearInterval:function(e){return clearInterval(e)},delegate:void 0},W2=function(e){ga(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return t.prototype.schedule=function(n,r){var i;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var a=this.id,o=this.scheduler;return a!=null&&(this.id=this.recycleAsyncId(o,a,r)),this.pending=!0,this.delay=r,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,r),this},t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),kp.setInterval(n.flush.bind(n,this),i)},t.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;r!=null&&kp.clearInterval(r)},t.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(n,r){var i=!1,a;try{this.work(n)}catch(o){i=!0,a=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),a},t.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,i=n.scheduler,a=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Nc(a,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(H2),Rp=function(){function e(t,n){n===void 0&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(t,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,t).schedule(r,n)},e.now=G2.now,e}(),q2=function(e){ga(t,e);function t(n,r){r===void 0&&(r=Rp.now);var i=e.call(this,n,r)||this;return i.actions=[],i._active=!1,i}return t.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,i){for(;n=r.shift();)n.unsubscribe();throw i}},t}(Rp),K2=new q2(W2),Q2=K2,Y2=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function X2(e){return Lt(e==null?void 0:e.then)}function Z2(e){return Lt(e[hf])}function J2(e){return Symbol.asyncIterator&&Lt(e==null?void 0:e[Symbol.asyncIterator])}function eA(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function tA(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var nA=tA();function rA(e){return Lt(e==null?void 0:e[nA])}function iA(e){return L2(this,arguments,function(){var n,r,i,a;return Ey(this,function(o){switch(o.label){case 0:n=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,Vi(n.read())];case 3:return r=o.sent(),i=r.value,a=r.done,a?[4,Vi(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,Vi(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function aA(e){return Lt(e==null?void 0:e.getReader)}function xy(e){if(e instanceof Br)return e;if(e!=null){if(Z2(e))return oA(e);if(Y2(e))return sA(e);if(X2(e))return lA(e);if(J2(e))return Cy(e);if(rA(e))return uA(e);if(aA(e))return cA(e)}throw eA(e)}function oA(e){return new Br(function(t){var n=e[hf]();if(Lt(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function sA(e){return new Br(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function lA(e){return new Br(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,ky)})}function uA(e){return new Br(function(t){var n,r;try{for(var i=mo(e),a=i.next();!a.done;a=i.next()){var o=a.value;if(t.next(o),t.closed)return}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()})}function Cy(e){return new Br(function(t){dA(e,t).catch(function(n){return t.error(n)})})}function cA(e){return Cy(iA(e))}function dA(e,t){var n,r,i,a;return T2(this,void 0,void 0,function(){var o,l;return Ey(this,function(d){switch(d.label){case 0:d.trys.push([0,5,6,11]),n=P2(e),d.label=1;case 1:return[4,n.next()];case 2:if(r=d.sent(),!!r.done)return[3,4];if(o=r.value,t.next(o),t.closed)return[2];d.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return l=d.sent(),i={error:l},[3,11];case 6:return d.trys.push([6,,9,10]),r&&!r.done&&(a=n.return)?[4,a.call(n)]:[3,8];case 7:d.sent(),d.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}var Ty=by(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});function fA(e,t){return new Promise(function(n,r){var i=!1,a;e.subscribe({next:function(o){a=o,i=!0},error:r,complete:function(){i?n(a):r(new Ty)}})})}function Tl(e,t){return new Promise(function(n,r){var i=new ol({next:function(a){n(a),i.unsubscribe()},error:r,complete:function(){r(new Ty)}});e.subscribe(i)})}function hA(e){return e instanceof Date&&!isNaN(e)}function pA(e,t){return Ry(function(n,r){var i=0;n.subscribe(pf(r,function(a){r.next(e.call(t,a,i++))}))})}function _A(e,t,n){return n===void 0&&(n=Q2),new Br(function(r){var i=hA(e)?+e-n.now():e;i<0&&(i=0);var a=0;return n.schedule(function(){r.closed||(r.next(a++),r.complete())},i)})}var mA=Array.isArray;function gA(e){return e.length===1&&mA(e[0])?e[0]:e}function yA(e,t){return Ry(function(n,r){var i=0;n.subscribe(pf(r,function(a){return e.call(t,a,i++)&&r.next(a)}))})}function vA(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e=gA(e),e.length===1?xy(e[0]):new Br(SA(e))}function SA(e){return function(t){for(var n=[],r=function(a){n.push(xy(e[a]).subscribe(pf(t,function(o){if(n){for(var l=0;l<n.length;l++)l!==a&&n[l].unsubscribe();n=null}t.next(o)})))},i=0;n&&!t.closed&&i<e.length;i++)r(i)}}var Ly=(e=>(e.Recording="recording",e.Booking="booking",e.AV="av",e.Lighting="lighting",e.HVAC="hvac",e.CameraControl="camera_control",e.PTZ="ptz",e.Signage="signage",e.AccessControl="access_control",e.Occupancy="occupancy",e.BruinCast="bruincast",e))(Ly||{});const wA=async()=>{try{const e=await Tl(e2({limit:500,features:`${Ly.BruinCast}`}));console.log("Query systems response: ",e);const t=(e==null?void 0:e.data)||[];return!Array.isArray(t)||t.length===0?[]:(console.log("Filtered systems response: ",t),t)}catch(e){throw console.error("Failed to fetch systems:",e),e}},Py=async e=>{try{return await Tl(t2(e))}catch(t){throw console.error("Failed to fetch system:",t),t}},EA=async e=>{try{return await Tl(Jb(e))}catch(t){return console.error(`Failed to fetch module ${e}:`,t),null}},_f=async e=>{try{const t=e.map(r=>EA(r));return(await Promise.all(t)).filter(r=>r!==null)}catch(t){return console.error("Failed to fetch system modules:",t),[]}},bA=(e,t,n,r)=>{console.log(`Executing camera ${t} with ${n}`),console.log(`Executing module ${e} with ${r}`)},AA="placeos-prod.avit.it.ucla.edu",kA=async(e,t)=>{try{console.log(`[getActiveNDIInputs] Starting for system: ${e}, module: ${t}`);const n=C2(e,t),r=[],i=Array.from({length:6},(o,l)=>l+1).map(async o=>{const l="channels";try{const d=n.variable(l);d.bind();const h=await Tl(vA(d.listen().pipe(yA(_=>typeof _=="boolean")),_A(3e3).pipe(pA(()=>!1))));return console.log(`[getActiveNDIInputs] ${l} = ${h}`),{input:o,active:h===!0}}catch(d){return console.log(`[getActiveNDIInputs]  ${l} error:`,d),{input:o,active:!1}}});return(await Promise.all(i)).forEach(({input:o,active:l})=>{l&&(r.push(o),console.log(`[getActiveNDIInputs]  Added NDI${o} to active inputs`))}),console.log("[getActiveNDIInputs] Final active inputs:",r.sort((o,l)=>o-l)),r.sort((o,l)=>o-l)}catch(n){return console.error("[getActiveNDIInputs] ERROR:",n),[]}},mf=async(e,t)=>{try{console.log(`[generateCameraPreviews] Starting for system: ${e}`),console.log("[generateCameraPreviews] Total modules:",t.length);const n=t.filter(d=>d.name==="Recording");if(console.log(`[generateCameraPreviews] Found ${n.length} Recording modules`),n.length===0)return console.log("[generateCameraPreviews]  No Recording modules found"),[];const r=n[0],i={id:r.id,name:r.name,referenceName:"Recording_1",ip:r.ip||"",uri:r.uri||""};console.log("[generateCameraPreviews] Recording_1 details:",i);let a=null;if(i.ip)a=i.ip,console.log(`[generateCameraPreviews] Using IP: ${a}`);else if(i.uri)try{a=new URL(i.uri).hostname,console.log(`[generateCameraPreviews] Extracted IP from URI: ${a}`)}catch(d){console.error("[generateCameraPreviews] Failed to parse URI:",d)}if(!a)return console.log("[generateCameraPreviews]  No IP or URI found for Recording_1"),[];console.log("[generateCameraPreviews] Fetching active NDI inputs...");const o=await kA(e,i.referenceName);if(console.log("[generateCameraPreviews] Active NDI inputs:",o),o.length===0)return console.log("[generateCameraPreviews]  No active NDI inputs found"),[];const l=o.map(d=>{const h={module:i.referenceName,url:`https://${AA}/epiphan/https/${a}/api/v2.0/channels/${d}/preview?resolution=300x300&keep_aspect_ratio=true&format=jpg`,label:`Recording - NDI${d}`};return console.log(`[generateCameraPreviews] Generated preview for NDI${d}:`,h.url),h});return console.log("[generateCameraPreviews]  Total previews generated:",l.length),l}catch(n){return console.error("[generateCameraPreviews] ERROR:",n),[]}};function RA({previews:e,systemId:t}){const[n,r]=q.useState(0),i=e.slice(0,3),a=e.length-3;return q.useEffect(()=>{const o=setInterval(()=>{r(l=>l+1)},3e3);return()=>clearInterval(o)},[]),V.jsxs("div",{className:"flex-shrink-0",children:[V.jsxs("div",{className:"flex gap-2",children:[i.map((o,l)=>V.jsxs(di,{to:`/systems/${t}?camera=${encodeURIComponent(o.module)}`,className:"w-48 h-48 rounded-lg overflow-hidden bg-base-300 relative group hover:ring-4 hover:ring-primary transition-all",children:[V.jsx("img",{src:`${o.url}&t=${n}`,alt:o.label,className:"w-full h-full object-cover"}),V.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-3",children:V.jsx("div",{className:"text-white text-sm font-medium",children:o.label})})]},l)),a>0&&V.jsxs(di,{to:`/systems/${t}`,className:"w-48 h-48 rounded-lg bg-base-300 flex items-center justify-center text-2xl font-bold text-base-content/60 hover:bg-base-content/10 transition-colors",children:["+",a]})]}),V.jsxs("div",{className:"text-xs text-center mt-1 text-base-content/60",children:[e.length," camera",e.length!==1?"s":""]})]})}function xA({system:e}){const t=e.camera_previews&&e.camera_previews.length>0;return V.jsx("div",{className:"card bg-base-200",children:V.jsx("div",{className:"card-body p-4",children:V.jsxs("div",{className:"flex gap-4",children:[t&&V.jsx(RA,{previews:e.camera_previews,systemId:e.id}),V.jsxs(di,{to:`/systems/${e.id}`,state:{system:e,modules:e.loadedModules,cameraPreviews:e.camera_previews},className:"flex-1 min-w-0 hover:opacity-70 transition-opacity",children:[V.jsx("h3",{className:"card-title text-base",children:e.name}),V.jsx("div",{className:"text-xs text-base-content/50 font-mono mt-1",children:e.id})]})]})})})}function CA(){const[e,t]=q.useState([]),[n,r]=q.useState(!0),[i,a]=q.useState(null),[o,l]=q.useState("");q.useEffect(()=>{d()},[]);const d=async()=>{try{r(!0),a(null);const _=await wA(),y=await Promise.all(_.map(async g=>{if(!g.modules||g.modules.length===0)return{...g,loadedModules:[]};try{const m=await _f([...g.modules]),C=await mf(g.id,m);return{...g,camera_previews:C.length>0?C:void 0,loadedModules:m}}catch(m){return console.error(`Failed to load modules for system ${g.id}:`,m),{...g,loadedModules:[]}}}));t(y)}catch(_){console.error("Error loading systems:",_),a(_ instanceof Error?_.message:"Failed to load systems")}finally{r(!1)}},h=e.filter(_=>{var y,g;return((y=_.name)==null?void 0:y.toLowerCase().includes(o.toLowerCase()))||((g=_.id)==null?void 0:g.toLowerCase().includes(o.toLowerCase()))});return V.jsxs("div",{className:"h-full flex flex-col",children:[V.jsxs("div",{className:"p-6 border-b border-base-300",children:[V.jsx("div",{className:"flex items-center gap-4",children:V.jsxs("div",{className:"flex-1 relative",children:[V.jsx(fE,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-base-content/50",size:20}),V.jsx("input",{type:"text",placeholder:"Search systems...",className:"input input-bordered w-full pl-10",value:o,onChange:_=>l(_.target.value)})]})}),!n&&V.jsxs("div",{className:"mt-2 text-sm text-base-content/60",children:[h.length," items"]})]}),V.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[n&&V.jsx("div",{className:"flex items-center justify-center h-64",children:V.jsx("span",{className:"loading loading-spinner loading-lg"})}),i&&V.jsx("div",{className:"alert alert-error",children:V.jsx("span",{children:i})}),!n&&!i&&h.length===0&&V.jsx("div",{className:"text-center py-12 text-base-content/60",children:o?"No systems found matching your search":"No systems available"}),!n&&!i&&h.length>0&&V.jsx("div",{className:"space-y-2",children:h.map(_=>V.jsx(xA,{system:_},_.id))})]})]})}function TA(e){const t=og();return lg({queryKey:["system",e],queryFn:async()=>{if(!e)throw new Error("No system ID provided");console.log(`[useSystem] Fetching system ${e}`);const n=await Py(e);if(!n.modules||n.modules.length===0)return{...n,loadedModules:[],camera_previews:[]};const r=await _f([...n.modules]),i=await mf(n.id,r);return t.setQueryData(["cameraPreviews",e],i),{...n,loadedModules:r,camera_previews:i.length>0?i:void 0}},enabled:!!e,staleTime:5*60*1e3})}function LA(e){return lg({queryKey:["cameraPreviews",e],queryFn:async()=>{if(!e)throw new Error("No system ID");console.log(`[useCameraPreviews] Fetching previews for ${e}`);const t=await Py(e);if(!t.modules||t.modules.length===0)return[];const n=await _f([...t.modules]);return await mf(e,n)},enabled:!!e,staleTime:5*60*1e3})}var Oy={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(window,function(){return function(n){var r={};function i(a){if(r[a])return r[a].exports;var o=r[a]={i:a,l:!1,exports:{}};return n[a].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=n,i.c=r,i.d=function(a,o,l){i.o(a,o)||Object.defineProperty(a,o,{enumerable:!0,get:l})},i.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},i.t=function(a,o){if(1&o&&(a=i(a)),8&o||4&o&&typeof a=="object"&&a&&a.__esModule)return a;var l=Object.create(null);if(i.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:a}),2&o&&typeof a!="string")for(var d in a)i.d(l,d,(function(h){return a[h]}).bind(null,d));return l},i.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(o,"a",o),o},i.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},i.p="",i(i.s=20)}([function(n,r,i){var a=i(9),o=i.n(a),l=function(){function d(){}return d.e=function(h,_){h&&!d.FORCE_GLOBAL_TAG||(h=d.GLOBAL_TAG);var y="[".concat(h,"] > ").concat(_);d.ENABLE_CALLBACK&&d.emitter.emit("log","error",y),d.ENABLE_ERROR&&(console.error?console.error(y):console.warn?console.warn(y):console.log(y))},d.i=function(h,_){h&&!d.FORCE_GLOBAL_TAG||(h=d.GLOBAL_TAG);var y="[".concat(h,"] > ").concat(_);d.ENABLE_CALLBACK&&d.emitter.emit("log","info",y),d.ENABLE_INFO&&(console.info?console.info(y):console.log(y))},d.w=function(h,_){h&&!d.FORCE_GLOBAL_TAG||(h=d.GLOBAL_TAG);var y="[".concat(h,"] > ").concat(_);d.ENABLE_CALLBACK&&d.emitter.emit("log","warn",y),d.ENABLE_WARN&&(console.warn?console.warn(y):console.log(y))},d.d=function(h,_){h&&!d.FORCE_GLOBAL_TAG||(h=d.GLOBAL_TAG);var y="[".concat(h,"] > ").concat(_);d.ENABLE_CALLBACK&&d.emitter.emit("log","debug",y),d.ENABLE_DEBUG&&(console.debug?console.debug(y):console.log(y))},d.v=function(h,_){h&&!d.FORCE_GLOBAL_TAG||(h=d.GLOBAL_TAG);var y="[".concat(h,"] > ").concat(_);d.ENABLE_CALLBACK&&d.emitter.emit("log","verbose",y),d.ENABLE_VERBOSE&&console.log(y)},d}();l.GLOBAL_TAG="mpegts.js",l.FORCE_GLOBAL_TAG=!1,l.ENABLE_ERROR=!0,l.ENABLE_INFO=!0,l.ENABLE_WARN=!0,l.ENABLE_DEBUG=!0,l.ENABLE_VERBOSE=!0,l.ENABLE_CALLBACK=!1,l.emitter=new o.a,r.a=l},function(n,r,i){var a;(function(o){o.IO_ERROR="io_error",o.DEMUX_ERROR="demux_error",o.INIT_SEGMENT="init_segment",o.MEDIA_SEGMENT="media_segment",o.LOADING_COMPLETE="loading_complete",o.RECOVERED_EARLY_EOF="recovered_early_eof",o.MEDIA_INFO="media_info",o.METADATA_ARRIVED="metadata_arrived",o.SCRIPTDATA_ARRIVED="scriptdata_arrived",o.TIMED_ID3_METADATA_ARRIVED="timed_id3_metadata_arrived",o.SYNCHRONOUS_KLV_METADATA_ARRIVED="synchronous_klv_metadata_arrived",o.ASYNCHRONOUS_KLV_METADATA_ARRIVED="asynchronous_klv_metadata_arrived",o.SMPTE2038_METADATA_ARRIVED="smpte2038_metadata_arrived",o.SCTE35_METADATA_ARRIVED="scte35_metadata_arrived",o.PES_PRIVATE_DATA_DESCRIPTOR="pes_private_data_descriptor",o.PES_PRIVATE_DATA_ARRIVED="pes_private_data_arrived",o.STATISTICS_INFO="statistics_info",o.RECOMMEND_SEEKPOINT="recommend_seekpoint"})(a||(a={})),r.a=a},function(n,r,i){i.d(r,"c",function(){return o}),i.d(r,"b",function(){return l}),i.d(r,"a",function(){return d});var a=i(3),o={kIdle:0,kConnecting:1,kBuffering:2,kError:3,kComplete:4},l={OK:"OK",EXCEPTION:"Exception",HTTP_STATUS_CODE_INVALID:"HttpStatusCodeInvalid",CONNECTING_TIMEOUT:"ConnectingTimeout",EARLY_EOF:"EarlyEof",UNRECOVERABLE_EARLY_EOF:"UnrecoverableEarlyEof"},d=function(){function h(_){this._type=_||"undefined",this._status=o.kIdle,this._needStash=!1,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}return h.prototype.destroy=function(){this._status=o.kIdle,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null},h.prototype.isWorking=function(){return this._status===o.kConnecting||this._status===o.kBuffering},Object.defineProperty(h.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"needStashBuffer",{get:function(){return this._needStash},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"onContentLengthKnown",{get:function(){return this._onContentLengthKnown},set:function(_){this._onContentLengthKnown=_},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"onURLRedirect",{get:function(){return this._onURLRedirect},set:function(_){this._onURLRedirect=_},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(_){this._onDataArrival=_},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"onError",{get:function(){return this._onError},set:function(_){this._onError=_},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"onComplete",{get:function(){return this._onComplete},set:function(_){this._onComplete=_},enumerable:!1,configurable:!0}),h.prototype.open=function(_,y){throw new a.c("Unimplemented abstract function!")},h.prototype.abort=function(){throw new a.c("Unimplemented abstract function!")},h}()},function(n,r,i){i.d(r,"d",function(){return l}),i.d(r,"a",function(){return d}),i.d(r,"b",function(){return h}),i.d(r,"c",function(){return _});var a,o=(a=function(y,g){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,C){m.__proto__=C}||function(m,C){for(var w in C)Object.prototype.hasOwnProperty.call(C,w)&&(m[w]=C[w])})(y,g)},function(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function m(){this.constructor=y}a(y,g),y.prototype=g===null?Object.create(g):(m.prototype=g.prototype,new m)}),l=function(){function y(g){this._message=g}return Object.defineProperty(y.prototype,"name",{get:function(){return"RuntimeException"},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"message",{get:function(){return this._message},enumerable:!1,configurable:!0}),y.prototype.toString=function(){return this.name+": "+this.message},y}(),d=function(y){function g(m){return y.call(this,m)||this}return o(g,y),Object.defineProperty(g.prototype,"name",{get:function(){return"IllegalStateException"},enumerable:!1,configurable:!0}),g}(l),h=function(y){function g(m){return y.call(this,m)||this}return o(g,y),Object.defineProperty(g.prototype,"name",{get:function(){return"InvalidArgumentException"},enumerable:!1,configurable:!0}),g}(l),_=function(y){function g(m){return y.call(this,m)||this}return o(g,y),Object.defineProperty(g.prototype,"name",{get:function(){return"NotImplementedException"},enumerable:!1,configurable:!0}),g}(l)},function(n,r,i){var a;(function(o){o.ERROR="error",o.LOADING_COMPLETE="loading_complete",o.RECOVERED_EARLY_EOF="recovered_early_eof",o.MEDIA_INFO="media_info",o.METADATA_ARRIVED="metadata_arrived",o.SCRIPTDATA_ARRIVED="scriptdata_arrived",o.TIMED_ID3_METADATA_ARRIVED="timed_id3_metadata_arrived",o.SYNCHRONOUS_KLV_METADATA_ARRIVED="synchronous_klv_metadata_arrived",o.ASYNCHRONOUS_KLV_METADATA_ARRIVED="asynchronous_klv_metadata_arrived",o.SMPTE2038_METADATA_ARRIVED="smpte2038_metadata_arrived",o.SCTE35_METADATA_ARRIVED="scte35_metadata_arrived",o.PES_PRIVATE_DATA_DESCRIPTOR="pes_private_data_descriptor",o.PES_PRIVATE_DATA_ARRIVED="pes_private_data_arrived",o.STATISTICS_INFO="statistics_info",o.DESTROYING="destroying"})(a||(a={})),r.a=a},function(n,r,i){var a={};(function(){var o=self.navigator.userAgent.toLowerCase(),l=/(edge)\/([\w.]+)/.exec(o)||/(opr)[\/]([\w.]+)/.exec(o)||/(chrome)[ \/]([\w.]+)/.exec(o)||/(iemobile)[\/]([\w.]+)/.exec(o)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(o)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(o)||/(webkit)[ \/]([\w.]+)/.exec(o)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(o)||/(msie) ([\w.]+)/.exec(o)||o.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(o)||o.indexOf("compatible")<0&&/(firefox)[ \/]([\w.]+)/.exec(o)||[],d=/(ipad)/.exec(o)||/(ipod)/.exec(o)||/(windows phone)/.exec(o)||/(iphone)/.exec(o)||/(kindle)/.exec(o)||/(android)/.exec(o)||/(windows)/.exec(o)||/(mac)/.exec(o)||/(linux)/.exec(o)||/(cros)/.exec(o)||[],h={browser:l[5]||l[3]||l[1]||"",version:l[2]||l[4]||"0",majorVersion:l[4]||l[2]||"0",platform:d[0]||""},_={};if(h.browser){_[h.browser]=!0;var y=h.majorVersion.split(".");_.version={major:parseInt(h.majorVersion,10),string:h.version},y.length>1&&(_.version.minor=parseInt(y[1],10)),y.length>2&&(_.version.build=parseInt(y[2],10))}h.platform&&(_[h.platform]=!0),(_.chrome||_.opr||_.safari)&&(_.webkit=!0),(_.rv||_.iemobile)&&(_.rv&&delete _.rv,h.browser="msie",_.msie=!0),_.edge&&(delete _.edge,h.browser="msedge",_.msedge=!0),_.opr&&(h.browser="opera",_.opera=!0),_.safari&&_.android&&(h.browser="android",_.android=!0);for(var g in _.name=h.browser,_.platform=h.platform,a)a.hasOwnProperty(g)&&delete a[g];Object.assign(a,_)})(),r.a=a},function(n,r,i){r.a={OK:"OK",FORMAT_ERROR:"FormatError",FORMAT_UNSUPPORTED:"FormatUnsupported",CODEC_UNSUPPORTED:"CodecUnsupported"}},function(n,r,i){var a;(function(o){o.ERROR="error",o.SOURCE_OPEN="source_open",o.UPDATE_END="update_end",o.BUFFER_FULL="buffer_full",o.START_STREAMING="start_streaming",o.END_STREAMING="end_streaming"})(a||(a={})),r.a=a},function(n,r,i){var a=i(9),o=i.n(a),l=i(0),d=function(){function h(){}return Object.defineProperty(h,"forceGlobalTag",{get:function(){return l.a.FORCE_GLOBAL_TAG},set:function(_){l.a.FORCE_GLOBAL_TAG=_,h._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(h,"globalTag",{get:function(){return l.a.GLOBAL_TAG},set:function(_){l.a.GLOBAL_TAG=_,h._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(h,"enableAll",{get:function(){return l.a.ENABLE_VERBOSE&&l.a.ENABLE_DEBUG&&l.a.ENABLE_INFO&&l.a.ENABLE_WARN&&l.a.ENABLE_ERROR},set:function(_){l.a.ENABLE_VERBOSE=_,l.a.ENABLE_DEBUG=_,l.a.ENABLE_INFO=_,l.a.ENABLE_WARN=_,l.a.ENABLE_ERROR=_,h._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(h,"enableDebug",{get:function(){return l.a.ENABLE_DEBUG},set:function(_){l.a.ENABLE_DEBUG=_,h._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(h,"enableVerbose",{get:function(){return l.a.ENABLE_VERBOSE},set:function(_){l.a.ENABLE_VERBOSE=_,h._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(h,"enableInfo",{get:function(){return l.a.ENABLE_INFO},set:function(_){l.a.ENABLE_INFO=_,h._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(h,"enableWarn",{get:function(){return l.a.ENABLE_WARN},set:function(_){l.a.ENABLE_WARN=_,h._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(h,"enableError",{get:function(){return l.a.ENABLE_ERROR},set:function(_){l.a.ENABLE_ERROR=_,h._notifyChange()},enumerable:!1,configurable:!0}),h.getConfig=function(){return{globalTag:l.a.GLOBAL_TAG,forceGlobalTag:l.a.FORCE_GLOBAL_TAG,enableVerbose:l.a.ENABLE_VERBOSE,enableDebug:l.a.ENABLE_DEBUG,enableInfo:l.a.ENABLE_INFO,enableWarn:l.a.ENABLE_WARN,enableError:l.a.ENABLE_ERROR,enableCallback:l.a.ENABLE_CALLBACK}},h.applyConfig=function(_){l.a.GLOBAL_TAG=_.globalTag,l.a.FORCE_GLOBAL_TAG=_.forceGlobalTag,l.a.ENABLE_VERBOSE=_.enableVerbose,l.a.ENABLE_DEBUG=_.enableDebug,l.a.ENABLE_INFO=_.enableInfo,l.a.ENABLE_WARN=_.enableWarn,l.a.ENABLE_ERROR=_.enableError,l.a.ENABLE_CALLBACK=_.enableCallback},h._notifyChange=function(){var _=h.emitter;if(_.listenerCount("change")>0){var y=h.getConfig();_.emit("change",y)}},h.registerListener=function(_){h.emitter.addListener("change",_)},h.removeListener=function(_){h.emitter.removeListener("change",_)},h.addLogListener=function(_){l.a.emitter.addListener("log",_),l.a.emitter.listenerCount("log")>0&&(l.a.ENABLE_CALLBACK=!0,h._notifyChange())},h.removeLogListener=function(_){l.a.emitter.removeListener("log",_),l.a.emitter.listenerCount("log")===0&&(l.a.ENABLE_CALLBACK=!1,h._notifyChange())},h}();d.emitter=new o.a,r.a=d},function(n,r,i){var a,o=typeof Reflect=="object"?Reflect:null,l=o&&typeof o.apply=="function"?o.apply:function(T,j,W){return Function.prototype.apply.call(T,j,W)};a=o&&typeof o.ownKeys=="function"?o.ownKeys:Object.getOwnPropertySymbols?function(T){return Object.getOwnPropertyNames(T).concat(Object.getOwnPropertySymbols(T))}:function(T){return Object.getOwnPropertyNames(T)};var d=Number.isNaN||function(T){return T!=T};function h(){h.init.call(this)}n.exports=h,n.exports.once=function(T,j){return new Promise(function(W,B){function R(k){T.removeListener(j,L),B(k)}function L(){typeof T.removeListener=="function"&&T.removeListener("error",R),W([].slice.call(arguments))}x(T,j,L,{once:!0}),j!=="error"&&function(k,M,Y){typeof k.on=="function"&&x(k,"error",M,Y)}(T,R,{once:!0})})},h.EventEmitter=h,h.prototype._events=void 0,h.prototype._eventsCount=0,h.prototype._maxListeners=void 0;var _=10;function y(T){if(typeof T!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof T)}function g(T){return T._maxListeners===void 0?h.defaultMaxListeners:T._maxListeners}function m(T,j,W,B){var R,L,k,M;if(y(W),(L=T._events)===void 0?(L=T._events=Object.create(null),T._eventsCount=0):(L.newListener!==void 0&&(T.emit("newListener",j,W.listener?W.listener:W),L=T._events),k=L[j]),k===void 0)k=L[j]=W,++T._eventsCount;else if(typeof k=="function"?k=L[j]=B?[W,k]:[k,W]:B?k.unshift(W):k.push(W),(R=g(T))>0&&k.length>R&&!k.warned){k.warned=!0;var Y=new Error("Possible EventEmitter memory leak detected. "+k.length+" "+String(j)+" listeners added. Use emitter.setMaxListeners() to increase limit");Y.name="MaxListenersExceededWarning",Y.emitter=T,Y.type=j,Y.count=k.length,M=Y,console&&console.warn&&console.warn(M)}return T}function C(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function w(T,j,W){var B={fired:!1,wrapFn:void 0,target:T,type:j,listener:W},R=C.bind(B);return R.listener=W,B.wrapFn=R,R}function O(T,j,W){var B=T._events;if(B===void 0)return[];var R=B[j];return R===void 0?[]:typeof R=="function"?W?[R.listener||R]:[R]:W?function(L){for(var k=new Array(L.length),M=0;M<k.length;++M)k[M]=L[M].listener||L[M];return k}(R):E(R,R.length)}function b(T){var j=this._events;if(j!==void 0){var W=j[T];if(typeof W=="function")return 1;if(W!==void 0)return W.length}return 0}function E(T,j){for(var W=new Array(j),B=0;B<j;++B)W[B]=T[B];return W}function x(T,j,W,B){if(typeof T.on=="function")B.once?T.once(j,W):T.on(j,W);else{if(typeof T.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof T);T.addEventListener(j,function R(L){B.once&&T.removeEventListener(j,R),W(L)})}}Object.defineProperty(h,"defaultMaxListeners",{enumerable:!0,get:function(){return _},set:function(T){if(typeof T!="number"||T<0||d(T))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+T+".");_=T}}),h.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},h.prototype.setMaxListeners=function(T){if(typeof T!="number"||T<0||d(T))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+T+".");return this._maxListeners=T,this},h.prototype.getMaxListeners=function(){return g(this)},h.prototype.emit=function(T){for(var j=[],W=1;W<arguments.length;W++)j.push(arguments[W]);var B=T==="error",R=this._events;if(R!==void 0)B=B&&R.error===void 0;else if(!B)return!1;if(B){var L;if(j.length>0&&(L=j[0]),L instanceof Error)throw L;var k=new Error("Unhandled error."+(L?" ("+L.message+")":""));throw k.context=L,k}var M=R[T];if(M===void 0)return!1;if(typeof M=="function")l(M,this,j);else{var Y=M.length,ie=E(M,Y);for(W=0;W<Y;++W)l(ie[W],this,j)}return!0},h.prototype.addListener=function(T,j){return m(this,T,j,!1)},h.prototype.on=h.prototype.addListener,h.prototype.prependListener=function(T,j){return m(this,T,j,!0)},h.prototype.once=function(T,j){return y(j),this.on(T,w(this,T,j)),this},h.prototype.prependOnceListener=function(T,j){return y(j),this.prependListener(T,w(this,T,j)),this},h.prototype.removeListener=function(T,j){var W,B,R,L,k;if(y(j),(B=this._events)===void 0)return this;if((W=B[T])===void 0)return this;if(W===j||W.listener===j)--this._eventsCount==0?this._events=Object.create(null):(delete B[T],B.removeListener&&this.emit("removeListener",T,W.listener||j));else if(typeof W!="function"){for(R=-1,L=W.length-1;L>=0;L--)if(W[L]===j||W[L].listener===j){k=W[L].listener,R=L;break}if(R<0)return this;R===0?W.shift():function(M,Y){for(;Y+1<M.length;Y++)M[Y]=M[Y+1];M.pop()}(W,R),W.length===1&&(B[T]=W[0]),B.removeListener!==void 0&&this.emit("removeListener",T,k||j)}return this},h.prototype.off=h.prototype.removeListener,h.prototype.removeAllListeners=function(T){var j,W,B;if((W=this._events)===void 0)return this;if(W.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):W[T]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete W[T]),this;if(arguments.length===0){var R,L=Object.keys(W);for(B=0;B<L.length;++B)(R=L[B])!=="removeListener"&&this.removeAllListeners(R);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(j=W[T])=="function")this.removeListener(T,j);else if(j!==void 0)for(B=j.length-1;B>=0;B--)this.removeListener(T,j[B]);return this},h.prototype.listeners=function(T){return O(this,T,!0)},h.prototype.rawListeners=function(T){return O(this,T,!1)},h.listenerCount=function(T,j){return typeof T.listenerCount=="function"?T.listenerCount(j):b.call(T,j)},h.prototype.listenerCount=b,h.prototype.eventNames=function(){return this._eventsCount>0?a(this._events):[]}},function(n,r,i){i.d(r,"b",function(){return l}),i.d(r,"a",function(){return d});var a=i(2),o=i(6),l={NETWORK_ERROR:"NetworkError",MEDIA_ERROR:"MediaError",OTHER_ERROR:"OtherError"},d={NETWORK_EXCEPTION:a.b.EXCEPTION,NETWORK_STATUS_CODE_INVALID:a.b.HTTP_STATUS_CODE_INVALID,NETWORK_TIMEOUT:a.b.CONNECTING_TIMEOUT,NETWORK_UNRECOVERABLE_EARLY_EOF:a.b.UNRECOVERABLE_EARLY_EOF,MEDIA_MSE_ERROR:"MediaMSEError",MEDIA_FORMAT_ERROR:o.a.FORMAT_ERROR,MEDIA_FORMAT_UNSUPPORTED:o.a.FORMAT_UNSUPPORTED,MEDIA_CODEC_UNSUPPORTED:o.a.CODEC_UNSUPPORTED}},function(n,r,i){i.d(r,"d",function(){return a}),i.d(r,"b",function(){return o}),i.d(r,"a",function(){return l}),i.d(r,"c",function(){return d});var a=function(h,_,y,g,m){this.dts=h,this.pts=_,this.duration=y,this.originalDts=g,this.isSyncPoint=m,this.fileposition=null},o=function(){function h(){this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}return h.prototype.appendSyncPoint=function(_){_.isSyncPoint=!0,this.syncPoints.push(_)},h}(),l=function(){function h(){this._list=[]}return h.prototype.clear=function(){this._list=[]},h.prototype.appendArray=function(_){var y=this._list;_.length!==0&&(y.length>0&&_[0].originalDts<y[y.length-1].originalDts&&this.clear(),Array.prototype.push.apply(y,_))},h.prototype.getLastSyncPointBeforeDts=function(_){if(this._list.length==0)return null;var y=this._list,g=0,m=y.length-1,C=0,w=0,O=m;for(_<y[0].dts&&(g=0,w=O+1);w<=O;){if((C=w+Math.floor((O-w)/2))===m||_>=y[C].dts&&_<y[C+1].dts){g=C;break}y[C].dts<_?w=C+1:O=C-1}return this._list[g]},h}(),d=function(){function h(_){this._type=_,this._list=[],this._lastAppendLocation=-1}return Object.defineProperty(h.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"length",{get:function(){return this._list.length},enumerable:!1,configurable:!0}),h.prototype.isEmpty=function(){return this._list.length===0},h.prototype.clear=function(){this._list=[],this._lastAppendLocation=-1},h.prototype._searchNearestSegmentBefore=function(_){var y=this._list;if(y.length===0)return-2;var g=y.length-1,m=0,C=0,w=g,O=0;if(_<y[0].originalBeginDts)return O=-1;for(;C<=w;){if((m=C+Math.floor((w-C)/2))===g||_>y[m].lastSample.originalDts&&_<y[m+1].originalBeginDts){O=m;break}y[m].originalBeginDts<_?C=m+1:w=m-1}return O},h.prototype._searchNearestSegmentAfter=function(_){return this._searchNearestSegmentBefore(_)+1},h.prototype.append=function(_){var y=this._list,g=_,m=this._lastAppendLocation,C=0;m!==-1&&m<y.length&&g.originalBeginDts>=y[m].lastSample.originalDts&&(m===y.length-1||m<y.length-1&&g.originalBeginDts<y[m+1].originalBeginDts)?C=m+1:y.length>0&&(C=this._searchNearestSegmentBefore(g.originalBeginDts)+1),this._lastAppendLocation=C,this._list.splice(C,0,g)},h.prototype.getLastSegmentBefore=function(_){var y=this._searchNearestSegmentBefore(_);return y>=0?this._list[y]:null},h.prototype.getLastSampleBefore=function(_){var y=this.getLastSegmentBefore(_);return y!=null?y.lastSample:null},h.prototype.getLastSyncPointBefore=function(_){for(var y=this._searchNearestSegmentBefore(_),g=this._list[y].syncPoints;g.length===0&&y>0;)y--,g=this._list[y].syncPoints;return g.length>0?g[g.length-1]:null},h}()},function(n,r,i){var a=function(){function o(){this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.refFrames=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}return o.prototype.isComplete=function(){var l=this.hasAudio===!1||this.hasAudio===!0&&this.audioCodec!=null&&this.audioSampleRate!=null&&this.audioChannelCount!=null,d=this.hasVideo===!1||this.hasVideo===!0&&this.videoCodec!=null&&this.width!=null&&this.height!=null&&this.fps!=null&&this.profile!=null&&this.level!=null&&this.refFrames!=null&&this.chromaFormat!=null&&this.sarNum!=null&&this.sarDen!=null;return this.mimeType!=null&&l&&d},o.prototype.isSeekable=function(){return this.hasKeyframesIndex===!0},o.prototype.getNearestKeyframe=function(l){if(this.keyframesIndex==null)return null;var d=this.keyframesIndex,h=this._search(d.times,l);return{index:h,milliseconds:d.times[h],fileposition:d.filepositions[h]}},o.prototype._search=function(l,d){var h=0,_=l.length-1,y=0,g=0,m=_;for(d<l[0]&&(h=0,g=m+1);g<=m;){if((y=g+Math.floor((m-g)/2))===_||d>=l[y]&&d<l[y+1]){h=y;break}l[y]<d?g=y+1:m=y-1}return h},o}();r.a=a},function(n,r,i){var a=i(9),o=i.n(a),l=i(0),d=i(5),h=i(12);function _(f,c,u){var s=f;if(c+u<s.length){for(;u--;)if((192&s[++c])!=128)return!1;return!0}return!1}var y,g=function(f){for(var c=[],u=f,s=0,p=f.length;s<p;)if(u[s]<128)c.push(String.fromCharCode(u[s])),++s;else{if(!(u[s]<192)){if(u[s]<224){if(_(u,s,1)&&(S=(31&u[s])<<6|63&u[s+1])>=128){c.push(String.fromCharCode(65535&S)),s+=2;continue}}else if(u[s]<240){if(_(u,s,2)&&(S=(15&u[s])<<12|(63&u[s+1])<<6|63&u[s+2])>=2048&&(63488&S)!=55296){c.push(String.fromCharCode(65535&S)),s+=3;continue}}else if(u[s]<248){var S;if(_(u,s,3)&&(S=(7&u[s])<<18|(63&u[s+1])<<12|(63&u[s+2])<<6|63&u[s+3])>65536&&S<1114112){S-=65536,c.push(String.fromCharCode(S>>>10|55296)),c.push(String.fromCharCode(1023&S|56320)),s+=4;continue}}}c.push(""),++s}return c.join("")},m=i(3),C=(y=new ArrayBuffer(2),new DataView(y).setInt16(0,256,!0),new Int16Array(y)[0]===256),w=function(){function f(){}return f.parseScriptData=function(c,u,s){var p={};try{var S=f.parseValue(c,u,s),v=f.parseValue(c,u+S.size,s-S.size);p[S.data]=v.data}catch(A){l.a.e("AMF",A.toString())}return p},f.parseObject=function(c,u,s){if(s<3)throw new m.a("Data not enough when parse ScriptDataObject");var p=f.parseString(c,u,s),S=f.parseValue(c,u+p.size,s-p.size),v=S.objectEnd;return{data:{name:p.data,value:S.data},size:p.size+S.size,objectEnd:v}},f.parseVariable=function(c,u,s){return f.parseObject(c,u,s)},f.parseString=function(c,u,s){if(s<2)throw new m.a("Data not enough when parse String");var p=new DataView(c,u,s).getUint16(0,!C);return{data:p>0?g(new Uint8Array(c,u+2,p)):"",size:2+p}},f.parseLongString=function(c,u,s){if(s<4)throw new m.a("Data not enough when parse LongString");var p=new DataView(c,u,s).getUint32(0,!C);return{data:p>0?g(new Uint8Array(c,u+4,p)):"",size:4+p}},f.parseDate=function(c,u,s){if(s<10)throw new m.a("Data size invalid when parse Date");var p=new DataView(c,u,s),S=p.getFloat64(0,!C),v=p.getInt16(8,!C);return{data:new Date(S+=60*v*1e3),size:10}},f.parseValue=function(c,u,s){if(s<1)throw new m.a("Data not enough when parse Value");var p,S=new DataView(c,u,s),v=1,A=S.getUint8(0),I=!1;try{switch(A){case 0:p=S.getFloat64(1,!C),v+=8;break;case 1:p=!!S.getUint8(1),v+=1;break;case 2:var D=f.parseString(c,u+1,s-1);p=D.data,v+=D.size;break;case 3:p={};var U=0;for((16777215&S.getUint32(s-4,!C))==9&&(U=3);v<s-4;){var z=f.parseObject(c,u+v,s-v-U);if(z.objectEnd)break;p[z.data.name]=z.data.value,v+=z.size}v<=s-3&&(16777215&S.getUint32(v-1,!C))===9&&(v+=3);break;case 8:for(p={},v+=4,U=0,(16777215&S.getUint32(s-4,!C))==9&&(U=3);v<s-8;){var F=f.parseVariable(c,u+v,s-v-U);if(F.objectEnd)break;p[F.data.name]=F.data.value,v+=F.size}v<=s-3&&(16777215&S.getUint32(v-1,!C))===9&&(v+=3);break;case 9:p=void 0,v=1,I=!0;break;case 10:p=[];var G=S.getUint32(1,!C);v+=4;for(var K=0;K<G;K++){var re=f.parseValue(c,u+v,s-v);p.push(re.data),v+=re.size}break;case 11:var Z=f.parseDate(c,u+1,s-1);p=Z.data,v+=Z.size;break;case 12:var ce=f.parseString(c,u+1,s-1);p=ce.data,v+=ce.size;break;default:v=s,l.a.w("AMF","Unsupported AMF value type "+A)}}catch(le){l.a.e("AMF",le.toString())}return{data:p,size:v,objectEnd:I}},f}(),O=function(){function f(c){this.TAG="ExpGolomb",this._buffer=c,this._buffer_index=0,this._total_bytes=c.byteLength,this._total_bits=8*c.byteLength,this._current_word=0,this._current_word_bits_left=0}return f.prototype.destroy=function(){this._buffer=null},f.prototype._fillCurrentWord=function(){var c=this._total_bytes-this._buffer_index;if(c<=0)throw new m.a("ExpGolomb: _fillCurrentWord() but no bytes available");var u=Math.min(4,c),s=new Uint8Array(4);s.set(this._buffer.subarray(this._buffer_index,this._buffer_index+u)),this._current_word=new DataView(s.buffer).getUint32(0,!1),this._buffer_index+=u,this._current_word_bits_left=8*u},f.prototype.readBits=function(c){if(c>32)throw new m.b("ExpGolomb: readBits() bits exceeded max 32bits!");if(c<=this._current_word_bits_left){var u=this._current_word>>>32-c;return this._current_word<<=c,this._current_word_bits_left-=c,u}var s=this._current_word_bits_left?this._current_word:0;s>>>=32-this._current_word_bits_left;var p=c-this._current_word_bits_left;this._fillCurrentWord();var S=Math.min(p,this._current_word_bits_left),v=this._current_word>>>32-S;return this._current_word<<=S,this._current_word_bits_left-=S,s=s<<S|v},f.prototype.readBool=function(){return this.readBits(1)===1},f.prototype.readByte=function(){return this.readBits(8)},f.prototype._skipLeadingZero=function(){var c;for(c=0;c<this._current_word_bits_left;c++)if(this._current_word&2147483648>>>c)return this._current_word<<=c,this._current_word_bits_left-=c,c;return this._fillCurrentWord(),c+this._skipLeadingZero()},f.prototype.readUEG=function(){var c=this._skipLeadingZero();return this.readBits(c+1)-1},f.prototype.readSEG=function(){var c=this.readUEG();return 1&c?c+1>>>1:-1*(c>>>1)},f}(),b=function(){function f(){}return f._ebsp2rbsp=function(c){for(var u=c,s=u.byteLength,p=new Uint8Array(s),S=0,v=0;v<s;v++)v>=2&&u[v]===3&&u[v-1]===0&&u[v-2]===0||(p[S]=u[v],S++);return new Uint8Array(p.buffer,0,S)},f.parseSPS=function(c){for(var u=c.subarray(1,4),s="avc1.",p=0;p<3;p++){var S=u[p].toString(16);S.length<2&&(S="0"+S),s+=S}var v=f._ebsp2rbsp(c),A=new O(v);A.readByte();var I=A.readByte();A.readByte();var D=A.readByte();A.readUEG();var U=f.getProfileString(I),z=f.getLevelString(D),F=1,G=420,K=8,re=8;if((I===100||I===110||I===122||I===244||I===44||I===83||I===86||I===118||I===128||I===138||I===144)&&((F=A.readUEG())===3&&A.readBits(1),F<=3&&(G=[0,420,422,444][F]),K=A.readUEG()+8,re=A.readUEG()+8,A.readBits(1),A.readBool()))for(var Z=F!==3?8:12,ce=0;ce<Z;ce++)A.readBool()&&(ce<6?f._skipScalingList(A,16):f._skipScalingList(A,64));A.readUEG();var le=A.readUEG();if(le===0)A.readUEG();else if(le===1){A.readBits(1),A.readSEG(),A.readSEG();var se=A.readUEG();for(ce=0;ce<se;ce++)A.readSEG()}var ve=A.readUEG();A.readBits(1);var Ce=A.readUEG(),ue=A.readUEG(),ye=A.readBits(1);ye===0&&A.readBits(1),A.readBits(1);var Te=0,Se=0,Ae=0,Ne=0;A.readBool()&&(Te=A.readUEG(),Se=A.readUEG(),Ae=A.readUEG(),Ne=A.readUEG());var ze=1,ke=1,Le=0,Ge=!0,at=0,_n=0;if(A.readBool()){if(A.readBool()){var bt=A.readByte();bt>0&&bt<16?(ze=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][bt-1],ke=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][bt-1]):bt===255&&(ze=A.readByte()<<8|A.readByte(),ke=A.readByte()<<8|A.readByte())}if(A.readBool()&&A.readBool(),A.readBool()&&(A.readBits(4),A.readBool()&&A.readBits(24)),A.readBool()&&(A.readUEG(),A.readUEG()),A.readBool()){var Kt=A.readBits(32),Ot=A.readBits(32);Ge=A.readBool(),Le=(at=Ot)/(_n=2*Kt)}}var At=1;ze===1&&ke===1||(At=ze/ke);var Mt=0,Fe=0;F===0?(Mt=1,Fe=2-ye):(Mt=F===3?1:2,Fe=(F===1?2:1)*(2-ye));var jn=16*(Ce+1),Fn=16*(ue+1)*(2-ye);jn-=(Te+Se)*Mt,Fn-=(Ae+Ne)*Fe;var Do=Math.ceil(jn*At);return A.destroy(),A=null,{codec_mimetype:s,profile_idc:I,level_idc:D,profile_string:U,level_string:z,chroma_format_idc:F,bit_depth:K,bit_depth_luma:K,bit_depth_chroma:re,ref_frames:ve,chroma_format:G,chroma_format_string:f.getChromaFormatString(G),frame_rate:{fixed:Ge,fps:Le,fps_den:_n,fps_num:at},sar_ratio:{width:ze,height:ke},codec_size:{width:jn,height:Fn},present_size:{width:Do,height:Fn}}},f._skipScalingList=function(c,u){for(var s=8,p=8,S=0;S<u;S++)p!==0&&(p=(s+c.readSEG()+256)%256),s=p===0?s:p},f.getProfileString=function(c){switch(c){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}},f.getLevelString=function(c){return(c/10).toFixed(1)},f.getChromaFormatString=function(c){switch(c){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}},f}(),E=i(6),x=function(){function f(){}return f._ebsp2rbsp=function(c){for(var u=c,s=u.byteLength,p=new Uint8Array(s),S=0,v=0;v<s;v++)v>=2&&u[v]===3&&u[v-1]===0&&u[v-2]===0||(p[S]=u[v],S++);return new Uint8Array(p.buffer,0,S)},f.parseVPS=function(c){var u=f._ebsp2rbsp(c),s=new O(u);return s.readByte(),s.readByte(),s.readBits(4),s.readBits(2),s.readBits(6),{num_temporal_layers:s.readBits(3)+1,temporal_id_nested:s.readBool()}},f.parseSPS=function(c){var u=f._ebsp2rbsp(c),s=new O(u);s.readByte(),s.readByte();for(var p=0,S=0,v=0,A=0,I=(s.readBits(4),s.readBits(3)),D=(s.readBool(),s.readBits(2)),U=s.readBool(),z=s.readBits(5),F=s.readByte(),G=s.readByte(),K=s.readByte(),re=s.readByte(),Z=s.readByte(),ce=s.readByte(),le=s.readByte(),se=s.readByte(),ve=s.readByte(),Ce=s.readByte(),ue=s.readByte(),ye=[],Te=[],Se=0;Se<I;Se++)ye.push(s.readBool()),Te.push(s.readBool());if(I>0)for(Se=I;Se<8;Se++)s.readBits(2);for(Se=0;Se<I;Se++)ye[Se]&&(s.readByte(),s.readByte(),s.readByte(),s.readByte(),s.readByte(),s.readByte(),s.readByte(),s.readByte(),s.readByte(),s.readByte(),s.readByte()),Te[Se]&&s.readByte();s.readUEG();var Ae=s.readUEG();Ae==3&&s.readBits(1);var Ne=s.readUEG(),ze=s.readUEG();s.readBool()&&(p+=s.readUEG(),S+=s.readUEG(),v+=s.readUEG(),A+=s.readUEG());var ke=s.readUEG(),Le=s.readUEG(),Ge=s.readUEG();for(Se=s.readBool()?0:I;Se<=I;Se++)s.readUEG(),s.readUEG(),s.readUEG();if(s.readUEG(),s.readUEG(),s.readUEG(),s.readUEG(),s.readUEG(),s.readUEG(),s.readBool()&&s.readBool())for(var at=0;at<4;at++)for(var _n=0;_n<(at===3?2:6);_n++)if(s.readBool()){var bt=Math.min(64,1<<4+(at<<1));for(at>1&&s.readSEG(),Se=0;Se<bt;Se++)s.readSEG()}else s.readUEG();s.readBool(),s.readBool(),s.readBool()&&(s.readByte(),s.readUEG(),s.readUEG(),s.readBool());var Kt=s.readUEG(),Ot=0;for(Se=0;Se<Kt;Se++){var At=!1;if(Se!==0&&(At=s.readBool()),At){Se===Kt&&s.readUEG(),s.readBool(),s.readUEG();for(var Mt=0,Fe=0;Fe<=Ot;Fe++){var jn=s.readBool(),Fn=!1;jn||(Fn=s.readBool()),(jn||Fn)&&Mt++}Ot=Mt}else{var Do=s.readUEG(),Ef=s.readUEG();for(Ot=Do+Ef,Fe=0;Fe<Do;Fe++)s.readUEG(),s.readBool();for(Fe=0;Fe<Ef;Fe++)s.readUEG(),s.readBool()}}if(s.readBool()){var sv=s.readUEG();for(Se=0;Se<sv;Se++){for(Fe=0;Fe<Ge+4;Fe++)s.readBits(1);s.readBits(1)}}var bf=0,va=1,Sa=1,Af=!1,Ol=1,Ml=1;if(s.readBool(),s.readBool(),s.readBool()){if(s.readBool()){var wa=s.readByte();wa>0&&wa<=16?(va=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][wa-1],Sa=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][wa-1]):wa===255&&(va=s.readBits(16),Sa=s.readBits(16))}if(s.readBool()&&s.readBool(),s.readBool()&&(s.readBits(3),s.readBool(),s.readBool()&&(s.readByte(),s.readByte(),s.readByte())),s.readBool()&&(s.readUEG(),s.readUEG()),s.readBool(),s.readBool(),s.readBool(),s.readBool()&&(s.readUEG(),s.readUEG(),s.readUEG(),s.readUEG()),s.readBool()&&(Ol=s.readBits(32),Ml=s.readBits(32),s.readBool()&&s.readUEG(),s.readBool())){var Dl=!1,Il=!1,Io=!1;for(Dl=s.readBool(),Il=s.readBool(),(Dl||Il)&&((Io=s.readBool())&&(s.readByte(),s.readBits(5),s.readBool(),s.readBits(5)),s.readBits(4),s.readBits(4),Io&&s.readBits(4),s.readBits(5),s.readBits(5),s.readBits(5)),Se=0;Se<=I;Se++){var kf=s.readBool();Af=kf;var Rf=!0,Nl=1;kf||(Rf=s.readBool());var xf=!1;if(Rf?s.readUEG():xf=s.readBool(),xf||(Nl=s.readUEG()+1),Dl){for(Fe=0;Fe<Nl;Fe++)s.readUEG(),s.readUEG(),Io&&(s.readUEG(),s.readUEG());s.readBool()}if(Il){for(Fe=0;Fe<Nl;Fe++)s.readUEG(),s.readUEG(),Io&&(s.readUEG(),s.readUEG());s.readBool()}}}s.readBool()&&(s.readBool(),s.readBool(),s.readBool(),bf=s.readUEG(),s.readUEG(),s.readUEG(),s.readUEG(),s.readUEG())}s.readBool();var lv="hvc1.".concat(z,".1.L").concat(ue,".B0"),Cf=Ne-(p+S)*(Ae===1||Ae===2?2:1),Tf=ze-(v+A)*(Ae===1?2:1),Lf=1;return va!==1&&Sa!==1&&(Lf=va/Sa),s.destroy(),s=null,{codec_mimetype:lv,profile_string:f.getProfileString(z),level_string:f.getLevelString(ue),profile_idc:z,bit_depth:ke+8,ref_frames:1,chroma_format:Ae,chroma_format_string:f.getChromaFormatString(Ae),general_level_idc:ue,general_profile_space:D,general_tier_flag:U,general_profile_idc:z,general_profile_compatibility_flags_1:F,general_profile_compatibility_flags_2:G,general_profile_compatibility_flags_3:K,general_profile_compatibility_flags_4:re,general_constraint_indicator_flags_1:Z,general_constraint_indicator_flags_2:ce,general_constraint_indicator_flags_3:le,general_constraint_indicator_flags_4:se,general_constraint_indicator_flags_5:ve,general_constraint_indicator_flags_6:Ce,min_spatial_segmentation_idc:bf,constant_frame_rate:0,chroma_format_idc:Ae,bit_depth_luma_minus8:ke,bit_depth_chroma_minus8:Le,frame_rate:{fixed:Af,fps:Ml/Ol,fps_den:Ol,fps_num:Ml},sar_ratio:{width:va,height:Sa},codec_size:{width:Cf,height:Tf},present_size:{width:Cf*Lf,height:Tf}}},f.parsePPS=function(c){var u=f._ebsp2rbsp(c),s=new O(u);s.readByte(),s.readByte(),s.readUEG(),s.readUEG(),s.readBool(),s.readBool(),s.readBits(3),s.readBool(),s.readBool(),s.readUEG(),s.readUEG(),s.readSEG(),s.readBool(),s.readBool(),s.readBool()&&s.readUEG(),s.readSEG(),s.readSEG(),s.readBool(),s.readBool(),s.readBool(),s.readBool();var p=s.readBool(),S=s.readBool(),v=1;return S&&p?v=0:S?v=3:p&&(v=2),{parallelismType:v}},f.getChromaFormatString=function(c){switch(c){case 0:return"4:0:0";case 1:return"4:2:0";case 2:return"4:2:2";case 3:return"4:4:4";default:return"Unknown"}},f.getProfileString=function(c){switch(c){case 1:return"Main";case 2:return"Main10";case 3:return"MainSP";case 4:return"Rext";case 9:return"SCC";default:return"Unknown"}},f.getLevelString=function(c){return(c/30).toFixed(1)},f}();function T(f){return f.byteOffset%2==0&&f.byteLength%2==0}function j(f){return f.byteOffset%4==0&&f.byteLength%4==0}function W(f,c){for(var u=0;u<f.length;u++)if(f[u]!==c[u])return!1;return!0}var B=function(f,c){return f.byteLength===c.byteLength&&(j(f)&&j(c)?function(u,s){return W(new Uint32Array(u.buffer,u.byteOffset,u.byteLength/4),new Uint32Array(s.buffer,s.byteOffset,s.byteLength/4))}(f,c):T(f)&&T(c)?function(u,s){return W(new Uint16Array(u.buffer,u.byteOffset,u.byteLength/2),new Uint16Array(s.buffer,s.byteOffset,s.byteLength/2))}(f,c):function(u,s){return W(u,s)}(f,c))},R=function(){return(R=Object.assign||function(f){for(var c,u=1,s=arguments.length;u<s;u++)for(var p in c=arguments[u])Object.prototype.hasOwnProperty.call(c,p)&&(f[p]=c[p]);return f}).apply(this,arguments)},L=function(){function f(){}return f.parseOBUs=function(c,u){for(var s=0;s<c.byteLength;){var p=s,S=(c[s],(120&c[s])>>3),v=(4&c[s])!=0,A=(2&c[s])!=0;c[s],s+=1,v&&(s+=1);var I=Number.POSITIVE_INFINITY;if(A){I=0;for(var D=0;;D++){var U=c[s++];if(I|=(127&U)<<7*D,(128&U)==0)break}}console.log(S),S===1?u=R(R({},f.parseSeuqneceHeader(c.subarray(s,s+I))),{sequence_header_data:c.subarray(p,s+I)}):(S==3&&u||S==6&&u)&&(u=f.parseOBUFrameHeader(c.subarray(s,s+I),0,0,u)),s+=I}return u},f.parseSeuqneceHeader=function(c){var u=new O(c),s=u.readBits(3),p=(u.readBool(),u.readBool()),S=!0,v=0,A=1,I=void 0,D=[];if(p)D.push({operating_point_idc:0,level:u.readBits(5),tier:0});else{if(u.readBool()){var U=u.readBits(32),z=u.readBits(32),F=u.readBool();if(F){for(var G=0;u.readBits(1)===0;)G+=1;G>=32||(1<<G)-1+u.readBits(G)}(v=z)/(A=U),S=F,u.readBool()&&(u.readBits(5),u.readBits(32),I=u.readBits(5),u.readBits(5))}for(var K=u.readBool(),re=u.readBits(5),Z=0;Z<=re;Z++){var ce=u.readBits(12),le=u.readBits(5),se=le>7?u.readBits(1):0;D.push({operating_point_idc:ce,level:le,tier:se}),K&&u.readBool()&&u.readBits(4)}}var ve=D[0],Ce=ve.level,ue=ve.tier,ye=u.readBits(4),Te=u.readBits(4),Se=u.readBits(ye+1)+1,Ae=u.readBits(Te+1)+1,Ne=!1;p||(Ne=u.readBool()),Ne&&(u.readBits(4),u.readBits(4)),u.readBool(),u.readBool(),u.readBool();var ze=!1,ke=2,Le=2,Ge=0;p||(u.readBool(),u.readBool(),u.readBool(),u.readBool(),(ze=u.readBool())&&(u.readBool(),u.readBool()),(ke=u.readBool()?2:u.readBits(1))?Le=u.readBool()?2:u.readBits(1):Le=2,ze?Ge=u.readBits(3)+1:Ge=0);var at=u.readBool(),_n=(u.readBool(),u.readBool(),u.readBool()),bt=8;s===2&&_n?bt=u.readBool()?12:10:bt=_n?10:8;var Kt=!1;s!==1&&(Kt=u.readBool()),u.readBool()&&(u.readBits(8),u.readBits(8),u.readBits(8));var Ot=1,At=1;return Kt?(u.readBits(1),Ot=1,At=1):(u.readBits(1),s==0?(Ot=1,At=1):s==1?(Ot=0,At=0):bt==12?u.readBits(1)&&u.readBits(1):(Ot=1,At=0),Ot&&At&&u.readBits(2),u.readBits(1)),u.readBool(),u.destroy(),u=null,{codec_mimetype:"av01.".concat(s,".").concat(f.getLevelString(Ce,ue),".").concat(bt.toString(10).padStart(2,"0")),level:Ce,tier:ue,level_string:f.getLevelString(Ce,ue),profile_idc:s,profile_string:"".concat(s),bit_depth:bt,ref_frames:1,chroma_format:f.getChromaFormat(Kt,Ot,At),chroma_format_string:f.getChromaFormatString(Kt,Ot,At),sequence_header:{frame_id_numbers_present_flag:Ne,additional_frame_id_length_minus_1:void 0,delta_frame_id_length_minus_2:void 0,reduced_still_picture_header:p,decoder_model_info_present_flag:!1,operating_points:D,buffer_removal_time_length_minus_1:I,equal_picture_interval:S,seq_force_screen_content_tools:ke,seq_force_integer_mv:Le,enable_order_hint:ze,order_hint_bits:Ge,enable_superres:at,frame_width_bit:ye+1,frame_height_bit:Te+1,max_frame_width:Se,max_frame_height:Ae},keyframe:void 0,frame_rate:{fixed:S,fps:v/A,fps_den:A,fps_num:v}}},f.parseOBUFrameHeader=function(c,u,s,p){var S=p.sequence_header,v=new O(c),A=(S.max_frame_width,S.max_frame_height,0);S.frame_id_numbers_present_flag&&(A=S.additional_frame_id_length_minus_1+S.delta_frame_id_length_minus_2+3);var I=0,D=!0,U=!0,z=!1;if(!S.reduced_still_picture_header){if(v.readBool())return p;D=(I=v.readBits(2))===2||I===0,(U=v.readBool())&&S.decoder_model_info_present_flag&&S.equal_picture_interval,U&&v.readBool(),z=!!(I===3||I===0&&U)||v.readBool()}p.keyframe=D,v.readBool();var F=S.seq_force_screen_content_tools;S.seq_force_screen_content_tools===2&&(F=v.readBits(1)),F&&(S.seq_force_integer_mv,S.seq_force_integer_mv==2&&v.readBits(1)),S.frame_id_numbers_present_flag&&v.readBits(A);var G=!1;if(G=I==3||!S.reduced_still_picture_header&&v.readBool(),v.readBits(S.order_hint_bits),D||z||v.readBits(3),S.decoder_model_info_present_flag&&v.readBool()){for(var K=0;K<=S.operating_points_cnt_minus_1;K++)if(S.operating_points[K].decoder_model_present_for_this_op[K]){var re=S.operating_points[K].operating_point_idc;(re===0||re>>u&1&&re>>s+8&1)&&v.readBits(S.buffer_removal_time_length_minus_1+1)}}var Z=255;if(I===3||I==0&&U||(Z=v.readBits(8)),(D||Z!==255)&&z&&S.enable_order_hint)for(var ce=0;ce<8;ce++)v.readBits(S.order_hint_bits);if(D){var le=f.frameSizeAndRenderSize(v,G,S);p.codec_size={width:le.FrameWidth,height:le.FrameHeight},p.present_size={width:le.RenderWidth,height:le.RenderHeight},p.sar_ratio={width:le.RenderWidth/le.FrameWidth,height:le.RenderHeight/le.FrameHeight}}return v.destroy(),v=null,p},f.frameSizeAndRenderSize=function(c,u,s){var p=s.max_frame_width,S=s.max_frame_height;u&&(p=c.readBits(s.frame_width_bit)+1,S=c.readBits(s.frame_height_bit)+1);var v=!1;s.enable_superres&&(v=c.readBool());var A=8;v&&(A=c.readBits(3)+9);var I=p;p=Math.floor((8*I+A/2)/A);var D=I,U=S;if(c.readBool()){var z=c.readBits(16)+1,F=c.readBits(16)+1;D=c.readBits(z)+1,U=c.readBits(F)+1}return{UpscaledWidth:I,FrameWidth:p,FrameHeight:S,RenderWidth:D,RenderHeight:U}},f.getLevelString=function(c,u){return"".concat(c.toString(10).padStart(2,"0")).concat(u===0?"M":"H")},f.getChromaFormat=function(c,u,s){return c?0:u===0&&s===0?3:u===1&&s===0?2:u===1&&s===1?1:Number.NaN},f.getChromaFormatString=function(c,u,s){return c?"4:0:0":u===0&&s===0?"4:4:4":u===1&&s===0?"4:2:2":u===1&&s===1?"4:2:0":"Unknown"},f}(),k,M=function(){function f(c,u){this.TAG="FLVDemuxer",this._config=u,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null,this._dataOffset=c.dataOffset,this._firstParse=!0,this._dispatch=!1,this._hasAudio=c.hasAudioTrack,this._hasVideo=c.hasVideoTrack,this._hasAudioFlagOverrided=!1,this._hasVideoFlagOverrided=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new h.a,this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this._flvSoundRateTable=[5500,11025,22050,44100,48e3],this._mpegSamplingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],this._mpegAudioV10SampleRateTable=[44100,48e3,32e3,0],this._mpegAudioV20SampleRateTable=[22050,24e3,16e3,0],this._mpegAudioV25SampleRateTable=[11025,12e3,8e3,0],this._mpegAudioL1BitRateTable=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],this._mpegAudioL2BitRateTable=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],this._mpegAudioL3BitRateTable=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],this._videoTrack={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this._littleEndian=function(){var s=new ArrayBuffer(2);return new DataView(s).setInt16(0,256,!0),new Int16Array(s)[0]===256}()}return f.prototype.destroy=function(){this._mediaInfo=null,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._videoTrack=null,this._audioTrack=null,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null},f.probe=function(c){var u=new Uint8Array(c);if(u.byteLength<9)return{needMoreData:!0};var s={match:!1};if(u[0]!==70||u[1]!==76||u[2]!==86||u[3]!==1)return s;var p,S,v=(4&u[4])>>>2!=0,A=(1&u[4])!=0,I=(p=u)[S=5]<<24|p[S+1]<<16|p[S+2]<<8|p[S+3];return I<9?s:{match:!0,consumed:I,dataOffset:I,hasAudioTrack:v,hasVideoTrack:A}},f.prototype.bindDataSource=function(c){return c.onDataArrival=this.parseChunks.bind(this),this},Object.defineProperty(f.prototype,"onTrackMetadata",{get:function(){return this._onTrackMetadata},set:function(c){this._onTrackMetadata=c},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onMediaInfo",{get:function(){return this._onMediaInfo},set:function(c){this._onMediaInfo=c},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onMetaDataArrived",{get:function(){return this._onMetaDataArrived},set:function(c){this._onMetaDataArrived=c},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onScriptDataArrived",{get:function(){return this._onScriptDataArrived},set:function(c){this._onScriptDataArrived=c},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onError",{get:function(){return this._onError},set:function(c){this._onError=c},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onDataAvailable",{get:function(){return this._onDataAvailable},set:function(c){this._onDataAvailable=c},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"timestampBase",{get:function(){return this._timestampBase},set:function(c){this._timestampBase=c},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"overridedDuration",{get:function(){return this._duration},set:function(c){this._durationOverrided=!0,this._duration=c,this._mediaInfo.duration=c},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"overridedHasAudio",{set:function(c){this._hasAudioFlagOverrided=!0,this._hasAudio=c,this._mediaInfo.hasAudio=c},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"overridedHasVideo",{set:function(c){this._hasVideoFlagOverrided=!0,this._hasVideo=c,this._mediaInfo.hasVideo=c},enumerable:!1,configurable:!0}),f.prototype.resetMediaInfo=function(){this._mediaInfo=new h.a},f.prototype._isInitialMetadataDispatched=function(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!(this._hasAudio||!this._hasVideo)&&this._videoInitialMetadataDispatched},f.prototype.parseChunks=function(c,u){if(!(this._onError&&this._onMediaInfo&&this._onTrackMetadata&&this._onDataAvailable))throw new m.a("Flv: onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var s=0,p=this._littleEndian;if(u===0){if(!(c.byteLength>13))return 0;s=f.probe(c).dataOffset}for(this._firstParse&&(this._firstParse=!1,u+s!==this._dataOffset&&l.a.w(this.TAG,"First time parsing but chunk byteStart invalid!"),(S=new DataView(c,s)).getUint32(0,!p)!==0&&l.a.w(this.TAG,"PrevTagSize0 !== 0 !!!"),s+=4);s<c.byteLength;){this._dispatch=!0;var S=new DataView(c,s);if(s+11+4>c.byteLength)break;var v=S.getUint8(0),A=16777215&S.getUint32(0,!p);if(s+11+A+4>c.byteLength)break;if(v===8||v===9||v===18){var I=S.getUint8(4),D=S.getUint8(5),U=S.getUint8(6)|D<<8|I<<16|S.getUint8(7)<<24;16777215&S.getUint32(7,!p)&&l.a.w(this.TAG,"Meet tag which has StreamID != 0!");var z=s+11;switch(v){case 8:this._parseAudioData(c,z,A,U);break;case 9:this._parseVideoData(c,z,A,U,u+s);break;case 18:this._parseScriptData(c,z,A)}var F=S.getUint32(11+A,!p);F!==11+A&&l.a.w(this.TAG,"Invalid PrevTagSize ".concat(F)),s+=11+A+4}else l.a.w(this.TAG,"Unsupported tag type ".concat(v,", skipped")),s+=11+A+4}return this._isInitialMetadataDispatched()&&this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack),s},f.prototype._parseScriptData=function(c,u,s){var p=w.parseScriptData(c,u,s);if(p.hasOwnProperty("onMetaData")){if(p.onMetaData==null||typeof p.onMetaData!="object")return void l.a.w(this.TAG,"Invalid onMetaData structure!");this._metadata&&l.a.w(this.TAG,"Found another onMetaData tag!"),this._metadata=p;var S=this._metadata.onMetaData;if(this._onMetaDataArrived&&this._onMetaDataArrived(Object.assign({},S)),typeof S.hasAudio=="boolean"&&this._hasAudioFlagOverrided===!1&&(this._hasAudio=S.hasAudio,this._mediaInfo.hasAudio=this._hasAudio),typeof S.hasVideo=="boolean"&&this._hasVideoFlagOverrided===!1&&(this._hasVideo=S.hasVideo,this._mediaInfo.hasVideo=this._hasVideo),typeof S.audiodatarate=="number"&&(this._mediaInfo.audioDataRate=S.audiodatarate),typeof S.videodatarate=="number"&&(this._mediaInfo.videoDataRate=S.videodatarate),typeof S.width=="number"&&(this._mediaInfo.width=S.width),typeof S.height=="number"&&(this._mediaInfo.height=S.height),typeof S.duration=="number"){if(!this._durationOverrided){var v=Math.floor(S.duration*this._timescale);this._duration=v,this._mediaInfo.duration=v}}else this._mediaInfo.duration=0;if(typeof S.framerate=="number"){var A=Math.floor(1e3*S.framerate);if(A>0){var I=A/1e3;this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=I,this._referenceFrameRate.fps_num=A,this._referenceFrameRate.fps_den=1e3,this._mediaInfo.fps=I}}if(typeof S.keyframes=="object"){this._mediaInfo.hasKeyframesIndex=!0;var D=S.keyframes;this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(D),S.keyframes=null}else this._mediaInfo.hasKeyframesIndex=!1;this._dispatch=!1,this._mediaInfo.metadata=S,l.a.v(this.TAG,"Parsed onMetaData"),this._mediaInfo.isComplete()&&this._onMediaInfo(this._mediaInfo)}Object.keys(p).length>0&&this._onScriptDataArrived&&this._onScriptDataArrived(Object.assign({},p))},f.prototype._parseKeyframesIndex=function(c){for(var u=[],s=[],p=1;p<c.times.length;p++){var S=this._timestampBase+Math.floor(1e3*c.times[p]);u.push(S),s.push(c.filepositions[p])}return{times:u,filepositions:s}},f.prototype._parseAudioData=function(c,u,s,p){if(s<=1)l.a.w(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!");else if(this._hasAudioFlagOverrided!==!0||this._hasAudio!==!1){this._littleEndian;var S=new DataView(c,u,s).getUint8(0),v=S>>>4;if(v!==9)if(v===2||v===10){var A=0,I=(12&S)>>>2;if(I>=0&&I<=4){A=this._flvSoundRateTable[I];var D=1&S,U=this._audioMetadata,z=this._audioTrack;if(U||(this._hasAudio===!1&&this._hasAudioFlagOverrided===!1&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),(U=this._audioMetadata={}).type="audio",U.id=z.id,U.timescale=this._timescale,U.duration=this._duration,U.audioSampleRate=A,U.channelCount=D===0?1:2),v===10){var F=this._parseAACAudioData(c,u+1,s-1);if(F==null)return;if(F.packetType===0){if(U.config){if(B(F.data.config,U.config))return;l.a.w(this.TAG,"AudioSpecificConfig has been changed, re-generate initialization segment")}var G=F.data;U.audioSampleRate=G.samplingRate,U.channelCount=G.channelCount,U.codec=G.codec,U.originalCodec=G.originalCodec,U.config=G.config,U.refSampleDuration=1024/U.audioSampleRate*U.timescale,l.a.v(this.TAG,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",U),(Z=this._mediaInfo).audioCodec=U.originalCodec,Z.audioSampleRate=U.audioSampleRate,Z.audioChannelCount=U.channelCount,Z.hasVideo?Z.videoCodec!=null&&(Z.mimeType='video/x-flv; codecs="'+Z.videoCodec+","+Z.audioCodec+'"'):Z.mimeType='video/x-flv; codecs="'+Z.audioCodec+'"',Z.isComplete()&&this._onMediaInfo(Z)}else if(F.packetType===1){var K=this._timestampBase+p,re={unit:F.data,length:F.data.byteLength,dts:K,pts:K};z.samples.push(re),z.length+=F.data.length}else l.a.e(this.TAG,"Flv: Unsupported AAC data type ".concat(F.packetType))}else if(v===2){if(!U.codec){var Z;if((G=this._parseMP3AudioData(c,u+1,s-1,!0))==null)return;U.audioSampleRate=G.samplingRate,U.channelCount=G.channelCount,U.codec=G.codec,U.originalCodec=G.originalCodec,U.refSampleDuration=1152/U.audioSampleRate*U.timescale,l.a.v(this.TAG,"Parsed MPEG Audio Frame Header"),this._audioInitialMetadataDispatched=!0,this._onTrackMetadata("audio",U),(Z=this._mediaInfo).audioCodec=U.codec,Z.audioSampleRate=U.audioSampleRate,Z.audioChannelCount=U.channelCount,Z.audioDataRate=G.bitRate,Z.hasVideo?Z.videoCodec!=null&&(Z.mimeType='video/x-flv; codecs="'+Z.videoCodec+","+Z.audioCodec+'"'):Z.mimeType='video/x-flv; codecs="'+Z.audioCodec+'"',Z.isComplete()&&this._onMediaInfo(Z)}var ce=this._parseMP3AudioData(c,u+1,s-1,!1);if(ce==null)return;K=this._timestampBase+p;var le={unit:ce,length:ce.byteLength,dts:K,pts:K};z.samples.push(le),z.length+=ce.length}}else this._onError(E.a.FORMAT_ERROR,"Flv: Invalid audio sample rate idx: "+I)}else this._onError(E.a.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec idx: "+v);else{if(s<=5)return void l.a.w(this.TAG,"Flv: Invalid audio packet, missing AudioFourCC in Ehnanced FLV payload!");var se=15&S,ve=String.fromCharCode.apply(String,new Uint8Array(c,u,s).slice(1,5));switch(ve){case"Opus":this._parseOpusAudioPacket(c,u+5,s-5,p,se);break;case"fLaC":this._parseFlacAudioPacket(c,u+5,s-5,p,se);break;default:this._onError(E.a.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec: "+ve)}}}},f.prototype._parseAACAudioData=function(c,u,s){if(!(s<=1)){var p={},S=new Uint8Array(c,u,s);return p.packetType=S[0],S[0]===0?p.data=this._parseAACAudioSpecificConfig(c,u+1,s-1):p.data=S.subarray(1),p}l.a.w(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!")},f.prototype._parseAACAudioSpecificConfig=function(c,u,s){var p,S,v=new Uint8Array(c,u,s),A=null,I=0,D=null;if(I=p=v[0]>>>3,(S=(7&v[0])<<1|v[1]>>>7)<0||S>=this._mpegSamplingRates.length)this._onError(E.a.FORMAT_ERROR,"Flv: AAC invalid sampling frequency index!");else{var U=this._mpegSamplingRates[S],z=(120&v[1])>>>3;if(!(z<0||z>=8)){I===5&&(D=(7&v[1])<<1|v[2]>>>7,(124&v[2])>>>2);var F=self.navigator.userAgent.toLowerCase();return F.indexOf("firefox")!==-1?S>=6?(I=5,A=new Array(4),D=S-3):(I=2,A=new Array(2),D=S):F.indexOf("android")!==-1?(I=2,A=new Array(2),D=S):(I=5,D=S,A=new Array(4),S>=6?D=S-3:z===1&&(I=2,A=new Array(2),D=S)),A[0]=I<<3,A[0]|=(15&S)>>>1,A[1]=(15&S)<<7,A[1]|=(15&z)<<3,I===5&&(A[1]|=(15&D)>>>1,A[2]=(1&D)<<7,A[2]|=8,A[3]=0),{config:A,samplingRate:U,channelCount:z,codec:"mp4a.40."+I,originalCodec:"mp4a.40."+p}}this._onError(E.a.FORMAT_ERROR,"Flv: AAC invalid channel configuration")}},f.prototype._parseMP3AudioData=function(c,u,s,p){if(!(s<4)){this._littleEndian;var S=new Uint8Array(c,u,s),v=null;if(p){if(S[0]!==255)return;var A=S[1]>>>3&3,I=(6&S[1])>>1,D=(240&S[2])>>>4,U=(12&S[2])>>>2,z=(S[3]>>>6&3)!==3?2:1,F=0,G=0;switch(A){case 0:F=this._mpegAudioV25SampleRateTable[U];break;case 2:F=this._mpegAudioV20SampleRateTable[U];break;case 3:F=this._mpegAudioV10SampleRateTable[U]}switch(I){case 1:D<this._mpegAudioL3BitRateTable.length&&(G=this._mpegAudioL3BitRateTable[D]);break;case 2:D<this._mpegAudioL2BitRateTable.length&&(G=this._mpegAudioL2BitRateTable[D]);break;case 3:D<this._mpegAudioL1BitRateTable.length&&(G=this._mpegAudioL1BitRateTable[D])}v={bitRate:G,samplingRate:F,channelCount:z,codec:"mp3",originalCodec:"mp3"}}else v=S;return v}l.a.w(this.TAG,"Flv: Invalid MP3 packet, header missing!")},f.prototype._parseOpusAudioPacket=function(c,u,s,p,S){if(S===0)this._parseOpusSequenceHeader(c,u,s);else if(S===1)this._parseOpusAudioData(c,u,s,p);else if(S!==2)return void this._onError(E.a.FORMAT_ERROR,"Flv: Invalid video packet type ".concat(S))},f.prototype._parseOpusSequenceHeader=function(c,u,s){if(s<=16)l.a.w(this.TAG,"Flv: Invalid OpusSequenceHeader, lack of data!");else{var p=this._audioMetadata,S=this._audioTrack;p||(this._hasAudio===!1&&this._hasAudioFlagOverrided===!1&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),(p=this._audioMetadata={}).type="audio",p.id=S.id,p.timescale=this._timescale,p.duration=this._duration);var v=new DataView(c,u,s);v.setUint8(8,0);var A=v.getUint8(9);v.setUint16(10,v.getUint16(10,!0),!1);var I=v.getUint32(12,!0);v.setUint32(12,v.getUint32(12,!0),!1);var D={config:new Uint8Array(c,u+8,s-8),channelCount:A,samplingFrequence:I,codec:"opus",originalCodec:"opus"};if(p.config){if(B(D.config,p.config))return;l.a.w(this.TAG,"OpusSequenceHeader has been changed, re-generate initialization segment")}p.audioSampleRate=D.samplingFrequence,p.channelCount=D.channelCount,p.codec=D.codec,p.originalCodec=D.originalCodec,p.config=D.config,p.refSampleDuration=20,l.a.v(this.TAG,"Parsed OpusSequenceHeader"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",p);var U=this._mediaInfo;U.audioCodec=p.originalCodec,U.audioSampleRate=p.audioSampleRate,U.audioChannelCount=p.channelCount,U.hasVideo?U.videoCodec!=null&&(U.mimeType='video/x-flv; codecs="'+U.videoCodec+","+U.audioCodec+'"'):U.mimeType='video/x-flv; codecs="'+U.audioCodec+'"',U.isComplete()&&this._onMediaInfo(U)}},f.prototype._parseOpusAudioData=function(c,u,s,p){var S=this._audioTrack,v=new Uint8Array(c,u,s),A=this._timestampBase+p,I={unit:v,length:v.byteLength,dts:A,pts:A};S.samples.push(I),S.length+=v.length},f.prototype._parseFlacAudioPacket=function(c,u,s,p,S){if(S===0)this._parseFlacSequenceHeader(c,u,s);else if(S===1)this._parseFlacAudioData(c,u,s,p);else if(S!==2)return void this._onError(E.a.FORMAT_ERROR,"Flv: Invalid Flac audio packet type ".concat(S))},f.prototype._parseFlacSequenceHeader=function(c,u,s){var p=this._audioMetadata,S=this._audioTrack;p||(this._hasAudio===!1&&this._hasAudioFlagOverrided===!1&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),(p=this._audioMetadata={}).type="audio",p.id=S.id,p.timescale=this._timescale,p.duration=this._duration);var v=new Uint8Array(c,u+4,s-4),A=new O(v),I=A.readBits(16),D=A.readBits(16),U=D===I?D:null;A.readBits(24),A.readBits(24);var z=A.readBits(20),F=A.readBits(3)+1,G=A.readBits(5)+1;A.destroy();var K=new Uint8Array(v.byteLength+4);K.set(v,4),K[0]=128,K[1]=v.byteLength>>>16&255,K[2]=v.byteLength>>>8&255,K[3]=v.byteLength>>>0&255;var re={config:K,channelCount:F,samplingFrequence:z,sampleSize:G,codec:"flac",originalCodec:"flac"};if(p.config){if(B(re.config,p.config))return;l.a.w(this.TAG,"FlacSequenceHeader has been changed, re-generate initialization segment")}p.audioSampleRate=re.samplingFrequence,p.channelCount=re.channelCount,p.sampleSize=re.sampleSize,p.codec=re.codec,p.originalCodec=re.originalCodec,p.config=re.config,p.refSampleDuration=U!=null?1e3*U/re.samplingFrequence:null,l.a.v(this.TAG,"Parsed FlacSequenceHeader"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",p);var Z=this._mediaInfo;Z.audioCodec=p.originalCodec,Z.audioSampleRate=p.audioSampleRate,Z.audioChannelCount=p.channelCount,Z.hasVideo?Z.videoCodec!=null&&(Z.mimeType='video/x-flv; codecs="'+Z.videoCodec+","+Z.audioCodec+'"'):Z.mimeType='video/x-flv; codecs="'+Z.audioCodec+'"',Z.isComplete()&&this._onMediaInfo(Z)},f.prototype._parseFlacAudioData=function(c,u,s,p){var S=this._audioTrack,v=new Uint8Array(c,u,s),A=this._timestampBase+p,I={unit:v,length:v.byteLength,dts:A,pts:A};S.samples.push(I),S.length+=v.length},f.prototype._parseVideoData=function(c,u,s,p,S){if(s<=1)l.a.w(this.TAG,"Flv: Invalid video packet, missing VideoData payload!");else if(this._hasVideoFlagOverrided!==!0||this._hasVideo!==!1){var v=new Uint8Array(c,u,s)[0],A=(112&v)>>>4;if(128&v){var I=15&v,D=String.fromCharCode.apply(String,new Uint8Array(c,u,s).slice(1,5));if(D==="hvc1")this._parseEnhancedHEVCVideoPacket(c,u+5,s-5,p,S,A,I);else{if(D!=="av01")return void this._onError(E.a.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: ".concat(D));this._parseEnhancedAV1VideoPacket(c,u+5,s-5,p,S,A,I)}}else{var U=15&v;if(U===7)this._parseAVCVideoPacket(c,u+1,s-1,p,S,A);else{if(U!==12)return void this._onError(E.a.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: ".concat(U));this._parseHEVCVideoPacket(c,u+1,s-1,p,S,A)}}}},f.prototype._parseAVCVideoPacket=function(c,u,s,p,S,v){if(s<4)l.a.w(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");else{var A=this._littleEndian,I=new DataView(c,u,s),D=I.getUint8(0),U=(16777215&I.getUint32(0,!A))<<8>>8;if(D===0)this._parseAVCDecoderConfigurationRecord(c,u+4,s-4);else if(D===1)this._parseAVCVideoData(c,u+4,s-4,p,S,v,U);else if(D!==2)return void this._onError(E.a.FORMAT_ERROR,"Flv: Invalid video packet type ".concat(D))}},f.prototype._parseHEVCVideoPacket=function(c,u,s,p,S,v){if(s<4)l.a.w(this.TAG,"Flv: Invalid HEVC packet, missing HEVCPacketType or/and CompositionTime");else{var A=this._littleEndian,I=new DataView(c,u,s),D=I.getUint8(0),U=(16777215&I.getUint32(0,!A))<<8>>8;if(D===0)this._parseHEVCDecoderConfigurationRecord(c,u+4,s-4);else if(D===1)this._parseHEVCVideoData(c,u+4,s-4,p,S,v,U);else if(D!==2)return void this._onError(E.a.FORMAT_ERROR,"Flv: Invalid video packet type ".concat(D))}},f.prototype._parseEnhancedHEVCVideoPacket=function(c,u,s,p,S,v,A){var I=this._littleEndian,D=new DataView(c,u,s);if(A===0)this._parseHEVCDecoderConfigurationRecord(c,u,s);else if(A===1){var U=(4294967040&D.getUint32(0,!I))>>8;this._parseHEVCVideoData(c,u+3,s-3,p,S,v,U)}else if(A===3)this._parseHEVCVideoData(c,u,s,p,S,v,0);else if(A!==2)return void this._onError(E.a.FORMAT_ERROR,"Flv: Invalid video packet type ".concat(A))},f.prototype._parseEnhancedAV1VideoPacket=function(c,u,s,p,S,v,A){if(this._littleEndian,A===0)this._parseAV1CodecConfigurationRecord(c,u,s);else if(A===1)this._parseAV1VideoData(c,u,s,p,S,v,0);else{if(A===5)return void this._onError(E.a.FORMAT_ERROR,"Flv: Not Supported MP2T AV1 video packet type ".concat(A));if(A!==2)return void this._onError(E.a.FORMAT_ERROR,"Flv: Invalid video packet type ".concat(A))}},f.prototype._parseAVCDecoderConfigurationRecord=function(c,u,s){if(s<7)l.a.w(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");else{var p=this._videoMetadata,S=this._videoTrack,v=this._littleEndian,A=new DataView(c,u,s);if(p){if(p.avcc!==void 0){var I=new Uint8Array(c,u,s);if(B(I,p.avcc))return;l.a.w(this.TAG,"AVCDecoderConfigurationRecord has been changed, re-generate initialization segment")}}else this._hasVideo===!1&&this._hasVideoFlagOverrided===!1&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(p=this._videoMetadata={}).type="video",p.id=S.id,p.timescale=this._timescale,p.duration=this._duration;var D=A.getUint8(0),U=A.getUint8(1);if(A.getUint8(2),A.getUint8(3),D===1&&U!==0)if(this._naluLengthSize=1+(3&A.getUint8(4)),this._naluLengthSize===3||this._naluLengthSize===4){var z=31&A.getUint8(5);if(z!==0){z>1&&l.a.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: SPS Count = ".concat(z));for(var F=6,G=0;G<z;G++){var K=A.getUint16(F,!v);if(F+=2,K!==0){var re=new Uint8Array(c,u+F,K);F+=K;var Z=b.parseSPS(re);if(G===0){p.codecWidth=Z.codec_size.width,p.codecHeight=Z.codec_size.height,p.presentWidth=Z.present_size.width,p.presentHeight=Z.present_size.height,p.profile=Z.profile_string,p.level=Z.level_string,p.bitDepth=Z.bit_depth,p.chromaFormat=Z.chroma_format,p.sarRatio=Z.sar_ratio,p.frameRate=Z.frame_rate,Z.frame_rate.fixed!==!1&&Z.frame_rate.fps_num!==0&&Z.frame_rate.fps_den!==0||(p.frameRate=this._referenceFrameRate);var ce=p.frameRate.fps_den,le=p.frameRate.fps_num;p.refSampleDuration=p.timescale*(ce/le);for(var se=re.subarray(1,4),ve="avc1.",Ce=0;Ce<3;Ce++){var ue=se[Ce].toString(16);ue.length<2&&(ue="0"+ue),ve+=ue}p.codec=ve;var ye=this._mediaInfo;ye.width=p.codecWidth,ye.height=p.codecHeight,ye.fps=p.frameRate.fps,ye.profile=p.profile,ye.level=p.level,ye.refFrames=Z.ref_frames,ye.chromaFormat=Z.chroma_format_string,ye.sarNum=p.sarRatio.width,ye.sarDen=p.sarRatio.height,ye.videoCodec=ve,ye.hasAudio?ye.audioCodec!=null&&(ye.mimeType='video/x-flv; codecs="'+ye.videoCodec+","+ye.audioCodec+'"'):ye.mimeType='video/x-flv; codecs="'+ye.videoCodec+'"',ye.isComplete()&&this._onMediaInfo(ye)}}}var Te=A.getUint8(F);if(Te!==0){for(Te>1&&l.a.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: PPS Count = ".concat(Te)),F++,G=0;G<Te;G++)K=A.getUint16(F,!v),F+=2,K!==0&&(F+=K);p.avcc=new Uint8Array(s),p.avcc.set(new Uint8Array(c,u,s),0),l.a.v(this.TAG,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",p)}else this._onError(E.a.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No PPS")}else this._onError(E.a.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No SPS")}else this._onError(E.a.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: ".concat(this._naluLengthSize-1));else this._onError(E.a.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord")}},f.prototype._parseHEVCDecoderConfigurationRecord=function(c,u,s){if(s<22)l.a.w(this.TAG,"Flv: Invalid HEVCDecoderConfigurationRecord, lack of data!");else{var p=this._videoMetadata,S=this._videoTrack,v=this._littleEndian,A=new DataView(c,u,s);if(p){if(p.hvcc!==void 0){var I=new Uint8Array(c,u,s);if(B(I,p.hvcc))return;l.a.w(this.TAG,"HEVCDecoderConfigurationRecord has been changed, re-generate initialization segment")}}else this._hasVideo===!1&&this._hasVideoFlagOverrided===!1&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(p=this._videoMetadata={}).type="video",p.id=S.id,p.timescale=this._timescale,p.duration=this._duration;var D=A.getUint8(0),U=31&A.getUint8(1);if(D!==0&&D!==1||U===0)this._onError(E.a.FORMAT_ERROR,"Flv: Invalid HEVCDecoderConfigurationRecord");else if(this._naluLengthSize=1+(3&A.getUint8(21)),this._naluLengthSize===3||this._naluLengthSize===4){for(var z=A.getUint8(22),F=0,G=23;F<z;F++){var K=63&A.getUint8(G+0),re=A.getUint16(G+1,!v);G+=3;for(var Z=0;Z<re;Z++){var ce=A.getUint16(G+0,!v);if(Z===0)if(K===33){G+=2;var le=new Uint8Array(c,u+G,ce),se=x.parseSPS(le);p.codecWidth=se.codec_size.width,p.codecHeight=se.codec_size.height,p.presentWidth=se.present_size.width,p.presentHeight=se.present_size.height,p.profile=se.profile_string,p.level=se.level_string,p.bitDepth=se.bit_depth,p.chromaFormat=se.chroma_format,p.sarRatio=se.sar_ratio,p.frameRate=se.frame_rate,se.frame_rate.fixed!==!1&&se.frame_rate.fps_num!==0&&se.frame_rate.fps_den!==0||(p.frameRate=this._referenceFrameRate);var ve=p.frameRate.fps_den,Ce=p.frameRate.fps_num;p.refSampleDuration=p.timescale*(ve/Ce),p.codec=se.codec_mimetype;var ue=this._mediaInfo;ue.width=p.codecWidth,ue.height=p.codecHeight,ue.fps=p.frameRate.fps,ue.profile=p.profile,ue.level=p.level,ue.refFrames=se.ref_frames,ue.chromaFormat=se.chroma_format_string,ue.sarNum=p.sarRatio.width,ue.sarDen=p.sarRatio.height,ue.videoCodec=se.codec_mimetype,ue.hasAudio?ue.audioCodec!=null&&(ue.mimeType='video/x-flv; codecs="'+ue.videoCodec+","+ue.audioCodec+'"'):ue.mimeType='video/x-flv; codecs="'+ue.videoCodec+'"',ue.isComplete()&&this._onMediaInfo(ue),G+=ce}else G+=2+ce;else G+=2+ce}}p.hvcc=new Uint8Array(s),p.hvcc.set(new Uint8Array(c,u,s),0),l.a.v(this.TAG,"Parsed HEVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",p)}else this._onError(E.a.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: ".concat(this._naluLengthSize-1))}},f.prototype._parseAV1CodecConfigurationRecord=function(c,u,s){if(s<4)l.a.w(this.TAG,"Flv: Invalid AV1CodecConfigurationRecord, lack of data!");else{var p=this._videoMetadata,S=this._videoTrack,v=(this._littleEndian,new DataView(c,u,s));p?p.av1c!==void 0&&l.a.w(this.TAG,"Found another AV1CodecConfigurationRecord!"):(this._hasVideo===!1&&this._hasVideoFlagOverrided===!1&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(p=this._videoMetadata={}).type="video",p.id=S.id,p.timescale=this._timescale,p.duration=this._duration);var A=127&v.getUint8(0);if(v.getUint8(1),v.getUint8(1),v.getUint8(2),A===1){var I=L.parseOBUs(new Uint8Array(c,u+4,s-4));if(I!=null){p.profile=I.profile_string,p.level=I.level_string,p.bitDepth=I.bit_depth,p.chromaFormat=I.chroma_format,p.frameRate=I.frame_rate,I.frame_rate.fixed!==!1&&I.frame_rate.fps_num!==0&&I.frame_rate.fps_den!==0||(p.frameRate=this._referenceFrameRate);var D=p.frameRate.fps_den,U=p.frameRate.fps_num;p.refSampleDuration=p.timescale*(D/U),p.codec=I.codec_mimetype,p.extra=I;var z=this._mediaInfo;z.fps=p.frameRate.fps,z.profile=p.profile,z.level=p.level,z.refFrames=I.ref_frames,z.chromaFormat=I.chroma_format_string,z.videoCodec=I.codec_mimetype,z.hasAudio?z.audioCodec!=null&&(z.mimeType='video/x-flv; codecs="'+z.videoCodec+","+z.audioCodec+'"'):z.mimeType='video/x-flv; codecs="'+z.videoCodec+'"',z.isComplete()&&this._onMediaInfo(z),p.av1c=new Uint8Array(s),p.av1c.set(new Uint8Array(c,u,s),0),l.a.v(this.TAG,"Preparing AV1CodecConfigurationRecord")}else this._onError(E.a.FORMAT_ERROR,"Flv: Invalid AV1CodecConfigurationRecord")}else this._onError(E.a.FORMAT_ERROR,"Flv: Invalid AV1CodecConfigurationRecord")}},f.prototype._parseAVCVideoData=function(c,u,s,p,S,v,A){for(var I=this._littleEndian,D=new DataView(c,u,s),U=[],z=0,F=0,G=this._naluLengthSize,K=this._timestampBase+p,re=v===1;F<s;){if(F+4>=s){l.a.w(this.TAG,"Malformed Nalu near timestamp ".concat(K,", offset = ").concat(F,", dataSize = ").concat(s));break}var Z=D.getUint32(F,!I);if(G===3&&(Z>>>=8),Z>s-G)return void l.a.w(this.TAG,"Malformed Nalus near timestamp ".concat(K,", NaluSize > DataSize!"));var ce=31&D.getUint8(F+G);ce===5&&(re=!0);var le=new Uint8Array(c,u+F,G+Z),se={type:ce,data:le};U.push(se),z+=le.byteLength,F+=G+Z}if(U.length){var ve=this._videoTrack,Ce={units:U,length:z,isKeyframe:re,dts:K,cts:A,pts:K+A};re&&(Ce.fileposition=S),ve.samples.push(Ce),ve.length+=z}},f.prototype._parseHEVCVideoData=function(c,u,s,p,S,v,A){for(var I=this._littleEndian,D=new DataView(c,u,s),U=[],z=0,F=0,G=this._naluLengthSize,K=this._timestampBase+p,re=v===1;F<s;){if(F+4>=s){l.a.w(this.TAG,"Malformed Nalu near timestamp ".concat(K,", offset = ").concat(F,", dataSize = ").concat(s));break}var Z=D.getUint32(F,!I);if(G===3&&(Z>>>=8),Z>s-G)return void l.a.w(this.TAG,"Malformed Nalus near timestamp ".concat(K,", NaluSize > DataSize!"));var ce=D.getUint8(F+G)>>1&63;ce!==19&&ce!==20&&ce!==21||(re=!0);var le=new Uint8Array(c,u+F,G+Z),se={type:ce,data:le};U.push(se),z+=le.byteLength,F+=G+Z}if(U.length){var ve=this._videoTrack,Ce={units:U,length:z,isKeyframe:re,dts:K,cts:A,pts:K+A};re&&(Ce.fileposition=S),ve.samples.push(Ce),ve.length+=z}},f.prototype._parseAV1VideoData=function(c,u,s,p,S,v,A){this._littleEndian;var I,D=[],U=this._timestampBase+p,z=v===1;if(z){var F=this._videoMetadata,G=L.parseOBUs(new Uint8Array(c,u,s),F.extra);if(G==null)return void this._onError(E.a.FORMAT_ERROR,"Flv: Invalid AV1 VideoData");console.log(G),F.codecWidth=G.codec_size.width,F.codecHeight=G.codec_size.height,F.presentWidth=G.present_size.width,F.presentHeight=G.present_size.height,F.sarRatio=G.sar_ratio;var K=this._mediaInfo;K.width=F.codecWidth,K.height=F.codecHeight,K.sarNum=F.sarRatio.width,K.sarDen=F.sarRatio.height,l.a.v(this.TAG,"Parsed AV1DecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",F)}if(I=s,D.push({unitType:0,data:new Uint8Array(c,u+0,s)}),D.length){var re=this._videoTrack,Z={units:D,length:I,isKeyframe:z,dts:U,cts:A,pts:U+A};z&&(Z.fileposition=S),re.samples.push(Z),re.length+=I}},f}(),Y=function(){function f(){}return f.prototype.destroy=function(){this.onError=null,this.onMediaInfo=null,this.onMetaDataArrived=null,this.onTrackMetadata=null,this.onDataAvailable=null,this.onTimedID3Metadata=null,this.onSynchronousKLVMetadata=null,this.onAsynchronousKLVMetadata=null,this.onSMPTE2038Metadata=null,this.onSCTE35Metadata=null,this.onPESPrivateData=null,this.onPESPrivateDataDescriptor=null},f}(),ie=function(){this.program_pmt_pid={}};(function(f){f[f.kMPEG1Audio=3]="kMPEG1Audio",f[f.kMPEG2Audio=4]="kMPEG2Audio",f[f.kPESPrivateData=6]="kPESPrivateData",f[f.kADTSAAC=15]="kADTSAAC",f[f.kLOASAAC=17]="kLOASAAC",f[f.kAC3=129]="kAC3",f[f.kEAC3=135]="kEAC3",f[f.kMetadata=21]="kMetadata",f[f.kSCTE35=134]="kSCTE35",f[f.kH264=27]="kH264",f[f.kH265=36]="kH265"})(k||(k={}));var Q,ne=function(){this.pid_stream_type={},this.common_pids={h264:void 0,h265:void 0,av1:void 0,adts_aac:void 0,loas_aac:void 0,opus:void 0,ac3:void 0,eac3:void 0,mp3:void 0},this.pes_private_data_pids={},this.timed_id3_pids={},this.synchronous_klv_pids={},this.asynchronous_klv_pids={},this.scte_35_pids={},this.smpte2038_pids={}},de=function(){},xe=function(){},J=function(){this.slices=[],this.total_length=0,this.expected_length=0,this.file_position=0};(function(f){f[f.kUnspecified=0]="kUnspecified",f[f.kSliceNonIDR=1]="kSliceNonIDR",f[f.kSliceDPA=2]="kSliceDPA",f[f.kSliceDPB=3]="kSliceDPB",f[f.kSliceDPC=4]="kSliceDPC",f[f.kSliceIDR=5]="kSliceIDR",f[f.kSliceSEI=6]="kSliceSEI",f[f.kSliceSPS=7]="kSliceSPS",f[f.kSlicePPS=8]="kSlicePPS",f[f.kSliceAUD=9]="kSliceAUD",f[f.kEndOfSequence=10]="kEndOfSequence",f[f.kEndOfStream=11]="kEndOfStream",f[f.kFiller=12]="kFiller",f[f.kSPSExt=13]="kSPSExt",f[f.kReserved0=14]="kReserved0"})(Q||(Q={}));var N,P,H=function(){},X=function(f){var c=f.data.byteLength;this.type=f.type,this.data=new Uint8Array(4+c),new DataView(this.data.buffer).setUint32(0,c),this.data.set(f.data,4)},he=function(){function f(c){this.TAG="H264AnnexBParser",this.current_startcode_offset_=0,this.eof_flag_=!1,this.data_=c,this.current_startcode_offset_=this.findNextStartCodeOffset(0),this.eof_flag_&&l.a.e(this.TAG,"Could not find H264 startcode until payload end!")}return f.prototype.findNextStartCodeOffset=function(c){for(var u=c,s=this.data_;;){if(u+3>=s.byteLength)return this.eof_flag_=!0,s.byteLength;var p=s[u+0]<<24|s[u+1]<<16|s[u+2]<<8|s[u+3],S=s[u+0]<<16|s[u+1]<<8|s[u+2];if(p===1||S===1)return u;u++}},f.prototype.readNextNaluPayload=function(){for(var c=this.data_,u=null;u==null&&!this.eof_flag_;){var s=this.current_startcode_offset_,p=31&c[s+=(c[s]<<24|c[s+1]<<16|c[s+2]<<8|c[s+3])===1?4:3],S=(128&c[s])>>>7,v=this.findNextStartCodeOffset(s);if(this.current_startcode_offset_=v,!(p>=Q.kReserved0)&&S===0){var A=c.subarray(s,v);(u=new H).type=p,u.data=A}}return u},f}(),me=function(){function f(c,u,s){var p=8+c.byteLength+1+2+u.byteLength,S=!1;c[3]!==66&&c[3]!==77&&c[3]!==88&&(S=!0,p+=4);var v=this.data=new Uint8Array(p);v[0]=1,v[1]=c[1],v[2]=c[2],v[3]=c[3],v[4]=255,v[5]=225;var A=c.byteLength;v[6]=A>>>8,v[7]=255&A;var I=8;v.set(c,8),v[I+=A]=1;var D=u.byteLength;v[I+1]=D>>>8,v[I+2]=255&D,v.set(u,I+3),I+=3+D,S&&(v[I]=252|s.chroma_format_idc,v[I+1]=248|s.bit_depth_luma-8,v[I+2]=248|s.bit_depth_chroma-8,v[I+3]=0,I+=4)}return f.prototype.getData=function(){return this.data},f}();(function(f){f[f.kNull=0]="kNull",f[f.kAACMain=1]="kAACMain",f[f.kAAC_LC=2]="kAAC_LC",f[f.kAAC_SSR=3]="kAAC_SSR",f[f.kAAC_LTP=4]="kAAC_LTP",f[f.kAAC_SBR=5]="kAAC_SBR",f[f.kAAC_Scalable=6]="kAAC_Scalable",f[f.kLayer1=32]="kLayer1",f[f.kLayer2=33]="kLayer2",f[f.kLayer3=34]="kLayer3"})(N||(N={})),function(f){f[f.k96000Hz=0]="k96000Hz",f[f.k88200Hz=1]="k88200Hz",f[f.k64000Hz=2]="k64000Hz",f[f.k48000Hz=3]="k48000Hz",f[f.k44100Hz=4]="k44100Hz",f[f.k32000Hz=5]="k32000Hz",f[f.k24000Hz=6]="k24000Hz",f[f.k22050Hz=7]="k22050Hz",f[f.k16000Hz=8]="k16000Hz",f[f.k12000Hz=9]="k12000Hz",f[f.k11025Hz=10]="k11025Hz",f[f.k8000Hz=11]="k8000Hz",f[f.k7350Hz=12]="k7350Hz"}(P||(P={}));var je,Re,ee=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],oe=(je=function(f,c){return(je=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,s){u.__proto__=s}||function(u,s){for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(u[p]=s[p])})(f,c)},function(f,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function u(){this.constructor=f}je(f,c),f.prototype=c===null?Object.create(c):(u.prototype=c.prototype,new u)}),ge=function(){},Ee=function(f){function c(){return f!==null&&f.apply(this,arguments)||this}return oe(c,f),c}(ge),be=function(){function f(c){this.TAG="AACADTSParser",this.data_=c,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&l.a.e(this.TAG,"Could not found ADTS syncword until payload end")}return f.prototype.findNextSyncwordOffset=function(c){for(var u=c,s=this.data_;;){if(u+7>=s.byteLength)return this.eof_flag_=!0,s.byteLength;if((s[u+0]<<8|s[u+1])>>>4===4095)return u;u++}},f.prototype.readNextAACFrame=function(){for(var c=this.data_,u=null;u==null&&!this.eof_flag_;){var s=this.current_syncword_offset_,p=(8&c[s+1])>>>3,S=(6&c[s+1])>>>1,v=1&c[s+1],A=(192&c[s+2])>>>6,I=(60&c[s+2])>>>2,D=(1&c[s+2])<<2|(192&c[s+3])>>>6,U=(3&c[s+3])<<11|c[s+4]<<3|(224&c[s+5])>>>5;if(c[s+6],s+U>this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}var z=v===1?7:9,F=U-z;s+=z;var G=this.findNextSyncwordOffset(s+F);if(this.current_syncword_offset_=G,(p===0||p===1)&&S===0){var K=c.subarray(s,s+F);(u=new ge).audio_object_type=A+1,u.sampling_freq_index=I,u.sampling_frequency=ee[I],u.channel_config=D,u.data=K}}return u},f.prototype.hasIncompleteData=function(){return this.has_last_incomplete_data},f.prototype.getIncompleteData=function(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null},f}(),Me=function(){function f(c){this.TAG="AACLOASParser",this.data_=c,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&l.a.e(this.TAG,"Could not found LOAS syncword until payload end")}return f.prototype.findNextSyncwordOffset=function(c){for(var u=c,s=this.data_;;){if(u+1>=s.byteLength)return this.eof_flag_=!0,s.byteLength;if((s[u+0]<<3|s[u+1]>>>5)===695)return u;u++}},f.prototype.getLATMValue=function(c){for(var u=c.readBits(2),s=0,p=0;p<=u;p++)s<<=8,s|=c.readByte();return s},f.prototype.readNextAACFrame=function(c){for(var u=this.data_,s=null;s==null&&!this.eof_flag_;){var p=this.current_syncword_offset_,S=(31&u[p+1])<<8|u[p+2];if(p+3+S>=this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}var v=new O(u.subarray(p+3,p+3+S)),A=null;if(v.readBool()){if(c==null){l.a.w(this.TAG,"StreamMuxConfig Missing"),this.current_syncword_offset_=this.findNextSyncwordOffset(p+3+S),v.destroy();continue}A=c}else{var I=v.readBool();if(I&&v.readBool()){l.a.e(this.TAG,"audioMuxVersionA is Not Supported"),v.destroy();break}if(I&&this.getLATMValue(v),!v.readBool()){l.a.e(this.TAG,"allStreamsSameTimeFraming zero is Not Supported"),v.destroy();break}if(v.readBits(6)!==0){l.a.e(this.TAG,"more than 2 numSubFrames Not Supported"),v.destroy();break}if(v.readBits(4)!==0){l.a.e(this.TAG,"more than 2 numProgram Not Supported"),v.destroy();break}if(v.readBits(3)!==0){l.a.e(this.TAG,"more than 2 numLayer Not Supported"),v.destroy();break}var D=I?this.getLATMValue(v):0,U=v.readBits(5);D-=5;var z=v.readBits(4);D-=4;var F=v.readBits(4);D-=4,v.readBits(3),(D-=3)>0&&v.readBits(D);var G=v.readBits(3);if(G!==0){l.a.e(this.TAG,"frameLengthType = ".concat(G,". Only frameLengthType = 0 Supported")),v.destroy();break}v.readByte();var K=v.readBool();if(K)if(I)this.getLATMValue(v);else{for(var re=0;;){re<<=8;var Z=v.readBool();if(re+=v.readByte(),!Z)break}console.log(re)}v.readBool()&&v.readByte(),(A=new Ee).audio_object_type=U,A.sampling_freq_index=z,A.sampling_frequency=ee[A.sampling_freq_index],A.channel_config=F,A.other_data_present=K}for(var ce=0;;){var le=v.readByte();if(ce+=le,le!==255)break}for(var se=new Uint8Array(ce),ve=0;ve<ce;ve++)se[ve]=v.readByte();(s=new Ee).audio_object_type=A.audio_object_type,s.sampling_freq_index=A.sampling_freq_index,s.sampling_frequency=ee[A.sampling_freq_index],s.channel_config=A.channel_config,s.other_data_present=A.other_data_present,s.data=se,this.current_syncword_offset_=this.findNextSyncwordOffset(p+3+S)}return s},f.prototype.hasIncompleteData=function(){return this.has_last_incomplete_data},f.prototype.getIncompleteData=function(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null},f}(),ft=function(f){var c=null,u=f.audio_object_type,s=f.audio_object_type,p=f.sampling_freq_index,S=f.channel_config,v=0,A=navigator.userAgent.toLowerCase();A.indexOf("firefox")!==-1?p>=6?(s=5,c=new Array(4),v=p-3):(s=2,c=new Array(2),v=p):A.indexOf("android")!==-1?(s=2,c=new Array(2),v=p):(s=5,v=p,c=new Array(4),p>=6?v=p-3:S===1&&(s=2,c=new Array(2),v=p)),c[0]=s<<3,c[0]|=(15&p)>>>1,c[1]=(15&p)<<7,c[1]|=(15&S)<<3,s===5&&(c[1]|=(15&v)>>>1,c[2]=(1&v)<<7,c[2]|=8,c[3]=0),this.config=c,this.sampling_rate=ee[p],this.channel_count=S,this.codec_mimetype="mp4a.40."+s,this.original_codec_mimetype="mp4a.40."+u},yt=function(){},Rn=function(){};(function(f){f[f.kSpliceNull=0]="kSpliceNull",f[f.kSpliceSchedule=4]="kSpliceSchedule",f[f.kSpliceInsert=5]="kSpliceInsert",f[f.kTimeSignal=6]="kTimeSignal",f[f.kBandwidthReservation=7]="kBandwidthReservation",f[f.kPrivateCommand=255]="kPrivateCommand"})(Re||(Re={}));var Ye,ya=function(f){var c=f.readBool();return c?(f.readBits(6),{time_specified_flag:c,pts_time:4*f.readBits(31)+f.readBits(2)}):(f.readBits(7),{time_specified_flag:c})},Mo=function(f){var c=f.readBool();return f.readBits(6),{auto_return:c,duration:4*f.readBits(31)+f.readBits(2)}},Ll=function(f,c){var u=c.readBits(8);return f?{component_tag:u}:{component_tag:u,splice_time:ya(c)}},Pl=function(f){return{component_tag:f.readBits(8),utc_splice_time:f.readBits(32)}},Dy=function(f){var c=f.readBits(32),u=f.readBool();f.readBits(7);var s={splice_event_id:c,splice_event_cancel_indicator:u};if(u)return s;if(s.out_of_network_indicator=f.readBool(),s.program_splice_flag=f.readBool(),s.duration_flag=f.readBool(),f.readBits(5),s.program_splice_flag)s.utc_splice_time=f.readBits(32);else{s.component_count=f.readBits(8),s.components=[];for(var p=0;p<s.component_count;p++)s.components.push(Pl(f))}return s.duration_flag&&(s.break_duration=Mo(f)),s.unique_program_id=f.readBits(16),s.avail_num=f.readBits(8),s.avails_expected=f.readBits(8),s},Iy=function(f,c,u,s){return{descriptor_tag:f,descriptor_length:c,identifier:u,provider_avail_id:s.readBits(32)}},Ny=function(f,c,u,s){var p=s.readBits(8),S=s.readBits(3);s.readBits(5);for(var v="",A=0;A<S;A++)v+=String.fromCharCode(s.readBits(8));return{descriptor_tag:f,descriptor_length:c,identifier:u,preroll:p,dtmf_count:S,DTMF_char:v}},By=function(f){var c=f.readBits(8);return f.readBits(7),{component_tag:c,pts_offset:4*f.readBits(31)+f.readBits(2)}},Uy=function(f,c,u,s){var p=s.readBits(32),S=s.readBool();s.readBits(7);var v={descriptor_tag:f,descriptor_length:c,identifier:u,segmentation_event_id:p,segmentation_event_cancel_indicator:S};if(S)return v;if(v.program_segmentation_flag=s.readBool(),v.segmentation_duration_flag=s.readBool(),v.delivery_not_restricted_flag=s.readBool(),v.delivery_not_restricted_flag?s.readBits(5):(v.web_delivery_allowed_flag=s.readBool(),v.no_regional_blackout_flag=s.readBool(),v.archive_allowed_flag=s.readBool(),v.device_restrictions=s.readBits(2)),!v.program_segmentation_flag){v.component_count=s.readBits(8),v.components=[];for(var A=0;A<v.component_count;A++)v.components.push(By(s))}v.segmentation_duration_flag&&(v.segmentation_duration=s.readBits(40)),v.segmentation_upid_type=s.readBits(8),v.segmentation_upid_length=s.readBits(8);var I=new Uint8Array(v.segmentation_upid_length);for(A=0;A<v.segmentation_upid_length;A++)I[A]=s.readBits(8);return v.segmentation_upid=I.buffer,v.segmentation_type_id=s.readBits(8),v.segment_num=s.readBits(8),v.segments_expected=s.readBits(8),v.segmentation_type_id!==52&&v.segmentation_type_id!==54&&v.segmentation_type_id!==56&&v.segmentation_type_id!==58||(v.sub_segment_num=s.readBits(8),v.sub_segments_expected=s.readBits(8)),v},jy=function(f,c,u,s){return{descriptor_tag:f,descriptor_length:c,identifier:u,TAI_seconds:s.readBits(48),TAI_ns:s.readBits(32),UTC_offset:s.readBits(16)}},Fy=function(f){return{component_tag:f.readBits(8),ISO_code:String.fromCharCode(f.readBits(8),f.readBits(8),f.readBits(8)),Bit_Stream_Mode:f.readBits(3),Num_Channels:f.readBits(4),Full_Srvc_Audio:f.readBool()}},Vy=function(f,c,u,s){for(var p=s.readBits(4),S=[],v=0;v<p;v++)S.push(Fy(s));return{descriptor_tag:f,descriptor_length:c,identifier:u,audio_count:p,components:S}},zy=function(f){var c=new O(f),u=c.readBits(8),s=c.readBool(),p=c.readBool();c.readBits(2);var S=c.readBits(12),v=c.readBits(8),A=c.readBool(),I=c.readBits(6),D=4*c.readBits(31)+c.readBits(2),U=c.readBits(8),z=c.readBits(12),F=c.readBits(12),G=c.readBits(8),K=null;G===Re.kSpliceNull?K={}:G===Re.kSpliceSchedule?K=function(Ae){for(var Ne=Ae.readBits(8),ze=[],ke=0;ke<Ne;ke++)ze.push(Dy(Ae));return{splice_count:Ne,events:ze}}(c):G===Re.kSpliceInsert?K=function(Ae){var Ne=Ae.readBits(32),ze=Ae.readBool();Ae.readBits(7);var ke={splice_event_id:Ne,splice_event_cancel_indicator:ze};if(ze)return ke;if(ke.out_of_network_indicator=Ae.readBool(),ke.program_splice_flag=Ae.readBool(),ke.duration_flag=Ae.readBool(),ke.splice_immediate_flag=Ae.readBool(),Ae.readBits(4),ke.program_splice_flag&&!ke.splice_immediate_flag&&(ke.splice_time=ya(Ae)),!ke.program_splice_flag){ke.component_count=Ae.readBits(8),ke.components=[];for(var Le=0;Le<ke.component_count;Le++)ke.components.push(Ll(ke.splice_immediate_flag,Ae))}return ke.duration_flag&&(ke.break_duration=Mo(Ae)),ke.unique_program_id=Ae.readBits(16),ke.avail_num=Ae.readBits(8),ke.avails_expected=Ae.readBits(8),ke}(c):G===Re.kTimeSignal?K=function(Ae){return{splice_time:ya(Ae)}}(c):G===Re.kBandwidthReservation?K={}:G===Re.kPrivateCommand?K=function(Ae,Ne){for(var ze=String.fromCharCode(Ne.readBits(8),Ne.readBits(8),Ne.readBits(8),Ne.readBits(8)),ke=new Uint8Array(Ae-4),Le=0;Le<Ae-4;Le++)ke[Le]=Ne.readBits(8);return{identifier:ze,private_data:ke.buffer}}(F,c):c.readBits(8*F);for(var re=[],Z=c.readBits(16),ce=0;ce<Z;){var le=c.readBits(8),se=c.readBits(8),ve=String.fromCharCode(c.readBits(8),c.readBits(8),c.readBits(8),c.readBits(8));le===0?re.push(Iy(le,se,ve,c)):le===1?re.push(Ny(le,se,ve,c)):le===2?re.push(Uy(le,se,ve,c)):le===3?re.push(jy(le,se,ve,c)):le===4?re.push(Vy(le,se,ve,c)):c.readBits(8*(se-4)),ce+=2+se}var Ce={table_id:u,section_syntax_indicator:s,private_indicator:p,section_length:S,protocol_version:v,encrypted_packet:A,encryption_algorithm:I,pts_adjustment:D,cw_index:U,tier:z,splice_command_length:F,splice_command_type:G,splice_command:K,descriptor_loop_length:Z,splice_descriptors:re,E_CRC32:A?c.readBits(32):void 0,CRC32:c.readBits(32)};if(G===Re.kSpliceInsert){var ue=K;if(ue.splice_event_cancel_indicator)return{splice_command_type:G,detail:Ce,data:f};if(ue.program_splice_flag&&!ue.splice_immediate_flag){var ye=ue.duration_flag?ue.break_duration.auto_return:void 0,Te=ue.duration_flag?ue.break_duration.duration/90:void 0;return ue.splice_time.time_specified_flag?{splice_command_type:G,pts:(D+ue.splice_time.pts_time)%Math.pow(2,33),auto_return:ye,duraiton:Te,detail:Ce,data:f}:{splice_command_type:G,auto_return:ye,duraiton:Te,detail:Ce,data:f}}return{splice_command_type:G,auto_return:ye=ue.duration_flag?ue.break_duration.auto_return:void 0,duraiton:Te=ue.duration_flag?ue.break_duration.duration/90:void 0,detail:Ce,data:f}}if(G===Re.kTimeSignal){var Se=K;return Se.splice_time.time_specified_flag?{splice_command_type:G,pts:(D+Se.splice_time.pts_time)%Math.pow(2,33),detail:Ce,data:f}:{splice_command_type:G,detail:Ce,data:f}}return{splice_command_type:G,detail:Ce,data:f}};(function(f){f[f.kSliceIDR_W_RADL=19]="kSliceIDR_W_RADL",f[f.kSliceIDR_N_LP=20]="kSliceIDR_N_LP",f[f.kSliceCRA_NUT=21]="kSliceCRA_NUT",f[f.kSliceVPS=32]="kSliceVPS",f[f.kSliceSPS=33]="kSliceSPS",f[f.kSlicePPS=34]="kSlicePPS",f[f.kSliceAUD=35]="kSliceAUD"})(Ye||(Ye={}));var $y=function(){},Gy=function(f){var c=f.data.byteLength;this.type=f.type,this.data=new Uint8Array(4+c),new DataView(this.data.buffer).setUint32(0,c),this.data.set(f.data,4)},Hy=function(){function f(c){this.TAG="H265AnnexBParser",this.current_startcode_offset_=0,this.eof_flag_=!1,this.data_=c,this.current_startcode_offset_=this.findNextStartCodeOffset(0),this.eof_flag_&&l.a.e(this.TAG,"Could not find H265 startcode until payload end!")}return f.prototype.findNextStartCodeOffset=function(c){for(var u=c,s=this.data_;;){if(u+3>=s.byteLength)return this.eof_flag_=!0,s.byteLength;var p=s[u+0]<<24|s[u+1]<<16|s[u+2]<<8|s[u+3],S=s[u+0]<<16|s[u+1]<<8|s[u+2];if(p===1||S===1)return u;u++}},f.prototype.readNextNaluPayload=function(){for(var c=this.data_,u=null;u==null&&!this.eof_flag_;){var s=this.current_startcode_offset_,p=c[s+=(c[s]<<24|c[s+1]<<16|c[s+2]<<8|c[s+3])===1?4:3]>>1&63,S=(128&c[s])>>>7,v=this.findNextStartCodeOffset(s);if(this.current_startcode_offset_=v,S===0){var A=c.subarray(s,v);(u=new $y).type=p,u.data=A}}return u},f}(),Wy=function(){function f(c,u,s,p){var S=23+(5+c.byteLength)+(5+u.byteLength)+(5+s.byteLength),v=this.data=new Uint8Array(S);v[0]=1,v[1]=(3&p.general_profile_space)<<6|(p.general_tier_flag?1:0)<<5|31&p.general_profile_idc,v[2]=p.general_profile_compatibility_flags_1,v[3]=p.general_profile_compatibility_flags_2,v[4]=p.general_profile_compatibility_flags_3,v[5]=p.general_profile_compatibility_flags_4,v[6]=p.general_constraint_indicator_flags_1,v[7]=p.general_constraint_indicator_flags_2,v[8]=p.general_constraint_indicator_flags_3,v[9]=p.general_constraint_indicator_flags_4,v[10]=p.general_constraint_indicator_flags_5,v[11]=p.general_constraint_indicator_flags_6,v[12]=p.general_level_idc,v[13]=240|(3840&p.min_spatial_segmentation_idc)>>8,v[14]=255&p.min_spatial_segmentation_idc,v[15]=252|3&p.parallelismType,v[16]=252|3&p.chroma_format_idc,v[17]=248|7&p.bit_depth_luma_minus8,v[18]=248|7&p.bit_depth_chroma_minus8,v[19]=0,v[20]=0,v[21]=(3&p.constant_frame_rate)<<6|(7&p.num_temporal_layers)<<3|(p.temporal_id_nested?1:0)<<2|3,v[22]=3,v[23]=128|Ye.kSliceVPS,v[24]=0,v[25]=1,v[26]=(65280&c.byteLength)>>8,v[27]=(255&c.byteLength)>>0,v.set(c,28),v[23+(5+c.byteLength)+0]=128|Ye.kSliceSPS,v[23+(5+c.byteLength)+1]=0,v[23+(5+c.byteLength)+2]=1,v[23+(5+c.byteLength)+3]=(65280&u.byteLength)>>8,v[23+(5+c.byteLength)+4]=(255&u.byteLength)>>0,v.set(u,23+(5+c.byteLength)+5),v[23+(5+c.byteLength+5+u.byteLength)+0]=128|Ye.kSlicePPS,v[23+(5+c.byteLength+5+u.byteLength)+1]=0,v[23+(5+c.byteLength+5+u.byteLength)+2]=1,v[23+(5+c.byteLength+5+u.byteLength)+3]=(65280&s.byteLength)>>8,v[23+(5+c.byteLength+5+u.byteLength)+4]=(255&s.byteLength)>>0,v.set(s,23+(5+c.byteLength+5+u.byteLength)+5)}return f.prototype.getData=function(){return this.data},f}(),qy=function(){},Ky=function(){},Qy=function(){},Yy=[[64,64,80,80,96,96,112,112,128,128,160,160,192,192,224,224,256,256,320,320,384,384,448,448,512,512,640,640,768,768,896,896,1024,1024,1152,1152,1280,1280],[69,70,87,88,104,105,121,122,139,140,174,175,208,209,243,244,278,279,348,349,417,418,487,488,557,558,696,697,835,836,975,976,1114,1115,1253,1254,1393,1394],[96,96,120,120,144,144,168,168,192,192,240,240,288,288,336,336,384,384,480,480,576,576,672,672,768,768,960,960,1152,1152,1344,1344,1536,1536,1728,1728,1920,1920]],Xy=function(){function f(c){this.TAG="AC3Parser",this.data_=c,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&l.a.e(this.TAG,"Could not found AC3 syncword until payload end")}return f.prototype.findNextSyncwordOffset=function(c){for(var u=c,s=this.data_;;){if(u+7>=s.byteLength)return this.eof_flag_=!0,s.byteLength;if((s[u+0]<<8|s[u+1]<<0)===2935)return u;u++}},f.prototype.readNextAC3Frame=function(){for(var c=this.data_,u=null;u==null&&!this.eof_flag_;){var s=this.current_syncword_offset_,p=c[s+4]>>6,S=[48e3,44200,33e3][p],v=63&c[s+4],A=2*Yy[p][v];if(isNaN(A)||s+A>this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}var I=this.findNextSyncwordOffset(s+A);this.current_syncword_offset_=I;var D=c[s+5]>>3,U=7&c[s+5],z=c[s+6]>>5,F=0;1&z&&z!==1&&(F+=2),4&z&&(F+=2),z===2&&(F+=2);var G=(c[s+6]<<8|c[s+7]<<0)>>12-F&1,K=[2,1,2,3,3,4,4,5][z]+G;(u=new Qy).sampling_frequency=S,u.channel_count=K,u.channel_mode=z,u.bit_stream_identification=D,u.low_frequency_effects_channel_on=G,u.bit_stream_mode=U,u.frame_size_code=v,u.data=c.subarray(s,s+A)}return u},f.prototype.hasIncompleteData=function(){return this.has_last_incomplete_data},f.prototype.getIncompleteData=function(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null},f}(),Zy=function(f){var c;c=[f.sampling_rate_code<<6|f.bit_stream_identification<<1|f.bit_stream_mode>>2,(3&f.bit_stream_mode)<<6|f.channel_mode<<3|f.low_frequency_effects_channel_on<<2|f.frame_size_code>>4,f.frame_size_code<<4&224],this.config=c,this.sampling_rate=f.sampling_frequency,this.bit_stream_identification=f.bit_stream_identification,this.bit_stream_mode=f.bit_stream_mode,this.low_frequency_effects_channel_on=f.low_frequency_effects_channel_on,this.channel_count=f.channel_count,this.channel_mode=f.channel_mode,this.codec_mimetype="ac-3",this.original_codec_mimetype="ac-3"},Jy=function(){},ev=function(){function f(c){this.TAG="EAC3Parser",this.data_=c,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&l.a.e(this.TAG,"Could not found AC3 syncword until payload end")}return f.prototype.findNextSyncwordOffset=function(c){for(var u=c,s=this.data_;;){if(u+7>=s.byteLength)return this.eof_flag_=!0,s.byteLength;if((s[u+0]<<8|s[u+1]<<0)===2935)return u;u++}},f.prototype.readNextEAC3Frame=function(){for(var c=this.data_,u=null;u==null&&!this.eof_flag_;){var s=this.current_syncword_offset_,p=new O(c.subarray(s+2)),S=(p.readBits(2),p.readBits(3),p.readBits(11)+1<<1),v=p.readBits(2),A=null,I=null;v===3?(A=[24e3,22060,16e3][v=p.readBits(2)],I=3):(A=[48e3,44100,32e3][v],I=p.readBits(2));var D=p.readBits(3),U=p.readBits(1),z=p.readBits(5);if(s+S>this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}var F=this.findNextSyncwordOffset(s+S);this.current_syncword_offset_=F;var G=[2,1,2,3,3,4,4,5][D]+U;p.destroy(),(u=new Jy).sampling_frequency=A,u.channel_count=G,u.channel_mode=D,u.bit_stream_identification=z,u.low_frequency_effects_channel_on=U,u.frame_size=S,u.num_blks=[1,2,3,6][I],u.data=c.subarray(s,s+S)}return u},f.prototype.hasIncompleteData=function(){return this.has_last_incomplete_data},f.prototype.getIncompleteData=function(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null},f}(),tv=function(f){var c,u=Math.floor(f.frame_size*f.sampling_frequency/(16*f.num_blks));c=[255&u,248&u,f.sampling_rate_code<<6|f.bit_stream_identification<<1|0,0|f.channel_mode<<1|f.low_frequency_effects_channel_on<<0,0],this.config=c,this.sampling_rate=f.sampling_frequency,this.bit_stream_identification=f.bit_stream_identification,this.num_blks=f.num_blks,this.low_frequency_effects_channel_on=f.low_frequency_effects_channel_on,this.channel_count=f.channel_count,this.channel_mode=f.channel_mode,this.codec_mimetype="ec-3",this.original_codec_mimetype="ec-3"},nv=function(){},rv=function(){function f(c){this.TAG="AV1OBUInMpegTsParser",this.current_startcode_offset_=0,this.eof_flag_=!1,this.data_=c,this.current_startcode_offset_=this.findNextStartCodeOffset(0),this.eof_flag_&&l.a.e(this.TAG,"Could not find AV1 startcode until payload end!")}return f._ebsp2rbsp=function(c){for(var u=c,s=u.byteLength,p=new Uint8Array(s),S=0,v=0;v<s;v++)v>=2&&u[v]===3&&u[v-1]===0&&u[v-2]===0||(p[S]=u[v],S++);return new Uint8Array(p.buffer,0,S)},f.prototype.findNextStartCodeOffset=function(c){for(var u=c,s=this.data_;;){if(u+2>=s.byteLength)return this.eof_flag_=!0,s.byteLength;if((s[u+0]<<16|s[u+1]<<8|s[u+2])===1)return u;u++}},f.prototype.readNextOBUPayload=function(){for(var c=this.data_,u=null;u==null&&!this.eof_flag_;){var s=this.current_startcode_offset_+3,p=this.findNextStartCodeOffset(s);this.current_startcode_offset_=p,u=f._ebsp2rbsp(c.subarray(s,p))}return u},f}(),iv=function(){var f=function(c,u){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,p){s.__proto__=p}||function(s,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(s[S]=p[S])})(c,u)};return function(c,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function s(){this.constructor=c}f(c,u),c.prototype=u===null?Object.create(u):(s.prototype=u.prototype,new s)}}(),Ur=function(){return(Ur=Object.assign||function(f){for(var c,u=1,s=arguments.length;u<s;u++)for(var p in c=arguments[u])Object.prototype.hasOwnProperty.call(c,p)&&(f[p]=c[p]);return f}).apply(this,arguments)},gf=function(f){function c(u,s){var p=f.call(this)||this;return p.TAG="TSDemuxer",p.first_parse_=!0,p.media_info_=new h.a,p.timescale_=90,p.duration_=0,p.current_pmt_pid_=-1,p.program_pmt_map_={},p.pes_slice_queues_={},p.section_slice_queues_={},p.video_metadata_={vps:void 0,sps:void 0,pps:void 0,av1c:void 0,details:void 0},p.audio_metadata_={codec:void 0,audio_object_type:void 0,sampling_freq_index:void 0,sampling_frequency:void 0,channel_config:void 0},p.last_pcr_base_=NaN,p.timestamp_offset_=0,p.audio_last_sample_pts_=void 0,p.aac_last_incomplete_data_=null,p.has_video_=!1,p.has_audio_=!1,p.video_init_segment_dispatched_=!1,p.audio_init_segment_dispatched_=!1,p.video_metadata_changed_=!1,p.audio_metadata_changed_=!1,p.loas_previous_frame=null,p.video_track_={type:"video",id:1,sequenceNumber:0,samples:[],length:0},p.audio_track_={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},p.ts_packet_size_=u.ts_packet_size,p.sync_offset_=u.sync_offset,p.config_=s,p}return iv(c,f),c.prototype.destroy=function(){this.media_info_=null,this.pes_slice_queues_=null,this.section_slice_queues_=null,this.video_metadata_=null,this.audio_metadata_=null,this.aac_last_incomplete_data_=null,this.video_track_=null,this.audio_track_=null,f.prototype.destroy.call(this)},c.probe=function(u){var s=new Uint8Array(u),p=-1,S=188;if(s.byteLength<=3*S)return{needMoreData:!0};for(;p===-1;){for(var v=Math.min(1e3,s.byteLength-3*S),A=0;A<v;){if(s[A]===71&&s[A+S]===71&&s[A+2*S]===71){p=A;break}A++}if(p===-1)if(S===188)S=192;else{if(S!==192)break;S=204}}return p===-1?{match:!1}:(S===192&&p>=4?(l.a.v("TSDemuxer","ts_packet_size = 192, m2ts mode"),p-=4):S===204&&l.a.v("TSDemuxer","ts_packet_size = 204, RS encoded MPEG2-TS stream"),{match:!0,consumed:0,ts_packet_size:S,sync_offset:p})},c.prototype.bindDataSource=function(u){return u.onDataArrival=this.parseChunks.bind(this),this},c.prototype.resetMediaInfo=function(){this.media_info_=new h.a},c.prototype.parseChunks=function(u,s){if(!(this.onError&&this.onMediaInfo&&this.onTrackMetadata&&this.onDataAvailable))throw new m.a("onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var p=0;for(this.first_parse_&&(this.first_parse_=!1,p=this.sync_offset_);p+this.ts_packet_size_<=u.byteLength;){var S=s+p;this.ts_packet_size_===192&&(p+=4);var v=new Uint8Array(u,p,188),A=v[0];if(A!==71){l.a.e(this.TAG,"sync_byte = ".concat(A,", not 0x47"));break}var I=(64&v[1])>>>6,D=(v[1],(31&v[1])<<8|v[2]),U=(48&v[3])>>>4,z=15&v[3],F=!(!this.pmt_||this.pmt_.pcr_pid!==D),G={},K=4;if(U==2||U==3){var re=v[4];if(re>0&&(F||U==3)&&(G.discontinuity_indicator=(128&v[5])>>>7,G.random_access_indicator=(64&v[5])>>>6,G.elementary_stream_priority_indicator=(32&v[5])>>>5,(16&v[5])>>>4)){var Z=300*this.getPcrBase(v)+((1&v[10])<<8|v[11]);this.last_pcr_=Z}if(U==2||5+re===188){p+=188,this.ts_packet_size_===204&&(p+=16);continue}K=5+re}if(U==1||U==3){if(D===0||D===this.current_pmt_pid_||this.pmt_!=null&&this.pmt_.pid_stream_type[D]===k.kSCTE35){var ce=188-K;this.handleSectionSlice(u,p+K,ce,{pid:D,file_position:S,payload_unit_start_indicator:I,continuity_conunter:z,random_access_indicator:G.random_access_indicator})}else if(this.pmt_!=null&&this.pmt_.pid_stream_type[D]!=null){ce=188-K;var le=this.pmt_.pid_stream_type[D];D!==this.pmt_.common_pids.h264&&D!==this.pmt_.common_pids.h265&&D!==this.pmt_.common_pids.av1&&D!==this.pmt_.common_pids.adts_aac&&D!==this.pmt_.common_pids.loas_aac&&D!==this.pmt_.common_pids.ac3&&D!==this.pmt_.common_pids.eac3&&D!==this.pmt_.common_pids.opus&&D!==this.pmt_.common_pids.mp3&&this.pmt_.pes_private_data_pids[D]!==!0&&this.pmt_.timed_id3_pids[D]!==!0&&this.pmt_.synchronous_klv_pids[D]!==!0&&this.pmt_.asynchronous_klv_pids[D]!==!0||this.handlePESSlice(u,p+K,ce,{pid:D,stream_type:le,file_position:S,payload_unit_start_indicator:I,continuity_conunter:z,random_access_indicator:G.random_access_indicator})}}p+=188,this.ts_packet_size_===204&&(p+=16)}return this.dispatchAudioVideoMediaSegment(),p},c.prototype.handleSectionSlice=function(u,s,p,S){var v=new Uint8Array(u,s,p),A=this.section_slice_queues_[S.pid];if(S.payload_unit_start_indicator){var I=v[0];if(A!=null&&A.total_length!==0){var D=new Uint8Array(u,s+1,Math.min(p,I));A.slices.push(D),A.total_length+=D.byteLength,A.total_length===A.expected_length?this.emitSectionSlices(A,S):this.clearSlices(A,S)}for(var U=1+I;U<v.byteLength&&v[U+0]!==255;){var z=(15&v[U+1])<<8|v[U+2];this.section_slice_queues_[S.pid]=new J,(A=this.section_slice_queues_[S.pid]).expected_length=z+3,A.file_position=S.file_position,A.random_access_indicator=S.random_access_indicator,D=new Uint8Array(u,s+U,Math.min(p-U,A.expected_length-A.total_length)),A.slices.push(D),A.total_length+=D.byteLength,A.total_length===A.expected_length?this.emitSectionSlices(A,S):A.total_length>=A.expected_length&&this.clearSlices(A,S),U+=D.byteLength}}else A!=null&&A.total_length!==0&&(D=new Uint8Array(u,s,Math.min(p,A.expected_length-A.total_length)),A.slices.push(D),A.total_length+=D.byteLength,A.total_length===A.expected_length?this.emitSectionSlices(A,S):A.total_length>=A.expected_length&&this.clearSlices(A,S))},c.prototype.handlePESSlice=function(u,s,p,S){var v=new Uint8Array(u,s,p),A=v[0]<<16|v[1]<<8|v[2],I=(v[3],v[4]<<8|v[5]);if(S.payload_unit_start_indicator){if(A!==1)return void l.a.e(this.TAG,"handlePESSlice: packet_start_code_prefix should be 1 but with value ".concat(A));var D=this.pes_slice_queues_[S.pid];D&&(D.expected_length===0||D.expected_length===D.total_length?this.emitPESSlices(D,S):this.clearSlices(D,S)),this.pes_slice_queues_[S.pid]=new J,this.pes_slice_queues_[S.pid].file_position=S.file_position,this.pes_slice_queues_[S.pid].random_access_indicator=S.random_access_indicator}if(this.pes_slice_queues_[S.pid]!=null){var U=this.pes_slice_queues_[S.pid];U.slices.push(v),S.payload_unit_start_indicator&&(U.expected_length=I===0?0:I+6),U.total_length+=v.byteLength,U.expected_length>0&&U.expected_length===U.total_length?this.emitPESSlices(U,S):U.expected_length>0&&U.expected_length<U.total_length&&this.clearSlices(U,S)}},c.prototype.emitSectionSlices=function(u,s){for(var p=new Uint8Array(u.total_length),S=0,v=0;S<u.slices.length;S++){var A=u.slices[S];p.set(A,v),v+=A.byteLength}u.slices=[],u.expected_length=-1,u.total_length=0;var I=new xe;I.pid=s.pid,I.data=p,I.file_position=u.file_position,I.random_access_indicator=u.random_access_indicator,this.parseSection(I)},c.prototype.emitPESSlices=function(u,s){for(var p=new Uint8Array(u.total_length),S=0,v=0;S<u.slices.length;S++){var A=u.slices[S];p.set(A,v),v+=A.byteLength}u.slices=[],u.expected_length=-1,u.total_length=0;var I=new de;I.pid=s.pid,I.data=p,I.stream_type=s.stream_type,I.file_position=u.file_position,I.random_access_indicator=u.random_access_indicator,this.parsePES(I)},c.prototype.clearSlices=function(u,s){u.slices=[],u.expected_length=-1,u.total_length=0},c.prototype.parseSection=function(u){var s=u.data,p=u.pid;p===0?this.parsePAT(s):p===this.current_pmt_pid_?this.parsePMT(s):this.pmt_!=null&&this.pmt_.scte_35_pids[p]&&this.parseSCTE35(s)},c.prototype.parsePES=function(u){var s=u.data,p=s[0]<<16|s[1]<<8|s[2],S=s[3],v=s[4]<<8|s[5];if(p===1)if(S!==188&&S!==190&&S!==191&&S!==240&&S!==241&&S!==255&&S!==242&&S!==248){s[6];var A=(192&s[7])>>>6,I=s[8],D=void 0,U=void 0;A!==2&&A!==3||(D=this.getTimestamp(s,9),U=A===3?this.getTimestamp(s,14):D);var z=9+I,F=void 0;if(v!==0){if(v<3+I)return void l.a.v(this.TAG,"Malformed PES: PES_packet_length < 3 + PES_header_data_length");F=v-3-I}else F=s.byteLength-z;var G=s.subarray(z,z+F);switch(u.stream_type){case k.kMPEG1Audio:case k.kMPEG2Audio:this.parseMP3Payload(G,D);break;case k.kPESPrivateData:this.pmt_.common_pids.av1===u.pid?this.parseAV1Payload(G,D,U,u.file_position,u.random_access_indicator):this.pmt_.common_pids.opus===u.pid?this.parseOpusPayload(G,D):this.pmt_.common_pids.ac3===u.pid?this.parseAC3Payload(G,D):this.pmt_.common_pids.eac3===u.pid?this.parseEAC3Payload(G,D):this.pmt_.asynchronous_klv_pids[u.pid]?this.parseAsynchronousKLVMetadataPayload(G,u.pid,S):this.pmt_.smpte2038_pids[u.pid]?this.parseSMPTE2038MetadataPayload(G,D,U,u.pid,S):this.parsePESPrivateDataPayload(G,D,U,u.pid,S);break;case k.kADTSAAC:this.parseADTSAACPayload(G,D);break;case k.kLOASAAC:this.parseLOASAACPayload(G,D);break;case k.kAC3:this.parseAC3Payload(G,D);break;case k.kEAC3:this.parseEAC3Payload(G,D);break;case k.kMetadata:this.pmt_.timed_id3_pids[u.pid]?this.parseTimedID3MetadataPayload(G,D,U,u.pid,S):this.pmt_.synchronous_klv_pids[u.pid]&&this.parseSynchronousKLVMetadataPayload(G,D,U,u.pid,S);break;case k.kH264:this.parseH264Payload(G,D,U,u.file_position,u.random_access_indicator);break;case k.kH265:this.parseH265Payload(G,D,U,u.file_position,u.random_access_indicator)}}else(S===188||S===191||S===240||S===241||S===255||S===242||S===248)&&u.stream_type===k.kPESPrivateData&&(z=6,F=void 0,F=v!==0?v:s.byteLength-z,G=s.subarray(z,z+F),this.parsePESPrivateDataPayload(G,void 0,void 0,u.pid,S));else l.a.e(this.TAG,"parsePES: packet_start_code_prefix should be 1 but with value ".concat(p))},c.prototype.parsePAT=function(u){var s=u[0];if(s===0){var p=(15&u[1])<<8|u[2],S=(u[3],u[4],(62&u[5])>>>1),v=1&u[5],A=u[6],I=(u[7],null);if(v===1&&A===0)(I=new ie).version_number=S;else if((I=this.pat_)==null)return;for(var D=p-5-4,U=-1,z=-1,F=8;F<8+D;F+=4){var G=u[F]<<8|u[F+1],K=(31&u[F+2])<<8|u[F+3];G===0?I.network_pid=K:(I.program_pmt_pid[G]=K,U===-1&&(U=G),z===-1&&(z=K))}v===1&&A===0&&(this.pat_==null&&l.a.v(this.TAG,"Parsed first PAT: ".concat(JSON.stringify(I))),this.pat_=I,this.current_program_=U,this.current_pmt_pid_=z)}else l.a.e(this.TAG,"parsePAT: table_id ".concat(s," is not corresponded to PAT!"))},c.prototype.parsePMT=function(u){var s=u[0];if(s===2){var p=(15&u[1])<<8|u[2],S=u[3]<<8|u[4],v=(62&u[5])>>>1,A=1&u[5],I=u[6],D=(u[7],null);if(A===1&&I===0)(D=new ne).program_number=S,D.version_number=v,this.program_pmt_map_[S]=D;else if((D=this.program_pmt_map_[S])==null)return;D.pcr_pid=(31&u[8])<<8|u[9];for(var U=(15&u[10])<<8|u[11],z=12+U,F=p-9-U-4,G=z;G<z+F;){var K=u[G],re=(31&u[G+1])<<8|u[G+2],Z=(15&u[G+3])<<8|u[G+4];D.pid_stream_type[re]=K;var ce=D.common_pids.h264||D.common_pids.h265,le=D.common_pids.adts_aac||D.common_pids.loas_aac||D.common_pids.ac3||D.common_pids.eac3||D.common_pids.opus||D.common_pids.mp3;if(K!==k.kH264||ce)if(K!==k.kH265||ce)if(K!==k.kADTSAAC||le)if(K!==k.kLOASAAC||le)if(K!==k.kAC3||le)if(K!==k.kEAC3||le)if(K!==k.kMPEG1Audio&&K!==k.kMPEG2Audio||le)if(K===k.kPESPrivateData){if(D.pes_private_data_pids[re]=!0,Z>0){for(var se=G+5;se<G+5+Z;){var ve=u[se+0],Ce=u[se+1];if(ve===5){var ue=String.fromCharCode.apply(String,Array.from(u.subarray(se+2,se+2+Ce)));ue==="VANC"?D.smpte2038_pids[re]=!0:ue==="AV01"?D.common_pids.av1=re:ue==="Opus"?D.common_pids.opus=re:ue==="KLVA"&&(D.asynchronous_klv_pids[re]=!0)}else if(ve===127){if(re===D.common_pids.opus){var ye=null;if(u[se+2]===128&&(ye=u[se+3]),ye==null){l.a.e(this.TAG,"Not Supported Opus channel count.");continue}var Te={codec:"opus",channel_count:15&ye?15&ye:2,channel_config_code:ye,sample_rate:48e3},Se={codec:"opus",meta:Te};this.audio_init_segment_dispatched_==0?(this.audio_metadata_=Te,this.dispatchAudioInitSegment(Se)):this.detectAudioMetadataChange(Se)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(Se))}}else ve===128&&re===D.common_pids.av1&&(this.video_metadata_.av1c=u.subarray(se+2,se+2+Ce));se+=2+Ce}var Ae=u.subarray(G+5,G+5+Z);this.dispatchPESPrivateDataDescriptor(re,K,Ae)}}else if(K===k.kMetadata){if(Z>0)for(se=G+5;se<G+5+Z;){ve=u[se+0];var Ne=u[se+1];if(ve===38){var ze=u[se+2]<<8|u[se+3]<<0,ke=null;ze===65535&&(ke=String.fromCharCode.apply(String,Array.from(u.subarray(se+4,se+4+4))));var Le=null;if(u[se+4+(ze===65535?4:0)]===255){var Ge=4+(ze===65535?4:0)+1;Le=String.fromCharCode.apply(String,Array.from(u.subarray(se+Ge,se+Ge+4)))}ke==="ID3 "&&Le==="ID3 "?D.timed_id3_pids[re]=!0:Le==="KLVA"&&(D.synchronous_klv_pids[re]=!0)}se+=2+Ne}}else K===k.kSCTE35&&(D.scte_35_pids[re]=!0);else D.common_pids.mp3=re;else D.common_pids.eac3=re;else D.common_pids.ac3=re;else D.common_pids.loas_aac=re;else D.common_pids.adts_aac=re;else D.common_pids.h265=re;else D.common_pids.h264=re;G+=5+Z}S===this.current_program_&&(this.pmt_==null&&l.a.v(this.TAG,"Parsed first PMT: ".concat(JSON.stringify(D))),this.pmt_=D,(D.common_pids.h264||D.common_pids.h265||D.common_pids.av1)&&(this.has_video_=!0),(D.common_pids.adts_aac||D.common_pids.loas_aac||D.common_pids.ac3||D.common_pids.opus||D.common_pids.mp3)&&(this.has_audio_=!0))}else l.a.e(this.TAG,"parsePMT: table_id ".concat(s," is not corresponded to PMT!"))},c.prototype.parseSCTE35=function(u){var s=zy(u);if(s.pts!=null){var p=Math.floor(s.pts/this.timescale_);s.pts=p}else s.nearest_pts=this.getNearestTimestampMilliseconds();this.onSCTE35Metadata&&this.onSCTE35Metadata(s)},c.prototype.parseAV1Payload=function(u,s,p,S,v){for(var A=new rv(u),I=null,D=[],U=0,z=!1,F=null;(I=A.readNextOBUPayload())!=null;){if((F=L.parseOBUs(I,this.video_metadata_.details))&&F.keyframe===!0)if(this.video_init_segment_dispatched_){if(this.detectVideoMetadataChange(null,F)===!0){var G;this.video_metadata_changed_=!0,this.dispatchVideoMediaSegment(),(G=new Uint8Array(new ArrayBuffer(this.video_metadata_.av1c.byteLength+F.sequence_header_data.byteLength))).set(this.video_metadata_.av1c,0),G.set(F.sequence_header_data,this.video_metadata_.av1c.byteLength),F.av1c=G,this.dispatchVideoInitSegment()}}else(G=new Uint8Array(new ArrayBuffer(this.video_metadata_.av1c.byteLength+F.sequence_header_data.byteLength))).set(this.video_metadata_.av1c,0),G.set(F.sequence_header_data,this.video_metadata_.av1c.byteLength),F.av1c=G,this.video_metadata_.details=F,this.dispatchVideoInitSegment();this.video_metadata_.details=F,z||(z=F.keyframe),D.push({data:I}),U+=I.byteLength}var K=Math.floor(s/this.timescale_),re=Math.floor(p/this.timescale_);if(D.length){var Z=this.video_track_,ce={units:D,length:U,isKeyframe:z,dts:re,pts:K,cts:K-re,file_position:S};Z.samples.push(ce),Z.length+=U}},c.prototype.parseH264Payload=function(u,s,p,S,v){for(var A=new he(u),I=null,D=[],U=0,z=!1;(I=A.readNextNaluPayload())!=null;){var F=new X(I);if(F.type===Q.kSliceSPS){var G=b.parseSPS(I.data);this.video_init_segment_dispatched_?this.detectVideoMetadataChange(F,G)===!0&&(l.a.v(this.TAG,"H264: Critical h264 metadata has been changed, attempt to re-generate InitSegment"),this.video_metadata_changed_=!0,this.video_metadata_={vps:void 0,sps:F,pps:void 0,av1c:void 0,details:G}):(this.video_metadata_.sps=F,this.video_metadata_.details=G)}else F.type===Q.kSlicePPS?this.video_init_segment_dispatched_&&!this.video_metadata_changed_||(this.video_metadata_.pps=F,this.video_metadata_.sps&&this.video_metadata_.pps&&(this.video_metadata_changed_&&this.dispatchVideoMediaSegment(),this.dispatchVideoInitSegment())):(F.type===Q.kSliceIDR||F.type===Q.kSliceNonIDR&&v===1)&&(z=!0);this.video_init_segment_dispatched_&&(D.push(F),U+=F.data.byteLength)}var K=Math.floor(s/this.timescale_),re=Math.floor(p/this.timescale_);if(D.length){var Z=this.video_track_,ce={units:D,length:U,isKeyframe:z,dts:re,pts:K,cts:K-re,file_position:S};Z.samples.push(ce),Z.length+=U}},c.prototype.parseH265Payload=function(u,s,p,S,v){for(var A=new Hy(u),I=null,D=[],U=0,z=!1;(I=A.readNextNaluPayload())!=null;){var F=new Gy(I);if(F.type===Ye.kSliceVPS){if(!this.video_init_segment_dispatched_){var G=x.parseVPS(I.data);this.video_metadata_.vps=F,this.video_metadata_.details=Ur(Ur({},this.video_metadata_.details),G)}}else F.type===Ye.kSliceSPS?(G=x.parseSPS(I.data),this.video_init_segment_dispatched_?this.detectVideoMetadataChange(F,G)===!0&&(l.a.v(this.TAG,"H265: Critical h265 metadata has been changed, attempt to re-generate InitSegment"),this.video_metadata_changed_=!0,this.video_metadata_={vps:void 0,sps:F,pps:void 0,av1c:void 0,details:G}):(this.video_metadata_.sps=F,this.video_metadata_.details=Ur(Ur({},this.video_metadata_.details),G))):F.type===Ye.kSlicePPS?(!this.video_init_segment_dispatched_||this.video_metadata_changed_)&&(G=x.parsePPS(I.data),this.video_metadata_.pps=F,this.video_metadata_.details=Ur(Ur({},this.video_metadata_.details),G),this.video_metadata_.vps&&this.video_metadata_.sps&&this.video_metadata_.pps&&(this.video_metadata_changed_&&this.dispatchVideoMediaSegment(),this.dispatchVideoInitSegment())):F.type!==Ye.kSliceIDR_W_RADL&&F.type!==Ye.kSliceIDR_N_LP&&F.type!==Ye.kSliceCRA_NUT||(z=!0);this.video_init_segment_dispatched_&&(D.push(F),U+=F.data.byteLength)}var K=Math.floor(s/this.timescale_),re=Math.floor(p/this.timescale_);if(D.length){var Z=this.video_track_,ce={units:D,length:U,isKeyframe:z,dts:re,pts:K,cts:K-re,file_position:S};Z.samples.push(ce),Z.length+=U}},c.prototype.detectVideoMetadataChange=function(u,s){if(s.codec_mimetype!==this.video_metadata_.details.codec_mimetype)return l.a.v(this.TAG,"Video: Codec mimeType changed from "+"".concat(this.video_metadata_.details.codec_mimetype," to ").concat(s.codec_mimetype)),!0;if(s.codec_size.width!==this.video_metadata_.details.codec_size.width||s.codec_size.height!==this.video_metadata_.details.codec_size.height){var p=this.video_metadata_.details.codec_size,S=s.codec_size;return l.a.v(this.TAG,"Video: Coded Resolution changed from "+"".concat(p.width,"x").concat(p.height," to ").concat(S.width,"x").concat(S.height)),!0}return s.present_size.width!==this.video_metadata_.details.present_size.width&&(l.a.v(this.TAG,"Video: Present resolution width changed from "+"".concat(this.video_metadata_.details.present_size.width," to ").concat(s.present_size.width)),!0)},c.prototype.isInitSegmentDispatched=function(){return this.has_video_&&this.has_audio_?this.video_init_segment_dispatched_&&this.audio_init_segment_dispatched_:this.has_video_&&!this.has_audio_?this.video_init_segment_dispatched_:!(this.has_video_||!this.has_audio_)&&this.audio_init_segment_dispatched_},c.prototype.dispatchVideoInitSegment=function(){var u=this.video_metadata_.details,s={type:"video"};s.id=this.video_track_.id,s.timescale=1e3,s.duration=this.duration_,s.codecWidth=u.codec_size.width,s.codecHeight=u.codec_size.height,s.presentWidth=u.present_size.width,s.presentHeight=u.present_size.height,s.profile=u.profile_string,s.level=u.level_string,s.bitDepth=u.bit_depth,s.chromaFormat=u.chroma_format,s.sarRatio=u.sar_ratio,s.frameRate=u.frame_rate;var p=s.frameRate.fps_den,S=s.frameRate.fps_num;if(s.refSampleDuration=p/S*1e3,s.codec=u.codec_mimetype,this.video_metadata_.av1c)s.av1c=this.video_metadata_.av1c,this.video_init_segment_dispatched_==0&&l.a.v(this.TAG,"Generated first AV1 for mimeType: ".concat(s.codec));else if(this.video_metadata_.vps){var v=this.video_metadata_.vps.data.subarray(4),A=this.video_metadata_.sps.data.subarray(4),I=this.video_metadata_.pps.data.subarray(4),D=new Wy(v,A,I,u);s.hvcc=D.getData(),this.video_init_segment_dispatched_==0&&l.a.v(this.TAG,"Generated first HEVCDecoderConfigurationRecord for mimeType: ".concat(s.codec))}else{A=this.video_metadata_.sps.data.subarray(4),I=this.video_metadata_.pps.data.subarray(4);var U=new me(A,I,u);s.avcc=U.getData(),this.video_init_segment_dispatched_==0&&l.a.v(this.TAG,"Generated first AVCDecoderConfigurationRecord for mimeType: ".concat(s.codec))}this.onTrackMetadata("video",s),this.video_init_segment_dispatched_=!0,this.video_metadata_changed_=!1;var z=this.media_info_;z.hasVideo=!0,z.width=s.codecWidth,z.height=s.codecHeight,z.fps=s.frameRate.fps,z.profile=s.profile,z.level=s.level,z.refFrames=u.ref_frames,z.chromaFormat=u.chroma_format_string,z.sarNum=s.sarRatio.width,z.sarDen=s.sarRatio.height,z.videoCodec=s.codec,z.hasAudio&&z.audioCodec?z.mimeType='video/mp2t; codecs="'.concat(z.videoCodec,",").concat(z.audioCodec,'"'):z.mimeType='video/mp2t; codecs="'.concat(z.videoCodec,'"'),z.isComplete()&&this.onMediaInfo(z)},c.prototype.dispatchVideoMediaSegment=function(){this.isInitSegmentDispatched()&&this.video_track_.length&&this.onDataAvailable(null,this.video_track_)},c.prototype.dispatchAudioMediaSegment=function(){this.isInitSegmentDispatched()&&this.audio_track_.length&&this.onDataAvailable(this.audio_track_,null)},c.prototype.dispatchAudioVideoMediaSegment=function(){this.isInitSegmentDispatched()&&(this.audio_track_.length||this.video_track_.length)&&this.onDataAvailable(this.audio_track_,this.video_track_)},c.prototype.parseADTSAACPayload=function(u,s){if(!this.has_video_||this.video_init_segment_dispatched_){if(this.aac_last_incomplete_data_){var p=new Uint8Array(u.byteLength+this.aac_last_incomplete_data_.byteLength);p.set(this.aac_last_incomplete_data_,0),p.set(u,this.aac_last_incomplete_data_.byteLength),u=p}var S,v;if(s!=null&&(v=s/this.timescale_),this.audio_metadata_.codec==="aac"){if(s==null&&this.audio_last_sample_pts_!=null)S=1024/this.audio_metadata_.sampling_frequency*1e3,v=this.audio_last_sample_pts_+S;else if(s==null)return void l.a.w(this.TAG,"AAC: Unknown pts");if(this.aac_last_incomplete_data_&&this.audio_last_sample_pts_){S=1024/this.audio_metadata_.sampling_frequency*1e3;var A=this.audio_last_sample_pts_+S;Math.abs(A-v)>1&&(l.a.w(this.TAG,"AAC: Detected pts overlapped, "+"expected: ".concat(A,"ms, PES pts: ").concat(v,"ms")),v=A)}}for(var I,D=new be(u),U=null,z=v;(U=D.readNextAACFrame())!=null;){S=1024/U.sampling_frequency*1e3;var F={codec:"aac",data:U};this.audio_init_segment_dispatched_==0?(this.audio_metadata_={codec:"aac",audio_object_type:U.audio_object_type,sampling_freq_index:U.sampling_freq_index,sampling_frequency:U.sampling_frequency,channel_config:U.channel_config},this.dispatchAudioInitSegment(F)):this.detectAudioMetadataChange(F)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(F)),I=z;var G=Math.floor(z),K={unit:U.data,length:U.data.byteLength,pts:G,dts:G};this.audio_track_.samples.push(K),this.audio_track_.length+=U.data.byteLength,z+=S}D.hasIncompleteData()&&(this.aac_last_incomplete_data_=D.getIncompleteData()),I&&(this.audio_last_sample_pts_=I)}},c.prototype.parseLOASAACPayload=function(u,s){var p;if(!this.has_video_||this.video_init_segment_dispatched_){if(this.aac_last_incomplete_data_){var S=new Uint8Array(u.byteLength+this.aac_last_incomplete_data_.byteLength);S.set(this.aac_last_incomplete_data_,0),S.set(u,this.aac_last_incomplete_data_.byteLength),u=S}var v,A;if(s!=null&&(A=s/this.timescale_),this.audio_metadata_.codec==="aac"){if(s==null&&this.audio_last_sample_pts_!=null)v=1024/this.audio_metadata_.sampling_frequency*1e3,A=this.audio_last_sample_pts_+v;else if(s==null)return void l.a.w(this.TAG,"AAC: Unknown pts");if(this.aac_last_incomplete_data_&&this.audio_last_sample_pts_){v=1024/this.audio_metadata_.sampling_frequency*1e3;var I=this.audio_last_sample_pts_+v;Math.abs(I-A)>1&&(l.a.w(this.TAG,"AAC: Detected pts overlapped, "+"expected: ".concat(I,"ms, PES pts: ").concat(A,"ms")),A=I)}}for(var D,U=new Me(u),z=null,F=A;(z=U.readNextAACFrame((p=this.loas_previous_frame)!==null&&p!==void 0?p:void 0))!=null;){this.loas_previous_frame=z,v=1024/z.sampling_frequency*1e3;var G={codec:"aac",data:z};this.audio_init_segment_dispatched_==0?(this.audio_metadata_={codec:"aac",audio_object_type:z.audio_object_type,sampling_freq_index:z.sampling_freq_index,sampling_frequency:z.sampling_frequency,channel_config:z.channel_config},this.dispatchAudioInitSegment(G)):this.detectAudioMetadataChange(G)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(G)),D=F;var K=Math.floor(F),re={unit:z.data,length:z.data.byteLength,pts:K,dts:K};this.audio_track_.samples.push(re),this.audio_track_.length+=z.data.byteLength,F+=v}U.hasIncompleteData()&&(this.aac_last_incomplete_data_=U.getIncompleteData()),D&&(this.audio_last_sample_pts_=D)}},c.prototype.parseAC3Payload=function(u,s){if(!this.has_video_||this.video_init_segment_dispatched_){var p,S;if(s!=null&&(S=s/this.timescale_),this.audio_metadata_.codec==="ac-3"){if(s==null&&this.audio_last_sample_pts_!=null)p=1536/this.audio_metadata_.sampling_frequency*1e3,S=this.audio_last_sample_pts_+p;else if(s==null)return void l.a.w(this.TAG,"AC3: Unknown pts")}for(var v,A=new Xy(u),I=null,D=S;(I=A.readNextAC3Frame())!=null;){p=1536/I.sampling_frequency*1e3;var U={codec:"ac-3",data:I};this.audio_init_segment_dispatched_==0?(this.audio_metadata_={codec:"ac-3",sampling_frequency:I.sampling_frequency,bit_stream_identification:I.bit_stream_identification,bit_stream_mode:I.bit_stream_mode,low_frequency_effects_channel_on:I.low_frequency_effects_channel_on,channel_mode:I.channel_mode},this.dispatchAudioInitSegment(U)):this.detectAudioMetadataChange(U)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(U)),v=D;var z=Math.floor(D),F={unit:I.data,length:I.data.byteLength,pts:z,dts:z};this.audio_track_.samples.push(F),this.audio_track_.length+=I.data.byteLength,D+=p}v&&(this.audio_last_sample_pts_=v)}},c.prototype.parseEAC3Payload=function(u,s){if(!this.has_video_||this.video_init_segment_dispatched_){var p,S;if(s!=null&&(S=s/this.timescale_),this.audio_metadata_.codec==="ec-3"){if(s==null&&this.audio_last_sample_pts_!=null)p=256*this.audio_metadata_.num_blks/this.audio_metadata_.sampling_frequency*1e3,S=this.audio_last_sample_pts_+p;else if(s==null)return void l.a.w(this.TAG,"EAC3: Unknown pts")}for(var v,A=new ev(u),I=null,D=S;(I=A.readNextEAC3Frame())!=null;){p=1536/I.sampling_frequency*1e3;var U={codec:"ec-3",data:I};this.audio_init_segment_dispatched_==0?(this.audio_metadata_={codec:"ec-3",sampling_frequency:I.sampling_frequency,bit_stream_identification:I.bit_stream_identification,low_frequency_effects_channel_on:I.low_frequency_effects_channel_on,num_blks:I.num_blks,channel_mode:I.channel_mode},this.dispatchAudioInitSegment(U)):this.detectAudioMetadataChange(U)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(U)),v=D;var z=Math.floor(D),F={unit:I.data,length:I.data.byteLength,pts:z,dts:z};this.audio_track_.samples.push(F),this.audio_track_.length+=I.data.byteLength,D+=p}v&&(this.audio_last_sample_pts_=v)}},c.prototype.parseOpusPayload=function(u,s){if(!this.has_video_||this.video_init_segment_dispatched_){var p,S;if(s!=null&&(S=s/this.timescale_),this.audio_metadata_.codec==="opus"){if(s==null&&this.audio_last_sample_pts_!=null)p=20,S=this.audio_last_sample_pts_+p;else if(s==null)return void l.a.w(this.TAG,"Opus: Unknown pts")}for(var v,A=S,I=0;I<u.length;){p=20;for(var D=(16&u[I+1])!=0,U=(8&u[I+1])!=0,z=I+2,F=0;u[z]===255;)F+=255,z+=1;F+=u[z],z+=1,z+=D?2:0,z+=U?2:0,v=A;var G=Math.floor(A),K=u.slice(z,z+F),re={unit:K,length:K.byteLength,pts:G,dts:G};this.audio_track_.samples.push(re),this.audio_track_.length+=K.byteLength,A+=p,I=z+F}v&&(this.audio_last_sample_pts_=v)}},c.prototype.parseMP3Payload=function(u,s){if(!this.has_video_||this.video_init_segment_dispatched_){var p=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],S=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],v=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],A=u[1]>>>3&3,I=(6&u[1])>>1,D=(240&u[2])>>>4,U=(12&u[2])>>>2,z=(u[3]>>>6&3)!==3?2:1,F=0,G=34;switch(A){case 0:F=[11025,12e3,8e3,0][U];break;case 2:F=[22050,24e3,16e3,0][U];break;case 3:F=[44100,48e3,32e3,0][U]}switch(I){case 1:G=34,D<v.length&&v[D];break;case 2:G=33,D<S.length&&S[D];break;case 3:G=32,D<p.length&&p[D]}var K=new Ky;K.object_type=G,K.sample_rate=F,K.channel_count=z,K.data=u;var re={codec:"mp3",data:K};this.audio_init_segment_dispatched_==0?(this.audio_metadata_={codec:"mp3",object_type:G,sample_rate:F,channel_count:z},this.dispatchAudioInitSegment(re)):this.detectAudioMetadataChange(re)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(re));var Z={unit:u,length:u.byteLength,pts:s/this.timescale_,dts:s/this.timescale_};this.audio_track_.samples.push(Z),this.audio_track_.length+=u.byteLength}},c.prototype.detectAudioMetadataChange=function(u){if(u.codec!==this.audio_metadata_.codec)return l.a.v(this.TAG,"Audio: Audio Codecs changed from "+"".concat(this.audio_metadata_.codec," to ").concat(u.codec)),!0;if(u.codec==="aac"&&this.audio_metadata_.codec==="aac"){if((s=u.data).audio_object_type!==this.audio_metadata_.audio_object_type)return l.a.v(this.TAG,"AAC: AudioObjectType changed from "+"".concat(this.audio_metadata_.audio_object_type," to ").concat(s.audio_object_type)),!0;if(s.sampling_freq_index!==this.audio_metadata_.sampling_freq_index)return l.a.v(this.TAG,"AAC: SamplingFrequencyIndex changed from "+"".concat(this.audio_metadata_.sampling_freq_index," to ").concat(s.sampling_freq_index)),!0;if(s.channel_config!==this.audio_metadata_.channel_config)return l.a.v(this.TAG,"AAC: Channel configuration changed from "+"".concat(this.audio_metadata_.channel_config," to ").concat(s.channel_config)),!0}else if(u.codec==="ac-3"&&this.audio_metadata_.codec==="ac-3"){var s;if((s=u.data).sampling_frequency!==this.audio_metadata_.sampling_frequency)return l.a.v(this.TAG,"AC3: Sampling Frequency changed from "+"".concat(this.audio_metadata_.sampling_frequency," to ").concat(s.sampling_frequency)),!0;if(s.bit_stream_identification!==this.audio_metadata_.bit_stream_identification)return l.a.v(this.TAG,"AC3: Bit Stream Identification changed from "+"".concat(this.audio_metadata_.bit_stream_identification," to ").concat(s.bit_stream_identification)),!0;if(s.bit_stream_mode!==this.audio_metadata_.bit_stream_mode)return l.a.v(this.TAG,"AC3: BitStream Mode changed from "+"".concat(this.audio_metadata_.bit_stream_mode," to ").concat(s.bit_stream_mode)),!0;if(s.channel_mode!==this.audio_metadata_.channel_mode)return l.a.v(this.TAG,"AC3: Channel Mode changed from "+"".concat(this.audio_metadata_.channel_mode," to ").concat(s.channel_mode)),!0;if(s.low_frequency_effects_channel_on!==this.audio_metadata_.low_frequency_effects_channel_on)return l.a.v(this.TAG,"AC3: Low Frequency Effects Channel On changed from "+"".concat(this.audio_metadata_.low_frequency_effects_channel_on," to ").concat(s.low_frequency_effects_channel_on)),!0}else if(u.codec==="opus"&&this.audio_metadata_.codec==="opus"){if((p=u.meta).sample_rate!==this.audio_metadata_.sample_rate)return l.a.v(this.TAG,"Opus: SamplingFrequencyIndex changed from "+"".concat(this.audio_metadata_.sample_rate," to ").concat(p.sample_rate)),!0;if(p.channel_count!==this.audio_metadata_.channel_count)return l.a.v(this.TAG,"Opus: Channel count changed from "+"".concat(this.audio_metadata_.channel_count," to ").concat(p.channel_count)),!0}else if(u.codec==="mp3"&&this.audio_metadata_.codec==="mp3"){var p;if((p=u.data).object_type!==this.audio_metadata_.object_type)return l.a.v(this.TAG,"MP3: AudioObjectType changed from "+"".concat(this.audio_metadata_.object_type," to ").concat(p.object_type)),!0;if(p.sample_rate!==this.audio_metadata_.sample_rate)return l.a.v(this.TAG,"MP3: SamplingFrequencyIndex changed from "+"".concat(this.audio_metadata_.sample_rate," to ").concat(p.sample_rate)),!0;if(p.channel_count!==this.audio_metadata_.channel_count)return l.a.v(this.TAG,"MP3: Channel count changed from "+"".concat(this.audio_metadata_.channel_count," to ").concat(p.channel_count)),!0}return!1},c.prototype.dispatchAudioInitSegment=function(u){var s={type:"audio"};if(s.id=this.audio_track_.id,s.timescale=1e3,s.duration=this.duration_,this.audio_metadata_.codec==="aac"){var p=u.codec==="aac"?u.data:null,S=new ft(p);s.audioSampleRate=S.sampling_rate,s.channelCount=S.channel_count,s.codec=S.codec_mimetype,s.originalCodec=S.original_codec_mimetype,s.config=S.config,s.refSampleDuration=1024/s.audioSampleRate*s.timescale}else if(this.audio_metadata_.codec==="ac-3"){var v=u.codec==="ac-3"?u.data:null,A=new Zy(v);s.audioSampleRate=A.sampling_rate,s.channelCount=A.channel_count,s.codec=A.codec_mimetype,s.originalCodec=A.original_codec_mimetype,s.config=A.config,s.refSampleDuration=1536/s.audioSampleRate*s.timescale}else if(this.audio_metadata_.codec==="ec-3"){var I=u.codec==="ec-3"?u.data:null,D=new tv(I);s.audioSampleRate=D.sampling_rate,s.channelCount=D.channel_count,s.codec=D.codec_mimetype,s.originalCodec=D.original_codec_mimetype,s.config=D.config,s.refSampleDuration=256*D.num_blks/s.audioSampleRate*s.timescale}else this.audio_metadata_.codec==="opus"?(s.audioSampleRate=this.audio_metadata_.sample_rate,s.channelCount=this.audio_metadata_.channel_count,s.channelConfigCode=this.audio_metadata_.channel_config_code,s.codec="opus",s.originalCodec="opus",s.config=void 0,s.refSampleDuration=20):this.audio_metadata_.codec==="mp3"&&(s.audioSampleRate=this.audio_metadata_.sample_rate,s.channelCount=this.audio_metadata_.channel_count,s.codec="mp3",s.originalCodec="mp3",s.config=void 0);this.audio_init_segment_dispatched_==0&&l.a.v(this.TAG,"Generated first AudioSpecificConfig for mimeType: ".concat(s.codec)),this.onTrackMetadata("audio",s),this.audio_init_segment_dispatched_=!0,this.video_metadata_changed_=!1;var U=this.media_info_;U.hasAudio=!0,U.audioCodec=s.originalCodec,U.audioSampleRate=s.audioSampleRate,U.audioChannelCount=s.channelCount,U.hasVideo&&U.videoCodec?U.mimeType='video/mp2t; codecs="'.concat(U.videoCodec,",").concat(U.audioCodec,'"'):U.mimeType='video/mp2t; codecs="'.concat(U.audioCodec,'"'),U.isComplete()&&this.onMediaInfo(U)},c.prototype.dispatchPESPrivateDataDescriptor=function(u,s,p){var S=new Rn;S.pid=u,S.stream_type=s,S.descriptor=p,this.onPESPrivateDataDescriptor&&this.onPESPrivateDataDescriptor(S)},c.prototype.parsePESPrivateDataPayload=function(u,s,p,S,v){var A=new yt;if(A.pid=S,A.stream_id=v,A.len=u.byteLength,A.data=u,s!=null){var I=Math.floor(s/this.timescale_);A.pts=I}else A.nearest_pts=this.getNearestTimestampMilliseconds();if(p!=null){var D=Math.floor(p/this.timescale_);A.dts=D}this.onPESPrivateData&&this.onPESPrivateData(A)},c.prototype.parseTimedID3MetadataPayload=function(u,s,p,S,v){var A=new yt;if(A.pid=S,A.stream_id=v,A.len=u.byteLength,A.data=u,s!=null){var I=Math.floor(s/this.timescale_);A.pts=I}if(p!=null){var D=Math.floor(p/this.timescale_);A.dts=D}this.onTimedID3Metadata&&this.onTimedID3Metadata(A)},c.prototype.parseSynchronousKLVMetadataPayload=function(u,s,p,S,v){var A=new nv;if(A.pid=S,A.stream_id=v,A.len=u.byteLength,A.data=u,s!=null){var I=Math.floor(s/this.timescale_);A.pts=I}if(p!=null){var D=Math.floor(p/this.timescale_);A.dts=D}A.access_units=function(U){for(var z=[],F=0;F+5<U.byteLength;){var G=U[F+0],K=U[F+1],re=U[F+2],Z=U[F+3]<<8|U[F+4]<<0,ce=U.slice(F+5,F+5+Z);z.push({service_id:G,sequence_number:K,flags:re,data:ce}),F+=5+Z}return z}(u),this.onSynchronousKLVMetadata&&this.onSynchronousKLVMetadata(A)},c.prototype.parseAsynchronousKLVMetadataPayload=function(u,s,p){var S=new yt;S.pid=s,S.stream_id=p,S.len=u.byteLength,S.data=u,this.onAsynchronousKLVMetadata&&this.onAsynchronousKLVMetadata(S)},c.prototype.parseSMPTE2038MetadataPayload=function(u,s,p,S,v){var A=new qy;if(A.pid=S,A.stream_id=v,A.len=u.byteLength,A.data=u,s!=null){var I=Math.floor(s/this.timescale_);A.pts=I}if(A.nearest_pts=this.getNearestTimestampMilliseconds(),p!=null){var D=Math.floor(p/this.timescale_);A.dts=D}A.ancillaries=function(U){for(var z=new O(U),F=0,G=[];F+=6,z.readBits(6)===0;){var K=z.readBool();F+=1;var re=z.readBits(11);F+=11;var Z=z.readBits(12);F+=12;var ce=255&z.readBits(10);F+=10;var le=255&z.readBits(10);F+=10;var se=255&z.readBits(10);F+=10;for(var ve=new Uint8Array(se),Ce=0;Ce<se;Ce++){var ue=255&z.readBits(10);F+=10,ve[Ce]=ue}z.readBits(10),F+=10;var ye="User Defined";ce===65?le===7&&(ye="SCTE-104"):ce===95?le===220?ye="ARIB STD-B37 (1SEG)":le===221?ye="ARIB STD-B37 (ANALOG)":le===222?ye="ARIB STD-B37 (SD)":le===223&&(ye="ARIB STD-B37 (HD)"):ce===97&&(le===1?ye="EIA-708":le===2&&(ye="EIA-608")),G.push({yc_indicator:K,line_number:re,horizontal_offset:Z,did:ce,sdid:le,user_data:ve,description:ye,information:{}}),z.readBits(8-(F-Math.floor(F/8))%8),F+=(8-(F-Math.floor(F/8)))%8}return z.destroy(),z=null,G}(u),this.onSMPTE2038Metadata&&this.onSMPTE2038Metadata(A)},c.prototype.getNearestTimestampMilliseconds=function(){return this.audio_last_sample_pts_!=null?Math.floor(this.audio_last_sample_pts_):this.last_pcr_!=null?Math.floor(this.last_pcr_/300/this.timescale_):void 0},c.prototype.getPcrBase=function(u){var s=33554432*u[6]+131072*u[7]+512*u[8]+2*u[9]+(128&u[10])/128+this.timestamp_offset_;return s+4294967296<this.last_pcr_base_&&(s+=8589934592,this.timestamp_offset_+=8589934592),this.last_pcr_base_=s,s},c.prototype.getTimestamp=function(u,s){var p=536870912*(14&u[s])+4194304*(255&u[s+1])+16384*(254&u[s+2])+128*(255&u[s+3])+(254&u[s+4])/2+this.timestamp_offset_;return p+4294967296<this.last_pcr_base_&&(p+=8589934592),p},c}(Y),yf=function(f,c,u){for(var s,p=0,S=c.length;p<S;p++)!s&&p in c||(s||(s=Array.prototype.slice.call(c,0,p)),s[p]=c[p]);return f.concat(s||Array.prototype.slice.call(c))},vf=function(){function f(){}return f.init=function(){for(var c in f.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],hvc1:[],hvcC:[],av01:[],av1C:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],".mp3":[],Opus:[],dOps:[],"ac-3":[],dac3:[],"ec-3":[],dec3:[],fLaC:[],dfLa:[]},f.types)f.types.hasOwnProperty(c)&&(f.types[c]=[c.charCodeAt(0),c.charCodeAt(1),c.charCodeAt(2),c.charCodeAt(3)]);var u=f.constants={};u.FTYP=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),u.STSD_PREFIX=new Uint8Array([0,0,0,0,0,0,0,1]),u.STTS=new Uint8Array([0,0,0,0,0,0,0,0]),u.STSC=u.STCO=u.STTS,u.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),u.HDLR_VIDEO=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),u.HDLR_AUDIO=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),u.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),u.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),u.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])},f.box=function(c){for(var u=8,s=null,p=Array.prototype.slice.call(arguments,1),S=p.length,v=0;v<S;v++)u+=p[v].byteLength;(s=new Uint8Array(u))[0]=u>>>24&255,s[1]=u>>>16&255,s[2]=u>>>8&255,s[3]=255&u,s.set(c,4);var A=8;for(v=0;v<S;v++)s.set(p[v],A),A+=p[v].byteLength;return s},f.generateInitSegment=function(c){var u=f.box(f.types.ftyp,f.constants.FTYP),s=f.moov(c),p=new Uint8Array(u.byteLength+s.byteLength);return p.set(u,0),p.set(s,u.byteLength),p},f.moov=function(c){var u=f.mvhd(c.timescale,c.duration),s=f.trak(c),p=f.mvex(c);return f.box(f.types.moov,u,s,p)},f.mvhd=function(c,u){return f.box(f.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,c>>>24&255,c>>>16&255,c>>>8&255,255&c,u>>>24&255,u>>>16&255,u>>>8&255,255&u,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))},f.trak=function(c){return f.box(f.types.trak,f.tkhd(c),f.mdia(c))},f.tkhd=function(c){var u=c.id,s=c.duration,p=c.presentWidth,S=c.presentHeight;return f.box(f.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,u>>>24&255,u>>>16&255,u>>>8&255,255&u,0,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,p>>>8&255,255&p,0,0,S>>>8&255,255&S,0,0]))},f.mdia=function(c){return f.box(f.types.mdia,f.mdhd(c),f.hdlr(c),f.minf(c))},f.mdhd=function(c){var u=c.timescale,s=c.duration;return f.box(f.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,u>>>24&255,u>>>16&255,u>>>8&255,255&u,s>>>24&255,s>>>16&255,s>>>8&255,255&s,85,196,0,0]))},f.hdlr=function(c){var u=null;return u=c.type==="audio"?f.constants.HDLR_AUDIO:f.constants.HDLR_VIDEO,f.box(f.types.hdlr,u)},f.minf=function(c){var u=null;return u=c.type==="audio"?f.box(f.types.smhd,f.constants.SMHD):f.box(f.types.vmhd,f.constants.VMHD),f.box(f.types.minf,u,f.dinf(),f.stbl(c))},f.dinf=function(){return f.box(f.types.dinf,f.box(f.types.dref,f.constants.DREF))},f.stbl=function(c){return f.box(f.types.stbl,f.stsd(c),f.box(f.types.stts,f.constants.STTS),f.box(f.types.stsc,f.constants.STSC),f.box(f.types.stsz,f.constants.STSZ),f.box(f.types.stco,f.constants.STCO))},f.stsd=function(c){return c.type==="audio"?c.codec==="mp3"?f.box(f.types.stsd,f.constants.STSD_PREFIX,f.mp3(c)):c.codec==="ac-3"?f.box(f.types.stsd,f.constants.STSD_PREFIX,f.ac3(c)):c.codec==="ec-3"?f.box(f.types.stsd,f.constants.STSD_PREFIX,f.ec3(c)):c.codec==="opus"?f.box(f.types.stsd,f.constants.STSD_PREFIX,f.Opus(c)):c.codec=="flac"?f.box(f.types.stsd,f.constants.STSD_PREFIX,f.fLaC(c)):f.box(f.types.stsd,f.constants.STSD_PREFIX,f.mp4a(c)):c.type==="video"&&c.codec.startsWith("hvc1")?f.box(f.types.stsd,f.constants.STSD_PREFIX,f.hvc1(c)):c.type==="video"&&c.codec.startsWith("av01")?f.box(f.types.stsd,f.constants.STSD_PREFIX,f.av01(c)):f.box(f.types.stsd,f.constants.STSD_PREFIX,f.avc1(c))},f.mp3=function(c){var u=c.channelCount,s=c.audioSampleRate,p=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,u,0,16,0,0,0,0,s>>>8&255,255&s,0,0]);return f.box(f.types[".mp3"],p)},f.mp4a=function(c){var u=c.channelCount,s=c.audioSampleRate,p=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,u,0,16,0,0,0,0,s>>>8&255,255&s,0,0]);return f.box(f.types.mp4a,p,f.esds(c))},f.ac3=function(c){var u=c.channelCount,s=c.audioSampleRate,p=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,u,0,16,0,0,0,0,s>>>8&255,255&s,0,0]);return f.box(f.types["ac-3"],p,f.box(f.types.dac3,new Uint8Array(c.config)))},f.ec3=function(c){var u=c.channelCount,s=c.audioSampleRate,p=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,u,0,16,0,0,0,0,s>>>8&255,255&s,0,0]);return f.box(f.types["ec-3"],p,f.box(f.types.dec3,new Uint8Array(c.config)))},f.esds=function(c){var u=c.config||[],s=u.length,p=new Uint8Array([0,0,0,0,3,23+s,0,1,0,4,15+s,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([s]).concat(u).concat([6,1,2]));return f.box(f.types.esds,p)},f.Opus=function(c){var u=c.channelCount,s=c.audioSampleRate,p=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,u,0,16,0,0,0,0,s>>>8&255,255&s,0,0]);return f.box(f.types.Opus,p,f.dOps(c))},f.dOps=function(c){var u=c.channelCount,s=c.channelConfigCode,p=c.audioSampleRate;if(c.config)return f.box(f.types.dOps,c.config);var S=[];switch(s){case 1:case 2:S=[0];break;case 0:S=[255,1,1,0,1];break;case 128:S=[255,2,0,0,1];break;case 3:S=[1,2,1,0,2,1];break;case 4:S=[1,2,2,0,1,2,3];break;case 5:S=[1,3,2,0,4,1,2,3];break;case 6:S=[1,4,2,0,4,1,2,3,5];break;case 7:S=[1,4,2,0,4,1,2,3,5,6];break;case 8:S=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:S=[1,1,2,0,1];break;case 131:S=[1,1,3,0,1,2];break;case 132:S=[1,1,4,0,1,2,3];break;case 133:S=[1,1,5,0,1,2,3,4];break;case 134:S=[1,1,6,0,1,2,3,4,5];break;case 135:S=[1,1,7,0,1,2,3,4,5,6];break;case 136:S=[1,1,8,0,1,2,3,4,5,6,7]}var v=new Uint8Array(yf([0,u,0,0,p>>>24&255,p>>>17&255,p>>>8&255,p>>>0&255,0,0],S));return f.box(f.types.dOps,v)},f.fLaC=function(c){var u=c.channelCount,s=Math.min(c.audioSampleRate,65535),p=c.sampleSize,S=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,u,0,p,0,0,0,0,s>>>8&255,255&s,0,0]);return f.box(f.types.fLaC,S,f.dfLa(c))},f.dfLa=function(c){var u=new Uint8Array(yf([0,0,0,0],c.config));return f.box(f.types.dfLa,u)},f.avc1=function(c){var u=c.avcc,s=c.codecWidth,p=c.codecHeight,S=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,s>>>8&255,255&s,p>>>8&255,255&p,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return f.box(f.types.avc1,S,f.box(f.types.avcC,u))},f.hvc1=function(c){var u=c.hvcc,s=c.codecWidth,p=c.codecHeight,S=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,s>>>8&255,255&s,p>>>8&255,255&p,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return f.box(f.types.hvc1,S,f.box(f.types.hvcC,u))},f.av01=function(c){var u=c.av1c,s=c.codecWidth||192,p=c.codecHeight||108,S=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,s>>>8&255,255&s,p>>>8&255,255&p,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return f.box(f.types.av01,S,f.box(f.types.av1C,u))},f.mvex=function(c){return f.box(f.types.mvex,f.trex(c))},f.trex=function(c){var u=c.id,s=new Uint8Array([0,0,0,0,u>>>24&255,u>>>16&255,u>>>8&255,255&u,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return f.box(f.types.trex,s)},f.moof=function(c,u){return f.box(f.types.moof,f.mfhd(c.sequenceNumber),f.traf(c,u))},f.mfhd=function(c){var u=new Uint8Array([0,0,0,0,c>>>24&255,c>>>16&255,c>>>8&255,255&c]);return f.box(f.types.mfhd,u)},f.traf=function(c,u){var s=c.id,p=f.box(f.types.tfhd,new Uint8Array([0,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,255&s])),S=f.box(f.types.tfdt,new Uint8Array([0,0,0,0,u>>>24&255,u>>>16&255,u>>>8&255,255&u])),v=f.sdtp(c),A=f.trun(c,v.byteLength+16+16+8+16+8+8);return f.box(f.types.traf,p,S,A,v)},f.sdtp=function(c){for(var u=c.samples||[],s=u.length,p=new Uint8Array(4+s),S=0;S<s;S++){var v=u[S].flags;p[S+4]=v.isLeading<<6|v.dependsOn<<4|v.isDependedOn<<2|v.hasRedundancy}return f.box(f.types.sdtp,p)},f.trun=function(c,u){var s=c.samples||[],p=s.length,S=12+16*p,v=new Uint8Array(S);u+=8+S,v.set([0,0,15,1,p>>>24&255,p>>>16&255,p>>>8&255,255&p,u>>>24&255,u>>>16&255,u>>>8&255,255&u],0);for(var A=0;A<p;A++){var I=s[A].duration,D=s[A].size,U=s[A].flags,z=s[A].cts;v.set([I>>>24&255,I>>>16&255,I>>>8&255,255&I,D>>>24&255,D>>>16&255,D>>>8&255,255&D,U.isLeading<<2|U.dependsOn,U.isDependedOn<<6|U.hasRedundancy<<4|U.isNonSync,0,0,z>>>24&255,z>>>16&255,z>>>8&255,255&z],12+16*A)}return f.box(f.types.trun,v)},f.mdat=function(c){return f.box(f.types.mdat,c)},f}();vf.init();var yi=vf,Sf=function(){function f(){}return f.getSilentFrame=function(c,u){if(c==="mp4a.40.2"){if(u===1)return new Uint8Array([0,200,0,128,35,128]);if(u===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(u===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(u===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(u===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(u===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(u===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(u===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(u===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},f}(),Un=i(11),wf=function(){function f(c){this.TAG="MP4Remuxer",this._config=c,this._isLive=c.isLive===!0,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._videoNextDts=void 0,this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new Un.c("audio"),this._videoSegmentInfoList=new Un.c("video"),this._onInitSegment=null,this._onMediaSegment=null,this._forceFirstIDR=!(!d.a.chrome||!(d.a.version.major<50||d.a.version.major===50&&d.a.version.build<2661)),this._fillSilentAfterSeek=d.a.msedge||d.a.msie,this._mp3UseMpegAudio=!d.a.firefox,this._fillAudioTimestampGap=this._config.fixAudioTimestampGap}return f.prototype.destroy=function(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null,this._onInitSegment=null,this._onMediaSegment=null},f.prototype.bindDataSource=function(c){return c.onDataAvailable=this.remux.bind(this),c.onTrackMetadata=this._onTrackMetadataReceived.bind(this),this},Object.defineProperty(f.prototype,"onInitSegment",{get:function(){return this._onInitSegment},set:function(c){this._onInitSegment=c},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onMediaSegment",{get:function(){return this._onMediaSegment},set:function(c){this._onMediaSegment=c},enumerable:!1,configurable:!0}),f.prototype.insertDiscontinuity=function(){this._audioNextDts=this._videoNextDts=void 0},f.prototype.seek=function(c){this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._videoSegmentInfoList.clear(),this._audioSegmentInfoList.clear()},f.prototype.remux=function(c,u){if(!this._onMediaSegment)throw new m.a("MP4Remuxer: onMediaSegment callback must be specificed!");this._dtsBaseInited||this._calculateDtsBase(c,u),u&&this._remuxVideo(u),c&&this._remuxAudio(c)},f.prototype._onTrackMetadataReceived=function(c,u){var s=null,p="mp4",S=u.codec;if(c==="audio")this._audioMeta=u,u.codec==="mp3"&&this._mp3UseMpegAudio?(p="mpeg",S="",s=new Uint8Array):s=yi.generateInitSegment(u);else{if(c!=="video")return;this._videoMeta=u,s=yi.generateInitSegment(u)}if(!this._onInitSegment)throw new m.a("MP4Remuxer: onInitSegment callback must be specified!");this._onInitSegment(c,{type:c,data:s.buffer,codec:S,container:"".concat(c,"/").concat(p),mediaDuration:u.duration})},f.prototype._calculateDtsBase=function(c,u){this._dtsBaseInited||(c&&c.samples&&c.samples.length&&(this._audioDtsBase=c.samples[0].dts),u&&u.samples&&u.samples.length&&(this._videoDtsBase=u.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)},f.prototype.getTimestampBase=function(){if(this._dtsBaseInited)return this._dtsBase},f.prototype.flushStashedSamples=function(){var c=this._videoStashedLastSample,u=this._audioStashedLastSample,s={type:"video",id:1,sequenceNumber:0,samples:[],length:0};c!=null&&(s.samples.push(c),s.length=c.length);var p={type:"audio",id:2,sequenceNumber:0,samples:[],length:0};u!=null&&(p.samples.push(u),p.length=u.length),this._videoStashedLastSample=null,this._audioStashedLastSample=null,this._remuxVideo(s,!0),this._remuxAudio(p,!0)},f.prototype._remuxAudio=function(c,u){if(this._audioMeta!=null){var s,p=c,S=p.samples,v=void 0,A=-1,I=this._audioMeta.refSampleDuration,D=this._audioMeta.codec==="mp3"&&this._mp3UseMpegAudio,U=this._dtsBaseInited&&this._audioNextDts===void 0,z=!1;if(S&&S.length!==0&&(S.length!==1||u)){var F=0,G=null,K=0;D?(F=0,K=p.length):(F=8,K=8+p.length);var re=null;if(S.length>1&&(K-=(re=S.pop()).length),this._audioStashedLastSample!=null){var Z=this._audioStashedLastSample;this._audioStashedLastSample=null,S.unshift(Z),K+=Z.length}re!=null&&(this._audioStashedLastSample=re);var ce=S[0].dts-this._dtsBase;if(this._audioNextDts)v=ce-this._audioNextDts;else if(this._audioSegmentInfoList.isEmpty())v=0,this._fillSilentAfterSeek&&!this._videoSegmentInfoList.isEmpty()&&this._audioMeta.originalCodec!=="mp3"&&(z=!0);else{var le=this._audioSegmentInfoList.getLastSampleBefore(ce);if(le!=null){var se=ce-(le.originalDts+le.duration);se<=3&&(se=0),v=ce-(le.dts+le.duration+se)}else v=0}if(z){var ve=ce-v,Ce=this._videoSegmentInfoList.getLastSegmentBefore(ce);if(Ce!=null&&Ce.beginDts<ve){if(at=Sf.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount)){var ue=Ce.beginDts,ye=ve-Ce.beginDts;l.a.v(this.TAG,"InsertPrefixSilentAudio: dts: ".concat(ue,", duration: ").concat(ye)),S.unshift({unit:at,dts:ue,pts:ue}),K+=at.byteLength}}else z=!1}for(var Te=[],Se=0;Se<S.length;Se++){var Ae=(Z=S[Se]).unit,Ne=Z.dts-this._dtsBase,ze=(ue=Ne,!1),ke=null,Le=0;if(!(Ne<-.001)){if(this._audioMeta.codec!=="mp3"&&I!=null){var Ge=Ne;if(this._audioNextDts&&(Ge=this._audioNextDts),(v=Ne-Ge)<=-3*I){l.a.w(this.TAG,"Dropping 1 audio frame (originalDts: ".concat(Ne," ms ,curRefDts: ").concat(Ge," ms)  due to dtsCorrection: ").concat(v," ms overlap."));continue}if(v>=3*I&&this._fillAudioTimestampGap&&!d.a.safari){ze=!0;var at,_n=Math.floor(v/I);l.a.w(this.TAG,`Large audio timestamp gap detected, may cause AV sync to drift. Silent frames will be generated to avoid unsync.
`+"originalDts: ".concat(Ne," ms, curRefDts: ").concat(Ge," ms, ")+"dtsCorrection: ".concat(Math.round(v)," ms, generate: ").concat(_n," frames")),ue=Math.floor(Ge),Le=Math.floor(Ge+I)-ue,(at=Sf.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount))==null&&(l.a.w(this.TAG,"Unable to generate silent frame for "+"".concat(this._audioMeta.originalCodec," with ").concat(this._audioMeta.channelCount," channels, repeat last frame")),at=Ae),ke=[];for(var bt=0;bt<_n;bt++){Ge+=I;var Kt=Math.floor(Ge),Ot=Math.floor(Ge+I)-Kt,At={dts:Kt,pts:Kt,cts:0,unit:at,size:at.byteLength,duration:Ot,originalDts:Ne,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}};ke.push(At),K+=At.size}this._audioNextDts=Ge+I}else ue=Math.floor(Ge),Le=Math.floor(Ge+I)-ue,this._audioNextDts=Ge+I}else ue=Ne-v,Se!==S.length-1?Le=S[Se+1].dts-this._dtsBase-v-ue:re!=null?Le=re.dts-this._dtsBase-v-ue:Le=Te.length>=1?Te[Te.length-1].duration:Math.floor(I),this._audioNextDts=ue+Le;A===-1&&(A=ue),Te.push({dts:ue,pts:ue,cts:0,unit:Z.unit,size:Z.unit.byteLength,duration:Le,originalDts:Ne,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}),ze&&Te.push.apply(Te,ke)}}if(Te.length===0)return p.samples=[],void(p.length=0);for(D?G=new Uint8Array(K):((G=new Uint8Array(K))[0]=K>>>24&255,G[1]=K>>>16&255,G[2]=K>>>8&255,G[3]=255&K,G.set(yi.types.mdat,4)),Se=0;Se<Te.length;Se++)Ae=Te[Se].unit,G.set(Ae,F),F+=Ae.byteLength;var Mt=Te[Te.length-1];s=Mt.dts+Mt.duration;var Fe=new Un.b;Fe.beginDts=A,Fe.endDts=s,Fe.beginPts=A,Fe.endPts=s,Fe.originalBeginDts=Te[0].originalDts,Fe.originalEndDts=Mt.originalDts+Mt.duration,Fe.firstSample=new Un.d(Te[0].dts,Te[0].pts,Te[0].duration,Te[0].originalDts,!1),Fe.lastSample=new Un.d(Mt.dts,Mt.pts,Mt.duration,Mt.originalDts,!1),this._isLive||this._audioSegmentInfoList.append(Fe),p.samples=Te,p.sequenceNumber++;var jn=null;jn=D?new Uint8Array:yi.moof(p,A),p.samples=[],p.length=0;var Fn={type:"audio",data:this._mergeBoxes(jn,G).buffer,sampleCount:Te.length,info:Fe};D&&U&&(Fn.timestampOffset=A),this._onMediaSegment("audio",Fn)}}},f.prototype._remuxVideo=function(c,u){if(this._videoMeta!=null){var s,p,S=c,v=S.samples,A=void 0,I=-1,D=-1;if(v&&v.length!==0&&(v.length!==1||u)){var U=8,z=null,F=8+c.length,G=null;if(v.length>1&&(F-=(G=v.pop()).length),this._videoStashedLastSample!=null){var K=this._videoStashedLastSample;this._videoStashedLastSample=null,v.unshift(K),F+=K.length}G!=null&&(this._videoStashedLastSample=G);var re=v[0].dts-this._dtsBase;if(this._videoNextDts)A=re-this._videoNextDts;else if(this._videoSegmentInfoList.isEmpty())A=0;else{var Z=this._videoSegmentInfoList.getLastSampleBefore(re);if(Z!=null){var ce=re-(Z.originalDts+Z.duration);ce<=3&&(ce=0),A=re-(Z.dts+Z.duration+ce)}else A=0}for(var le=new Un.b,se=[],ve=0;ve<v.length;ve++){var Ce=(K=v[ve]).dts-this._dtsBase,ue=K.isKeyframe,ye=Ce-A,Te=K.cts,Se=ye+Te;I===-1&&(I=ye,D=Se);var Ae=0;if(ve!==v.length-1?Ae=v[ve+1].dts-this._dtsBase-A-ye:G!=null?Ae=G.dts-this._dtsBase-A-ye:Ae=se.length>=1?se[se.length-1].duration:Math.floor(this._videoMeta.refSampleDuration),ue){var Ne=new Un.d(ye,Se,Ae,K.dts,!0);Ne.fileposition=K.fileposition,le.appendSyncPoint(Ne)}se.push({dts:ye,pts:Se,cts:Te,units:K.units,size:K.length,isKeyframe:ue,duration:Ae,originalDts:Ce,flags:{isLeading:0,dependsOn:ue?2:1,isDependedOn:ue?1:0,hasRedundancy:0,isNonSync:ue?0:1}})}for((z=new Uint8Array(F))[0]=F>>>24&255,z[1]=F>>>16&255,z[2]=F>>>8&255,z[3]=255&F,z.set(yi.types.mdat,4),ve=0;ve<se.length;ve++)for(var ze=se[ve].units;ze.length;){var ke=ze.shift().data;z.set(ke,U),U+=ke.byteLength}var Le=se[se.length-1];if(s=Le.dts+Le.duration,p=Le.pts+Le.duration,this._videoNextDts=s,le.beginDts=I,le.endDts=s,le.beginPts=D,le.endPts=p,le.originalBeginDts=se[0].originalDts,le.originalEndDts=Le.originalDts+Le.duration,le.firstSample=new Un.d(se[0].dts,se[0].pts,se[0].duration,se[0].originalDts,se[0].isKeyframe),le.lastSample=new Un.d(Le.dts,Le.pts,Le.duration,Le.originalDts,Le.isKeyframe),this._isLive||this._videoSegmentInfoList.append(le),S.samples=se,S.sequenceNumber++,this._forceFirstIDR){var Ge=se[0].flags;Ge.dependsOn=2,Ge.isNonSync=0}var at=yi.moof(S,I);S.samples=[],S.length=0,this._onMediaSegment("video",{type:"video",data:this._mergeBoxes(at,z).buffer,sampleCount:se.length,info:le})}}},f.prototype._mergeBoxes=function(c,u){var s=new Uint8Array(c.byteLength+u.byteLength);return s.set(c,0),s.set(u,c.byteLength),s},f}(),av=i(14),lt=i(1),ov=(i(2),function(){function f(c,u){this.TAG="TransmuxingController",this._emitter=new o.a,this._config=u,c.segments||(c.segments=[{duration:c.duration,filesize:c.filesize,url:c.url}]),typeof c.cors!="boolean"&&(c.cors=!0),typeof c.withCredentials!="boolean"&&(c.withCredentials=!1),this._mediaDataSource=c,this._currentSegmentIndex=0;var s=0;this._mediaDataSource.segments.forEach(function(p){p.timestampBase=s,s+=p.duration,p.cors=c.cors,p.withCredentials=c.withCredentials,u.referrerPolicy&&(p.referrerPolicy=u.referrerPolicy)}),isNaN(s)||this._mediaDataSource.duration===s||(this._mediaDataSource.duration=s),this._mediaInfo=null,this._demuxer=null,this._remuxer=null,this._ioctl=null,this._pendingSeekTime=null,this._pendingResolveSeekPoint=null,this._statisticsReporter=null}return f.prototype.destroy=function(){this._mediaInfo=null,this._mediaDataSource=null,this._statisticsReporter&&this._disableStatisticsReporter(),this._ioctl&&(this._ioctl.destroy(),this._ioctl=null),this._demuxer&&(this._demuxer.destroy(),this._demuxer=null),this._remuxer&&(this._remuxer.destroy(),this._remuxer=null),this._emitter.removeAllListeners(),this._emitter=null},f.prototype.on=function(c,u){this._emitter.addListener(c,u)},f.prototype.off=function(c,u){this._emitter.removeListener(c,u)},f.prototype.start=function(){this._loadSegment(0),this._enableStatisticsReporter()},f.prototype._loadSegment=function(c,u){this._currentSegmentIndex=c;var s=this._mediaDataSource.segments[c],p=this._ioctl=new av.a(s,this._config,c);p.onError=this._onIOException.bind(this),p.onSeeked=this._onIOSeeked.bind(this),p.onComplete=this._onIOComplete.bind(this),p.onRedirect=this._onIORedirect.bind(this),p.onRecoveredEarlyEof=this._onIORecoveredEarlyEof.bind(this),u?this._demuxer.bindDataSource(this._ioctl):p.onDataArrival=this._onInitChunkArrival.bind(this),p.open(u)},f.prototype.stop=function(){this._internalAbort(),this._disableStatisticsReporter()},f.prototype._internalAbort=function(){this._ioctl&&(this._ioctl.destroy(),this._ioctl=null)},f.prototype.pause=function(){this._ioctl&&this._ioctl.isWorking()&&(this._ioctl.pause(),this._disableStatisticsReporter())},f.prototype.resume=function(){this._ioctl&&this._ioctl.isPaused()&&(this._ioctl.resume(),this._enableStatisticsReporter())},f.prototype.seek=function(c){if(this._mediaInfo!=null&&this._mediaInfo.isSeekable()){var u=this._searchSegmentIndexContains(c);if(u===this._currentSegmentIndex){var s=this._mediaInfo.segments[u];if(s==null)this._pendingSeekTime=c;else{var p=s.getNearestKeyframe(c);this._remuxer.seek(p.milliseconds),this._ioctl.seek(p.fileposition),this._pendingResolveSeekPoint=p.milliseconds}}else{var S=this._mediaInfo.segments[u];S==null?(this._pendingSeekTime=c,this._internalAbort(),this._remuxer.seek(),this._remuxer.insertDiscontinuity(),this._loadSegment(u)):(p=S.getNearestKeyframe(c),this._internalAbort(),this._remuxer.seek(c),this._remuxer.insertDiscontinuity(),this._demuxer.resetMediaInfo(),this._demuxer.timestampBase=this._mediaDataSource.segments[u].timestampBase,this._loadSegment(u,p.fileposition),this._pendingResolveSeekPoint=p.milliseconds,this._reportSegmentMediaInfo(u))}this._enableStatisticsReporter()}},f.prototype._searchSegmentIndexContains=function(c){for(var u=this._mediaDataSource.segments,s=u.length-1,p=0;p<u.length;p++)if(c<u[p].timestampBase){s=p-1;break}return s},f.prototype._onInitChunkArrival=function(c,u){var s=this,p=0;if(u>0)this._demuxer.bindDataSource(this._ioctl),this._demuxer.timestampBase=this._mediaDataSource.segments[this._currentSegmentIndex].timestampBase,p=this._demuxer.parseChunks(c,u);else{var S=null;(S=M.probe(c)).match&&(this._setupFLVDemuxerRemuxer(S),p=this._demuxer.parseChunks(c,u)),S.match||S.needMoreData||(S=gf.probe(c)).match&&(this._setupTSDemuxerRemuxer(S),p=this._demuxer.parseChunks(c,u)),S.match||S.needMoreData||(S=null,l.a.e(this.TAG,"Non MPEG-TS/FLV, Unsupported media type!"),Promise.resolve().then(function(){s._internalAbort()}),this._emitter.emit(lt.a.DEMUX_ERROR,E.a.FORMAT_UNSUPPORTED,"Non MPEG-TS/FLV, Unsupported media type!"))}return p},f.prototype._setupFLVDemuxerRemuxer=function(c){this._demuxer=new M(c,this._config),this._remuxer||(this._remuxer=new wf(this._config));var u=this._mediaDataSource;u.duration==null||isNaN(u.duration)||(this._demuxer.overridedDuration=u.duration),typeof u.hasAudio=="boolean"&&(this._demuxer.overridedHasAudio=u.hasAudio),typeof u.hasVideo=="boolean"&&(this._demuxer.overridedHasVideo=u.hasVideo),this._demuxer.timestampBase=u.segments[this._currentSegmentIndex].timestampBase,this._demuxer.onError=this._onDemuxException.bind(this),this._demuxer.onMediaInfo=this._onMediaInfo.bind(this),this._demuxer.onMetaDataArrived=this._onMetaDataArrived.bind(this),this._demuxer.onScriptDataArrived=this._onScriptDataArrived.bind(this),this._remuxer.bindDataSource(this._demuxer.bindDataSource(this._ioctl)),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this)},f.prototype._setupTSDemuxerRemuxer=function(c){var u=this._demuxer=new gf(c,this._config);this._remuxer||(this._remuxer=new wf(this._config)),u.onError=this._onDemuxException.bind(this),u.onMediaInfo=this._onMediaInfo.bind(this),u.onMetaDataArrived=this._onMetaDataArrived.bind(this),u.onTimedID3Metadata=this._onTimedID3Metadata.bind(this),u.onSynchronousKLVMetadata=this._onSynchronousKLVMetadata.bind(this),u.onAsynchronousKLVMetadata=this._onAsynchronousKLVMetadata.bind(this),u.onSMPTE2038Metadata=this._onSMPTE2038Metadata.bind(this),u.onSCTE35Metadata=this._onSCTE35Metadata.bind(this),u.onPESPrivateDataDescriptor=this._onPESPrivateDataDescriptor.bind(this),u.onPESPrivateData=this._onPESPrivateData.bind(this),this._remuxer.bindDataSource(this._demuxer),this._demuxer.bindDataSource(this._ioctl),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this)},f.prototype._onMediaInfo=function(c){var u=this;this._mediaInfo==null&&(this._mediaInfo=Object.assign({},c),this._mediaInfo.keyframesIndex=null,this._mediaInfo.segments=[],this._mediaInfo.segmentCount=this._mediaDataSource.segments.length,Object.setPrototypeOf(this._mediaInfo,h.a.prototype));var s=Object.assign({},c);Object.setPrototypeOf(s,h.a.prototype),this._mediaInfo.segments[this._currentSegmentIndex]=s,this._reportSegmentMediaInfo(this._currentSegmentIndex),this._pendingSeekTime!=null&&Promise.resolve().then(function(){var p=u._pendingSeekTime;u._pendingSeekTime=null,u.seek(p)})},f.prototype._onMetaDataArrived=function(c){this._emitter.emit(lt.a.METADATA_ARRIVED,c)},f.prototype._onScriptDataArrived=function(c){this._emitter.emit(lt.a.SCRIPTDATA_ARRIVED,c)},f.prototype._onTimedID3Metadata=function(c){var u=this._remuxer.getTimestampBase();u!=null&&(c.pts!=null&&(c.pts-=u),c.dts!=null&&(c.dts-=u),this._emitter.emit(lt.a.TIMED_ID3_METADATA_ARRIVED,c))},f.prototype._onSynchronousKLVMetadata=function(c){var u=this._remuxer.getTimestampBase();u!=null&&(c.pts!=null&&(c.pts-=u),c.dts!=null&&(c.dts-=u),this._emitter.emit(lt.a.SYNCHRONOUS_KLV_METADATA_ARRIVED,c))},f.prototype._onAsynchronousKLVMetadata=function(c){this._emitter.emit(lt.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED,c)},f.prototype._onSMPTE2038Metadata=function(c){var u=this._remuxer.getTimestampBase();u!=null&&(c.pts!=null&&(c.pts-=u),c.dts!=null&&(c.dts-=u),c.nearest_pts!=null&&(c.nearest_pts-=u),this._emitter.emit(lt.a.SMPTE2038_METADATA_ARRIVED,c))},f.prototype._onSCTE35Metadata=function(c){var u=this._remuxer.getTimestampBase();u!=null&&(c.pts!=null&&(c.pts-=u),c.nearest_pts!=null&&(c.nearest_pts-=u),this._emitter.emit(lt.a.SCTE35_METADATA_ARRIVED,c))},f.prototype._onPESPrivateDataDescriptor=function(c){this._emitter.emit(lt.a.PES_PRIVATE_DATA_DESCRIPTOR,c)},f.prototype._onPESPrivateData=function(c){var u=this._remuxer.getTimestampBase();u!=null&&(c.pts!=null&&(c.pts-=u),c.nearest_pts!=null&&(c.nearest_pts-=u),c.dts!=null&&(c.dts-=u),this._emitter.emit(lt.a.PES_PRIVATE_DATA_ARRIVED,c))},f.prototype._onIOSeeked=function(){this._remuxer.insertDiscontinuity()},f.prototype._onIOComplete=function(c){var u=c+1;u<this._mediaDataSource.segments.length?(this._internalAbort(),this._remuxer&&this._remuxer.flushStashedSamples(),this._loadSegment(u)):(this._remuxer&&this._remuxer.flushStashedSamples(),this._emitter.emit(lt.a.LOADING_COMPLETE),this._disableStatisticsReporter())},f.prototype._onIORedirect=function(c){var u=this._ioctl.extraData;this._mediaDataSource.segments[u].redirectedURL=c},f.prototype._onIORecoveredEarlyEof=function(){this._emitter.emit(lt.a.RECOVERED_EARLY_EOF)},f.prototype._onIOException=function(c,u){l.a.e(this.TAG,"IOException: type = ".concat(c,", code = ").concat(u.code,", msg = ").concat(u.msg)),this._emitter.emit(lt.a.IO_ERROR,c,u),this._disableStatisticsReporter()},f.prototype._onDemuxException=function(c,u){l.a.e(this.TAG,"DemuxException: type = ".concat(c,", info = ").concat(u)),this._emitter.emit(lt.a.DEMUX_ERROR,c,u)},f.prototype._onRemuxerInitSegmentArrival=function(c,u){this._emitter.emit(lt.a.INIT_SEGMENT,c,u)},f.prototype._onRemuxerMediaSegmentArrival=function(c,u){if(this._pendingSeekTime==null&&(this._emitter.emit(lt.a.MEDIA_SEGMENT,c,u),this._pendingResolveSeekPoint!=null&&c==="video")){var s=u.info.syncPoints,p=this._pendingResolveSeekPoint;this._pendingResolveSeekPoint=null,d.a.safari&&s.length>0&&s[0].originalDts===p&&(p=s[0].pts),this._emitter.emit(lt.a.RECOMMEND_SEEKPOINT,p)}},f.prototype._enableStatisticsReporter=function(){this._statisticsReporter==null&&(this._statisticsReporter=self.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval))},f.prototype._disableStatisticsReporter=function(){this._statisticsReporter&&(self.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},f.prototype._reportSegmentMediaInfo=function(c){var u=this._mediaInfo.segments[c],s=Object.assign({},u);s.duration=this._mediaInfo.duration,s.segmentCount=this._mediaInfo.segmentCount,delete s.segments,delete s.keyframesIndex,this._emitter.emit(lt.a.MEDIA_INFO,s)},f.prototype._reportStatisticsInfo=function(){var c={};c.url=this._ioctl.currentURL,c.hasRedirect=this._ioctl.hasRedirect,c.hasRedirect&&(c.redirectedURL=this._ioctl.currentRedirectedURL),c.speed=this._ioctl.currentSpeed,c.loaderType=this._ioctl.loaderType,c.currentSegmentIndex=this._currentSegmentIndex,c.totalSegmentCount=this._mediaDataSource.segments.length,this._emitter.emit(lt.a.STATISTICS_INFO,c)},f}());r.a=ov},function(n,r,i){var a,o=i(0),l=function(){function B(){this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now}return B.prototype.reset=function(){this._firstCheckpoint=this._lastCheckpoint=0,this._totalBytes=this._intervalBytes=0,this._lastSecondBytes=0},B.prototype.addBytes=function(R){this._firstCheckpoint===0?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=R,this._totalBytes+=R):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=R,this._totalBytes+=R):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=R,this._totalBytes+=R,this._lastCheckpoint=this._now())},Object.defineProperty(B.prototype,"currentKBps",{get:function(){this.addBytes(0);var R=(this._now()-this._lastCheckpoint)/1e3;return R==0&&(R=1),this._intervalBytes/R/1024},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"lastSecondKBps",{get:function(){return this.addBytes(0),this._lastSecondBytes!==0?this._lastSecondBytes/1024:this._now()-this._lastCheckpoint>=500?this.currentKBps:0},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"averageKBps",{get:function(){var R=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/R/1024},enumerable:!1,configurable:!0}),B}(),d=i(2),h=i(5),_=i(3),y=(a=function(B,R){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,k){L.__proto__=k}||function(L,k){for(var M in k)Object.prototype.hasOwnProperty.call(k,M)&&(L[M]=k[M])})(B,R)},function(B,R){if(typeof R!="function"&&R!==null)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");function L(){this.constructor=B}a(B,R),B.prototype=R===null?Object.create(R):(L.prototype=R.prototype,new L)}),g=function(B){function R(L,k){var M=B.call(this,"fetch-stream-loader")||this;return M.TAG="FetchStreamLoader",M._seekHandler=L,M._config=k,M._needStash=!0,M._requestAbort=!1,M._abortController=null,M._contentLength=null,M._receivedLength=0,M}return y(R,B),R.isSupported=function(){try{var L=h.a.msedge&&h.a.version.minor>=15048,k=!h.a.msedge||L;return self.fetch&&self.ReadableStream&&k}catch{return!1}},R.prototype.destroy=function(){this.isWorking()&&this.abort(),B.prototype.destroy.call(this)},R.prototype.open=function(L,k){var M=this;this._dataSource=L,this._range=k;var Y=L.url;this._config.reuseRedirectedURL&&L.redirectedURL!=null&&(Y=L.redirectedURL);var ie=this._seekHandler.getConfig(Y,k),Q=new self.Headers;if(typeof ie.headers=="object"){var ne=ie.headers;for(var de in ne)ne.hasOwnProperty(de)&&Q.append(de,ne[de])}var xe={method:"GET",headers:Q,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};if(typeof this._config.headers=="object")for(var de in this._config.headers)Q.append(de,this._config.headers[de]);L.cors===!1&&(xe.mode="same-origin"),L.withCredentials&&(xe.credentials="include"),L.referrerPolicy&&(xe.referrerPolicy=L.referrerPolicy),self.AbortController&&(this._abortController=new self.AbortController,xe.signal=this._abortController.signal),this._status=d.c.kConnecting,self.fetch(ie.url,xe).then(function(J){if(M._requestAbort)return M._status=d.c.kIdle,void J.body.cancel();if(J.ok&&J.status>=200&&J.status<=299){if(J.url!==ie.url&&M._onURLRedirect){var N=M._seekHandler.removeURLParameters(J.url);M._onURLRedirect(N)}var P=J.headers.get("Content-Length");return P!=null&&(M._contentLength=parseInt(P),M._contentLength!==0&&M._onContentLengthKnown&&M._onContentLengthKnown(M._contentLength)),M._pump.call(M,J.body.getReader())}if(M._status=d.c.kError,!M._onError)throw new _.d("FetchStreamLoader: Http code invalid, "+J.status+" "+J.statusText);M._onError(d.b.HTTP_STATUS_CODE_INVALID,{code:J.status,msg:J.statusText})}).catch(function(J){if(!M._abortController||!M._abortController.signal.aborted){if(M._status=d.c.kError,!M._onError)throw J;M._onError(d.b.EXCEPTION,{code:-1,msg:J.message})}})},R.prototype.abort=function(){if(this._requestAbort=!0,(this._status!==d.c.kBuffering||!h.a.chrome)&&this._abortController)try{this._abortController.abort()}catch{}},R.prototype._pump=function(L){var k=this;return L.read().then(function(M){if(M.done)if(k._contentLength!==null&&k._receivedLength<k._contentLength){k._status=d.c.kError;var Y=d.b.EARLY_EOF,ie={code:-1,msg:"Fetch stream meet Early-EOF"};if(!k._onError)throw new _.d(ie.msg);k._onError(Y,ie)}else k._status=d.c.kComplete,k._onComplete&&k._onComplete(k._range.from,k._range.from+k._receivedLength-1);else{if(k._abortController&&k._abortController.signal.aborted)return void(k._status=d.c.kComplete);if(k._requestAbort===!0)return k._status=d.c.kComplete,L.cancel();k._status=d.c.kBuffering;var Q=M.value.buffer,ne=k._range.from+k._receivedLength;k._receivedLength+=Q.byteLength,k._onDataArrival&&k._onDataArrival(Q,ne,k._receivedLength),k._pump(L)}}).catch(function(M){if(k._abortController&&k._abortController.signal.aborted)k._status=d.c.kComplete;else if(M.code!==11||!h.a.msedge){k._status=d.c.kError;var Y=0,ie=null;if(M.code!==19&&M.message!=="network error"||!(k._contentLength===null||k._contentLength!==null&&k._receivedLength<k._contentLength)?(Y=d.b.EXCEPTION,ie={code:M.code,msg:M.message}):(Y=d.b.EARLY_EOF,ie={code:M.code,msg:"Fetch stream meet Early-EOF"}),!k._onError)throw new _.d(ie.msg);k._onError(Y,ie)}})},R}(d.a),m=function(){var B=function(R,L){return(B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,M){k.__proto__=M}||function(k,M){for(var Y in M)Object.prototype.hasOwnProperty.call(M,Y)&&(k[Y]=M[Y])})(R,L)};return function(R,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function k(){this.constructor=R}B(R,L),R.prototype=L===null?Object.create(L):(k.prototype=L.prototype,new k)}}(),C=function(B){function R(L,k){var M=B.call(this,"xhr-moz-chunked-loader")||this;return M.TAG="MozChunkedLoader",M._seekHandler=L,M._config=k,M._needStash=!0,M._xhr=null,M._requestAbort=!1,M._contentLength=null,M._receivedLength=0,M}return m(R,B),R.isSupported=function(){try{var L=new XMLHttpRequest;return L.open("GET","https://example.com",!0),L.responseType="moz-chunked-arraybuffer",L.responseType==="moz-chunked-arraybuffer"}catch(k){return o.a.w("MozChunkedLoader",k.message),!1}},R.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onloadend=null,this._xhr.onerror=null,this._xhr=null),B.prototype.destroy.call(this)},R.prototype.open=function(L,k){this._dataSource=L,this._range=k;var M=L.url;this._config.reuseRedirectedURL&&L.redirectedURL!=null&&(M=L.redirectedURL);var Y=this._seekHandler.getConfig(M,k);this._requestURL=Y.url;var ie=this._xhr=new XMLHttpRequest;if(ie.open("GET",Y.url,!0),ie.responseType="moz-chunked-arraybuffer",ie.onreadystatechange=this._onReadyStateChange.bind(this),ie.onprogress=this._onProgress.bind(this),ie.onloadend=this._onLoadEnd.bind(this),ie.onerror=this._onXhrError.bind(this),L.withCredentials&&(ie.withCredentials=!0),typeof Y.headers=="object"){var Q=Y.headers;for(var ne in Q)Q.hasOwnProperty(ne)&&ie.setRequestHeader(ne,Q[ne])}if(typeof this._config.headers=="object"){Q=this._config.headers;for(var ne in Q)Q.hasOwnProperty(ne)&&ie.setRequestHeader(ne,Q[ne])}this._status=d.c.kConnecting,ie.send()},R.prototype.abort=function(){this._requestAbort=!0,this._xhr&&this._xhr.abort(),this._status=d.c.kComplete},R.prototype._onReadyStateChange=function(L){var k=L.target;if(k.readyState===2){if(k.responseURL!=null&&k.responseURL!==this._requestURL&&this._onURLRedirect){var M=this._seekHandler.removeURLParameters(k.responseURL);this._onURLRedirect(M)}if(k.status!==0&&(k.status<200||k.status>299)){if(this._status=d.c.kError,!this._onError)throw new _.d("MozChunkedLoader: Http code invalid, "+k.status+" "+k.statusText);this._onError(d.b.HTTP_STATUS_CODE_INVALID,{code:k.status,msg:k.statusText})}else this._status=d.c.kBuffering}},R.prototype._onProgress=function(L){if(this._status!==d.c.kError){this._contentLength===null&&L.total!==null&&L.total!==0&&(this._contentLength=L.total,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength));var k=L.target.response,M=this._range.from+this._receivedLength;this._receivedLength+=k.byteLength,this._onDataArrival&&this._onDataArrival(k,M,this._receivedLength)}},R.prototype._onLoadEnd=function(L){this._requestAbort!==!0?this._status!==d.c.kError&&(this._status=d.c.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1)):this._requestAbort=!1},R.prototype._onXhrError=function(L){this._status=d.c.kError;var k=0,M=null;if(this._contentLength&&L.loaded<this._contentLength?(k=d.b.EARLY_EOF,M={code:-1,msg:"Moz-Chunked stream meet Early-Eof"}):(k=d.b.EXCEPTION,M={code:-1,msg:L.constructor.name+" "+L.type}),!this._onError)throw new _.d(M.msg);this._onError(k,M)},R}(d.a),w=function(){var B=function(R,L){return(B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,M){k.__proto__=M}||function(k,M){for(var Y in M)Object.prototype.hasOwnProperty.call(M,Y)&&(k[Y]=M[Y])})(R,L)};return function(R,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function k(){this.constructor=R}B(R,L),R.prototype=L===null?Object.create(L):(k.prototype=L.prototype,new k)}}(),O=(function(B){function R(L,k){var M=B.call(this,"xhr-msstream-loader")||this;return M.TAG="MSStreamLoader",M._seekHandler=L,M._config=k,M._needStash=!0,M._xhr=null,M._reader=null,M._totalRange=null,M._currentRange=null,M._currentRequestURL=null,M._currentRedirectedURL=null,M._contentLength=null,M._receivedLength=0,M._bufferLimit=16777216,M._lastTimeBufferSize=0,M._isReconnecting=!1,M}w(R,B),R.isSupported=function(){try{if(self.MSStream===void 0||self.MSStreamReader===void 0)return!1;var L=new XMLHttpRequest;return L.open("GET","https://example.com",!0),L.responseType="ms-stream",L.responseType==="ms-stream"}catch(k){return o.a.w("MSStreamLoader",k.message),!1}},R.prototype.destroy=function(){this.isWorking()&&this.abort(),this._reader&&(this._reader.onprogress=null,this._reader.onload=null,this._reader.onerror=null,this._reader=null),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr=null),B.prototype.destroy.call(this)},R.prototype.open=function(L,k){this._internalOpen(L,k,!1)},R.prototype._internalOpen=function(L,k,M){this._dataSource=L,M?this._currentRange=k:this._totalRange=k;var Y=L.url;this._config.reuseRedirectedURL&&(this._currentRedirectedURL!=null?Y=this._currentRedirectedURL:L.redirectedURL!=null&&(Y=L.redirectedURL));var ie=this._seekHandler.getConfig(Y,k);this._currentRequestURL=ie.url;var Q=this._reader=new self.MSStreamReader;Q.onprogress=this._msrOnProgress.bind(this),Q.onload=this._msrOnLoad.bind(this),Q.onerror=this._msrOnError.bind(this);var ne=this._xhr=new XMLHttpRequest;if(ne.open("GET",ie.url,!0),ne.responseType="ms-stream",ne.onreadystatechange=this._xhrOnReadyStateChange.bind(this),ne.onerror=this._xhrOnError.bind(this),L.withCredentials&&(ne.withCredentials=!0),typeof ie.headers=="object"){var de=ie.headers;for(var xe in de)de.hasOwnProperty(xe)&&ne.setRequestHeader(xe,de[xe])}if(typeof this._config.headers=="object"){de=this._config.headers;for(var xe in de)de.hasOwnProperty(xe)&&ne.setRequestHeader(xe,de[xe])}this._isReconnecting?this._isReconnecting=!1:this._status=d.c.kConnecting,ne.send()},R.prototype.abort=function(){this._internalAbort(),this._status=d.c.kComplete},R.prototype._internalAbort=function(){this._reader&&(this._reader.readyState===1&&this._reader.abort(),this._reader.onprogress=null,this._reader.onload=null,this._reader.onerror=null,this._reader=null),this._xhr&&(this._xhr.abort(),this._xhr.onreadystatechange=null,this._xhr=null)},R.prototype._xhrOnReadyStateChange=function(L){var k=L.target;if(k.readyState===2)if(k.status>=200&&k.status<=299){if(this._status=d.c.kBuffering,k.responseURL!=null){var M=this._seekHandler.removeURLParameters(k.responseURL);k.responseURL!==this._currentRequestURL&&M!==this._currentRedirectedURL&&(this._currentRedirectedURL=M,this._onURLRedirect&&this._onURLRedirect(M))}var Y=k.getResponseHeader("Content-Length");if(Y!=null&&this._contentLength==null){var ie=parseInt(Y);ie>0&&(this._contentLength=ie,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength))}}else{if(this._status=d.c.kError,!this._onError)throw new _.d("MSStreamLoader: Http code invalid, "+k.status+" "+k.statusText);this._onError(d.b.HTTP_STATUS_CODE_INVALID,{code:k.status,msg:k.statusText})}else if(k.readyState===3&&k.status>=200&&k.status<=299){this._status=d.c.kBuffering;var Q=k.response;this._reader.readAsArrayBuffer(Q)}},R.prototype._xhrOnError=function(L){this._status=d.c.kError;var k=d.b.EXCEPTION,M={code:-1,msg:L.constructor.name+" "+L.type};if(!this._onError)throw new _.d(M.msg);this._onError(k,M)},R.prototype._msrOnProgress=function(L){var k=L.target.result;if(k!=null){var M=k.slice(this._lastTimeBufferSize);this._lastTimeBufferSize=k.byteLength;var Y=this._totalRange.from+this._receivedLength;this._receivedLength+=M.byteLength,this._onDataArrival&&this._onDataArrival(M,Y,this._receivedLength),k.byteLength>=this._bufferLimit&&(o.a.v(this.TAG,"MSStream buffer exceeded max size near ".concat(Y+M.byteLength,", reconnecting...")),this._doReconnectIfNeeded())}else this._doReconnectIfNeeded()},R.prototype._doReconnectIfNeeded=function(){if(this._contentLength==null||this._receivedLength<this._contentLength){this._isReconnecting=!0,this._lastTimeBufferSize=0,this._internalAbort();var L={from:this._totalRange.from+this._receivedLength,to:-1};this._internalOpen(this._dataSource,L,!0)}},R.prototype._msrOnLoad=function(L){this._status=d.c.kComplete,this._onComplete&&this._onComplete(this._totalRange.from,this._totalRange.from+this._receivedLength-1)},R.prototype._msrOnError=function(L){this._status=d.c.kError;var k=0,M=null;if(this._contentLength&&this._receivedLength<this._contentLength?(k=d.b.EARLY_EOF,M={code:-1,msg:"MSStream meet Early-Eof"}):(k=d.b.EARLY_EOF,M={code:-1,msg:L.constructor.name+" "+L.type}),!this._onError)throw new _.d(M.msg);this._onError(k,M)}}(d.a),function(){var B=function(R,L){return(B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,M){k.__proto__=M}||function(k,M){for(var Y in M)Object.prototype.hasOwnProperty.call(M,Y)&&(k[Y]=M[Y])})(R,L)};return function(R,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function k(){this.constructor=R}B(R,L),R.prototype=L===null?Object.create(L):(k.prototype=L.prototype,new k)}}()),b=function(B){function R(L,k){var M=B.call(this,"xhr-range-loader")||this;return M.TAG="RangeLoader",M._seekHandler=L,M._config=k,M._needStash=!1,M._chunkSizeKBList=[128,256,384,512,768,1024,1536,2048,3072,4096,5120,6144,7168,8192],M._currentChunkSizeKB=384,M._currentSpeedNormalized=0,M._zeroSpeedChunkCount=0,M._xhr=null,M._speedSampler=new l,M._requestAbort=!1,M._waitForTotalLength=!1,M._totalLengthReceived=!1,M._currentRequestURL=null,M._currentRedirectedURL=null,M._currentRequestRange=null,M._totalLength=null,M._contentLength=null,M._receivedLength=0,M._lastTimeLoaded=0,M}return O(R,B),R.isSupported=function(){try{var L=new XMLHttpRequest;return L.open("GET","https://example.com",!0),L.responseType="arraybuffer",L.responseType==="arraybuffer"}catch(k){return o.a.w("RangeLoader",k.message),!1}},R.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr=null),B.prototype.destroy.call(this)},Object.defineProperty(R.prototype,"currentSpeed",{get:function(){return this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),R.prototype.open=function(L,k){this._dataSource=L,this._range=k,this._status=d.c.kConnecting;var M=!1;this._dataSource.filesize!=null&&this._dataSource.filesize!==0&&(M=!0,this._totalLength=this._dataSource.filesize),this._totalLengthReceived||M?this._openSubRange():(this._waitForTotalLength=!0,this._internalOpen(this._dataSource,{from:0,to:-1}))},R.prototype._openSubRange=function(){var L=1024*this._currentChunkSizeKB,k=this._range.from+this._receivedLength,M=k+L;this._contentLength!=null&&M-this._range.from>=this._contentLength&&(M=this._range.from+this._contentLength-1),this._currentRequestRange={from:k,to:M},this._internalOpen(this._dataSource,this._currentRequestRange)},R.prototype._internalOpen=function(L,k){this._lastTimeLoaded=0;var M=L.url;this._config.reuseRedirectedURL&&(this._currentRedirectedURL!=null?M=this._currentRedirectedURL:L.redirectedURL!=null&&(M=L.redirectedURL));var Y=this._seekHandler.getConfig(M,k);this._currentRequestURL=Y.url;var ie=this._xhr=new XMLHttpRequest;if(ie.open("GET",Y.url,!0),ie.responseType="arraybuffer",ie.onreadystatechange=this._onReadyStateChange.bind(this),ie.onprogress=this._onProgress.bind(this),ie.onload=this._onLoad.bind(this),ie.onerror=this._onXhrError.bind(this),L.withCredentials&&(ie.withCredentials=!0),typeof Y.headers=="object"){var Q=Y.headers;for(var ne in Q)Q.hasOwnProperty(ne)&&ie.setRequestHeader(ne,Q[ne])}if(typeof this._config.headers=="object"){Q=this._config.headers;for(var ne in Q)Q.hasOwnProperty(ne)&&ie.setRequestHeader(ne,Q[ne])}ie.send()},R.prototype.abort=function(){this._requestAbort=!0,this._internalAbort(),this._status=d.c.kComplete},R.prototype._internalAbort=function(){this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr.abort(),this._xhr=null)},R.prototype._onReadyStateChange=function(L){var k=L.target;if(k.readyState===2){if(k.responseURL!=null){var M=this._seekHandler.removeURLParameters(k.responseURL);k.responseURL!==this._currentRequestURL&&M!==this._currentRedirectedURL&&(this._currentRedirectedURL=M,this._onURLRedirect&&this._onURLRedirect(M))}if(k.status>=200&&k.status<=299){if(this._waitForTotalLength)return;this._status=d.c.kBuffering}else{if(this._status=d.c.kError,!this._onError)throw new _.d("RangeLoader: Http code invalid, "+k.status+" "+k.statusText);this._onError(d.b.HTTP_STATUS_CODE_INVALID,{code:k.status,msg:k.statusText})}}},R.prototype._onProgress=function(L){if(this._status!==d.c.kError){if(this._contentLength===null){var k=!1;if(this._waitForTotalLength){this._waitForTotalLength=!1,this._totalLengthReceived=!0,k=!0;var M=L.total;this._internalAbort(),M!=null&M!==0&&(this._totalLength=M)}if(this._range.to===-1?this._contentLength=this._totalLength-this._range.from:this._contentLength=this._range.to-this._range.from+1,k)return void this._openSubRange();this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)}var Y=L.loaded-this._lastTimeLoaded;this._lastTimeLoaded=L.loaded,this._speedSampler.addBytes(Y)}},R.prototype._normalizeSpeed=function(L){var k=this._chunkSizeKBList,M=k.length-1,Y=0,ie=0,Q=M;if(L<k[0])return k[0];for(;ie<=Q;){if((Y=ie+Math.floor((Q-ie)/2))===M||L>=k[Y]&&L<k[Y+1])return k[Y];k[Y]<L?ie=Y+1:Q=Y-1}},R.prototype._onLoad=function(L){if(this._status!==d.c.kError)if(this._waitForTotalLength)this._waitForTotalLength=!1;else{this._lastTimeLoaded=0;var k=this._speedSampler.lastSecondKBps;if(k===0&&(this._zeroSpeedChunkCount++,this._zeroSpeedChunkCount>=3&&(k=this._speedSampler.currentKBps)),k!==0){var M=this._normalizeSpeed(k);this._currentSpeedNormalized!==M&&(this._currentSpeedNormalized=M,this._currentChunkSizeKB=M)}var Y=L.target.response,ie=this._range.from+this._receivedLength;this._receivedLength+=Y.byteLength;var Q=!1;this._contentLength!=null&&this._receivedLength<this._contentLength?this._openSubRange():Q=!0,this._onDataArrival&&this._onDataArrival(Y,ie,this._receivedLength),Q&&(this._status=d.c.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1))}},R.prototype._onXhrError=function(L){this._status=d.c.kError;var k=0,M=null;if(this._contentLength&&this._receivedLength>0&&this._receivedLength<this._contentLength?(k=d.b.EARLY_EOF,M={code:-1,msg:"RangeLoader meet Early-Eof"}):(k=d.b.EXCEPTION,M={code:-1,msg:L.constructor.name+" "+L.type}),!this._onError)throw new _.d(M.msg);this._onError(k,M)},R}(d.a),E=function(){var B=function(R,L){return(B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,M){k.__proto__=M}||function(k,M){for(var Y in M)Object.prototype.hasOwnProperty.call(M,Y)&&(k[Y]=M[Y])})(R,L)};return function(R,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function k(){this.constructor=R}B(R,L),R.prototype=L===null?Object.create(L):(k.prototype=L.prototype,new k)}}(),x=function(B){function R(){var L=B.call(this,"websocket-loader")||this;return L.TAG="WebSocketLoader",L._needStash=!0,L._ws=null,L._requestAbort=!1,L._receivedLength=0,L}return E(R,B),R.isSupported=function(){try{return self.WebSocket!==void 0}catch{return!1}},R.prototype.destroy=function(){this._ws&&this.abort(),B.prototype.destroy.call(this)},R.prototype.open=function(L){try{var k=this._ws=new self.WebSocket(L.url);k.binaryType="arraybuffer",k.onopen=this._onWebSocketOpen.bind(this),k.onclose=this._onWebSocketClose.bind(this),k.onmessage=this._onWebSocketMessage.bind(this),k.onerror=this._onWebSocketError.bind(this),this._status=d.c.kConnecting}catch(Y){this._status=d.c.kError;var M={code:Y.code,msg:Y.message};if(!this._onError)throw new _.d(M.msg);this._onError(d.b.EXCEPTION,M)}},R.prototype.abort=function(){var L=this._ws;!L||L.readyState!==0&&L.readyState!==1||(this._requestAbort=!0,L.close()),this._ws=null,this._status=d.c.kComplete},R.prototype._onWebSocketOpen=function(L){this._status=d.c.kBuffering},R.prototype._onWebSocketClose=function(L){this._requestAbort!==!0?(this._status=d.c.kComplete,this._onComplete&&this._onComplete(0,this._receivedLength-1)):this._requestAbort=!1},R.prototype._onWebSocketMessage=function(L){var k=this;if(L.data instanceof ArrayBuffer)this._dispatchArrayBuffer(L.data);else if(L.data instanceof Blob){var M=new FileReader;M.onload=function(){k._dispatchArrayBuffer(M.result)},M.readAsArrayBuffer(L.data)}else{this._status=d.c.kError;var Y={code:-1,msg:"Unsupported WebSocket message type: "+L.data.constructor.name};if(!this._onError)throw new _.d(Y.msg);this._onError(d.b.EXCEPTION,Y)}},R.prototype._dispatchArrayBuffer=function(L){var k=L,M=this._receivedLength;this._receivedLength+=k.byteLength,this._onDataArrival&&this._onDataArrival(k,M,this._receivedLength)},R.prototype._onWebSocketError=function(L){this._status=d.c.kError;var k={code:L.code,msg:L.message};if(!this._onError)throw new _.d(k.msg);this._onError(d.b.EXCEPTION,k)},R}(d.a),T=function(){function B(R){this._zeroStart=R||!1}return B.prototype.getConfig=function(R,L){var k={};if(L.from!==0||L.to!==-1){var M=void 0;M=L.to!==-1?"bytes=".concat(L.from.toString(),"-").concat(L.to.toString()):"bytes=".concat(L.from.toString(),"-"),k.Range=M}else this._zeroStart&&(k.Range="bytes=0-");return{url:R,headers:k}},B.prototype.removeURLParameters=function(R){return R},B}(),j=function(){function B(R,L){this._startName=R,this._endName=L}return B.prototype.getConfig=function(R,L){var k=R;if(L.from!==0||L.to!==-1){var M=!0;k.indexOf("?")===-1&&(k+="?",M=!1),M&&(k+="&"),k+="".concat(this._startName,"=").concat(L.from.toString()),L.to!==-1&&(k+="&".concat(this._endName,"=").concat(L.to.toString()))}return{url:k,headers:{}}},B.prototype.removeURLParameters=function(R){var L=R.split("?")[0],k=void 0,M=R.indexOf("?");M!==-1&&(k=R.substring(M+1));var Y="";if(k!=null&&k.length>0)for(var ie=k.split("&"),Q=0;Q<ie.length;Q++){var ne=ie[Q].split("="),de=Q>0;ne[0]!==this._startName&&ne[0]!==this._endName&&(de&&(Y+="&"),Y+=ie[Q])}return Y.length===0?L:L+"?"+Y},B}(),W=function(){function B(R,L,k){this.TAG="IOController",this._config=L,this._extraData=k,this._stashInitialSize=65536,L.stashInitialSize!=null&&L.stashInitialSize>0&&(this._stashInitialSize=L.stashInitialSize),this._stashUsed=0,this._stashSize=this._stashInitialSize,this._bufferSize=Math.max(this._stashSize,3145728),this._stashBuffer=new ArrayBuffer(this._bufferSize),this._stashByteStart=0,this._enableStash=!0,L.enableStashBuffer===!1&&(this._enableStash=!1),this._loader=null,this._loaderClass=null,this._seekHandler=null,this._dataSource=R,this._isWebSocketURL=/wss?:\/\/(.+?)/.test(R.url),this._refTotalLength=R.filesize?R.filesize:null,this._totalLength=this._refTotalLength,this._fullRequestFlag=!1,this._currentRange=null,this._redirectedURL=null,this._speedNormalized=0,this._speedSampler=new l,this._speedNormalizeList=[32,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096],this._isEarlyEofReconnecting=!1,this._paused=!1,this._resumeFrom=0,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._selectSeekHandler(),this._selectLoader(),this._createLoader()}return B.prototype.destroy=function(){this._loader.isWorking()&&this._loader.abort(),this._loader.destroy(),this._loader=null,this._loaderClass=null,this._dataSource=null,this._stashBuffer=null,this._stashUsed=this._stashSize=this._bufferSize=this._stashByteStart=0,this._currentRange=null,this._speedSampler=null,this._isEarlyEofReconnecting=!1,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._extraData=null},B.prototype.isWorking=function(){return this._loader&&this._loader.isWorking()&&!this._paused},B.prototype.isPaused=function(){return this._paused},Object.defineProperty(B.prototype,"status",{get:function(){return this._loader.status},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"extraData",{get:function(){return this._extraData},set:function(R){this._extraData=R},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(R){this._onDataArrival=R},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onSeeked",{get:function(){return this._onSeeked},set:function(R){this._onSeeked=R},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onError",{get:function(){return this._onError},set:function(R){this._onError=R},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onComplete",{get:function(){return this._onComplete},set:function(R){this._onComplete=R},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onRedirect",{get:function(){return this._onRedirect},set:function(R){this._onRedirect=R},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onRecoveredEarlyEof",{get:function(){return this._onRecoveredEarlyEof},set:function(R){this._onRecoveredEarlyEof=R},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"currentURL",{get:function(){return this._dataSource.url},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"hasRedirect",{get:function(){return this._redirectedURL!=null||this._dataSource.redirectedURL!=null},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"currentRedirectedURL",{get:function(){return this._redirectedURL||this._dataSource.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"currentSpeed",{get:function(){return this._loaderClass===b?this._loader.currentSpeed:this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"loaderType",{get:function(){return this._loader.type},enumerable:!1,configurable:!0}),B.prototype._selectSeekHandler=function(){var R=this._config;if(R.seekType==="range")this._seekHandler=new T(this._config.rangeLoadZeroStart);else if(R.seekType==="param"){var L=R.seekParamStart||"bstart",k=R.seekParamEnd||"bend";this._seekHandler=new j(L,k)}else{if(R.seekType!=="custom")throw new _.b("Invalid seekType in config: ".concat(R.seekType));if(typeof R.customSeekHandler!="function")throw new _.b("Custom seekType specified in config but invalid customSeekHandler!");this._seekHandler=new R.customSeekHandler}},B.prototype._selectLoader=function(){if(this._config.customLoader!=null)this._loaderClass=this._config.customLoader;else if(this._isWebSocketURL)this._loaderClass=x;else if(g.isSupported())this._loaderClass=g;else if(C.isSupported())this._loaderClass=C;else{if(!b.isSupported())throw new _.d("Your browser doesn't support xhr with arraybuffer responseType!");this._loaderClass=b}},B.prototype._createLoader=function(){this._loader=new this._loaderClass(this._seekHandler,this._config),this._loader.needStashBuffer===!1&&(this._enableStash=!1),this._loader.onContentLengthKnown=this._onContentLengthKnown.bind(this),this._loader.onURLRedirect=this._onURLRedirect.bind(this),this._loader.onDataArrival=this._onLoaderChunkArrival.bind(this),this._loader.onComplete=this._onLoaderComplete.bind(this),this._loader.onError=this._onLoaderError.bind(this)},B.prototype.open=function(R){this._currentRange={from:0,to:-1},R&&(this._currentRange.from=R),this._speedSampler.reset(),R||(this._fullRequestFlag=!0),this._loader.open(this._dataSource,Object.assign({},this._currentRange))},B.prototype.abort=function(){this._loader.abort(),this._paused&&(this._paused=!1,this._resumeFrom=0)},B.prototype.pause=function(){this.isWorking()&&(this._loader.abort(),this._stashUsed!==0?(this._resumeFrom=this._stashByteStart,this._currentRange.to=this._stashByteStart-1):this._resumeFrom=this._currentRange.to+1,this._stashUsed=0,this._stashByteStart=0,this._paused=!0)},B.prototype.resume=function(){if(this._paused){this._paused=!1;var R=this._resumeFrom;this._resumeFrom=0,this._internalSeek(R,!0)}},B.prototype.seek=function(R){this._paused=!1,this._stashUsed=0,this._stashByteStart=0,this._internalSeek(R,!0)},B.prototype._internalSeek=function(R,L){this._loader.isWorking()&&this._loader.abort(),this._flushStashBuffer(L),this._loader.destroy(),this._loader=null;var k={from:R,to:-1};this._currentRange={from:k.from,to:-1},this._speedSampler.reset(),this._stashSize=this._stashInitialSize,this._createLoader(),this._loader.open(this._dataSource,k),this._onSeeked&&this._onSeeked()},B.prototype.updateUrl=function(R){if(!R||typeof R!="string"||R.length===0)throw new _.b("Url must be a non-empty string!");this._dataSource.url=R},B.prototype._expandBuffer=function(R){for(var L=this._stashSize;L+1048576<R;)L*=2;if((L+=1048576)!==this._bufferSize){var k=new ArrayBuffer(L);if(this._stashUsed>0){var M=new Uint8Array(this._stashBuffer,0,this._stashUsed);new Uint8Array(k,0,L).set(M,0)}this._stashBuffer=k,this._bufferSize=L}},B.prototype._normalizeSpeed=function(R){var L=this._speedNormalizeList,k=L.length-1,M=0,Y=0,ie=k;if(R<L[0])return L[0];for(;Y<=ie;){if((M=Y+Math.floor((ie-Y)/2))===k||R>=L[M]&&R<L[M+1])return L[M];L[M]<R?Y=M+1:ie=M-1}},B.prototype._adjustStashSize=function(R){var L=0;(L=this._config.isLive?R/8:R<512?R:R>=512&&R<=1024?Math.floor(1.5*R):2*R)>8192&&(L=8192);var k=1024*L+1048576;this._bufferSize<k&&this._expandBuffer(k),this._stashSize=1024*L},B.prototype._dispatchChunks=function(R,L){return this._currentRange.to=L+R.byteLength-1,this._onDataArrival(R,L)},B.prototype._onURLRedirect=function(R){this._redirectedURL=R,this._onRedirect&&this._onRedirect(R)},B.prototype._onContentLengthKnown=function(R){R&&this._fullRequestFlag&&(this._totalLength=R,this._fullRequestFlag=!1)},B.prototype._onLoaderChunkArrival=function(R,L,k){if(!this._onDataArrival)throw new _.a("IOController: No existing consumer (onDataArrival) callback!");if(!this._paused){this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,this._onRecoveredEarlyEof&&this._onRecoveredEarlyEof()),this._speedSampler.addBytes(R.byteLength);var M=this._speedSampler.lastSecondKBps;if(M!==0){var Y=this._normalizeSpeed(M);this._speedNormalized!==Y&&(this._speedNormalized=Y,this._adjustStashSize(Y))}if(this._enableStash)if(this._stashUsed===0&&this._stashByteStart===0&&(this._stashByteStart=L),this._stashUsed+R.byteLength<=this._stashSize)(ne=new Uint8Array(this._stashBuffer,0,this._stashSize)).set(new Uint8Array(R),this._stashUsed),this._stashUsed+=R.byteLength;else if(ne=new Uint8Array(this._stashBuffer,0,this._bufferSize),this._stashUsed>0){var ie=this._stashBuffer.slice(0,this._stashUsed);(de=this._dispatchChunks(ie,this._stashByteStart))<ie.byteLength?de>0&&(xe=new Uint8Array(ie,de),ne.set(xe,0),this._stashUsed=xe.byteLength,this._stashByteStart+=de):(this._stashUsed=0,this._stashByteStart+=de),this._stashUsed+R.byteLength>this._bufferSize&&(this._expandBuffer(this._stashUsed+R.byteLength),ne=new Uint8Array(this._stashBuffer,0,this._bufferSize)),ne.set(new Uint8Array(R),this._stashUsed),this._stashUsed+=R.byteLength}else(de=this._dispatchChunks(R,L))<R.byteLength&&((Q=R.byteLength-de)>this._bufferSize&&(this._expandBuffer(Q),ne=new Uint8Array(this._stashBuffer,0,this._bufferSize)),ne.set(new Uint8Array(R,de),0),this._stashUsed+=Q,this._stashByteStart=L+de);else if(this._stashUsed===0){var Q;(de=this._dispatchChunks(R,L))<R.byteLength&&((Q=R.byteLength-de)>this._bufferSize&&this._expandBuffer(Q),(ne=new Uint8Array(this._stashBuffer,0,this._bufferSize)).set(new Uint8Array(R,de),0),this._stashUsed+=Q,this._stashByteStart=L+de)}else{var ne,de;if(this._stashUsed+R.byteLength>this._bufferSize&&this._expandBuffer(this._stashUsed+R.byteLength),(ne=new Uint8Array(this._stashBuffer,0,this._bufferSize)).set(new Uint8Array(R),this._stashUsed),this._stashUsed+=R.byteLength,(de=this._dispatchChunks(this._stashBuffer.slice(0,this._stashUsed),this._stashByteStart))<this._stashUsed&&de>0){var xe=new Uint8Array(this._stashBuffer,de);ne.set(xe,0)}this._stashUsed-=de,this._stashByteStart+=de}}},B.prototype._flushStashBuffer=function(R){if(this._stashUsed>0){var L=this._stashBuffer.slice(0,this._stashUsed),k=this._dispatchChunks(L,this._stashByteStart),M=L.byteLength-k;if(k<L.byteLength){if(!R){if(k>0){var Y=new Uint8Array(this._stashBuffer,0,this._bufferSize),ie=new Uint8Array(L,k);Y.set(ie,0),this._stashUsed=ie.byteLength,this._stashByteStart+=k}return 0}o.a.w(this.TAG,"".concat(M," bytes unconsumed data remain when flush buffer, dropped"))}return this._stashUsed=0,this._stashByteStart=0,M}return 0},B.prototype._onLoaderComplete=function(R,L){this._flushStashBuffer(!0),this._onComplete&&this._onComplete(this._extraData)},B.prototype._onLoaderError=function(R,L){switch(o.a.e(this.TAG,"Loader error, code = ".concat(L.code,", msg = ").concat(L.msg)),this._flushStashBuffer(!1),this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,R=d.b.UNRECOVERABLE_EARLY_EOF),R){case d.b.EARLY_EOF:if(!this._config.isLive&&this._totalLength){var k=this._currentRange.to+1;return void(k<this._totalLength&&(o.a.w(this.TAG,"Connection lost, trying reconnect..."),this._isEarlyEofReconnecting=!0,this._internalSeek(k,!1)))}R=d.b.UNRECOVERABLE_EARLY_EOF;break;case d.b.UNRECOVERABLE_EARLY_EOF:case d.b.CONNECTING_TIMEOUT:case d.b.HTTP_STATUS_CODE_INVALID:case d.b.EXCEPTION:}if(!this._onError)throw new _.d("IOException: "+L.msg);this._onError(R,L)},B}();r.a=W},function(n,r,i){var a=function(){function o(){}return o.install=function(){Object.setPrototypeOf=Object.setPrototypeOf||function(l,d){return l.__proto__=d,l},Object.assign=Object.assign||function(l){if(l==null)throw new TypeError("Cannot convert undefined or null to object");for(var d=Object(l),h=1;h<arguments.length;h++){var _=arguments[h];if(_!=null)for(var y in _)_.hasOwnProperty(y)&&(d[y]=_[y])}return d},String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(l,d){var h=d>0?0|d:0;return this.substring(h,h+l.length)===l}}),typeof self.Promise!="function"&&i(21).polyfill()},o}();a.install(),r.a=a},function(n,r,i){var a=i(9),o=i.n(a),l=i(0),d=i(5),h=i(7),_=i(3),y=function(){function g(m){this.TAG="MSEController",this._config=m,this._emitter=new o.a,this._config.isLive&&this._config.autoCleanupSourceBuffer==null&&(this._config.autoCleanupSourceBuffer=!0),this.e={onSourceOpen:this._onSourceOpen.bind(this),onSourceEnded:this._onSourceEnded.bind(this),onSourceClose:this._onSourceClose.bind(this),onStartStreaming:this._onStartStreaming.bind(this),onEndStreaming:this._onEndStreaming.bind(this),onQualityChange:this._onQualityChange.bind(this),onSourceBufferError:this._onSourceBufferError.bind(this),onSourceBufferUpdateEnd:this._onSourceBufferUpdateEnd.bind(this)},this._useManagedMediaSource="ManagedMediaSource"in self&&!("MediaSource"in self),this._mediaSource=null,this._mediaSourceObjectURL=null,this._mediaElementProxy=null,this._isBufferFull=!1,this._hasPendingEos=!1,this._requireSetMediaDuration=!1,this._pendingMediaDuration=0,this._pendingSourceBufferInit=[],this._mimeTypes={video:null,audio:null},this._sourceBuffers={video:null,audio:null},this._lastInitSegments={video:null,audio:null},this._pendingSegments={video:[],audio:[]},this._pendingRemoveRanges={video:[],audio:[]}}return g.prototype.destroy=function(){this._mediaSource&&this.shutdown(),this._mediaSourceObjectURL&&this.revokeObjectURL(),this.e=null,this._emitter.removeAllListeners(),this._emitter=null},g.prototype.on=function(m,C){this._emitter.addListener(m,C)},g.prototype.off=function(m,C){this._emitter.removeListener(m,C)},g.prototype.initialize=function(m){if(this._mediaSource)throw new _.a("MediaSource has been attached to an HTMLMediaElement!");this._useManagedMediaSource&&l.a.v(this.TAG,"Using ManagedMediaSource");var C=this._mediaSource=this._useManagedMediaSource?new self.ManagedMediaSource:new self.MediaSource;C.addEventListener("sourceopen",this.e.onSourceOpen),C.addEventListener("sourceended",this.e.onSourceEnded),C.addEventListener("sourceclose",this.e.onSourceClose),this._useManagedMediaSource&&(C.addEventListener("startstreaming",this.e.onStartStreaming),C.addEventListener("endstreaming",this.e.onEndStreaming),C.addEventListener("qualitychange",this.e.onQualityChange)),this._mediaElementProxy=m},g.prototype.shutdown=function(){if(this._mediaSource){var m=this._mediaSource;for(var C in this._sourceBuffers){var w=this._pendingSegments[C];w.splice(0,w.length),this._pendingSegments[C]=null,this._pendingRemoveRanges[C]=null,this._lastInitSegments[C]=null;var O=this._sourceBuffers[C];if(O){if(m.readyState!=="closed"){try{m.removeSourceBuffer(O)}catch(b){l.a.e(this.TAG,b.message)}O.removeEventListener("error",this.e.onSourceBufferError),O.removeEventListener("updateend",this.e.onSourceBufferUpdateEnd)}this._mimeTypes[C]=null,this._sourceBuffers[C]=null}}if(m.readyState==="open")try{m.endOfStream()}catch(b){l.a.e(this.TAG,b.message)}this._mediaElementProxy=null,m.removeEventListener("sourceopen",this.e.onSourceOpen),m.removeEventListener("sourceended",this.e.onSourceEnded),m.removeEventListener("sourceclose",this.e.onSourceClose),this._useManagedMediaSource&&(m.removeEventListener("startstreaming",this.e.onStartStreaming),m.removeEventListener("endstreaming",this.e.onEndStreaming),m.removeEventListener("qualitychange",this.e.onQualityChange)),this._pendingSourceBufferInit=[],this._isBufferFull=!1,this._mediaSource=null}},g.prototype.isManagedMediaSource=function(){return this._useManagedMediaSource},g.prototype.getObject=function(){if(!this._mediaSource)throw new _.a("MediaSource has not been initialized yet!");return this._mediaSource},g.prototype.getHandle=function(){if(!this._mediaSource)throw new _.a("MediaSource has not been initialized yet!");return this._mediaSource.handle},g.prototype.getObjectURL=function(){if(!this._mediaSource)throw new _.a("MediaSource has not been initialized yet!");return this._mediaSourceObjectURL==null&&(this._mediaSourceObjectURL=URL.createObjectURL(this._mediaSource)),this._mediaSourceObjectURL},g.prototype.revokeObjectURL=function(){this._mediaSourceObjectURL&&(URL.revokeObjectURL(this._mediaSourceObjectURL),this._mediaSourceObjectURL=null)},g.prototype.appendInitSegment=function(m,C){if(C===void 0&&(C=void 0),!this._mediaSource||this._mediaSource.readyState!=="open"||this._mediaSource.streaming===!1)return this._pendingSourceBufferInit.push(m),void this._pendingSegments[m.type].push(m);var w=m,O="".concat(w.container);w.codec&&w.codec.length>0&&(w.codec==="opus"&&d.a.safari&&(w.codec="Opus"),O+=";codecs=".concat(w.codec));var b=!1;if(l.a.v(this.TAG,"Received Initialization Segment, mimeType: "+O),this._lastInitSegments[w.type]=w,O!==this._mimeTypes[w.type]){if(this._mimeTypes[w.type])l.a.v(this.TAG,"Notice: ".concat(w.type," mimeType changed, origin: ").concat(this._mimeTypes[w.type],", target: ").concat(O));else{b=!0;try{var E=this._sourceBuffers[w.type]=this._mediaSource.addSourceBuffer(O);E.addEventListener("error",this.e.onSourceBufferError),E.addEventListener("updateend",this.e.onSourceBufferUpdateEnd)}catch(x){return l.a.e(this.TAG,x.message),void this._emitter.emit(h.a.ERROR,{code:x.code,msg:x.message})}}this._mimeTypes[w.type]=O}C||this._pendingSegments[w.type].push(w),b||this._sourceBuffers[w.type]&&!this._sourceBuffers[w.type].updating&&this._doAppendSegments(),d.a.safari&&w.container==="audio/mpeg"&&w.mediaDuration>0&&(this._requireSetMediaDuration=!0,this._pendingMediaDuration=w.mediaDuration/1e3,this._updateMediaSourceDuration())},g.prototype.appendMediaSegment=function(m){var C=m;this._pendingSegments[C.type].push(C),this._config.autoCleanupSourceBuffer&&this._needCleanupSourceBuffer()&&this._doCleanupSourceBuffer();var w=this._sourceBuffers[C.type];!w||w.updating||this._hasPendingRemoveRanges()||this._doAppendSegments()},g.prototype.flush=function(){for(var m in this._sourceBuffers)if(this._sourceBuffers[m]){var C=this._sourceBuffers[m];if(this._mediaSource.readyState==="open")try{C.abort()}catch(T){l.a.e(this.TAG,T.message)}var w=this._pendingSegments[m];if(w.splice(0,w.length),this._mediaSource.readyState!=="closed"){for(var O=0;O<C.buffered.length;O++){var b=C.buffered.start(O),E=C.buffered.end(O);this._pendingRemoveRanges[m].push({start:b,end:E})}if(C.updating||this._doRemoveRanges(),d.a.safari){var x=this._lastInitSegments[m];x&&(this._pendingSegments[m].push(x),C.updating||this._doAppendSegments())}}}},g.prototype.endOfStream=function(){var m=this._mediaSource,C=this._sourceBuffers;m&&m.readyState==="open"?C.video&&C.video.updating||C.audio&&C.audio.updating?this._hasPendingEos=!0:(this._hasPendingEos=!1,m.endOfStream()):m&&m.readyState==="closed"&&this._hasPendingSegments()&&(this._hasPendingEos=!0)},g.prototype._needCleanupSourceBuffer=function(){if(!this._config.autoCleanupSourceBuffer)return!1;var m=this._mediaElementProxy.getCurrentTime();for(var C in this._sourceBuffers){var w=this._sourceBuffers[C];if(w){var O=w.buffered;if(O.length>=1&&m-O.start(0)>=this._config.autoCleanupMaxBackwardDuration)return!0}}return!1},g.prototype._doCleanupSourceBuffer=function(){var m=this._mediaElementProxy.getCurrentTime();for(var C in this._sourceBuffers){var w=this._sourceBuffers[C];if(w){for(var O=w.buffered,b=!1,E=0;E<O.length;E++){var x=O.start(E),T=O.end(E);if(x<=m&&m<T+3){if(m-x>=this._config.autoCleanupMaxBackwardDuration){b=!0;var j=m-this._config.autoCleanupMinBackwardDuration;this._pendingRemoveRanges[C].push({start:x,end:j})}}else T<m&&(b=!0,this._pendingRemoveRanges[C].push({start:x,end:T}))}b&&!w.updating&&this._doRemoveRanges()}}},g.prototype._updateMediaSourceDuration=function(){var m=this._sourceBuffers;if(this._mediaElementProxy.getReadyState()!==0&&this._mediaSource.readyState==="open"&&!(m.video&&m.video.updating||m.audio&&m.audio.updating)){var C=this._mediaSource.duration,w=this._pendingMediaDuration;w>0&&(isNaN(C)||w>C)&&(l.a.v(this.TAG,"Update MediaSource duration from ".concat(C," to ").concat(w)),this._mediaSource.duration=w),this._requireSetMediaDuration=!1,this._pendingMediaDuration=0}},g.prototype._doRemoveRanges=function(){for(var m in this._pendingRemoveRanges)if(this._sourceBuffers[m]&&!this._sourceBuffers[m].updating)for(var C=this._sourceBuffers[m],w=this._pendingRemoveRanges[m];w.length&&!C.updating;){var O=w.shift();C.remove(O.start,O.end)}},g.prototype._doAppendSegments=function(){var m=this._pendingSegments;for(var C in m)if(this._sourceBuffers[C]&&!this._sourceBuffers[C].updating&&this._mediaSource.streaming!==!1&&m[C].length>0){var w=m[C].shift();if(typeof w.timestampOffset=="number"&&isFinite(w.timestampOffset)){var O=this._sourceBuffers[C].timestampOffset,b=w.timestampOffset/1e3;Math.abs(O-b)>.1&&(l.a.v(this.TAG,"Update MPEG audio timestampOffset from ".concat(O," to ").concat(b)),this._sourceBuffers[C].timestampOffset=b),delete w.timestampOffset}if(!w.data||w.data.byteLength===0)continue;try{this._sourceBuffers[C].appendBuffer(w.data),this._isBufferFull=!1}catch(E){this._pendingSegments[C].unshift(w),E.code===22?(this._isBufferFull||this._emitter.emit(h.a.BUFFER_FULL),this._isBufferFull=!0):(l.a.e(this.TAG,E.message),this._emitter.emit(h.a.ERROR,{code:E.code,msg:E.message}))}}},g.prototype._onSourceOpen=function(){if(l.a.v(this.TAG,"MediaSource onSourceOpen"),this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._pendingSourceBufferInit.length>0)for(var m=this._pendingSourceBufferInit;m.length;){var C=m.shift();this.appendInitSegment(C,!0)}this._hasPendingSegments()&&this._doAppendSegments(),this._emitter.emit(h.a.SOURCE_OPEN)},g.prototype._onStartStreaming=function(){l.a.v(this.TAG,"ManagedMediaSource onStartStreaming"),this._emitter.emit(h.a.START_STREAMING)},g.prototype._onEndStreaming=function(){l.a.v(this.TAG,"ManagedMediaSource onEndStreaming"),this._emitter.emit(h.a.END_STREAMING)},g.prototype._onQualityChange=function(){l.a.v(this.TAG,"ManagedMediaSource onQualityChange")},g.prototype._onSourceEnded=function(){l.a.v(this.TAG,"MediaSource onSourceEnded")},g.prototype._onSourceClose=function(){l.a.v(this.TAG,"MediaSource onSourceClose"),this._mediaSource&&this.e!=null&&(this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this._mediaSource.removeEventListener("sourceclose",this.e.onSourceClose),this._useManagedMediaSource&&(this._mediaSource.removeEventListener("startstreaming",this.e.onStartStreaming),this._mediaSource.removeEventListener("endstreaming",this.e.onEndStreaming),this._mediaSource.removeEventListener("qualitychange",this.e.onQualityChange)))},g.prototype._hasPendingSegments=function(){var m=this._pendingSegments;return m.video.length>0||m.audio.length>0},g.prototype._hasPendingRemoveRanges=function(){var m=this._pendingRemoveRanges;return m.video.length>0||m.audio.length>0},g.prototype._onSourceBufferUpdateEnd=function(){this._requireSetMediaDuration?this._updateMediaSourceDuration():this._hasPendingRemoveRanges()?this._doRemoveRanges():this._hasPendingSegments()?this._doAppendSegments():this._hasPendingEos&&this.endOfStream(),this._emitter.emit(h.a.UPDATE_END)},g.prototype._onSourceBufferError=function(m){l.a.e(this.TAG,"SourceBuffer Error: ".concat(m))},g}();r.a=y},function(n,r,i){var a=i(9),o=i.n(a),l=i(18),d=i.n(l),h=i(0),_=i(8),y=i(13),g=i(1),m=(i(19),i(12)),C=function(){function w(O,b){if(this.TAG="Transmuxer",this._emitter=new o.a,b.enableWorker&&typeof Worker<"u")try{this._worker=d()(19),this._workerDestroying=!1,this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",param:[O,b]}),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this)},_.a.registerListener(this.e.onLoggingConfigChanged),this._worker.postMessage({cmd:"logging_config",param:_.a.getConfig()})}catch{h.a.e(this.TAG,"Error while initialize transmuxing worker, fallback to inline transmuxing"),this._worker=null,this._controller=new y.a(O,b)}else this._controller=new y.a(O,b);if(this._controller){var E=this._controller;E.on(g.a.IO_ERROR,this._onIOError.bind(this)),E.on(g.a.DEMUX_ERROR,this._onDemuxError.bind(this)),E.on(g.a.INIT_SEGMENT,this._onInitSegment.bind(this)),E.on(g.a.MEDIA_SEGMENT,this._onMediaSegment.bind(this)),E.on(g.a.LOADING_COMPLETE,this._onLoadingComplete.bind(this)),E.on(g.a.RECOVERED_EARLY_EOF,this._onRecoveredEarlyEof.bind(this)),E.on(g.a.MEDIA_INFO,this._onMediaInfo.bind(this)),E.on(g.a.METADATA_ARRIVED,this._onMetaDataArrived.bind(this)),E.on(g.a.SCRIPTDATA_ARRIVED,this._onScriptDataArrived.bind(this)),E.on(g.a.TIMED_ID3_METADATA_ARRIVED,this._onTimedID3MetadataArrived.bind(this)),E.on(g.a.SYNCHRONOUS_KLV_METADATA_ARRIVED,this._onSynchronousKLVMetadataArrived.bind(this)),E.on(g.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED,this._onAsynchronousKLVMetadataArrived.bind(this)),E.on(g.a.SMPTE2038_METADATA_ARRIVED,this._onSMPTE2038MetadataArrived.bind(this)),E.on(g.a.SCTE35_METADATA_ARRIVED,this._onSCTE35MetadataArrived.bind(this)),E.on(g.a.PES_PRIVATE_DATA_DESCRIPTOR,this._onPESPrivateDataDescriptor.bind(this)),E.on(g.a.PES_PRIVATE_DATA_ARRIVED,this._onPESPrivateDataArrived.bind(this)),E.on(g.a.STATISTICS_INFO,this._onStatisticsInfo.bind(this)),E.on(g.a.RECOMMEND_SEEKPOINT,this._onRecommendSeekpoint.bind(this))}}return w.prototype.destroy=function(){this._worker?this._workerDestroying||(this._workerDestroying=!0,this._worker.postMessage({cmd:"destroy"}),_.a.removeListener(this.e.onLoggingConfigChanged),this.e=null):(this._controller.destroy(),this._controller=null),this._emitter.removeAllListeners(),this._emitter=null},w.prototype.on=function(O,b){this._emitter.addListener(O,b)},w.prototype.off=function(O,b){this._emitter.removeListener(O,b)},w.prototype.hasWorker=function(){return this._worker!=null},w.prototype.open=function(){this._worker?this._worker.postMessage({cmd:"start"}):this._controller.start()},w.prototype.close=function(){this._worker?this._worker.postMessage({cmd:"stop"}):this._controller.stop()},w.prototype.seek=function(O){this._worker?this._worker.postMessage({cmd:"seek",param:O}):this._controller.seek(O)},w.prototype.pause=function(){this._worker?this._worker.postMessage({cmd:"pause"}):this._controller.pause()},w.prototype.resume=function(){this._worker?this._worker.postMessage({cmd:"resume"}):this._controller.resume()},w.prototype._onInitSegment=function(O,b){var E=this;Promise.resolve().then(function(){E._emitter.emit(g.a.INIT_SEGMENT,O,b)})},w.prototype._onMediaSegment=function(O,b){var E=this;Promise.resolve().then(function(){E._emitter.emit(g.a.MEDIA_SEGMENT,O,b)})},w.prototype._onLoadingComplete=function(){var O=this;Promise.resolve().then(function(){O._emitter.emit(g.a.LOADING_COMPLETE)})},w.prototype._onRecoveredEarlyEof=function(){var O=this;Promise.resolve().then(function(){O._emitter.emit(g.a.RECOVERED_EARLY_EOF)})},w.prototype._onMediaInfo=function(O){var b=this;Promise.resolve().then(function(){b._emitter.emit(g.a.MEDIA_INFO,O)})},w.prototype._onMetaDataArrived=function(O){var b=this;Promise.resolve().then(function(){b._emitter.emit(g.a.METADATA_ARRIVED,O)})},w.prototype._onScriptDataArrived=function(O){var b=this;Promise.resolve().then(function(){b._emitter.emit(g.a.SCRIPTDATA_ARRIVED,O)})},w.prototype._onTimedID3MetadataArrived=function(O){var b=this;Promise.resolve().then(function(){b._emitter.emit(g.a.TIMED_ID3_METADATA_ARRIVED,O)})},w.prototype._onSynchronousKLVMetadataArrived=function(O){var b=this;Promise.resolve().then(function(){b._emitter.emit(g.a.SYNCHRONOUS_KLV_METADATA_ARRIVED,O)})},w.prototype._onAsynchronousKLVMetadataArrived=function(O){var b=this;Promise.resolve().then(function(){b._emitter.emit(g.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED,O)})},w.prototype._onSMPTE2038MetadataArrived=function(O){var b=this;Promise.resolve().then(function(){b._emitter.emit(g.a.SMPTE2038_METADATA_ARRIVED,O)})},w.prototype._onSCTE35MetadataArrived=function(O){var b=this;Promise.resolve().then(function(){b._emitter.emit(g.a.SCTE35_METADATA_ARRIVED,O)})},w.prototype._onPESPrivateDataDescriptor=function(O){var b=this;Promise.resolve().then(function(){b._emitter.emit(g.a.PES_PRIVATE_DATA_DESCRIPTOR,O)})},w.prototype._onPESPrivateDataArrived=function(O){var b=this;Promise.resolve().then(function(){b._emitter.emit(g.a.PES_PRIVATE_DATA_ARRIVED,O)})},w.prototype._onStatisticsInfo=function(O){var b=this;Promise.resolve().then(function(){b._emitter.emit(g.a.STATISTICS_INFO,O)})},w.prototype._onIOError=function(O,b){var E=this;Promise.resolve().then(function(){E._emitter.emit(g.a.IO_ERROR,O,b)})},w.prototype._onDemuxError=function(O,b){var E=this;Promise.resolve().then(function(){E._emitter.emit(g.a.DEMUX_ERROR,O,b)})},w.prototype._onRecommendSeekpoint=function(O){var b=this;Promise.resolve().then(function(){b._emitter.emit(g.a.RECOMMEND_SEEKPOINT,O)})},w.prototype._onLoggingConfigChanged=function(O){this._worker&&this._worker.postMessage({cmd:"logging_config",param:O})},w.prototype._onWorkerMessage=function(O){var b=O.data,E=b.data;if(b.msg==="destroyed"||this._workerDestroying)return this._workerDestroying=!1,this._worker.terminate(),void(this._worker=null);switch(b.msg){case g.a.INIT_SEGMENT:case g.a.MEDIA_SEGMENT:this._emitter.emit(b.msg,E.type,E.data);break;case g.a.LOADING_COMPLETE:case g.a.RECOVERED_EARLY_EOF:this._emitter.emit(b.msg);break;case g.a.MEDIA_INFO:Object.setPrototypeOf(E,m.a.prototype),this._emitter.emit(b.msg,E);break;case g.a.METADATA_ARRIVED:case g.a.SCRIPTDATA_ARRIVED:case g.a.TIMED_ID3_METADATA_ARRIVED:case g.a.SYNCHRONOUS_KLV_METADATA_ARRIVED:case g.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED:case g.a.SMPTE2038_METADATA_ARRIVED:case g.a.SCTE35_METADATA_ARRIVED:case g.a.PES_PRIVATE_DATA_DESCRIPTOR:case g.a.PES_PRIVATE_DATA_ARRIVED:case g.a.STATISTICS_INFO:this._emitter.emit(b.msg,E);break;case g.a.IO_ERROR:case g.a.DEMUX_ERROR:this._emitter.emit(b.msg,E.type,E.info);break;case g.a.RECOMMEND_SEEKPOINT:this._emitter.emit(b.msg,E);break;case"logcat_callback":h.a.emitter.emit("log",E.type,E.logcat)}},w}();r.a=C},function(n,r,i){function a(h){var _={};function y(m){if(_[m])return _[m].exports;var C=_[m]={i:m,l:!1,exports:{}};return h[m].call(C.exports,C,C.exports,y),C.l=!0,C.exports}y.m=h,y.c=_,y.i=function(m){return m},y.d=function(m,C,w){y.o(m,C)||Object.defineProperty(m,C,{configurable:!1,enumerable:!0,get:w})},y.r=function(m){Object.defineProperty(m,"__esModule",{value:!0})},y.n=function(m){var C=m&&m.__esModule?function(){return m.default}:function(){return m};return y.d(C,"a",C),C},y.o=function(m,C){return Object.prototype.hasOwnProperty.call(m,C)},y.p="/",y.oe=function(m){throw console.error(m),m};var g=y(y.s=ENTRY_MODULE);return g.default||g}function o(h){return(h+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function l(h,_,y){var g={};g[y]=[];var m=_.toString(),C=m.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!C)return g;for(var w,O=C[1],b=new RegExp("(\\\\n|\\W)"+o(O)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");w=b.exec(m);)w[3]!=="dll-reference"&&g[y].push(w[3]);for(b=new RegExp("\\("+o(O)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");w=b.exec(m);)h[w[2]]||(g[y].push(w[1]),h[w[2]]=i(w[1]).m),g[w[2]]=g[w[2]]||[],g[w[2]].push(w[4]);for(var E,x=Object.keys(g),T=0;T<x.length;T++)for(var j=0;j<g[x[T]].length;j++)E=g[x[T]][j],isNaN(1*E)||(g[x[T]][j]=1*g[x[T]][j]);return g}function d(h){return Object.keys(h).reduce(function(_,y){return _||h[y].length>0},!1)}n.exports=function(h,_){_=_||{};var y={main:i.m},g=_.all?{main:Object.keys(y.main)}:function(b,E){for(var x={main:[E]},T={main:[]},j={main:{}};d(x);)for(var W=Object.keys(x),B=0;B<W.length;B++){var R=W[B],L=x[R].pop();if(j[R]=j[R]||{},!j[R][L]&&b[R][L]){j[R][L]=!0,T[R]=T[R]||[],T[R].push(L);for(var k=l(b,b[R][L],R),M=Object.keys(k),Y=0;Y<M.length;Y++)x[M[Y]]=x[M[Y]]||[],x[M[Y]]=x[M[Y]].concat(k[M[Y]])}}return T}(y,h),m="";Object.keys(g).filter(function(b){return b!=="main"}).forEach(function(b){for(var E=0;g[b][E];)E++;g[b].push(E),y[b][E]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",m=m+"var "+b+" = ("+a.toString().replace("ENTRY_MODULE",JSON.stringify(E))+")({"+g[b].map(function(x){return JSON.stringify(x)+": "+y[b][x].toString()}).join(",")+`});
`}),m=m+"new (("+a.toString().replace("ENTRY_MODULE",JSON.stringify(h))+")({"+g.main.map(function(b){return JSON.stringify(b)+": "+y.main[b].toString()}).join(",")+"}))(self);";var C=new self.Blob([m],{type:"text/javascript"});if(_.bare)return C;var w=(self.URL||self.webkitURL||self.mozURL||self.msURL).createObjectURL(C),O=new self.Worker(w);return O.objectURL=w,O}},function(n,r,i){i.r(r),i(0);var a=i(8),o=i(15),l=i(13),d=i(1);r.default=function(h){var _=null,y=(function(Q,ne){h.postMessage({msg:"logcat_callback",data:{type:Q,logcat:ne}})}).bind(this);function g(Q,ne){var de={msg:d.a.INIT_SEGMENT,data:{type:Q,data:ne}};h.postMessage(de,[ne.data])}function m(Q,ne){var de={msg:d.a.MEDIA_SEGMENT,data:{type:Q,data:ne}};h.postMessage(de,[ne.data])}function C(){var Q={msg:d.a.LOADING_COMPLETE};h.postMessage(Q)}function w(){var Q={msg:d.a.RECOVERED_EARLY_EOF};h.postMessage(Q)}function O(Q){var ne={msg:d.a.MEDIA_INFO,data:Q};h.postMessage(ne)}function b(Q){var ne={msg:d.a.METADATA_ARRIVED,data:Q};h.postMessage(ne)}function E(Q){var ne={msg:d.a.SCRIPTDATA_ARRIVED,data:Q};h.postMessage(ne)}function x(Q){var ne={msg:d.a.TIMED_ID3_METADATA_ARRIVED,data:Q};h.postMessage(ne)}function T(Q){var ne={msg:d.a.SYNCHRONOUS_KLV_METADATA_ARRIVED,data:Q};h.postMessage(ne)}function j(Q){var ne={msg:d.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED,data:Q};h.postMessage(ne)}function W(Q){var ne={msg:d.a.SMPTE2038_METADATA_ARRIVED,data:Q};h.postMessage(ne)}function B(Q){var ne={msg:d.a.SCTE35_METADATA_ARRIVED,data:Q};h.postMessage(ne)}function R(Q){var ne={msg:d.a.PES_PRIVATE_DATA_DESCRIPTOR,data:Q};h.postMessage(ne)}function L(Q){var ne={msg:d.a.PES_PRIVATE_DATA_ARRIVED,data:Q};h.postMessage(ne)}function k(Q){var ne={msg:d.a.STATISTICS_INFO,data:Q};h.postMessage(ne)}function M(Q,ne){h.postMessage({msg:d.a.IO_ERROR,data:{type:Q,info:ne}})}function Y(Q,ne){h.postMessage({msg:d.a.DEMUX_ERROR,data:{type:Q,info:ne}})}function ie(Q){h.postMessage({msg:d.a.RECOMMEND_SEEKPOINT,data:Q})}o.a.install(),h.addEventListener("message",function(Q){switch(Q.data.cmd){case"init":(_=new l.a(Q.data.param[0],Q.data.param[1])).on(d.a.IO_ERROR,M.bind(this)),_.on(d.a.DEMUX_ERROR,Y.bind(this)),_.on(d.a.INIT_SEGMENT,g.bind(this)),_.on(d.a.MEDIA_SEGMENT,m.bind(this)),_.on(d.a.LOADING_COMPLETE,C.bind(this)),_.on(d.a.RECOVERED_EARLY_EOF,w.bind(this)),_.on(d.a.MEDIA_INFO,O.bind(this)),_.on(d.a.METADATA_ARRIVED,b.bind(this)),_.on(d.a.SCRIPTDATA_ARRIVED,E.bind(this)),_.on(d.a.TIMED_ID3_METADATA_ARRIVED,x.bind(this)),_.on(d.a.SYNCHRONOUS_KLV_METADATA_ARRIVED,T.bind(this)),_.on(d.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED,j.bind(this)),_.on(d.a.SMPTE2038_METADATA_ARRIVED,W.bind(this)),_.on(d.a.SCTE35_METADATA_ARRIVED,B.bind(this)),_.on(d.a.PES_PRIVATE_DATA_DESCRIPTOR,R.bind(this)),_.on(d.a.PES_PRIVATE_DATA_ARRIVED,L.bind(this)),_.on(d.a.STATISTICS_INFO,k.bind(this)),_.on(d.a.RECOMMEND_SEEKPOINT,ie.bind(this));break;case"destroy":_&&(_.destroy(),_=null),h.postMessage({msg:"destroyed"});break;case"start":_.start();break;case"stop":_.stop();break;case"seek":_.seek(Q.data.param);break;case"pause":_.pause();break;case"resume":_.resume();break;case"logging_config":var ne=Q.data.param;a.a.applyConfig(ne),ne.enableCallback===!0?a.a.addLogListener(y):a.a.removeLogListener(y)}})}},function(n,r,i){n.exports=i(25).default},function(n,r,i){(function(a,o){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */var l;l=function(){function d(ee){return typeof ee=="function"}var h=Array.isArray?Array.isArray:function(ee){return Object.prototype.toString.call(ee)==="[object Array]"},_=0,y=void 0,g=void 0,m=function(ee,oe){T[_]=ee,T[_+1]=oe,(_+=2)===2&&(g?g(j):k())},C=typeof window<"u"?window:void 0,w=C||{},O=w.MutationObserver||w.WebKitMutationObserver,b=typeof self>"u"&&a!==void 0&&{}.toString.call(a)==="[object process]",E=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function x(){var ee=setTimeout;return function(){return ee(j,1)}}var T=new Array(1e3);function j(){for(var ee=0;ee<_;ee+=2)(0,T[ee])(T[ee+1]),T[ee]=void 0,T[ee+1]=void 0;_=0}var W,B,R,L,k=void 0;function M(ee,oe){var ge=this,Ee=new this.constructor(Q);Ee[ie]===void 0&&me(Ee);var be=ge._state;if(be){var Me=arguments[be-1];m(function(){return X(be,Ee,Me,ge._result)})}else P(ge,Ee,ee,oe);return Ee}function Y(ee){if(ee&&typeof ee=="object"&&ee.constructor===this)return ee;var oe=new this(Q);return de(oe,ee),oe}b?k=function(){return a.nextTick(j)}:O?(B=0,R=new O(j),L=document.createTextNode(""),R.observe(L,{characterData:!0}),k=function(){L.data=B=++B%2}):E?((W=new MessageChannel).port1.onmessage=j,k=function(){return W.port2.postMessage(0)}):k=C===void 0?function(){try{var ee=Function("return this")().require("vertx");return(y=ee.runOnLoop||ee.runOnContext)!==void 0?function(){y(j)}:x()}catch{return x()}}():x();var ie=Math.random().toString(36).substring(2);function Q(){}function ne(ee,oe,ge){oe.constructor===ee.constructor&&ge===M&&oe.constructor.resolve===Y?function(Ee,be){be._state===1?J(Ee,be._result):be._state===2?N(Ee,be._result):P(be,void 0,function(Me){return de(Ee,Me)},function(Me){return N(Ee,Me)})}(ee,oe):ge===void 0?J(ee,oe):d(ge)?function(Ee,be,Me){m(function(ft){var yt=!1,Rn=function(Ye,ya,Mo,Ll){try{Ye.call(ya,Mo,Ll)}catch(Pl){return Pl}}(Me,be,function(Ye){yt||(yt=!0,be!==Ye?de(ft,Ye):J(ft,Ye))},function(Ye){yt||(yt=!0,N(ft,Ye))},ft._label);!yt&&Rn&&(yt=!0,N(ft,Rn))},Ee)}(ee,oe,ge):J(ee,oe)}function de(ee,oe){if(ee===oe)N(ee,new TypeError("You cannot resolve a promise with itself"));else if(be=typeof(Ee=oe),Ee===null||be!=="object"&&be!=="function")J(ee,oe);else{var ge=void 0;try{ge=oe.then}catch(Me){return void N(ee,Me)}ne(ee,oe,ge)}var Ee,be}function xe(ee){ee._onerror&&ee._onerror(ee._result),H(ee)}function J(ee,oe){ee._state===void 0&&(ee._result=oe,ee._state=1,ee._subscribers.length!==0&&m(H,ee))}function N(ee,oe){ee._state===void 0&&(ee._state=2,ee._result=oe,m(xe,ee))}function P(ee,oe,ge,Ee){var be=ee._subscribers,Me=be.length;ee._onerror=null,be[Me]=oe,be[Me+1]=ge,be[Me+2]=Ee,Me===0&&ee._state&&m(H,ee)}function H(ee){var oe=ee._subscribers,ge=ee._state;if(oe.length!==0){for(var Ee=void 0,be=void 0,Me=ee._result,ft=0;ft<oe.length;ft+=3)Ee=oe[ft],be=oe[ft+ge],Ee?X(ge,Ee,be,Me):be(Me);ee._subscribers.length=0}}function X(ee,oe,ge,Ee){var be=d(ge),Me=void 0,ft=void 0,yt=!0;if(be){try{Me=ge(Ee)}catch(Rn){yt=!1,ft=Rn}if(oe===Me)return void N(oe,new TypeError("A promises callback cannot return that same promise."))}else Me=Ee;oe._state!==void 0||(be&&yt?de(oe,Me):yt===!1?N(oe,ft):ee===1?J(oe,Me):ee===2&&N(oe,Me))}var he=0;function me(ee){ee[ie]=he++,ee._state=void 0,ee._result=void 0,ee._subscribers=[]}var je=function(){function ee(oe,ge){this._instanceConstructor=oe,this.promise=new oe(Q),this.promise[ie]||me(this.promise),h(ge)?(this.length=ge.length,this._remaining=ge.length,this._result=new Array(this.length),this.length===0?J(this.promise,this._result):(this.length=this.length||0,this._enumerate(ge),this._remaining===0&&J(this.promise,this._result))):N(this.promise,new Error("Array Methods must be provided an Array"))}return ee.prototype._enumerate=function(oe){for(var ge=0;this._state===void 0&&ge<oe.length;ge++)this._eachEntry(oe[ge],ge)},ee.prototype._eachEntry=function(oe,ge){var Ee=this._instanceConstructor,be=Ee.resolve;if(be===Y){var Me=void 0,ft=void 0,yt=!1;try{Me=oe.then}catch(Ye){yt=!0,ft=Ye}if(Me===M&&oe._state!==void 0)this._settledAt(oe._state,ge,oe._result);else if(typeof Me!="function")this._remaining--,this._result[ge]=oe;else if(Ee===Re){var Rn=new Ee(Q);yt?N(Rn,ft):ne(Rn,oe,Me),this._willSettleAt(Rn,ge)}else this._willSettleAt(new Ee(function(Ye){return Ye(oe)}),ge)}else this._willSettleAt(be(oe),ge)},ee.prototype._settledAt=function(oe,ge,Ee){var be=this.promise;be._state===void 0&&(this._remaining--,oe===2?N(be,Ee):this._result[ge]=Ee),this._remaining===0&&J(be,this._result)},ee.prototype._willSettleAt=function(oe,ge){var Ee=this;P(oe,void 0,function(be){return Ee._settledAt(1,ge,be)},function(be){return Ee._settledAt(2,ge,be)})},ee}(),Re=function(){function ee(oe){this[ie]=he++,this._result=this._state=void 0,this._subscribers=[],Q!==oe&&(typeof oe!="function"&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof ee?function(ge,Ee){try{Ee(function(be){de(ge,be)},function(be){N(ge,be)})}catch(be){N(ge,be)}}(this,oe):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return ee.prototype.catch=function(oe){return this.then(null,oe)},ee.prototype.finally=function(oe){var ge=this.constructor;return d(oe)?this.then(function(Ee){return ge.resolve(oe()).then(function(){return Ee})},function(Ee){return ge.resolve(oe()).then(function(){throw Ee})}):this.then(oe,oe)},ee}();return Re.prototype.then=M,Re.all=function(ee){return new je(this,ee).promise},Re.race=function(ee){var oe=this;return h(ee)?new oe(function(ge,Ee){for(var be=ee.length,Me=0;Me<be;Me++)oe.resolve(ee[Me]).then(ge,Ee)}):new oe(function(ge,Ee){return Ee(new TypeError("You must pass an array to race."))})},Re.resolve=Y,Re.reject=function(ee){var oe=new this(Q);return N(oe,ee),oe},Re._setScheduler=function(ee){g=ee},Re._setAsap=function(ee){m=ee},Re._asap=m,Re.polyfill=function(){var ee=void 0;if(o!==void 0)ee=o;else if(typeof self<"u")ee=self;else try{ee=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var oe=ee.Promise;if(oe){var ge=null;try{ge=Object.prototype.toString.call(oe.resolve())}catch{}if(ge==="[object Promise]"&&!oe.cast)return}ee.Promise=Re},Re.Promise=Re,Re},n.exports=l()}).call(this,i(22),i(23))},function(n,r){var i,a,o=n.exports={};function l(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}function h(E){if(i===setTimeout)return setTimeout(E,0);if((i===l||!i)&&setTimeout)return i=setTimeout,setTimeout(E,0);try{return i(E,0)}catch{try{return i.call(null,E,0)}catch{return i.call(this,E,0)}}}(function(){try{i=typeof setTimeout=="function"?setTimeout:l}catch{i=l}try{a=typeof clearTimeout=="function"?clearTimeout:d}catch{a=d}})();var _,y=[],g=!1,m=-1;function C(){g&&_&&(g=!1,_.length?y=_.concat(y):m=-1,y.length&&w())}function w(){if(!g){var E=h(C);g=!0;for(var x=y.length;x;){for(_=y,y=[];++m<x;)_&&_[m].run();m=-1,x=y.length}_=null,g=!1,function(T){if(a===clearTimeout)return clearTimeout(T);if((a===d||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(T);try{a(T)}catch{try{return a.call(null,T)}catch{return a.call(this,T)}}}(E)}}function O(E,x){this.fun=E,this.array=x}function b(){}o.nextTick=function(E){var x=new Array(arguments.length-1);if(arguments.length>1)for(var T=1;T<arguments.length;T++)x[T-1]=arguments[T];y.push(new O(E,x)),y.length!==1||g||h(w)},O.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=b,o.addListener=b,o.once=b,o.off=b,o.removeListener=b,o.removeAllListeners=b,o.emit=b,o.prependListener=b,o.prependOnceListener=b,o.listeners=function(E){return[]},o.binding=function(E){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(E){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(n,r){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch{typeof window=="object"&&(i=window)}n.exports=i},function(n,r,i){i.r(r);var a=i(0),o=i(8),l=i(3),d=i(7),h=i(16),_=i(17),y=i(1),g=i(4),m=i(10);r.default=function(C){var w="PlayerEngineWorker",O=(function(N,P){C.postMessage({msg:"logcat_callback",type:N,logcat:P})}).bind(void 0),b=null,E=null,x=null,T=null,j=!1,W=!1,B=0,R=0,L=!1;function k(){x&&(x.shutdown(),x.destroy(),x=null)}function M(){if(b==null||E==null)throw new l.a("Worker not initialized");if(T)throw new l.a("Transmuxer has been initialized");W||(!E.deferLoadAfterSourceOpen||j?((T=new _.a(b,E)).on(y.a.INIT_SEGMENT,function(N,P){x.appendInitSegment(P)}),T.on(y.a.MEDIA_SEGMENT,function(N,P){x.appendMediaSegment(P),C.postMessage({msg:"buffered_position_changed",buffered_position_milliseconds:P.info.endDts})}),T.on(y.a.LOADING_COMPLETE,function(){x.endOfStream(),C.postMessage({msg:"player_event",event:g.a.LOADING_COMPLETE})}),T.on(y.a.RECOVERED_EARLY_EOF,function(){C.postMessage({msg:"player_event",event:g.a.RECOVERED_EARLY_EOF})}),T.on(y.a.IO_ERROR,function(N,P){C.postMessage({msg:"player_event",event:g.a.ERROR,error_type:m.b.NETWORK_ERROR,error_detail:N,info:P})}),T.on(y.a.DEMUX_ERROR,function(N,P){C.postMessage({msg:"player_event",event:g.a.ERROR,error_type:m.b.MEDIA_ERROR,error_detail:N,info:P})}),T.on(y.a.MEDIA_INFO,function(N){xe(y.a.MEDIA_INFO,N)}),T.on(y.a.STATISTICS_INFO,function(N){xe(y.a.STATISTICS_INFO,N)}),T.on(y.a.RECOMMEND_SEEKPOINT,function(N){(function(P){C.postMessage({msg:"transmuxing_event",event:y.a.RECOMMEND_SEEKPOINT,milliseconds:P})})(N)}),T.on(y.a.METADATA_ARRIVED,function(N){J(g.a.METADATA_ARRIVED,N)}),T.on(y.a.SCRIPTDATA_ARRIVED,function(N){J(g.a.SCRIPTDATA_ARRIVED,N)}),T.on(y.a.TIMED_ID3_METADATA_ARRIVED,function(N){J(g.a.TIMED_ID3_METADATA_ARRIVED,N)}),T.on(y.a.SYNCHRONOUS_KLV_METADATA_ARRIVED,function(N){J(g.a.SYNCHRONOUS_KLV_METADATA_ARRIVED,N)}),T.on(y.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED,function(N){J(g.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED,N)}),T.on(y.a.SMPTE2038_METADATA_ARRIVED,function(N){J(g.a.SMPTE2038_METADATA_ARRIVED,N)}),T.on(y.a.SCTE35_METADATA_ARRIVED,function(N){J(g.a.SCTE35_METADATA_ARRIVED,N)}),T.on(y.a.PES_PRIVATE_DATA_DESCRIPTOR,function(N){J(g.a.PES_PRIVATE_DATA_DESCRIPTOR,N)}),T.on(y.a.PES_PRIVATE_DATA_ARRIVED,function(N){J(g.a.PES_PRIVATE_DATA_ARRIVED,N)}),T.open()):W=!0)}function Y(){x&&x.flush(),T&&(T.close(),T.destroy(),T=null)}function ie(){j=!0,W&&(W=!1,M())}function Q(){C.postMessage({msg:"mse_event",event:d.a.UPDATE_END})}function ne(){a.a.v(w,"MSE SourceBuffer is full, report to main thread"),C.postMessage({msg:"mse_event",event:d.a.BUFFER_FULL})}function de(N){C.postMessage({msg:"player_event",event:g.a.ERROR,error_type:m.b.MEDIA_ERROR,error_detail:m.b.MEDIA_MSE_ERROR,info:N})}function xe(N,P){C.postMessage({msg:"transmuxing_event",event:N,info:P})}function J(N,P){C.postMessage({msg:"player_event",event:N,extraData:P})}C.addEventListener("message",function(N){if(!L){var P=N.data;switch(P.cmd){case"logging_config":var H=P;o.a.applyConfig(H.logging_config),H.logging_config.enableCallback===!0?o.a.addLogListener(O):o.a.removeLogListener(O);break;case"init":b=(H=P).media_data_source,E=H.config;break;case"destroy":(function(){T&&Y(),x&&k(),L=!0,C.postMessage({msg:"destroyed"})})();break;case"initialize_mse":(function(){a.a.v(w,"Initializing MediaSource in DedicatedWorker"),(x=new h.a(E)).on(d.a.SOURCE_OPEN,ie.bind(this)),x.on(d.a.UPDATE_END,Q.bind(this)),x.on(d.a.BUFFER_FULL,ne.bind(this)),x.on(d.a.ERROR,de.bind(this)),x.initialize({getCurrentTime:function(){return B},getReadyState:function(){return R}});var X=x.getHandle();C.postMessage({msg:"mse_init",handle:X},[X])})();break;case"shutdown_mse":k();break;case"load":M();break;case"unload":Y();break;case"unbuffered_seek":H=P,x.flush(),T.seek(H.milliseconds);break;case"timeupdate":B=(H=P).current_time;break;case"readystatechange":R=(H=P).ready_state;break;case"pause_transmuxer":T.pause();break;case"resume_transmuxer":T.resume()}}})}},function(n,r,i){i.r(r);var a=i(15),o=i(14),l={enableWorker:!1,enableWorkerForMSE:!1,enableStashBuffer:!0,stashInitialSize:void 0,isLive:!1,liveBufferLatencyChasing:!1,liveBufferLatencyChasingOnPaused:!1,liveBufferLatencyMaxLatency:1.5,liveBufferLatencyMinRemain:.5,liveSync:!1,liveSyncMaxLatency:1.2,liveSyncTargetLatency:.8,liveSyncPlaybackRate:1.2,lazyLoad:!0,lazyLoadMaxDuration:180,lazyLoadRecoverDuration:30,deferLoadAfterSourceOpen:!0,autoCleanupMaxBackwardDuration:180,autoCleanupMinBackwardDuration:120,statisticsInfoReportInterval:600,fixAudioTimestampGap:!0,accurateSeek:!1,seekType:"range",seekParamStart:"bstart",seekParamEnd:"bend",rangeLoadZeroStart:!1,customSeekHandler:void 0,reuseRedirectedURL:!1,headers:void 0,customLoader:void 0};function d(){return Object.assign({},l)}var h=function(){function N(){}return N.supportMSEH264Playback=function(){var P=self.MediaSource&&self.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),H=self.ManagedMediaSource&&self.ManagedMediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"');return P||H},N.supportMSEH265Playback=function(){var P=self.MediaSource&&self.MediaSource.isTypeSupported('video/mp4; codecs="hvc1.1.6.L93.B0"'),H=self.ManagedMediaSource&&self.ManagedMediaSource.isTypeSupported('video/mp4; codecs="hvc1.1.6.L93.B0"');return P||H},N.supportNetworkStreamIO=function(){var P=new o.a({},d()),H=P.loaderType;return P.destroy(),H=="fetch-stream-loader"||H=="xhr-moz-chunked-loader"},N.getNetworkLoaderTypeName=function(){var P=new o.a({},d()),H=P.loaderType;return P.destroy(),H},N.supportNativeMediaPlayback=function(P){N.videoElement==null&&(N.videoElement=window.document.createElement("video"));var H=N.videoElement.canPlayType(P);return H==="probably"||H=="maybe"},N.getFeatureList=function(){var P={msePlayback:!1,mseLivePlayback:!1,mseH265Playback:!1,networkStreamIO:!1,networkLoaderName:"",nativeMP4H264Playback:!1,nativeMP4H265Playback:!1,nativeWebmVP8Playback:!1,nativeWebmVP9Playback:!1};return P.msePlayback=N.supportMSEH264Playback(),P.networkStreamIO=N.supportNetworkStreamIO(),P.networkLoaderName=N.getNetworkLoaderTypeName(),P.mseLivePlayback=P.msePlayback&&P.networkStreamIO,P.mseH265Playback=N.supportMSEH265Playback(),P.nativeMP4H264Playback=N.supportNativeMediaPlayback('video/mp4; codecs="avc1.42001E, mp4a.40.2"'),P.nativeMP4H265Playback=N.supportNativeMediaPlayback('video/mp4; codecs="hvc1.1.6.L93.B0"'),P.nativeWebmVP8Playback=N.supportNativeMediaPlayback('video/webm; codecs="vp8.0, vorbis"'),P.nativeWebmVP9Playback=N.supportNativeMediaPlayback('video/webm; codecs="vp9"'),P},N}(),_=i(2),y=i(0),g=i(9),m=i.n(g),C=i(16),w=i(4),O=i(17),b=i(7),E=i(10),x=i(3),T=i(1),j=i(5),W=i(11),B=function(){function N(P,H,X){this.TAG="SeekingHandler",this._config=null,this._media_element=null,this._always_seek_keyframe=!1,this._on_unbuffered_seek=null,this._request_set_current_time=!1,this._seek_request_record_clocktime=null,this._idr_sample_list=new W.a,this.e=null,this._config=P,this._media_element=H,this._on_unbuffered_seek=X,this.e={onMediaSeeking:this._onMediaSeeking.bind(this)};var he=j.a.chrome&&(j.a.version.major<50||j.a.version.major===50&&j.a.version.build<2661);this._always_seek_keyframe=!!(he||j.a.msedge||j.a.msie),this._always_seek_keyframe&&(this._config.accurateSeek=!1),this._media_element.addEventListener("seeking",this.e.onMediaSeeking)}return N.prototype.destroy=function(){this._idr_sample_list.clear(),this._idr_sample_list=null,this._media_element.removeEventListener("seeking",this.e.onMediaSeeking),this._media_element=null,this._on_unbuffered_seek=null},N.prototype.seek=function(P){var H=this._isPositionBuffered(P),X=!1;if(P<1&&this._media_element.buffered.length>0){var he=this._media_element.buffered.start(0);(he<1&&P<he||j.a.safari)&&(X=!0,P=j.a.safari?.1:he)}if(X)this.directSeek(P);else if(H)if(this._always_seek_keyframe){var me=this._getNearestKeyframe(Math.floor(1e3*P));me!=null&&(P=me.dts/1e3),this.directSeek(P)}else this.directSeek(P);else this._idr_sample_list.clear(),this._on_unbuffered_seek(Math.floor(1e3*P)),this._config.accurateSeek&&this.directSeek(P)},N.prototype.directSeek=function(P){this._request_set_current_time=!0,this._media_element.currentTime=P},N.prototype.appendSyncPoints=function(P){this._idr_sample_list.appendArray(P)},N.prototype._onMediaSeeking=function(P){if(this._request_set_current_time)this._request_set_current_time=!1;else{var H=this._media_element.currentTime,X=this._media_element.buffered;if(H<1&&X.length>0){var he=X.start(0);if(he<1&&H<he||j.a.safari){var me=j.a.safari?.1:he;return void this.directSeek(me)}}if(this._isPositionBuffered(H)){if(this._always_seek_keyframe){var je=this._getNearestKeyframe(Math.floor(1e3*H));je!=null&&(H=je.dts/1e3,this.directSeek(H))}}else this._seek_request_record_clocktime=N._getClockTime(),window.setTimeout(this._pollAndApplyUnbufferedSeek.bind(this),50)}},N.prototype._pollAndApplyUnbufferedSeek=function(){if(this._seek_request_record_clocktime!=null)if(this._seek_request_record_clocktime<=N._getClockTime()-100){var P=this._media_element.currentTime;this._seek_request_record_clocktime=null,this._isPositionBuffered(P)||(this._idr_sample_list.clear(),this._on_unbuffered_seek(Math.floor(1e3*P)),this._config.accurateSeek&&this.directSeek(P))}else window.setTimeout(this._pollAndApplyUnbufferedSeek.bind(this),50)},N.prototype._isPositionBuffered=function(P){for(var H=this._media_element.buffered,X=0;X<H.length;X++){var he=H.start(X),me=H.end(X);if(P>=he&&P<me)return!0}return!1},N.prototype._getNearestKeyframe=function(P){return this._idr_sample_list.getLastSyncPointBeforeDts(P)},N._getClockTime=function(){return self.performance&&self.performance.now?self.performance.now():Date.now()},N}(),R=function(){function N(P,H,X,he){this.TAG="LoadingController",this._config=null,this._media_element=null,this._on_pause_transmuxer=null,this._on_resume_transmuxer=null,this._paused=!1,this.e=null,this._config=P,this._media_element=H,this._on_pause_transmuxer=X,this._on_resume_transmuxer=he,this.e={onMediaTimeUpdate:this._onMediaTimeUpdate.bind(this)}}return N.prototype.destroy=function(){this._media_element.removeEventListener("timeupdate",this.e.onMediaTimeUpdate),this.e=null,this._media_element=null,this._config=null,this._on_pause_transmuxer=null,this._on_resume_transmuxer=null},N.prototype.notifyBufferedPositionChanged=function(P){!this._config.isLive&&this._config.lazyLoad&&(P==null?this._suspendTransmuxerIfNeeded():this._suspendTransmuxerIfBufferedPositionExceeded(P))},N.prototype._onMediaTimeUpdate=function(P){this._paused&&this._resumeTransmuxerIfNeeded()},N.prototype._suspendTransmuxerIfNeeded=function(){for(var P=this._media_element.buffered,H=this._media_element.currentTime,X=0,he=0;he<P.length;he++){var me=P.start(he),je=P.end(he);if(me<=H&&H<je){X=je;break}}X>0&&this._suspendTransmuxerIfBufferedPositionExceeded(X)},N.prototype._suspendTransmuxerIfBufferedPositionExceeded=function(P){P>=this._media_element.currentTime+this._config.lazyLoadMaxDuration&&!this._paused&&(y.a.v(this.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),this.suspendTransmuxer(),this._media_element.addEventListener("timeupdate",this.e.onMediaTimeUpdate))},N.prototype.suspendTransmuxer=function(){this._paused=!0,this._on_pause_transmuxer()},N.prototype._resumeTransmuxerIfNeeded=function(){for(var P=this._media_element.buffered,H=this._media_element.currentTime,X=this._config.lazyLoadRecoverDuration,he=!1,me=0;me<P.length;me++){var je=P.start(me),Re=P.end(me);if(H>=je&&H<Re){H>=Re-X&&(he=!0);break}}he&&(y.a.v(this.TAG,"Continue loading from paused position"),this.resumeTransmuxer(),this._media_element.removeEventListener("timeupdate",this.e.onMediaTimeUpdate))},N.prototype.resumeTransmuxer=function(){this._paused=!1,this._on_resume_transmuxer()},N}(),L=function(){function N(P,H){this.TAG="StartupStallJumper",this._media_element=null,this._on_direct_seek=null,this._canplay_received=!1,this.e=null,this._media_element=P,this._on_direct_seek=H,this.e={onMediaCanPlay:this._onMediaCanPlay.bind(this),onMediaStalled:this._onMediaStalled.bind(this),onMediaProgress:this._onMediaProgress.bind(this)},this._media_element.addEventListener("canplay",this.e.onMediaCanPlay),this._media_element.addEventListener("stalled",this.e.onMediaStalled),this._media_element.addEventListener("progress",this.e.onMediaProgress)}return N.prototype.destroy=function(){this._media_element.removeEventListener("canplay",this.e.onMediaCanPlay),this._media_element.removeEventListener("stalled",this.e.onMediaStalled),this._media_element.removeEventListener("progress",this.e.onMediaProgress),this._media_element=null,this._on_direct_seek=null},N.prototype._onMediaCanPlay=function(P){this._canplay_received=!0,this._media_element.removeEventListener("canplay",this.e.onMediaCanPlay)},N.prototype._onMediaStalled=function(P){this._detectAndFixStuckPlayback(!0)},N.prototype._onMediaProgress=function(P){this._detectAndFixStuckPlayback()},N.prototype._detectAndFixStuckPlayback=function(P){var H=this._media_element,X=H.buffered;P||!this._canplay_received||H.readyState<2?X.length>0&&H.currentTime<X.start(0)&&(y.a.w(this.TAG,"Playback seems stuck at ".concat(H.currentTime,", seek to ").concat(X.start(0))),this._on_direct_seek(X.start(0)),this._media_element.removeEventListener("progress",this.e.onMediaProgress)):this._media_element.removeEventListener("progress",this.e.onMediaProgress)},N}(),k=function(){function N(P,H,X){this._config=null,this._media_element=null,this._on_direct_seek=null,this._config=P,this._media_element=H,this._on_direct_seek=X}return N.prototype.destroy=function(){this._on_direct_seek=null,this._media_element=null,this._config=null},N.prototype.notifyBufferedRangeUpdate=function(){this._chaseLiveLatency()},N.prototype._chaseLiveLatency=function(){var P=this._media_element.buffered,H=this._media_element.currentTime,X=this._media_element.paused;if(this._config.isLive&&this._config.liveBufferLatencyChasing&&P.length!=0&&(this._config.liveBufferLatencyChasingOnPaused||!X)){var he=P.end(P.length-1);if(he>this._config.liveBufferLatencyMaxLatency&&he-H>this._config.liveBufferLatencyMaxLatency){var me=he-this._config.liveBufferLatencyMinRemain;this._on_direct_seek(me)}}},N}(),M=function(){function N(P,H){this._config=null,this._media_element=null,this.e=null,this._config=P,this._media_element=H,this.e={onMediaTimeUpdate:this._onMediaTimeUpdate.bind(this)},this._media_element.addEventListener("timeupdate",this.e.onMediaTimeUpdate)}return N.prototype.destroy=function(){this._media_element.removeEventListener("timeupdate",this.e.onMediaTimeUpdate),this._media_element=null,this._config=null},N.prototype._onMediaTimeUpdate=function(P){if(this._config.isLive&&this._config.liveSync){var H=this._getCurrentLatency();if(H>this._config.liveSyncMaxLatency){var X=Math.min(2,Math.max(1,this._config.liveSyncPlaybackRate));this._media_element.playbackRate=X}else H>this._config.liveSyncTargetLatency||this._media_element.playbackRate!==1&&this._media_element.playbackRate!==0&&(this._media_element.playbackRate=1)}},N.prototype._getCurrentLatency=function(){if(!this._media_element)return 0;var P=this._media_element.buffered,H=this._media_element.currentTime;return P.length==0?0:P.end(P.length-1)-H},N}(),Y=function(){function N(P,H){this.TAG="PlayerEngineMainThread",this._emitter=new g,this._media_element=null,this._mse_controller=null,this._transmuxer=null,this._pending_seek_time=null,this._seeking_handler=null,this._loading_controller=null,this._startup_stall_jumper=null,this._live_latency_chaser=null,this._live_latency_synchronizer=null,this._mse_source_opened=!1,this._has_pending_load=!1,this._loaded_metadata_received=!1,this._media_info=null,this._statistics_info=null,this.e=null,this._media_data_source=P,this._config=d(),typeof H=="object"&&Object.assign(this._config,H),P.isLive===!0&&(this._config.isLive=!0),this.e={onMediaLoadedMetadata:this._onMediaLoadedMetadata.bind(this)}}return N.prototype.destroy=function(){this._emitter.emit(w.a.DESTROYING),this._transmuxer&&this.unload(),this._media_element&&this.detachMediaElement(),this.e=null,this._media_data_source=null,this._emitter.removeAllListeners(),this._emitter=null},N.prototype.on=function(P,H){var X=this;this._emitter.addListener(P,H),P===w.a.MEDIA_INFO&&this._media_info?Promise.resolve().then(function(){return X._emitter.emit(w.a.MEDIA_INFO,X.mediaInfo)}):P==w.a.STATISTICS_INFO&&this._statistics_info&&Promise.resolve().then(function(){return X._emitter.emit(w.a.STATISTICS_INFO,X.statisticsInfo)})},N.prototype.off=function(P,H){this._emitter.removeListener(P,H)},N.prototype.attachMediaElement=function(P){var H=this;this._media_element=P,P.src="",P.removeAttribute("src"),P.srcObject=null,P.load(),P.addEventListener("loadedmetadata",this.e.onMediaLoadedMetadata),this._mse_controller=new C.a(this._config),this._mse_controller.on(b.a.UPDATE_END,this._onMSEUpdateEnd.bind(this)),this._mse_controller.on(b.a.BUFFER_FULL,this._onMSEBufferFull.bind(this)),this._mse_controller.on(b.a.SOURCE_OPEN,this._onMSESourceOpen.bind(this)),this._mse_controller.on(b.a.ERROR,this._onMSEError.bind(this)),this._mse_controller.on(b.a.START_STREAMING,this._onMSEStartStreaming.bind(this)),this._mse_controller.on(b.a.END_STREAMING,this._onMSEEndStreaming.bind(this)),this._mse_controller.initialize({getCurrentTime:function(){return H._media_element.currentTime},getReadyState:function(){return H._media_element.readyState}}),this._mse_controller.isManagedMediaSource()?(P.disableRemotePlayback=!0,P.srcObject=this._mse_controller.getObject()):P.src=this._mse_controller.getObjectURL()},N.prototype.detachMediaElement=function(){this._media_element&&(this._mse_controller.shutdown(),this._media_element.removeEventListener("loadedmetadata",this.e.onMediaLoadedMetadata),this._media_element.src="",this._media_element.removeAttribute("src"),this._media_element.srcObject=null,this._media_element.load(),this._media_element=null,this._mse_controller.revokeObjectURL()),this._mse_controller&&(this._mse_controller.destroy(),this._mse_controller=null)},N.prototype.load=function(){var P=this;if(!this._media_element)throw new x.a("HTMLMediaElement must be attached before load()!");if(this._transmuxer)throw new x.a("load() has been called, please call unload() first!");this._has_pending_load||(!this._config.deferLoadAfterSourceOpen||this._mse_source_opened?(this._transmuxer=new O.a(this._media_data_source,this._config),this._transmuxer.on(T.a.INIT_SEGMENT,function(H,X){P._mse_controller.appendInitSegment(X)}),this._transmuxer.on(T.a.MEDIA_SEGMENT,function(H,X){P._mse_controller.appendMediaSegment(X),!P._config.isLive&&H==="video"&&X.data&&X.data.byteLength>0&&"info"in X&&P._seeking_handler.appendSyncPoints(X.info.syncPoints),P._loading_controller.notifyBufferedPositionChanged(X.info.endDts/1e3)}),this._transmuxer.on(T.a.LOADING_COMPLETE,function(){P._mse_controller.endOfStream(),P._emitter.emit(w.a.LOADING_COMPLETE)}),this._transmuxer.on(T.a.RECOVERED_EARLY_EOF,function(){P._emitter.emit(w.a.RECOVERED_EARLY_EOF)}),this._transmuxer.on(T.a.IO_ERROR,function(H,X){P._emitter.emit(w.a.ERROR,E.b.NETWORK_ERROR,H,X)}),this._transmuxer.on(T.a.DEMUX_ERROR,function(H,X){P._emitter.emit(w.a.ERROR,E.b.MEDIA_ERROR,H,X)}),this._transmuxer.on(T.a.MEDIA_INFO,function(H){P._media_info=H,P._emitter.emit(w.a.MEDIA_INFO,Object.assign({},H))}),this._transmuxer.on(T.a.STATISTICS_INFO,function(H){P._statistics_info=P._fillStatisticsInfo(H),P._emitter.emit(w.a.STATISTICS_INFO,Object.assign({},H))}),this._transmuxer.on(T.a.RECOMMEND_SEEKPOINT,function(H){P._media_element&&!P._config.accurateSeek&&P._seeking_handler.directSeek(H/1e3)}),this._transmuxer.on(T.a.METADATA_ARRIVED,function(H){P._emitter.emit(w.a.METADATA_ARRIVED,H)}),this._transmuxer.on(T.a.SCRIPTDATA_ARRIVED,function(H){P._emitter.emit(w.a.SCRIPTDATA_ARRIVED,H)}),this._transmuxer.on(T.a.TIMED_ID3_METADATA_ARRIVED,function(H){P._emitter.emit(w.a.TIMED_ID3_METADATA_ARRIVED,H)}),this._transmuxer.on(T.a.SYNCHRONOUS_KLV_METADATA_ARRIVED,function(H){P._emitter.emit(w.a.SYNCHRONOUS_KLV_METADATA_ARRIVED,H)}),this._transmuxer.on(T.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED,function(H){P._emitter.emit(w.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED,H)}),this._transmuxer.on(T.a.SMPTE2038_METADATA_ARRIVED,function(H){P._emitter.emit(w.a.SMPTE2038_METADATA_ARRIVED,H)}),this._transmuxer.on(T.a.SCTE35_METADATA_ARRIVED,function(H){P._emitter.emit(w.a.SCTE35_METADATA_ARRIVED,H)}),this._transmuxer.on(T.a.PES_PRIVATE_DATA_DESCRIPTOR,function(H){P._emitter.emit(w.a.PES_PRIVATE_DATA_DESCRIPTOR,H)}),this._transmuxer.on(T.a.PES_PRIVATE_DATA_ARRIVED,function(H){P._emitter.emit(w.a.PES_PRIVATE_DATA_ARRIVED,H)}),this._seeking_handler=new B(this._config,this._media_element,this._onRequiredUnbufferedSeek.bind(this)),this._loading_controller=new R(this._config,this._media_element,this._onRequestPauseTransmuxer.bind(this),this._onRequestResumeTransmuxer.bind(this)),this._startup_stall_jumper=new L(this._media_element,this._onRequestDirectSeek.bind(this)),this._config.isLive&&this._config.liveBufferLatencyChasing&&(this._live_latency_chaser=new k(this._config,this._media_element,this._onRequestDirectSeek.bind(this))),this._config.isLive&&this._config.liveSync&&(this._live_latency_synchronizer=new M(this._config,this._media_element)),this._media_element.readyState>0&&this._seeking_handler.directSeek(0),this._transmuxer.open()):this._has_pending_load=!0)},N.prototype.unload=function(){var P,H,X,he,me,je,Re,ee,oe;(P=this._media_element)===null||P===void 0||P.pause(),(H=this._live_latency_synchronizer)===null||H===void 0||H.destroy(),this._live_latency_synchronizer=null,(X=this._live_latency_chaser)===null||X===void 0||X.destroy(),this._live_latency_chaser=null,(he=this._startup_stall_jumper)===null||he===void 0||he.destroy(),this._startup_stall_jumper=null,(me=this._loading_controller)===null||me===void 0||me.destroy(),this._loading_controller=null,(je=this._seeking_handler)===null||je===void 0||je.destroy(),this._seeking_handler=null,(Re=this._mse_controller)===null||Re===void 0||Re.flush(),(ee=this._transmuxer)===null||ee===void 0||ee.close(),(oe=this._transmuxer)===null||oe===void 0||oe.destroy(),this._transmuxer=null},N.prototype.play=function(){return this._media_element.play()},N.prototype.pause=function(){this._media_element.pause()},N.prototype.seek=function(P){this._media_element&&this._seeking_handler?this._seeking_handler.seek(P):this._pending_seek_time=P},Object.defineProperty(N.prototype,"mediaInfo",{get:function(){return Object.assign({},this._media_info)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"statisticsInfo",{get:function(){return Object.assign({},this._statistics_info)},enumerable:!1,configurable:!0}),N.prototype._onMSESourceOpen=function(){this._mse_source_opened=!0,this._has_pending_load&&(this._has_pending_load=!1,this.load())},N.prototype._onMSEUpdateEnd=function(){this._config.isLive&&this._config.liveBufferLatencyChasing&&this._live_latency_chaser&&this._live_latency_chaser.notifyBufferedRangeUpdate(),this._loading_controller.notifyBufferedPositionChanged()},N.prototype._onMSEBufferFull=function(){y.a.v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),this._loading_controller.suspendTransmuxer()},N.prototype._onMSEError=function(P){this._emitter.emit(w.a.ERROR,E.b.MEDIA_ERROR,E.a.MEDIA_MSE_ERROR,P)},N.prototype._onMSEStartStreaming=function(){this._loaded_metadata_received&&(this._config.isLive||(y.a.v(this.TAG,"Resume transmuxing task due to ManagedMediaSource onStartStreaming"),this._loading_controller.resumeTransmuxer()))},N.prototype._onMSEEndStreaming=function(){this._config.isLive||(y.a.v(this.TAG,"Suspend transmuxing task due to ManagedMediaSource onEndStreaming"),this._loading_controller.suspendTransmuxer())},N.prototype._onMediaLoadedMetadata=function(P){this._loaded_metadata_received=!0,this._pending_seek_time!=null&&(this._seeking_handler.seek(this._pending_seek_time),this._pending_seek_time=null)},N.prototype._onRequestDirectSeek=function(P){this._seeking_handler.directSeek(P)},N.prototype._onRequiredUnbufferedSeek=function(P){this._mse_controller.flush(),this._transmuxer.seek(P)},N.prototype._onRequestPauseTransmuxer=function(){this._transmuxer.pause()},N.prototype._onRequestResumeTransmuxer=function(){this._transmuxer.resume()},N.prototype._fillStatisticsInfo=function(P){if(P.playerType="MSEPlayer",!(this._media_element instanceof HTMLVideoElement))return P;var H=!0,X=0,he=0;if(this._media_element.getVideoPlaybackQuality){var me=this._media_element.getVideoPlaybackQuality();X=me.totalVideoFrames,he=me.droppedVideoFrames}else this._media_element.webkitDecodedFrameCount!=null?(X=this._media_element.webkitDecodedFrameCount,he=this._media_element.webkitDroppedFrameCount):H=!1;return H&&(P.decodedFrames=X,P.droppedFrames=he),P},N}(),ie=i(18),Q=i(8),ne=function(){function N(P,H){this.TAG="PlayerEngineDedicatedThread",this._emitter=new g,this._media_element=null,this._worker_destroying=!1,this._seeking_handler=null,this._loading_controller=null,this._startup_stall_jumper=null,this._live_latency_chaser=null,this._live_latency_synchronizer=null,this._pending_seek_time=null,this._media_info=null,this._statistics_info=null,this.e=null,this._media_data_source=P,this._config=d(),typeof H=="object"&&Object.assign(this._config,H),P.isLive===!0&&(this._config.isLive=!0),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this),onMediaLoadedMetadata:this._onMediaLoadedMetadata.bind(this),onMediaTimeUpdate:this._onMediaTimeUpdate.bind(this),onMediaReadyStateChanged:this._onMediaReadyStateChange.bind(this)},Q.a.registerListener(this.e.onLoggingConfigChanged),this._worker=ie(24,{all:!0}),this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",media_data_source:this._media_data_source,config:this._config}),this._worker.postMessage({cmd:"logging_config",logging_config:Q.a.getConfig()})}return N.isSupported=function(){return!!self.Worker&&(!(!self.MediaSource||!("canConstructInDedicatedWorker"in self.MediaSource)||self.MediaSource.canConstructInDedicatedWorker!==!0)||!(!self.ManagedMediaSource||!("canConstructInDedicatedWorker"in self.ManagedMediaSource)||self.ManagedMediaSource.canConstructInDedicatedWorker!==!0))},N.prototype.destroy=function(){this._emitter.emit(w.a.DESTROYING),this.unload(),this.detachMediaElement(),this._worker_destroying=!0,this._worker.postMessage({cmd:"destroy"}),Q.a.removeListener(this.e.onLoggingConfigChanged),this.e=null,this._media_data_source=null,this._emitter.removeAllListeners(),this._emitter=null},N.prototype.on=function(P,H){var X=this;this._emitter.addListener(P,H),P===w.a.MEDIA_INFO&&this._media_info?Promise.resolve().then(function(){return X._emitter.emit(w.a.MEDIA_INFO,X.mediaInfo)}):P==w.a.STATISTICS_INFO&&this._statistics_info&&Promise.resolve().then(function(){return X._emitter.emit(w.a.STATISTICS_INFO,X.statisticsInfo)})},N.prototype.off=function(P,H){this._emitter.removeListener(P,H)},N.prototype.attachMediaElement=function(P){this._media_element=P,this._media_element.src="",this._media_element.removeAttribute("src"),this._media_element.srcObject=null,this._media_element.load(),this._media_element.addEventListener("loadedmetadata",this.e.onMediaLoadedMetadata),this._media_element.addEventListener("timeupdate",this.e.onMediaTimeUpdate),this._media_element.addEventListener("readystatechange",this.e.onMediaReadyStateChanged),this._worker.postMessage({cmd:"initialize_mse"})},N.prototype.detachMediaElement=function(){this._worker.postMessage({cmd:"shutdown_mse"}),this._media_element&&(this._media_element.removeEventListener("loadedmetadata",this.e.onMediaLoadedMetadata),this._media_element.removeEventListener("timeupdate",this.e.onMediaTimeUpdate),this._media_element.removeEventListener("readystatechange",this.e.onMediaReadyStateChanged),this._media_element.src="",this._media_element.removeAttribute("src"),this._media_element.srcObject=null,this._media_element.load(),this._media_element=null)},N.prototype.load=function(){this._worker.postMessage({cmd:"load"}),this._seeking_handler=new B(this._config,this._media_element,this._onRequiredUnbufferedSeek.bind(this)),this._loading_controller=new R(this._config,this._media_element,this._onRequestPauseTransmuxer.bind(this),this._onRequestResumeTransmuxer.bind(this)),this._startup_stall_jumper=new L(this._media_element,this._onRequestDirectSeek.bind(this)),this._config.isLive&&this._config.liveBufferLatencyChasing&&(this._live_latency_chaser=new k(this._config,this._media_element,this._onRequestDirectSeek.bind(this))),this._config.isLive&&this._config.liveSync&&(this._live_latency_synchronizer=new M(this._config,this._media_element)),this._media_element.readyState>0&&this._seeking_handler.directSeek(0)},N.prototype.unload=function(){var P,H,X,he,me,je;(P=this._media_element)===null||P===void 0||P.pause(),this._worker.postMessage({cmd:"unload"}),(H=this._live_latency_synchronizer)===null||H===void 0||H.destroy(),this._live_latency_synchronizer=null,(X=this._live_latency_chaser)===null||X===void 0||X.destroy(),this._live_latency_chaser=null,(he=this._startup_stall_jumper)===null||he===void 0||he.destroy(),this._startup_stall_jumper=null,(me=this._loading_controller)===null||me===void 0||me.destroy(),this._loading_controller=null,(je=this._seeking_handler)===null||je===void 0||je.destroy(),this._seeking_handler=null},N.prototype.play=function(){return this._media_element.play()},N.prototype.pause=function(){this._media_element.pause()},N.prototype.seek=function(P){this._media_element&&this._seeking_handler?this._seeking_handler.seek(P):this._pending_seek_time=P},Object.defineProperty(N.prototype,"mediaInfo",{get:function(){return Object.assign({},this._media_info)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"statisticsInfo",{get:function(){return Object.assign({},this._statistics_info)},enumerable:!1,configurable:!0}),N.prototype._onLoggingConfigChanged=function(P){var H;(H=this._worker)===null||H===void 0||H.postMessage({cmd:"logging_config",logging_config:P})},N.prototype._onMSEUpdateEnd=function(){this._config.isLive&&this._config.liveBufferLatencyChasing&&this._live_latency_chaser&&this._live_latency_chaser.notifyBufferedRangeUpdate(),this._loading_controller.notifyBufferedPositionChanged()},N.prototype._onMSEBufferFull=function(){y.a.v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),this._loading_controller.suspendTransmuxer()},N.prototype._onMediaLoadedMetadata=function(P){this._pending_seek_time!=null&&(this._seeking_handler.seek(this._pending_seek_time),this._pending_seek_time=null)},N.prototype._onRequestDirectSeek=function(P){this._seeking_handler.directSeek(P)},N.prototype._onRequiredUnbufferedSeek=function(P){this._worker.postMessage({cmd:"unbuffered_seek",milliseconds:P})},N.prototype._onRequestPauseTransmuxer=function(){this._worker.postMessage({cmd:"pause_transmuxer"})},N.prototype._onRequestResumeTransmuxer=function(){this._worker.postMessage({cmd:"resume_transmuxer"})},N.prototype._onMediaTimeUpdate=function(P){this._worker.postMessage({cmd:"timeupdate",current_time:P.target.currentTime})},N.prototype._onMediaReadyStateChange=function(P){this._worker.postMessage({cmd:"readystatechange",ready_state:P.target.readyState})},N.prototype._onWorkerMessage=function(P){var H,X=P.data,he=X.msg;if(he=="destroyed"||this._worker_destroying)return this._worker_destroying=!1,(H=this._worker)===null||H===void 0||H.terminate(),void(this._worker=null);switch(he){case"mse_init":var me=X;"ManagedMediaSource"in self&&!("MediaSource"in self)&&(this._media_element.disableRemotePlayback=!0),this._media_element.srcObject=me.handle;break;case"mse_event":(me=X).event==b.a.UPDATE_END?this._onMSEUpdateEnd():me.event==b.a.BUFFER_FULL&&this._onMSEBufferFull();break;case"transmuxing_event":if((me=X).event==T.a.MEDIA_INFO){var je=X;this._media_info=je.info,this._emitter.emit(w.a.MEDIA_INFO,Object.assign({},je.info))}else if(me.event==T.a.STATISTICS_INFO){var Re=X;this._statistics_info=this._fillStatisticsInfo(Re.info),this._emitter.emit(w.a.STATISTICS_INFO,Object.assign({},Re.info))}else if(me.event==T.a.RECOMMEND_SEEKPOINT){var ee=X;this._media_element&&!this._config.accurateSeek&&this._seeking_handler.directSeek(ee.milliseconds/1e3)}break;case"player_event":if((me=X).event==w.a.ERROR){var oe=X;this._emitter.emit(w.a.ERROR,oe.error_type,oe.error_detail,oe.info)}else if("extraData"in me){var ge=X;this._emitter.emit(ge.event,ge.extraData)}break;case"logcat_callback":me=X,y.a.emitter.emit("log",me.type,me.logcat);break;case"buffered_position_changed":me=X,this._loading_controller.notifyBufferedPositionChanged(me.buffered_position_milliseconds/1e3)}},N.prototype._fillStatisticsInfo=function(P){if(P.playerType="MSEPlayer",!(this._media_element instanceof HTMLVideoElement))return P;var H=!0,X=0,he=0;if(this._media_element.getVideoPlaybackQuality){var me=this._media_element.getVideoPlaybackQuality();X=me.totalVideoFrames,he=me.droppedVideoFrames}else this._media_element.webkitDecodedFrameCount!=null?(X=this._media_element.webkitDecodedFrameCount,he=this._media_element.webkitDroppedFrameCount):H=!1;return H&&(P.decodedFrames=X,P.droppedFrames=he),P},N}(),de=function(){function N(P,H){this.TAG="MSEPlayer",this._type="MSEPlayer",this._media_element=null,this._player_engine=null;var X=P.type.toLowerCase();if(X!=="mse"&&X!=="mpegts"&&X!=="m2ts"&&X!=="flv")throw new x.b("MSEPlayer requires an mpegts/m2ts/flv MediaDataSource input!");if(H&&H.enableWorkerForMSE&&ne.isSupported())try{this._player_engine=new ne(P,H)}catch{y.a.e(this.TAG,"Error while initializing PlayerEngineDedicatedThread, fallback to PlayerEngineMainThread"),this._player_engine=new Y(P,H)}else this._player_engine=new Y(P,H)}return N.prototype.destroy=function(){this._player_engine.destroy(),this._player_engine=null,this._media_element=null},N.prototype.on=function(P,H){this._player_engine.on(P,H)},N.prototype.off=function(P,H){this._player_engine.off(P,H)},N.prototype.attachMediaElement=function(P){this._media_element=P,this._player_engine.attachMediaElement(P)},N.prototype.detachMediaElement=function(){this._media_element=null,this._player_engine.detachMediaElement()},N.prototype.load=function(){this._player_engine.load()},N.prototype.unload=function(){this._player_engine.unload()},N.prototype.play=function(){return this._player_engine.play()},N.prototype.pause=function(){this._player_engine.pause()},Object.defineProperty(N.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"buffered",{get:function(){return this._media_element.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"duration",{get:function(){return this._media_element.duration},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"volume",{get:function(){return this._media_element.volume},set:function(P){this._media_element.volume=P},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"muted",{get:function(){return this._media_element.muted},set:function(P){this._media_element.muted=P},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"currentTime",{get:function(){return this._media_element?this._media_element.currentTime:0},set:function(P){this._player_engine.seek(P)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"mediaInfo",{get:function(){return this._player_engine.mediaInfo},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"statisticsInfo",{get:function(){return this._player_engine.statisticsInfo},enumerable:!1,configurable:!0}),N}(),xe=function(){function N(P,H){this.TAG="NativePlayer",this._type="NativePlayer",this._emitter=new m.a,this._config=d(),typeof H=="object"&&Object.assign(this._config,H);var X=P.type.toLowerCase();if(X==="mse"||X==="mpegts"||X==="m2ts"||X==="flv")throw new x.b("NativePlayer does't support mse/mpegts/m2ts/flv MediaDataSource input!");if(P.hasOwnProperty("segments"))throw new x.b("NativePlayer(".concat(P.type,") doesn't support multipart playback!"));this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this)},this._pendingSeekTime=null,this._statisticsReporter=null,this._mediaDataSource=P,this._mediaElement=null}return N.prototype.destroy=function(){this._emitter.emit(w.a.DESTROYING),this._mediaElement&&(this.unload(),this.detachMediaElement()),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},N.prototype.on=function(P,H){var X=this;P===w.a.MEDIA_INFO?this._mediaElement!=null&&this._mediaElement.readyState!==0&&Promise.resolve().then(function(){X._emitter.emit(w.a.MEDIA_INFO,X.mediaInfo)}):P===w.a.STATISTICS_INFO&&this._mediaElement!=null&&this._mediaElement.readyState!==0&&Promise.resolve().then(function(){X._emitter.emit(w.a.STATISTICS_INFO,X.statisticsInfo)}),this._emitter.addListener(P,H)},N.prototype.off=function(P,H){this._emitter.removeListener(P,H)},N.prototype.attachMediaElement=function(P){if(this._mediaElement=P,P.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._pendingSeekTime!=null)try{P.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch{}},N.prototype.detachMediaElement=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement=null),this._statisticsReporter!=null&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},N.prototype.load=function(){if(!this._mediaElement)throw new x.a("HTMLMediaElement must be attached before load()!");this._mediaElement.src=this._mediaDataSource.url,this._mediaElement.readyState>0&&(this._mediaElement.currentTime=0),this._mediaElement.preload="auto",this._mediaElement.load(),this._statisticsReporter=window.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval)},N.prototype.unload=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src")),this._statisticsReporter!=null&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},N.prototype.play=function(){return this._mediaElement.play()},N.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(N.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(P){this._mediaElement.volume=P},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(P){this._mediaElement.muted=P},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(P){this._mediaElement?this._mediaElement.currentTime=P:this._pendingSeekTime=P},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"mediaInfo",{get:function(){var P={mimeType:(this._mediaElement instanceof HTMLAudioElement?"audio/":"video/")+this._mediaDataSource.type};return this._mediaElement&&(P.duration=Math.floor(1e3*this._mediaElement.duration),this._mediaElement instanceof HTMLVideoElement&&(P.width=this._mediaElement.videoWidth,P.height=this._mediaElement.videoHeight)),P},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"statisticsInfo",{get:function(){var P={playerType:this._type,url:this._mediaDataSource.url};if(!(this._mediaElement instanceof HTMLVideoElement))return P;var H=!0,X=0,he=0;if(this._mediaElement.getVideoPlaybackQuality){var me=this._mediaElement.getVideoPlaybackQuality();X=me.totalVideoFrames,he=me.droppedVideoFrames}else this._mediaElement.webkitDecodedFrameCount!=null?(X=this._mediaElement.webkitDecodedFrameCount,he=this._mediaElement.webkitDroppedFrameCount):H=!1;return H&&(P.decodedFrames=X,P.droppedFrames=he),P},enumerable:!1,configurable:!0}),N.prototype._onvLoadedMetadata=function(P){this._pendingSeekTime!=null&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null),this._emitter.emit(w.a.MEDIA_INFO,this.mediaInfo)},N.prototype._reportStatisticsInfo=function(){this._emitter.emit(w.a.STATISTICS_INFO,this.statisticsInfo)},N}();a.a.install();var J={createPlayer:function(N,P){var H=N;if(H==null||typeof H!="object")throw new x.b("MediaDataSource must be an javascript object!");if(!H.hasOwnProperty("type"))throw new x.b("MediaDataSource must has type field to indicate video file type!");switch(H.type){case"mse":case"mpegts":case"m2ts":case"flv":return new de(H,P);default:return new xe(H,P)}},isSupported:function(){return h.supportMSEH264Playback()},getFeatureList:function(){return h.getFeatureList()}};J.BaseLoader=_.a,J.LoaderStatus=_.c,J.LoaderErrors=_.b,J.Events=w.a,J.ErrorTypes=E.b,J.ErrorDetails=E.a,J.MSEPlayer=de,J.NativePlayer=xe,J.LoggingControl=Q.a,Object.defineProperty(J,"version",{enumerable:!0,get:function(){return"1.8.0"}}),r.default=J}])})})(Oy);var PA=Oy.exports;const as=dv(PA),OA="placeos-prod.avit.it.ucla.edu";function MA({systemId:e,recordingModuleIp:t,channelId:n}){const r=q.useRef(null),i=q.useRef(null),[a,o]=q.useState(null),[l,d]=q.useState("Loading..."),[h,_]=q.useState(0),[y,g]=q.useState(!1);return q.useEffect(()=>{if(!n||!t){o("No channel selected");return}const m=r.current;if(!m)return;if(i.current&&(i.current.destroy(),i.current=null),as.getFeatureList().mseLivePlayback){const O={type:"mpegts",isLive:!0,url:`https://${OA}/epiphan/https/${t}/streams/${n}/ts`},b={enableWorker:!0,enableStashBuffer:!0,stashInitialSize:384,liveBufferLatencyChasing:!0,liveBufferLatencyMaxLatency:3,liveBufferLatencyMinRemain:1,liveBufferLatencyChaseOnStalled:!1,liveSyncDurationCount:5,fixAudioTimestampGap:!0,autoCleanupSourceBuffer:!0,autoCleanupMaxBackwardDuration:10,autoCleanupMinBackwardDuration:5},E=as.createPlayer(O,b);i.current=E,E.attachMediaElement(m),E.on(as.Events.LOADING_COMPLETE,()=>{d("Stream ready"),o(null)}),E.on(as.Events.ERROR,T=>{console.error("Stream error:",T),o(`Error: ${T.type||"Unknown error"}`)}),m.addEventListener("waiting",()=>{console.log("Buffering..."),g(!0),d("Buffering...")}),m.addEventListener("playing",()=>{console.log("Playing"),g(!1),d("Playing")}),m.addEventListener("canplay",()=>{g(!1)}),E.load();const x=E.play();x!==void 0&&x.catch(()=>{console.log("Autoplay prevented, click play button"),d("Click play to start")})}else o("Browser does not support MSE");const C=setInterval(()=>{if(r.current&&r.current.buffered.length>0){const w=r.current.buffered.end(0),O=r.current.currentTime,b=w-O;_(Number(b.toFixed(2))),b>5&&!r.current.paused&&(console.log("Buffer very large, jumping to reduce latency"),r.current.currentTime=w-2)}},2e3);return()=>{clearInterval(C),i.current&&(i.current.destroy(),i.current=null)}},[n,t,e]),n?V.jsx("div",{className:"card bg-base-200",children:V.jsxs("div",{className:"card-body",children:[V.jsxs("div",{className:"flex items-center justify-between mb-4",children:[V.jsx("h2",{className:"card-title",children:"Live Stream"}),V.jsxs("div",{className:"text-sm space-x-4 flex items-center",children:[V.jsxs("span",{children:["Status: ",l]}),V.jsxs("span",{children:["Buffer: ",h,"s"]}),y&&V.jsx("span",{className:"loading loading-spinner loading-sm"})]})]}),a&&V.jsx("div",{className:"alert alert-error mb-4",children:V.jsx("span",{children:a})}),V.jsx("div",{className:"aspect-video bg-base-300 rounded-lg overflow-hidden",children:V.jsx("video",{ref:r,controls:!0,muted:!0,className:"w-full h-full",playsInline:!0})})]})}):V.jsx("div",{className:"card bg-base-200",children:V.jsx("div",{className:"card-body",children:V.jsx("div",{className:"alert alert-info",children:V.jsx("span",{children:"Select a camera to view live stream"})})})})}function DA({systemId:e,cameraModule:t,moduleInfo:n}){const[r,i]=q.useState(!1),[a,o]=q.useState({x:0,y:0}),[l,d]=q.useState(!1),[h,_]=q.useState(0),[y,g]=q.useState(!1),m=q.useRef(null),C=q.useRef(null),w=q.useRef(null),O=q.useRef(null),b=q.useRef(""),E=q.useRef(""),x=async(Q,ne=[])=>{try{await bA(e,t,Q,ne)}catch(de){console.error("PTZ command failed:",de)}},T=(Q,ne)=>{const de=Math.atan2(ne,Q)*(180/Math.PI);return Math.sqrt(Q*Q+ne*ne)<10?null:de>=-45&&de<45?"right":de>=45&&de<135?"down":de>=-135&&de<-45?"up":"left"},j=Q=>{d(!0),R(Q.clientX,Q.clientY)},W=Q=>{l&&R(Q.clientX,Q.clientY)},B=()=>{d(!1),o({x:0,y:0}),x("stop"),w.current&&(clearInterval(w.current),w.current=null),b.current=""},R=(Q,ne)=>{if(!m.current)return;const de=m.current.getBoundingClientRect(),xe=de.left+de.width/2,J=de.top+de.height/2;let N=Q-xe,P=ne-J;const H=80,X=Math.sqrt(N*N+P*P);X>H&&(N=N/X*H,P=P/X*H),o({x:N,y:P});const he=T(N,P);if(he){const me=he==="up"||he==="down"?"tilt":"pan",je=he==="up"?"up":he==="down"?"down":he==="left"?"left":"right",Re=`${me}-${je}`;b.current!==Re&&(b.current=Re,x(me,[je]),w.current&&clearInterval(w.current),w.current=setInterval(()=>{x(me,[je])},100))}};q.useEffect(()=>(l&&(window.addEventListener("mousemove",W),window.addEventListener("mouseup",B)),()=>{window.removeEventListener("mousemove",W),window.removeEventListener("mouseup",B)}),[l]),q.useEffect(()=>()=>{w.current&&clearInterval(w.current),O.current&&clearInterval(O.current)},[]);const L=Q=>{g(!0),Y(Q.clientY)},k=Q=>{y&&Y(Q.clientY)},M=()=>{g(!1),_(0),x("stop"),O.current&&(clearInterval(O.current),O.current=null),E.current=""},Y=Q=>{if(!C.current)return;const ne=C.current.getBoundingClientRect(),de=ne.top+ne.height/2;let xe=Q-de;const J=80;if(Math.abs(xe)>J&&(xe=xe/Math.abs(xe)*J),_(xe),Math.abs(xe)>10){const N=xe<0?"in":"out",P=`zoom-${N}`;E.current!==P&&(E.current=P,x("zoom",[N]),O.current&&clearInterval(O.current),O.current=setInterval(()=>{x("zoom",[N])},100))}};q.useEffect(()=>(y&&(window.addEventListener("mousemove",k),window.addEventListener("mouseup",M)),()=>{window.removeEventListener("mousemove",k),window.removeEventListener("mouseup",M)}),[y]);const ie=()=>{i(!0),x("home").finally(()=>i(!1))};return V.jsxs("div",{className:"space-y-6",children:[V.jsxs("div",{children:[V.jsx("h3",{className:"text-lg font-semibold mb-3",children:"PTZ Controls"}),V.jsxs("div",{className:"bg-base-300 rounded-lg p-4 space-y-2",children:[V.jsxs("div",{className:"flex items-center justify-between",children:[V.jsx("span",{className:"text-xs font-semibold text-base-content/60 uppercase tracking-wider",children:"Target Module"}),V.jsx("div",{className:"badge badge-primary badge-sm",children:"Active"})]}),n?V.jsxs("div",{className:"space-y-2",children:[V.jsx("div",{children:V.jsx("div",{className:"text-sm font-medium",children:n.custom_name||n.name||"Unnamed Module"})}),V.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[V.jsxs("div",{className:"col-span-2",children:[V.jsx("span",{className:"text-base-content/60",children:"Module ID:"}),V.jsx("div",{className:"font-mono text-base-content/90 truncate mt-0.5",children:n.id})]}),n.ip&&V.jsxs("div",{children:[V.jsx("span",{className:"text-base-content/60",children:"IP Address:"}),V.jsxs("div",{className:"font-mono text-base-content/90 mt-0.5",children:[n.ip,n.port&&`:${n.port}`]})]}),n.edge_id&&V.jsxs("div",{children:[V.jsx("span",{className:"text-base-content/60",children:"Edge:"}),V.jsx("div",{className:"font-mono text-base-content/90 truncate mt-0.5",children:n.edge_id})]}),n.driver_id&&V.jsxs("div",{className:"col-span-2",children:[V.jsx("span",{className:"text-base-content/60",children:"Driver:"}),V.jsx("div",{className:"font-mono text-base-content/90 truncate mt-0.5",children:n.driver_id})]}),n.role!==void 0&&V.jsxs("div",{children:[V.jsx("span",{className:"text-base-content/60",children:"Role:"}),V.jsx("div",{className:"text-base-content/90 mt-0.5",children:n.role})]}),(n.connected!==void 0||n.running!==void 0)&&V.jsxs("div",{className:"col-span-2",children:[V.jsx("span",{className:"text-base-content/60",children:"Status:"}),V.jsxs("div",{className:"flex gap-1 mt-0.5",children:[n.connected!==void 0&&V.jsx("span",{className:`badge badge-xs ${n.connected?"badge-success":"badge-error"}`,children:n.connected?"Connected":"Disconnected"}),n.running!==void 0&&V.jsx("span",{className:`badge badge-xs ${n.running?"badge-info":"badge-warning"}`,children:n.running?"Running":"Stopped"}),n.has_runtime_error&&V.jsx("span",{className:"badge badge-xs badge-error",children:"Error"})]})]})]})]}):V.jsxs("div",{className:"text-xs",children:[V.jsx("div",{className:"text-base-content/60",children:"Module ID:"}),V.jsx("div",{className:"font-mono text-base-content/90 truncate mt-1",children:t})]})]})]}),V.jsxs("div",{className:"flex items-center justify-center gap-8",children:[V.jsxs("div",{className:"flex flex-col items-center gap-3",children:[V.jsx("div",{className:"text-xs font-semibold text-base-content/60 uppercase tracking-wider mb-2",children:"Zoom"}),V.jsxs("svg",{ref:C,width:"100",height:"280",viewBox:"0 0 100 280",className:"drop-shadow-lg",onMouseDown:L,style:{cursor:y?"grabbing":"grab"},children:[V.jsx("rect",{x:"30",y:"20",width:"40",height:"240",rx:"20",fill:"rgba(30,30,40,0.8)",stroke:"rgba(255,255,255,0.15)",strokeWidth:"2"}),V.jsx("path",{d:"M 50 30 L 60 50 L 40 50 Z",fill:"rgba(255,255,255,0.9)"}),V.jsx("text",{x:"50",y:"20",textAnchor:"middle",fill:"rgba(255,255,255,0.7)",fontSize:"10",fontWeight:"bold",children:"IN"}),V.jsx("path",{d:"M 50 250 L 60 230 L 40 230 Z",fill:"rgba(255,255,255,0.9)"}),V.jsx("text",{x:"50",y:"273",textAnchor:"middle",fill:"rgba(255,255,255,0.7)",fontSize:"10",fontWeight:"bold",children:"OUT"}),V.jsx("line",{x1:"30",y1:"140",x2:"70",y2:"140",stroke:"rgba(255,255,255,0.3)",strokeWidth:"1",strokeDasharray:"3,3"}),V.jsx("rect",{x:"25",y:135+h,width:"50",height:"10",rx:"5",fill:"rgba(255,255,255,0.95)",filter:"drop-shadow(0 4px 6px rgba(0,0,0,0.3))",style:{cursor:y?"grabbing":"grab"}})]})]}),V.jsx("div",{className:"relative select-none",children:V.jsxs("svg",{ref:m,width:"280",height:"280",viewBox:"0 0 280 280",className:"drop-shadow-lg",onMouseDown:j,style:{cursor:l?"grabbing":"grab"},children:[V.jsx("circle",{cx:"140",cy:"140",r:"130",fill:"rgba(30,30,40,0.8)",stroke:"rgba(255,255,255,0.15)",strokeWidth:"2"}),V.jsx("path",{d:"M 140 20 L 155 55 L 125 55 Z",fill:"rgba(255,255,255,0.9)"}),V.jsx("path",{d:"M 140 260 L 155 225 L 125 225 Z",fill:"rgba(255,255,255,0.9)"}),V.jsx("path",{d:"M 20 140 L 55 125 L 55 155 Z",fill:"rgba(255,255,255,0.9)"}),V.jsx("path",{d:"M 260 140 L 225 125 L 225 155 Z",fill:"rgba(255,255,255,0.9)"}),V.jsx("rect",{x:"90",y:"90",width:"10",height:"10",fill:"rgba(255,255,255,0.5)"}),V.jsx("rect",{x:"180",y:"90",width:"10",height:"10",fill:"rgba(255,255,255,0.5)"}),V.jsx("rect",{x:"90",y:"180",width:"10",height:"10",fill:"rgba(255,255,255,0.5)"}),V.jsx("rect",{x:"180",y:"180",width:"10",height:"10",fill:"rgba(255,255,255,0.5)"}),V.jsx("circle",{cx:140+a.x,cy:140+a.y,r:"32",fill:"rgba(255,255,255,0.95)",filter:"drop-shadow(0 4px 6px rgba(0,0,0,0.3))",style:{cursor:l?"grabbing":"grab"}}),V.jsx("circle",{cx:140+a.x,cy:140+a.y,r:"20",fill:"rgba(200,200,200,0.4)",pointerEvents:"none"})]})})]}),V.jsxs("button",{onClick:ie,className:"btn btn-outline btn-block gap-2",disabled:r,title:"Home Position",children:[V.jsx(cE,{size:18}),V.jsx("span",{children:"Home Position"})]})]})}function IA({cameraPreviews:e,selectedCamera:t,onCameraSelect:n}){const[r,i]=q.useState(0),a=e.length;return q.useEffect(()=>{const o=setInterval(()=>{i(l=>l+1)},3e3);return()=>clearInterval(o)},[]),V.jsx("div",{className:"card bg-base-200",children:V.jsxs("div",{className:"card-body",children:[V.jsxs("h2",{className:"card-title",children:["Available Cameras (",a,")"]}),V.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:e.map((o,l)=>V.jsxs("button",{onClick:()=>n(o.module),className:`w-48 h-48 rounded-lg overflow-hidden bg-base-300 relative group hover:ring-4 hover:ring-primary transition-all ${t===o.module?"ring-4 ring-primary":""}`,children:[V.jsx("img",{src:`${o.url}&t=${r}`,alt:o.label,className:"w-full h-full object-cover"}),V.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-3",children:[V.jsx("div",{className:"text-white text-sm font-medium truncate",children:o.label}),V.jsx("div",{className:"text-white/60 text-xs font-mono truncate mt-1",children:o.module})]}),t===o.module&&V.jsx("div",{className:"absolute top-2 right-2 badge badge-primary badge-sm",children:"Active"})]},l))})]})})}function NA(){const{id:e}=aw(),[t,n]=Zw(),{data:r,isLoading:i,isError:a,error:o}=TA(e),{data:l}=LA(e),[d,h]=q.useState(null),_=(r==null?void 0:r.loadedModules)||[],y=l||[];q.useEffect(()=>{if(y.length>0){const x=t.get("camera");h(x||y[0].module)}},[y,t]);const g=()=>_.filter(T=>T.name==="Recording")[0],m=()=>{const x=g();if(!x)return null;if(x.ip)return x.ip;if(x.uri)try{return new URL(x.uri).hostname}catch{return null}return null},C=x=>{const T=y.find(j=>j.module===x);return(T==null?void 0:T.channelId)||null},w=x=>{h(x),n({camera:x})};if(i)return V.jsx("div",{className:"flex items-center justify-center h-full",children:V.jsx("span",{className:"loading loading-spinner loading-lg"})});if(a)return V.jsx("div",{className:"p-6",children:V.jsx("div",{className:"alert alert-error",children:V.jsx("span",{children:o instanceof Error?o.message:"Failed to load system"})})});if(!r)return V.jsx("div",{className:"p-6",children:V.jsx("div",{className:"alert alert-warning",children:V.jsx("span",{children:"System not found"})})});const O=y.find(x=>x.module===d),b=g(),E=m();return V.jsxs("div",{className:"h-full flex flex-col",children:[V.jsx("div",{className:"p-6 border-b border-base-300",children:V.jsxs("div",{className:"flex items-center gap-4",children:[V.jsx(di,{to:"/systems",className:"btn btn-ghost btn-circle",children:V.jsx(oE,{size:20})}),V.jsxs("div",{className:"flex-1",children:[V.jsx("h1",{className:"text-2xl font-bold",children:r.display_name||r.name}),O&&V.jsxs("p",{className:"text-sm text-base-content/60 mt-1",children:["Viewing: ",O.label]})]})]})}),V.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:V.jsxs("div",{className:"space-y-6",children:[y.length>0&&b&&E&&V.jsxs(V.Fragment,{children:[V.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[d&&V.jsx("div",{className:"flex-1 min-w-0",children:V.jsx(MA,{systemId:r.id,recordingModuleIp:E,channelId:C(d)})}),d&&V.jsx("div",{className:"lg:w-[420px] flex-shrink-0",children:V.jsx("div",{className:"card bg-base-200",children:V.jsx("div",{className:"card-body",children:V.jsx(DA,{systemId:r.id,cameraModule:b.id,moduleInfo:b})})})})]}),y.length>1&&V.jsx(IA,{cameraPreviews:y,selectedCamera:d,onCameraSelect:w})]}),y.length===0&&V.jsx("div",{className:"alert alert-info",children:V.jsx("span",{children:"No active camera feeds available for this system"})})]})})]})}function Cn({title:e}){return V.jsx("div",{className:"h-full flex items-center justify-center",children:V.jsxs("div",{className:"text-center",children:[V.jsx(uE,{className:"mx-auto mb-4 text-base-content/40",size:64}),V.jsx("h1",{className:"text-2xl font-bold mb-2",children:e}),V.jsx("p",{className:"text-base-content/60",children:"This page is under construction"})]})})}const My=q.createContext(null);function BA(e){const t=e.domain||location.hostname,n=e.port||location.port,r=location.origin,i=(location.pathname+"/").replace("//","/"),a=location.href.includes("mock=true")||localStorage.getItem("mock")==="true",o={auth_type:"auth_code",scope:"public",host:`${t}${n?":"+n:""}`,auth_uri:`${r}/auth/oauth/authorize`,token_uri:`${r}/auth/oauth/token`,redirect_uri:`${location.origin}${i}oauth-resp.html`,handle_login:!0,use_iframe:!0,mock:a};return localStorage&&localStorage.setItem("mock",`${!!a&&!location.href.includes("mock=false")}`),Tb(o)}const UA=({children:e})=>{const[t,n]=q.useState(null),[r,i]=q.useState(!1),[a,o]=q.useState(!0);q.useEffect(()=>{window.debug=!0,(async()=>{try{await BA({route:"/control",use_domain:!1,local_login:!1,mock:!1});const _=await fA(a2("current"));n(_),i(!0)}catch{n(null),i(!1)}finally{o(!1)}})()},[]);const d={user:t,isAuthenticated:r,loading:a,logOut:()=>Lb()};return V.jsx(My.Provider,{value:d,children:!a&&e})},jA=()=>q.useContext(My),FA=new sS({defaultOptions:{queries:{staleTime:5*60*1e3,gcTime:10*60*1e3,refetchOnWindowFocus:!1,retry:1}}});function VA(){const{isAuthenticated:e,loading:t}=jA();return t?V.jsx("div",{className:"flex h-screen items-center justify-center",children:V.jsx("div",{className:"h-16 w-16 animate-spin rounded-full border-b-2 border-indigo-600"})}):V.jsxs(lS,{client:FA,children:[V.jsx(qw,{children:V.jsx(Ew,{children:V.jsx(Dt,{path:"/",element:V.jsx(pE,{}),children:e&&V.jsxs(V.Fragment,{children:[V.jsx(Dt,{index:!0,element:V.jsx(vw,{to:"/systems",replace:!0})}),V.jsx(Dt,{path:"systems",element:V.jsx(CA,{})}),V.jsx(Dt,{path:"systems/:id",element:V.jsx(NA,{})}),V.jsx(Dt,{path:"modules",element:V.jsx(Cn,{title:"Modules"})}),V.jsx(Dt,{path:"zones",element:V.jsx(Cn,{title:"Zones"})}),V.jsx(Dt,{path:"drivers",element:V.jsx(Cn,{title:"Drivers"})}),V.jsx(Dt,{path:"repositories",element:V.jsx(Cn,{title:"Repositories"})}),V.jsx(Dt,{path:"triggers",element:V.jsx(Cn,{title:"Triggers"})}),V.jsx(Dt,{path:"alerts",element:V.jsx(Cn,{title:"Alerts"})}),V.jsx(Dt,{path:"metrics",element:V.jsx(Cn,{title:"Metrics"})}),V.jsx(Dt,{path:"users",element:V.jsx(Cn,{title:"Users"})}),V.jsx(Dt,{path:"domains",element:V.jsx(Cn,{title:"Domains"})}),V.jsx(Dt,{path:"manage",element:V.jsx(Cn,{title:"Manage Instance"})})]})})})}),V.jsx(SS,{initialIsOpen:!1})]})}Qm(document.getElementById("root")).render(V.jsx(q.StrictMode,{children:V.jsx(UA,{children:V.jsx(VA,{})})}));
