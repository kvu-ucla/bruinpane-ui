var Zm=Object.defineProperty;var Jm=(e,t,n)=>t in e?Zm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var te=(e,t,n)=>Jm(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function eg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Df={exports:{}},Ka={},Of={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fo=Symbol.for("react.element"),tg=Symbol.for("react.portal"),ng=Symbol.for("react.fragment"),rg=Symbol.for("react.strict_mode"),ig=Symbol.for("react.profiler"),og=Symbol.for("react.provider"),ag=Symbol.for("react.context"),sg=Symbol.for("react.forward_ref"),lg=Symbol.for("react.suspense"),ug=Symbol.for("react.memo"),cg=Symbol.for("react.lazy"),Kc=Symbol.iterator;function dg(e){return e===null||typeof e!="object"?null:(e=Kc&&e[Kc]||e["@@iterator"],typeof e=="function"?e:null)}var If={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Nf=Object.assign,Bf={};function si(e,t,n){this.props=e,this.context=t,this.refs=Bf,this.updater=n||If}si.prototype.isReactComponent={};si.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};si.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Uf(){}Uf.prototype=si.prototype;function lu(e,t,n){this.props=e,this.context=t,this.refs=Bf,this.updater=n||If}var uu=lu.prototype=new Uf;uu.constructor=lu;Nf(uu,si.prototype);uu.isPureReactComponent=!0;var Yc=Array.isArray,jf=Object.prototype.hasOwnProperty,cu={current:null},Ff={key:!0,ref:!0,__self:!0,__source:!0};function Vf(e,t,n){var r,i={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)jf.call(t,r)&&!Ff.hasOwnProperty(r)&&(i[r]=t[r]);var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){for(var d=Array(u),h=0;h<u;h++)d[h]=arguments[h+2];i.children=d}if(e&&e.defaultProps)for(r in u=e.defaultProps,u)i[r]===void 0&&(i[r]=u[r]);return{$$typeof:fo,type:e,key:o,ref:a,props:i,_owner:cu.current}}function fg(e,t){return{$$typeof:fo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function du(e){return typeof e=="object"&&e!==null&&e.$$typeof===fo}function hg(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Qc=/\/+/g;function bs(e,t){return typeof e=="object"&&e!==null&&e.key!=null?hg(""+e.key):t.toString(36)}function Ko(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case fo:case tg:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+bs(a,0):r,Yc(i)?(n="",e!=null&&(n=e.replace(Qc,"$&/")+"/"),Ko(i,t,n,"",function(h){return h})):i!=null&&(du(i)&&(i=fg(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Qc,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",Yc(e))for(var u=0;u<e.length;u++){o=e[u];var d=r+bs(o,u);a+=Ko(o,t,n,d,i)}else if(d=dg(e),typeof d=="function")for(e=d.call(e),u=0;!(o=e.next()).done;)o=o.value,d=r+bs(o,u++),a+=Ko(o,t,n,d,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Ro(e,t,n){if(e==null)return e;var r=[],i=0;return Ko(e,r,"","",function(o){return t.call(n,o,i++)}),r}function pg(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var xt={current:null},Yo={transition:null},_g={ReactCurrentDispatcher:xt,ReactCurrentBatchConfig:Yo,ReactCurrentOwner:cu};function zf(){throw Error("act(...) is not supported in production builds of React.")}Ce.Children={map:Ro,forEach:function(e,t,n){Ro(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ro(e,function(){t++}),t},toArray:function(e){return Ro(e,function(t){return t})||[]},only:function(e){if(!du(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ce.Component=si;Ce.Fragment=ng;Ce.Profiler=ig;Ce.PureComponent=lu;Ce.StrictMode=rg;Ce.Suspense=lg;Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_g;Ce.act=zf;Ce.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Nf({},e.props),i=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=cu.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(d in t)jf.call(t,d)&&!Ff.hasOwnProperty(d)&&(r[d]=t[d]===void 0&&u!==void 0?u[d]:t[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){u=Array(d);for(var h=0;h<d;h++)u[h]=arguments[h+2];r.children=u}return{$$typeof:fo,type:e.type,key:i,ref:o,props:r,_owner:a}};Ce.createContext=function(e){return e={$$typeof:ag,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:og,_context:e},e.Consumer=e};Ce.createElement=Vf;Ce.createFactory=function(e){var t=Vf.bind(null,e);return t.type=e,t};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(e){return{$$typeof:sg,render:e}};Ce.isValidElement=du;Ce.lazy=function(e){return{$$typeof:cg,_payload:{_status:-1,_result:e},_init:pg}};Ce.memo=function(e,t){return{$$typeof:ug,type:e,compare:t===void 0?null:t}};Ce.startTransition=function(e){var t=Yo.transition;Yo.transition={};try{e()}finally{Yo.transition=t}};Ce.unstable_act=zf;Ce.useCallback=function(e,t){return xt.current.useCallback(e,t)};Ce.useContext=function(e){return xt.current.useContext(e)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(e){return xt.current.useDeferredValue(e)};Ce.useEffect=function(e,t){return xt.current.useEffect(e,t)};Ce.useId=function(){return xt.current.useId()};Ce.useImperativeHandle=function(e,t,n){return xt.current.useImperativeHandle(e,t,n)};Ce.useInsertionEffect=function(e,t){return xt.current.useInsertionEffect(e,t)};Ce.useLayoutEffect=function(e,t){return xt.current.useLayoutEffect(e,t)};Ce.useMemo=function(e,t){return xt.current.useMemo(e,t)};Ce.useReducer=function(e,t,n){return xt.current.useReducer(e,t,n)};Ce.useRef=function(e){return xt.current.useRef(e)};Ce.useState=function(e){return xt.current.useState(e)};Ce.useSyncExternalStore=function(e,t,n){return xt.current.useSyncExternalStore(e,t,n)};Ce.useTransition=function(){return xt.current.useTransition()};Ce.version="18.3.1";Of.exports=Ce;var W=Of.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mg=W,gg=Symbol.for("react.element"),vg=Symbol.for("react.fragment"),yg=Object.prototype.hasOwnProperty,Sg=mg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Eg={key:!0,ref:!0,__self:!0,__source:!0};function $f(e,t,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)yg.call(t,r)&&!Eg.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:gg,type:e,key:o,ref:a,props:i,_owner:Sg.current}}Ka.Fragment=vg;Ka.jsx=$f;Ka.jsxs=$f;Df.exports=Ka;var F=Df.exports,Gf={exports:{}},Vt={},Hf={exports:{}},Wf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Z,I){var L=Z.length;Z.push(I);e:for(;0<L;){var $=L-1>>>1,Q=Z[$];if(0<i(Q,I))Z[$]=I,Z[L]=Q,L=$;else break e}}function n(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var I=Z[0],L=Z.pop();if(L!==I){Z[0]=L;e:for(var $=0,Q=Z.length,de=Q>>>1;$<de;){var pe=2*($+1)-1,Oe=Z[pe],Ae=pe+1,ee=Z[Ae];if(0>i(Oe,L))Ae<Q&&0>i(ee,Oe)?(Z[$]=ee,Z[Ae]=L,$=Ae):(Z[$]=Oe,Z[pe]=L,$=pe);else if(Ae<Q&&0>i(ee,L))Z[$]=ee,Z[Ae]=L,$=Ae;else break e}}return I}function i(Z,I){var L=Z.sortIndex-I.sortIndex;return L!==0?L:Z.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();e.unstable_now=function(){return a.now()-u}}var d=[],h=[],_=1,S=null,y=3,v=!1,x=!1,w=!1,N=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(Z){for(var I=n(h);I!==null;){if(I.callback===null)r(h);else if(I.startTime<=Z)r(h),I.sortIndex=I.expirationTime,t(d,I);else break;I=n(h)}}function M(Z){if(w=!1,T(Z),!x)if(n(d)!==null)x=!0,ce(z);else{var I=n(h);I!==null&&be(M,I.startTime-Z)}}function z(Z,I){x=!1,w&&(w=!1,A(R),R=-1),v=!0;var L=y;try{for(T(I),S=n(d);S!==null&&(!(S.expirationTime>I)||Z&&!P());){var $=S.callback;if(typeof $=="function"){S.callback=null,y=S.priorityLevel;var Q=$(S.expirationTime<=I);I=e.unstable_now(),typeof Q=="function"?S.callback=Q:S===n(d)&&r(d),T(I)}else r(d);S=n(d)}if(S!==null)var de=!0;else{var pe=n(h);pe!==null&&be(M,pe.startTime-I),de=!1}return de}finally{S=null,y=L,v=!1}}var H=!1,U=null,R=-1,C=5,k=-1;function P(){return!(e.unstable_now()-k<C)}function Y(){if(U!==null){var Z=e.unstable_now();k=Z;var I=!0;try{I=U(!0,Z)}finally{I?J():(H=!1,U=null)}}else H=!1}var J;if(typeof E=="function")J=function(){E(Y)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,ne=q.port2;q.port1.onmessage=Y,J=function(){ne.postMessage(null)}}else J=function(){N(Y,0)};function ce(Z){U=Z,H||(H=!0,J())}function be(Z,I){R=N(function(){Z(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Z){Z.callback=null},e.unstable_continueExecution=function(){x||v||(x=!0,ce(z))},e.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<Z?Math.floor(1e3/Z):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(Z){switch(y){case 1:case 2:case 3:var I=3;break;default:I=y}var L=y;y=I;try{return Z()}finally{y=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Z,I){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var L=y;y=Z;try{return I()}finally{y=L}},e.unstable_scheduleCallback=function(Z,I,L){var $=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?$+L:$):L=$,Z){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=L+Q,Z={id:_++,callback:I,priorityLevel:Z,startTime:L,expirationTime:Q,sortIndex:-1},L>$?(Z.sortIndex=L,t(h,Z),n(d)===null&&Z===n(h)&&(w?(A(R),R=-1):w=!0,be(M,L-$))):(Z.sortIndex=Q,t(d,Z),x||v||(x=!0,ce(z))),Z},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(Z){var I=y;return function(){var L=y;y=I;try{return Z.apply(this,arguments)}finally{y=L}}}})(Wf);Hf.exports=Wf;var wg=Hf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bg=W,jt=wg;function ie(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qf=new Set,Gi={};function br(e,t){Zr(e,t),Zr(e+"Capture",t)}function Zr(e,t){for(Gi[e]=t,e=0;e<t.length;e++)qf.add(t[e])}var Cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),il=Object.prototype.hasOwnProperty,Ag=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Xc={},Zc={};function kg(e){return il.call(Zc,e)?!0:il.call(Xc,e)?!1:Ag.test(e)?Zc[e]=!0:(Xc[e]=!0,!1)}function Rg(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function xg(e,t,n,r){if(t===null||typeof t>"u"||Rg(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ct(e,t,n,r,i,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ht[e]=new Ct(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ht[t]=new Ct(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ht[e]=new Ct(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ht[e]=new Ct(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ht[e]=new Ct(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ht[e]=new Ct(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ht[e]=new Ct(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ht[e]=new Ct(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ht[e]=new Ct(e,5,!1,e.toLowerCase(),null,!1,!1)});var fu=/[\-:]([a-z])/g;function hu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(fu,hu);ht[t]=new Ct(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(fu,hu);ht[t]=new Ct(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(fu,hu);ht[t]=new Ct(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ht[e]=new Ct(e,1,!1,e.toLowerCase(),null,!1,!1)});ht.xlinkHref=new Ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ht[e]=new Ct(e,1,!1,e.toLowerCase(),null,!0,!0)});function pu(e,t,n,r){var i=ht.hasOwnProperty(t)?ht[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(xg(t,n,i,r)&&(n=null),r||i===null?kg(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var On=bg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xo=Symbol.for("react.element"),Lr=Symbol.for("react.portal"),Mr=Symbol.for("react.fragment"),_u=Symbol.for("react.strict_mode"),ol=Symbol.for("react.profiler"),Kf=Symbol.for("react.provider"),Yf=Symbol.for("react.context"),mu=Symbol.for("react.forward_ref"),al=Symbol.for("react.suspense"),sl=Symbol.for("react.suspense_list"),gu=Symbol.for("react.memo"),jn=Symbol.for("react.lazy"),Qf=Symbol.for("react.offscreen"),Jc=Symbol.iterator;function Si(e){return e===null||typeof e!="object"?null:(e=Jc&&e[Jc]||e["@@iterator"],typeof e=="function"?e:null)}var qe=Object.assign,As;function Ti(e){if(As===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);As=t&&t[1]||""}return`
`+As+e}var ks=!1;function Rs(e,t){if(!e||ks)return"";ks=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var r=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){r=h}e.call(t.prototype)}else{try{throw Error()}catch(h){r=h}e()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,u=o.length-1;1<=a&&0<=u&&i[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(i[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||i[a]!==o[u]){var d=`
`+i[a].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=a&&0<=u);break}}}finally{ks=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ti(e):""}function Cg(e){switch(e.tag){case 5:return Ti(e.type);case 16:return Ti("Lazy");case 13:return Ti("Suspense");case 19:return Ti("SuspenseList");case 0:case 2:case 15:return e=Rs(e.type,!1),e;case 11:return e=Rs(e.type.render,!1),e;case 1:return e=Rs(e.type,!0),e;default:return""}}function ll(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Mr:return"Fragment";case Lr:return"Portal";case ol:return"Profiler";case _u:return"StrictMode";case al:return"Suspense";case sl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Yf:return(e.displayName||"Context")+".Consumer";case Kf:return(e._context.displayName||"Context")+".Provider";case mu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case gu:return t=e.displayName||null,t!==null?t:ll(e.type)||"Memo";case jn:t=e._payload,e=e._init;try{return ll(e(t))}catch{}}return null}function Tg(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ll(t);case 8:return t===_u?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Jn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Xf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Lg(e){var t=Xf(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Co(e){e._valueTracker||(e._valueTracker=Lg(e))}function Zf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Xf(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ca(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ul(e,t){var n=t.checked;return qe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ed(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Jn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Jf(e,t){t=t.checked,t!=null&&pu(e,"checked",t,!1)}function cl(e,t){Jf(e,t);var n=Jn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?dl(e,t.type,n):t.hasOwnProperty("defaultValue")&&dl(e,t.type,Jn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function td(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function dl(e,t,n){(t!=="number"||ca(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Li=Array.isArray;function $r(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Jn(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function fl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ie(91));return qe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function nd(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ie(92));if(Li(n)){if(1<n.length)throw Error(ie(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Jn(n)}}function eh(e,t){var n=Jn(t.value),r=Jn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function rd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function th(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?th(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var To,nh=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(To=To||document.createElement("div"),To.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=To.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Hi(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Di={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Mg=["Webkit","ms","Moz","O"];Object.keys(Di).forEach(function(e){Mg.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Di[t]=Di[e]})});function rh(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Di.hasOwnProperty(e)&&Di[e]?(""+t).trim():t+"px"}function ih(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=rh(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var Pg=qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pl(e,t){if(t){if(Pg[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ie(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ie(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ie(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ie(62))}}function _l(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ml=null;function vu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var gl=null,Gr=null,Hr=null;function id(e){if(e=_o(e)){if(typeof gl!="function")throw Error(ie(280));var t=e.stateNode;t&&(t=Ja(t),gl(e.stateNode,e.type,t))}}function oh(e){Gr?Hr?Hr.push(e):Hr=[e]:Gr=e}function ah(){if(Gr){var e=Gr,t=Hr;if(Hr=Gr=null,id(e),t)for(e=0;e<t.length;e++)id(t[e])}}function sh(e,t){return e(t)}function lh(){}var xs=!1;function uh(e,t,n){if(xs)return e(t,n);xs=!0;try{return sh(e,t,n)}finally{xs=!1,(Gr!==null||Hr!==null)&&(lh(),ah())}}function Wi(e,t){var n=e.stateNode;if(n===null)return null;var r=Ja(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ie(231,t,typeof n));return n}var vl=!1;if(Cn)try{var Ei={};Object.defineProperty(Ei,"passive",{get:function(){vl=!0}}),window.addEventListener("test",Ei,Ei),window.removeEventListener("test",Ei,Ei)}catch{vl=!1}function Dg(e,t,n,r,i,o,a,u,d){var h=Array.prototype.slice.call(arguments,3);try{t.apply(n,h)}catch(_){this.onError(_)}}var Oi=!1,da=null,fa=!1,yl=null,Og={onError:function(e){Oi=!0,da=e}};function Ig(e,t,n,r,i,o,a,u,d){Oi=!1,da=null,Dg.apply(Og,arguments)}function Ng(e,t,n,r,i,o,a,u,d){if(Ig.apply(this,arguments),Oi){if(Oi){var h=da;Oi=!1,da=null}else throw Error(ie(198));fa||(fa=!0,yl=h)}}function Ar(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ch(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function od(e){if(Ar(e)!==e)throw Error(ie(188))}function Bg(e){var t=e.alternate;if(!t){if(t=Ar(e),t===null)throw Error(ie(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return od(i),e;if(o===r)return od(i),t;o=o.sibling}throw Error(ie(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,u=i.child;u;){if(u===n){a=!0,n=i,r=o;break}if(u===r){a=!0,r=i,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,r=i;break}if(u===r){a=!0,r=o,n=i;break}u=u.sibling}if(!a)throw Error(ie(189))}}if(n.alternate!==r)throw Error(ie(190))}if(n.tag!==3)throw Error(ie(188));return n.stateNode.current===n?e:t}function dh(e){return e=Bg(e),e!==null?fh(e):null}function fh(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=fh(e);if(t!==null)return t;e=e.sibling}return null}var hh=jt.unstable_scheduleCallback,ad=jt.unstable_cancelCallback,Ug=jt.unstable_shouldYield,jg=jt.unstable_requestPaint,Ye=jt.unstable_now,Fg=jt.unstable_getCurrentPriorityLevel,yu=jt.unstable_ImmediatePriority,ph=jt.unstable_UserBlockingPriority,ha=jt.unstable_NormalPriority,Vg=jt.unstable_LowPriority,_h=jt.unstable_IdlePriority,Ya=null,mn=null;function zg(e){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(Ya,e,void 0,(e.current.flags&128)===128)}catch{}}var on=Math.clz32?Math.clz32:Hg,$g=Math.log,Gg=Math.LN2;function Hg(e){return e>>>=0,e===0?32:31-($g(e)/Gg|0)|0}var Lo=64,Mo=4194304;function Mi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pa(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var u=a&~i;u!==0?r=Mi(u):(o&=a,o!==0&&(r=Mi(o)))}else a=n&~i,a!==0?r=Mi(a):o!==0&&(r=Mi(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-on(t),i=1<<n,r|=e[n],t&=~i;return r}function Wg(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qg(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-on(o),u=1<<a,d=i[a];d===-1?(!(u&n)||u&r)&&(i[a]=Wg(u,t)):d<=t&&(e.expiredLanes|=u),o&=~u}}function Sl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function mh(){var e=Lo;return Lo<<=1,!(Lo&4194240)&&(Lo=64),e}function Cs(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ho(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-on(t),e[t]=n}function Kg(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-on(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function Su(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-on(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Be=0;function gh(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var vh,Eu,yh,Sh,Eh,El=!1,Po=[],Hn=null,Wn=null,qn=null,qi=new Map,Ki=new Map,Vn=[],Yg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sd(e,t){switch(e){case"focusin":case"focusout":Hn=null;break;case"dragenter":case"dragleave":Wn=null;break;case"mouseover":case"mouseout":qn=null;break;case"pointerover":case"pointerout":qi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ki.delete(t.pointerId)}}function wi(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=_o(t),t!==null&&Eu(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Qg(e,t,n,r,i){switch(t){case"focusin":return Hn=wi(Hn,e,t,n,r,i),!0;case"dragenter":return Wn=wi(Wn,e,t,n,r,i),!0;case"mouseover":return qn=wi(qn,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return qi.set(o,wi(qi.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ki.set(o,wi(Ki.get(o)||null,e,t,n,r,i)),!0}return!1}function wh(e){var t=lr(e.target);if(t!==null){var n=Ar(t);if(n!==null){if(t=n.tag,t===13){if(t=ch(n),t!==null){e.blockedOn=t,Eh(e.priority,function(){yh(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Qo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=wl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ml=r,n.target.dispatchEvent(r),ml=null}else return t=_o(n),t!==null&&Eu(t),e.blockedOn=n,!1;t.shift()}return!0}function ld(e,t,n){Qo(e)&&n.delete(t)}function Xg(){El=!1,Hn!==null&&Qo(Hn)&&(Hn=null),Wn!==null&&Qo(Wn)&&(Wn=null),qn!==null&&Qo(qn)&&(qn=null),qi.forEach(ld),Ki.forEach(ld)}function bi(e,t){e.blockedOn===t&&(e.blockedOn=null,El||(El=!0,jt.unstable_scheduleCallback(jt.unstable_NormalPriority,Xg)))}function Yi(e){function t(i){return bi(i,e)}if(0<Po.length){bi(Po[0],e);for(var n=1;n<Po.length;n++){var r=Po[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Hn!==null&&bi(Hn,e),Wn!==null&&bi(Wn,e),qn!==null&&bi(qn,e),qi.forEach(t),Ki.forEach(t),n=0;n<Vn.length;n++)r=Vn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Vn.length&&(n=Vn[0],n.blockedOn===null);)wh(n),n.blockedOn===null&&Vn.shift()}var Wr=On.ReactCurrentBatchConfig,_a=!0;function Zg(e,t,n,r){var i=Be,o=Wr.transition;Wr.transition=null;try{Be=1,wu(e,t,n,r)}finally{Be=i,Wr.transition=o}}function Jg(e,t,n,r){var i=Be,o=Wr.transition;Wr.transition=null;try{Be=4,wu(e,t,n,r)}finally{Be=i,Wr.transition=o}}function wu(e,t,n,r){if(_a){var i=wl(e,t,n,r);if(i===null)Us(e,t,r,ma,n),sd(e,r);else if(Qg(i,e,t,n,r))r.stopPropagation();else if(sd(e,r),t&4&&-1<Yg.indexOf(e)){for(;i!==null;){var o=_o(i);if(o!==null&&vh(o),o=wl(e,t,n,r),o===null&&Us(e,t,r,ma,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Us(e,t,r,null,n)}}var ma=null;function wl(e,t,n,r){if(ma=null,e=vu(r),e=lr(e),e!==null)if(t=Ar(e),t===null)e=null;else if(n=t.tag,n===13){if(e=ch(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ma=e,null}function bh(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fg()){case yu:return 1;case ph:return 4;case ha:case Vg:return 16;case _h:return 536870912;default:return 16}default:return 16}}var $n=null,bu=null,Xo=null;function Ah(){if(Xo)return Xo;var e,t=bu,n=t.length,r,i="value"in $n?$n.value:$n.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[o-r];r++);return Xo=i.slice(e,1<r?1-r:void 0)}function Zo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Do(){return!0}function ud(){return!1}function zt(e){function t(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Do:ud,this.isPropagationStopped=ud,this}return qe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Do)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Do)},persist:function(){},isPersistent:Do}),t}var li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Au=zt(li),po=qe({},li,{view:0,detail:0}),ev=zt(po),Ts,Ls,Ai,Qa=qe({},po,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ku,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ai&&(Ai&&e.type==="mousemove"?(Ts=e.screenX-Ai.screenX,Ls=e.screenY-Ai.screenY):Ls=Ts=0,Ai=e),Ts)},movementY:function(e){return"movementY"in e?e.movementY:Ls}}),cd=zt(Qa),tv=qe({},Qa,{dataTransfer:0}),nv=zt(tv),rv=qe({},po,{relatedTarget:0}),Ms=zt(rv),iv=qe({},li,{animationName:0,elapsedTime:0,pseudoElement:0}),ov=zt(iv),av=qe({},li,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sv=zt(av),lv=qe({},li,{data:0}),dd=zt(lv),uv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=dv[e])?!!t[e]:!1}function ku(){return fv}var hv=qe({},po,{key:function(e){if(e.key){var t=uv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Zo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?cv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ku,charCode:function(e){return e.type==="keypress"?Zo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Zo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),pv=zt(hv),_v=qe({},Qa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fd=zt(_v),mv=qe({},po,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ku}),gv=zt(mv),vv=qe({},li,{propertyName:0,elapsedTime:0,pseudoElement:0}),yv=zt(vv),Sv=qe({},Qa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ev=zt(Sv),wv=[9,13,27,32],Ru=Cn&&"CompositionEvent"in window,Ii=null;Cn&&"documentMode"in document&&(Ii=document.documentMode);var bv=Cn&&"TextEvent"in window&&!Ii,kh=Cn&&(!Ru||Ii&&8<Ii&&11>=Ii),hd=" ",pd=!1;function Rh(e,t){switch(e){case"keyup":return wv.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Pr=!1;function Av(e,t){switch(e){case"compositionend":return xh(t);case"keypress":return t.which!==32?null:(pd=!0,hd);case"textInput":return e=t.data,e===hd&&pd?null:e;default:return null}}function kv(e,t){if(Pr)return e==="compositionend"||!Ru&&Rh(e,t)?(e=Ah(),Xo=bu=$n=null,Pr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kh&&t.locale!=="ko"?null:t.data;default:return null}}var Rv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _d(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Rv[e.type]:t==="textarea"}function Ch(e,t,n,r){oh(r),t=ga(t,"onChange"),0<t.length&&(n=new Au("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ni=null,Qi=null;function xv(e){jh(e,0)}function Xa(e){var t=Ir(e);if(Zf(t))return e}function Cv(e,t){if(e==="change")return t}var Th=!1;if(Cn){var Ps;if(Cn){var Ds="oninput"in document;if(!Ds){var md=document.createElement("div");md.setAttribute("oninput","return;"),Ds=typeof md.oninput=="function"}Ps=Ds}else Ps=!1;Th=Ps&&(!document.documentMode||9<document.documentMode)}function gd(){Ni&&(Ni.detachEvent("onpropertychange",Lh),Qi=Ni=null)}function Lh(e){if(e.propertyName==="value"&&Xa(Qi)){var t=[];Ch(t,Qi,e,vu(e)),uh(xv,t)}}function Tv(e,t,n){e==="focusin"?(gd(),Ni=t,Qi=n,Ni.attachEvent("onpropertychange",Lh)):e==="focusout"&&gd()}function Lv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Xa(Qi)}function Mv(e,t){if(e==="click")return Xa(t)}function Pv(e,t){if(e==="input"||e==="change")return Xa(t)}function Dv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var sn=typeof Object.is=="function"?Object.is:Dv;function Xi(e,t){if(sn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!il.call(t,i)||!sn(e[i],t[i]))return!1}return!0}function vd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yd(e,t){var n=vd(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vd(n)}}function Mh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Mh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ph(){for(var e=window,t=ca();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ca(e.document)}return t}function xu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ov(e){var t=Ph(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Mh(n.ownerDocument.documentElement,n)){if(r!==null&&xu(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=yd(n,o);var a=yd(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Iv=Cn&&"documentMode"in document&&11>=document.documentMode,Dr=null,bl=null,Bi=null,Al=!1;function Sd(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Al||Dr==null||Dr!==ca(r)||(r=Dr,"selectionStart"in r&&xu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Bi&&Xi(Bi,r)||(Bi=r,r=ga(bl,"onSelect"),0<r.length&&(t=new Au("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Dr)))}function Oo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Or={animationend:Oo("Animation","AnimationEnd"),animationiteration:Oo("Animation","AnimationIteration"),animationstart:Oo("Animation","AnimationStart"),transitionend:Oo("Transition","TransitionEnd")},Os={},Dh={};Cn&&(Dh=document.createElement("div").style,"AnimationEvent"in window||(delete Or.animationend.animation,delete Or.animationiteration.animation,delete Or.animationstart.animation),"TransitionEvent"in window||delete Or.transitionend.transition);function Za(e){if(Os[e])return Os[e];if(!Or[e])return e;var t=Or[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Dh)return Os[e]=t[n];return e}var Oh=Za("animationend"),Ih=Za("animationiteration"),Nh=Za("animationstart"),Bh=Za("transitionend"),Uh=new Map,Ed="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tr(e,t){Uh.set(e,t),br(t,[e])}for(var Is=0;Is<Ed.length;Is++){var Ns=Ed[Is],Nv=Ns.toLowerCase(),Bv=Ns[0].toUpperCase()+Ns.slice(1);tr(Nv,"on"+Bv)}tr(Oh,"onAnimationEnd");tr(Ih,"onAnimationIteration");tr(Nh,"onAnimationStart");tr("dblclick","onDoubleClick");tr("focusin","onFocus");tr("focusout","onBlur");tr(Bh,"onTransitionEnd");Zr("onMouseEnter",["mouseout","mouseover"]);Zr("onMouseLeave",["mouseout","mouseover"]);Zr("onPointerEnter",["pointerout","pointerover"]);Zr("onPointerLeave",["pointerout","pointerover"]);br("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));br("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));br("onBeforeInput",["compositionend","keypress","textInput","paste"]);br("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));br("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));br("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Uv=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pi));function wd(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Ng(r,t,void 0,e),e.currentTarget=null}function jh(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var u=r[a],d=u.instance,h=u.currentTarget;if(u=u.listener,d!==o&&i.isPropagationStopped())break e;wd(i,u,h),o=d}else for(a=0;a<r.length;a++){if(u=r[a],d=u.instance,h=u.currentTarget,u=u.listener,d!==o&&i.isPropagationStopped())break e;wd(i,u,h),o=d}}}if(fa)throw e=yl,fa=!1,yl=null,e}function Fe(e,t){var n=t[Tl];n===void 0&&(n=t[Tl]=new Set);var r=e+"__bubble";n.has(r)||(Fh(t,e,2,!1),n.add(r))}function Bs(e,t,n){var r=0;t&&(r|=4),Fh(n,e,r,t)}var Io="_reactListening"+Math.random().toString(36).slice(2);function Zi(e){if(!e[Io]){e[Io]=!0,qf.forEach(function(n){n!=="selectionchange"&&(Uv.has(n)||Bs(n,!1,e),Bs(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Io]||(t[Io]=!0,Bs("selectionchange",!1,t))}}function Fh(e,t,n,r){switch(bh(t)){case 1:var i=Zg;break;case 4:i=Jg;break;default:i=wu}n=i.bind(null,t,n,e),i=void 0,!vl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Us(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var u=r.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var d=a.tag;if((d===3||d===4)&&(d=a.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;a=a.return}for(;u!==null;){if(a=lr(u),a===null)return;if(d=a.tag,d===5||d===6){r=o=a;continue e}u=u.parentNode}}r=r.return}uh(function(){var h=o,_=vu(n),S=[];e:{var y=Uh.get(e);if(y!==void 0){var v=Au,x=e;switch(e){case"keypress":if(Zo(n)===0)break e;case"keydown":case"keyup":v=pv;break;case"focusin":x="focus",v=Ms;break;case"focusout":x="blur",v=Ms;break;case"beforeblur":case"afterblur":v=Ms;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=cd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=nv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=gv;break;case Oh:case Ih:case Nh:v=ov;break;case Bh:v=yv;break;case"scroll":v=ev;break;case"wheel":v=Ev;break;case"copy":case"cut":case"paste":v=sv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=fd}var w=(t&4)!==0,N=!w&&e==="scroll",A=w?y!==null?y+"Capture":null:y;w=[];for(var E=h,T;E!==null;){T=E;var M=T.stateNode;if(T.tag===5&&M!==null&&(T=M,A!==null&&(M=Wi(E,A),M!=null&&w.push(Ji(E,M,T)))),N)break;E=E.return}0<w.length&&(y=new v(y,x,null,n,_),S.push({event:y,listeners:w}))}}if(!(t&7)){e:{if(y=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",y&&n!==ml&&(x=n.relatedTarget||n.fromElement)&&(lr(x)||x[Tn]))break e;if((v||y)&&(y=_.window===_?_:(y=_.ownerDocument)?y.defaultView||y.parentWindow:window,v?(x=n.relatedTarget||n.toElement,v=h,x=x?lr(x):null,x!==null&&(N=Ar(x),x!==N||x.tag!==5&&x.tag!==6)&&(x=null)):(v=null,x=h),v!==x)){if(w=cd,M="onMouseLeave",A="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(w=fd,M="onPointerLeave",A="onPointerEnter",E="pointer"),N=v==null?y:Ir(v),T=x==null?y:Ir(x),y=new w(M,E+"leave",v,n,_),y.target=N,y.relatedTarget=T,M=null,lr(_)===h&&(w=new w(A,E+"enter",x,n,_),w.target=T,w.relatedTarget=N,M=w),N=M,v&&x)t:{for(w=v,A=x,E=0,T=w;T;T=Tr(T))E++;for(T=0,M=A;M;M=Tr(M))T++;for(;0<E-T;)w=Tr(w),E--;for(;0<T-E;)A=Tr(A),T--;for(;E--;){if(w===A||A!==null&&w===A.alternate)break t;w=Tr(w),A=Tr(A)}w=null}else w=null;v!==null&&bd(S,y,v,w,!1),x!==null&&N!==null&&bd(S,N,x,w,!0)}}e:{if(y=h?Ir(h):window,v=y.nodeName&&y.nodeName.toLowerCase(),v==="select"||v==="input"&&y.type==="file")var z=Cv;else if(_d(y))if(Th)z=Pv;else{z=Lv;var H=Tv}else(v=y.nodeName)&&v.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(z=Mv);if(z&&(z=z(e,h))){Ch(S,z,n,_);break e}H&&H(e,y,h),e==="focusout"&&(H=y._wrapperState)&&H.controlled&&y.type==="number"&&dl(y,"number",y.value)}switch(H=h?Ir(h):window,e){case"focusin":(_d(H)||H.contentEditable==="true")&&(Dr=H,bl=h,Bi=null);break;case"focusout":Bi=bl=Dr=null;break;case"mousedown":Al=!0;break;case"contextmenu":case"mouseup":case"dragend":Al=!1,Sd(S,n,_);break;case"selectionchange":if(Iv)break;case"keydown":case"keyup":Sd(S,n,_)}var U;if(Ru)e:{switch(e){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Pr?Rh(e,n)&&(R="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(kh&&n.locale!=="ko"&&(Pr||R!=="onCompositionStart"?R==="onCompositionEnd"&&Pr&&(U=Ah()):($n=_,bu="value"in $n?$n.value:$n.textContent,Pr=!0)),H=ga(h,R),0<H.length&&(R=new dd(R,e,null,n,_),S.push({event:R,listeners:H}),U?R.data=U:(U=xh(n),U!==null&&(R.data=U)))),(U=bv?Av(e,n):kv(e,n))&&(h=ga(h,"onBeforeInput"),0<h.length&&(_=new dd("onBeforeInput","beforeinput",null,n,_),S.push({event:_,listeners:h}),_.data=U))}jh(S,t)})}function Ji(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ga(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Wi(e,n),o!=null&&r.unshift(Ji(e,o,i)),o=Wi(e,t),o!=null&&r.push(Ji(e,o,i))),e=e.return}return r}function Tr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function bd(e,t,n,r,i){for(var o=t._reactName,a=[];n!==null&&n!==r;){var u=n,d=u.alternate,h=u.stateNode;if(d!==null&&d===r)break;u.tag===5&&h!==null&&(u=h,i?(d=Wi(n,o),d!=null&&a.unshift(Ji(n,d,u))):i||(d=Wi(n,o),d!=null&&a.push(Ji(n,d,u)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var jv=/\r\n?/g,Fv=/\u0000|\uFFFD/g;function Ad(e){return(typeof e=="string"?e:""+e).replace(jv,`
`).replace(Fv,"")}function No(e,t,n){if(t=Ad(t),Ad(e)!==t&&n)throw Error(ie(425))}function va(){}var kl=null,Rl=null;function xl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Cl=typeof setTimeout=="function"?setTimeout:void 0,Vv=typeof clearTimeout=="function"?clearTimeout:void 0,kd=typeof Promise=="function"?Promise:void 0,zv=typeof queueMicrotask=="function"?queueMicrotask:typeof kd<"u"?function(e){return kd.resolve(null).then(e).catch($v)}:Cl;function $v(e){setTimeout(function(){throw e})}function js(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Yi(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Yi(t)}function Kn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Rd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ui=Math.random().toString(36).slice(2),_n="__reactFiber$"+ui,eo="__reactProps$"+ui,Tn="__reactContainer$"+ui,Tl="__reactEvents$"+ui,Gv="__reactListeners$"+ui,Hv="__reactHandles$"+ui;function lr(e){var t=e[_n];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Tn]||n[_n]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Rd(e);e!==null;){if(n=e[_n])return n;e=Rd(e)}return t}e=n,n=e.parentNode}return null}function _o(e){return e=e[_n]||e[Tn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ir(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ie(33))}function Ja(e){return e[eo]||null}var Ll=[],Nr=-1;function nr(e){return{current:e}}function Ve(e){0>Nr||(e.current=Ll[Nr],Ll[Nr]=null,Nr--)}function je(e,t){Nr++,Ll[Nr]=e.current,e.current=t}var er={},Et=nr(er),Pt=nr(!1),mr=er;function Jr(e,t){var n=e.type.contextTypes;if(!n)return er;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Dt(e){return e=e.childContextTypes,e!=null}function ya(){Ve(Pt),Ve(Et)}function xd(e,t,n){if(Et.current!==er)throw Error(ie(168));je(Et,t),je(Pt,n)}function Vh(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(ie(108,Tg(e)||"Unknown",i));return qe({},n,r)}function Sa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||er,mr=Et.current,je(Et,e),je(Pt,Pt.current),!0}function Cd(e,t,n){var r=e.stateNode;if(!r)throw Error(ie(169));n?(e=Vh(e,t,mr),r.__reactInternalMemoizedMergedChildContext=e,Ve(Pt),Ve(Et),je(Et,e)):Ve(Pt),je(Pt,n)}var bn=null,es=!1,Fs=!1;function zh(e){bn===null?bn=[e]:bn.push(e)}function Wv(e){es=!0,zh(e)}function rr(){if(!Fs&&bn!==null){Fs=!0;var e=0,t=Be;try{var n=bn;for(Be=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}bn=null,es=!1}catch(i){throw bn!==null&&(bn=bn.slice(e+1)),hh(yu,rr),i}finally{Be=t,Fs=!1}}return null}var Br=[],Ur=0,Ea=null,wa=0,Gt=[],Ht=0,gr=null,An=1,kn="";function ar(e,t){Br[Ur++]=wa,Br[Ur++]=Ea,Ea=e,wa=t}function $h(e,t,n){Gt[Ht++]=An,Gt[Ht++]=kn,Gt[Ht++]=gr,gr=e;var r=An;e=kn;var i=32-on(r)-1;r&=~(1<<i),n+=1;var o=32-on(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,An=1<<32-on(t)+i|n<<i|r,kn=o+e}else An=1<<o|n<<i|r,kn=e}function Cu(e){e.return!==null&&(ar(e,1),$h(e,1,0))}function Tu(e){for(;e===Ea;)Ea=Br[--Ur],Br[Ur]=null,wa=Br[--Ur],Br[Ur]=null;for(;e===gr;)gr=Gt[--Ht],Gt[Ht]=null,kn=Gt[--Ht],Gt[Ht]=null,An=Gt[--Ht],Gt[Ht]=null}var Ut=null,Bt=null,ze=!1,rn=null;function Gh(e,t){var n=Wt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Td(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ut=e,Bt=Kn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ut=e,Bt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=gr!==null?{id:An,overflow:kn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Wt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ut=e,Bt=null,!0):!1;default:return!1}}function Ml(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Pl(e){if(ze){var t=Bt;if(t){var n=t;if(!Td(e,t)){if(Ml(e))throw Error(ie(418));t=Kn(n.nextSibling);var r=Ut;t&&Td(e,t)?Gh(r,n):(e.flags=e.flags&-4097|2,ze=!1,Ut=e)}}else{if(Ml(e))throw Error(ie(418));e.flags=e.flags&-4097|2,ze=!1,Ut=e}}}function Ld(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ut=e}function Bo(e){if(e!==Ut)return!1;if(!ze)return Ld(e),ze=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!xl(e.type,e.memoizedProps)),t&&(t=Bt)){if(Ml(e))throw Hh(),Error(ie(418));for(;t;)Gh(e,t),t=Kn(t.nextSibling)}if(Ld(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ie(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Bt=Kn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Bt=null}}else Bt=Ut?Kn(e.stateNode.nextSibling):null;return!0}function Hh(){for(var e=Bt;e;)e=Kn(e.nextSibling)}function ei(){Bt=Ut=null,ze=!1}function Lu(e){rn===null?rn=[e]:rn.push(e)}var qv=On.ReactCurrentBatchConfig;function ki(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ie(309));var r=n.stateNode}if(!r)throw Error(ie(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var u=i.refs;a===null?delete u[o]:u[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(ie(284));if(!n._owner)throw Error(ie(290,e))}return e}function Uo(e,t){throw e=Object.prototype.toString.call(t),Error(ie(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Md(e){var t=e._init;return t(e._payload)}function Wh(e){function t(A,E){if(e){var T=A.deletions;T===null?(A.deletions=[E],A.flags|=16):T.push(E)}}function n(A,E){if(!e)return null;for(;E!==null;)t(A,E),E=E.sibling;return null}function r(A,E){for(A=new Map;E!==null;)E.key!==null?A.set(E.key,E):A.set(E.index,E),E=E.sibling;return A}function i(A,E){return A=Zn(A,E),A.index=0,A.sibling=null,A}function o(A,E,T){return A.index=T,e?(T=A.alternate,T!==null?(T=T.index,T<E?(A.flags|=2,E):T):(A.flags|=2,E)):(A.flags|=1048576,E)}function a(A){return e&&A.alternate===null&&(A.flags|=2),A}function u(A,E,T,M){return E===null||E.tag!==6?(E=qs(T,A.mode,M),E.return=A,E):(E=i(E,T),E.return=A,E)}function d(A,E,T,M){var z=T.type;return z===Mr?_(A,E,T.props.children,M,T.key):E!==null&&(E.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===jn&&Md(z)===E.type)?(M=i(E,T.props),M.ref=ki(A,E,T),M.return=A,M):(M=oa(T.type,T.key,T.props,null,A.mode,M),M.ref=ki(A,E,T),M.return=A,M)}function h(A,E,T,M){return E===null||E.tag!==4||E.stateNode.containerInfo!==T.containerInfo||E.stateNode.implementation!==T.implementation?(E=Ks(T,A.mode,M),E.return=A,E):(E=i(E,T.children||[]),E.return=A,E)}function _(A,E,T,M,z){return E===null||E.tag!==7?(E=pr(T,A.mode,M,z),E.return=A,E):(E=i(E,T),E.return=A,E)}function S(A,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return E=qs(""+E,A.mode,T),E.return=A,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case xo:return T=oa(E.type,E.key,E.props,null,A.mode,T),T.ref=ki(A,null,E),T.return=A,T;case Lr:return E=Ks(E,A.mode,T),E.return=A,E;case jn:var M=E._init;return S(A,M(E._payload),T)}if(Li(E)||Si(E))return E=pr(E,A.mode,T,null),E.return=A,E;Uo(A,E)}return null}function y(A,E,T,M){var z=E!==null?E.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return z!==null?null:u(A,E,""+T,M);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case xo:return T.key===z?d(A,E,T,M):null;case Lr:return T.key===z?h(A,E,T,M):null;case jn:return z=T._init,y(A,E,z(T._payload),M)}if(Li(T)||Si(T))return z!==null?null:_(A,E,T,M,null);Uo(A,T)}return null}function v(A,E,T,M,z){if(typeof M=="string"&&M!==""||typeof M=="number")return A=A.get(T)||null,u(E,A,""+M,z);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case xo:return A=A.get(M.key===null?T:M.key)||null,d(E,A,M,z);case Lr:return A=A.get(M.key===null?T:M.key)||null,h(E,A,M,z);case jn:var H=M._init;return v(A,E,T,H(M._payload),z)}if(Li(M)||Si(M))return A=A.get(T)||null,_(E,A,M,z,null);Uo(E,M)}return null}function x(A,E,T,M){for(var z=null,H=null,U=E,R=E=0,C=null;U!==null&&R<T.length;R++){U.index>R?(C=U,U=null):C=U.sibling;var k=y(A,U,T[R],M);if(k===null){U===null&&(U=C);break}e&&U&&k.alternate===null&&t(A,U),E=o(k,E,R),H===null?z=k:H.sibling=k,H=k,U=C}if(R===T.length)return n(A,U),ze&&ar(A,R),z;if(U===null){for(;R<T.length;R++)U=S(A,T[R],M),U!==null&&(E=o(U,E,R),H===null?z=U:H.sibling=U,H=U);return ze&&ar(A,R),z}for(U=r(A,U);R<T.length;R++)C=v(U,A,R,T[R],M),C!==null&&(e&&C.alternate!==null&&U.delete(C.key===null?R:C.key),E=o(C,E,R),H===null?z=C:H.sibling=C,H=C);return e&&U.forEach(function(P){return t(A,P)}),ze&&ar(A,R),z}function w(A,E,T,M){var z=Si(T);if(typeof z!="function")throw Error(ie(150));if(T=z.call(T),T==null)throw Error(ie(151));for(var H=z=null,U=E,R=E=0,C=null,k=T.next();U!==null&&!k.done;R++,k=T.next()){U.index>R?(C=U,U=null):C=U.sibling;var P=y(A,U,k.value,M);if(P===null){U===null&&(U=C);break}e&&U&&P.alternate===null&&t(A,U),E=o(P,E,R),H===null?z=P:H.sibling=P,H=P,U=C}if(k.done)return n(A,U),ze&&ar(A,R),z;if(U===null){for(;!k.done;R++,k=T.next())k=S(A,k.value,M),k!==null&&(E=o(k,E,R),H===null?z=k:H.sibling=k,H=k);return ze&&ar(A,R),z}for(U=r(A,U);!k.done;R++,k=T.next())k=v(U,A,R,k.value,M),k!==null&&(e&&k.alternate!==null&&U.delete(k.key===null?R:k.key),E=o(k,E,R),H===null?z=k:H.sibling=k,H=k);return e&&U.forEach(function(Y){return t(A,Y)}),ze&&ar(A,R),z}function N(A,E,T,M){if(typeof T=="object"&&T!==null&&T.type===Mr&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case xo:e:{for(var z=T.key,H=E;H!==null;){if(H.key===z){if(z=T.type,z===Mr){if(H.tag===7){n(A,H.sibling),E=i(H,T.props.children),E.return=A,A=E;break e}}else if(H.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===jn&&Md(z)===H.type){n(A,H.sibling),E=i(H,T.props),E.ref=ki(A,H,T),E.return=A,A=E;break e}n(A,H);break}else t(A,H);H=H.sibling}T.type===Mr?(E=pr(T.props.children,A.mode,M,T.key),E.return=A,A=E):(M=oa(T.type,T.key,T.props,null,A.mode,M),M.ref=ki(A,E,T),M.return=A,A=M)}return a(A);case Lr:e:{for(H=T.key;E!==null;){if(E.key===H)if(E.tag===4&&E.stateNode.containerInfo===T.containerInfo&&E.stateNode.implementation===T.implementation){n(A,E.sibling),E=i(E,T.children||[]),E.return=A,A=E;break e}else{n(A,E);break}else t(A,E);E=E.sibling}E=Ks(T,A.mode,M),E.return=A,A=E}return a(A);case jn:return H=T._init,N(A,E,H(T._payload),M)}if(Li(T))return x(A,E,T,M);if(Si(T))return w(A,E,T,M);Uo(A,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,E!==null&&E.tag===6?(n(A,E.sibling),E=i(E,T),E.return=A,A=E):(n(A,E),E=qs(T,A.mode,M),E.return=A,A=E),a(A)):n(A,E)}return N}var ti=Wh(!0),qh=Wh(!1),ba=nr(null),Aa=null,jr=null,Mu=null;function Pu(){Mu=jr=Aa=null}function Du(e){var t=ba.current;Ve(ba),e._currentValue=t}function Dl(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function qr(e,t){Aa=e,Mu=jr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Mt=!0),e.firstContext=null)}function Yt(e){var t=e._currentValue;if(Mu!==e)if(e={context:e,memoizedValue:t,next:null},jr===null){if(Aa===null)throw Error(ie(308));jr=e,Aa.dependencies={lanes:0,firstContext:e}}else jr=jr.next=e;return t}var ur=null;function Ou(e){ur===null?ur=[e]:ur.push(e)}function Kh(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Ou(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ln(e,r)}function Ln(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Fn=!1;function Iu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Rn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Yn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,De&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ln(e,n)}return i=r.interleaved,i===null?(t.next=t,Ou(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ln(e,n)}function Jo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Su(e,n)}}function Pd(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ka(e,t,n,r){var i=e.updateQueue;Fn=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var d=u,h=d.next;d.next=null,a===null?o=h:a.next=h,a=d;var _=e.alternate;_!==null&&(_=_.updateQueue,u=_.lastBaseUpdate,u!==a&&(u===null?_.firstBaseUpdate=h:u.next=h,_.lastBaseUpdate=d))}if(o!==null){var S=i.baseState;a=0,_=h=d=null,u=o;do{var y=u.lane,v=u.eventTime;if((r&y)===y){_!==null&&(_=_.next={eventTime:v,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var x=e,w=u;switch(y=t,v=n,w.tag){case 1:if(x=w.payload,typeof x=="function"){S=x.call(v,S,y);break e}S=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=w.payload,y=typeof x=="function"?x.call(v,S,y):x,y==null)break e;S=qe({},S,y);break e;case 2:Fn=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,y=i.effects,y===null?i.effects=[u]:y.push(u))}else v={eventTime:v,lane:y,tag:u.tag,payload:u.payload,callback:u.callback,next:null},_===null?(h=_=v,d=S):_=_.next=v,a|=y;if(u=u.next,u===null){if(u=i.shared.pending,u===null)break;y=u,u=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(!0);if(_===null&&(d=S),i.baseState=d,i.firstBaseUpdate=h,i.lastBaseUpdate=_,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);yr|=a,e.lanes=a,e.memoizedState=S}}function Dd(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ie(191,i));i.call(r)}}}var mo={},gn=nr(mo),to=nr(mo),no=nr(mo);function cr(e){if(e===mo)throw Error(ie(174));return e}function Nu(e,t){switch(je(no,t),je(to,e),je(gn,mo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:hl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=hl(t,e)}Ve(gn),je(gn,t)}function ni(){Ve(gn),Ve(to),Ve(no)}function Qh(e){cr(no.current);var t=cr(gn.current),n=hl(t,e.type);t!==n&&(je(to,e),je(gn,n))}function Bu(e){to.current===e&&(Ve(gn),Ve(to))}var He=nr(0);function Ra(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Vs=[];function Uu(){for(var e=0;e<Vs.length;e++)Vs[e]._workInProgressVersionPrimary=null;Vs.length=0}var ea=On.ReactCurrentDispatcher,zs=On.ReactCurrentBatchConfig,vr=0,We=null,rt=null,st=null,xa=!1,Ui=!1,ro=0,Kv=0;function mt(){throw Error(ie(321))}function ju(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sn(e[n],t[n]))return!1;return!0}function Fu(e,t,n,r,i,o){if(vr=o,We=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ea.current=e===null||e.memoizedState===null?Zv:Jv,e=n(r,i),Ui){o=0;do{if(Ui=!1,ro=0,25<=o)throw Error(ie(301));o+=1,st=rt=null,t.updateQueue=null,ea.current=ey,e=n(r,i)}while(Ui)}if(ea.current=Ca,t=rt!==null&&rt.next!==null,vr=0,st=rt=We=null,xa=!1,t)throw Error(ie(300));return e}function Vu(){var e=ro!==0;return ro=0,e}function hn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?We.memoizedState=st=e:st=st.next=e,st}function Qt(){if(rt===null){var e=We.alternate;e=e!==null?e.memoizedState:null}else e=rt.next;var t=st===null?We.memoizedState:st.next;if(t!==null)st=t,rt=e;else{if(e===null)throw Error(ie(310));rt=e,e={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},st===null?We.memoizedState=st=e:st=st.next=e}return st}function io(e,t){return typeof t=="function"?t(e):t}function $s(e){var t=Qt(),n=t.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=e;var r=rt,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var u=a=null,d=null,h=o;do{var _=h.lane;if((vr&_)===_)d!==null&&(d=d.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:e(r,h.action);else{var S={lane:_,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};d===null?(u=d=S,a=r):d=d.next=S,We.lanes|=_,yr|=_}h=h.next}while(h!==null&&h!==o);d===null?a=r:d.next=u,sn(r,t.memoizedState)||(Mt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=d,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,We.lanes|=o,yr|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Gs(e){var t=Qt(),n=t.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=e(o,a.action),a=a.next;while(a!==i);sn(o,t.memoizedState)||(Mt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Xh(){}function Zh(e,t){var n=We,r=Qt(),i=t(),o=!sn(r.memoizedState,i);if(o&&(r.memoizedState=i,Mt=!0),r=r.queue,zu(tp.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||st!==null&&st.memoizedState.tag&1){if(n.flags|=2048,oo(9,ep.bind(null,n,r,i,t),void 0,null),lt===null)throw Error(ie(349));vr&30||Jh(n,t,i)}return i}function Jh(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=We.updateQueue,t===null?(t={lastEffect:null,stores:null},We.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ep(e,t,n,r){t.value=n,t.getSnapshot=r,np(t)&&rp(e)}function tp(e,t,n){return n(function(){np(t)&&rp(e)})}function np(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sn(e,n)}catch{return!0}}function rp(e){var t=Ln(e,1);t!==null&&an(t,e,1,-1)}function Od(e){var t=hn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:io,lastRenderedState:e},t.queue=e,e=e.dispatch=Xv.bind(null,We,e),[t.memoizedState,e]}function oo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=We.updateQueue,t===null?(t={lastEffect:null,stores:null},We.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function ip(){return Qt().memoizedState}function ta(e,t,n,r){var i=hn();We.flags|=e,i.memoizedState=oo(1|t,n,void 0,r===void 0?null:r)}function ts(e,t,n,r){var i=Qt();r=r===void 0?null:r;var o=void 0;if(rt!==null){var a=rt.memoizedState;if(o=a.destroy,r!==null&&ju(r,a.deps)){i.memoizedState=oo(t,n,o,r);return}}We.flags|=e,i.memoizedState=oo(1|t,n,o,r)}function Id(e,t){return ta(8390656,8,e,t)}function zu(e,t){return ts(2048,8,e,t)}function op(e,t){return ts(4,2,e,t)}function ap(e,t){return ts(4,4,e,t)}function sp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function lp(e,t,n){return n=n!=null?n.concat([e]):null,ts(4,4,sp.bind(null,t,e),n)}function $u(){}function up(e,t){var n=Qt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ju(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function cp(e,t){var n=Qt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ju(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function dp(e,t,n){return vr&21?(sn(n,t)||(n=mh(),We.lanes|=n,yr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Mt=!0),e.memoizedState=n)}function Yv(e,t){var n=Be;Be=n!==0&&4>n?n:4,e(!0);var r=zs.transition;zs.transition={};try{e(!1),t()}finally{Be=n,zs.transition=r}}function fp(){return Qt().memoizedState}function Qv(e,t,n){var r=Xn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},hp(e))pp(t,n);else if(n=Kh(e,t,n,r),n!==null){var i=Rt();an(n,e,r,i),_p(n,t,r)}}function Xv(e,t,n){var r=Xn(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(hp(e))pp(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,u=o(a,n);if(i.hasEagerState=!0,i.eagerState=u,sn(u,a)){var d=t.interleaved;d===null?(i.next=i,Ou(t)):(i.next=d.next,d.next=i),t.interleaved=i;return}}catch{}finally{}n=Kh(e,t,i,r),n!==null&&(i=Rt(),an(n,e,r,i),_p(n,t,r))}}function hp(e){var t=e.alternate;return e===We||t!==null&&t===We}function pp(e,t){Ui=xa=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function _p(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Su(e,n)}}var Ca={readContext:Yt,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useInsertionEffect:mt,useLayoutEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useMutableSource:mt,useSyncExternalStore:mt,useId:mt,unstable_isNewReconciler:!1},Zv={readContext:Yt,useCallback:function(e,t){return hn().memoizedState=[e,t===void 0?null:t],e},useContext:Yt,useEffect:Id,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ta(4194308,4,sp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ta(4194308,4,e,t)},useInsertionEffect:function(e,t){return ta(4,2,e,t)},useMemo:function(e,t){var n=hn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=hn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Qv.bind(null,We,e),[r.memoizedState,e]},useRef:function(e){var t=hn();return e={current:e},t.memoizedState=e},useState:Od,useDebugValue:$u,useDeferredValue:function(e){return hn().memoizedState=e},useTransition:function(){var e=Od(!1),t=e[0];return e=Yv.bind(null,e[1]),hn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=We,i=hn();if(ze){if(n===void 0)throw Error(ie(407));n=n()}else{if(n=t(),lt===null)throw Error(ie(349));vr&30||Jh(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Id(tp.bind(null,r,o,e),[e]),r.flags|=2048,oo(9,ep.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=hn(),t=lt.identifierPrefix;if(ze){var n=kn,r=An;n=(r&~(1<<32-on(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ro++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Kv++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Jv={readContext:Yt,useCallback:up,useContext:Yt,useEffect:zu,useImperativeHandle:lp,useInsertionEffect:op,useLayoutEffect:ap,useMemo:cp,useReducer:$s,useRef:ip,useState:function(){return $s(io)},useDebugValue:$u,useDeferredValue:function(e){var t=Qt();return dp(t,rt.memoizedState,e)},useTransition:function(){var e=$s(io)[0],t=Qt().memoizedState;return[e,t]},useMutableSource:Xh,useSyncExternalStore:Zh,useId:fp,unstable_isNewReconciler:!1},ey={readContext:Yt,useCallback:up,useContext:Yt,useEffect:zu,useImperativeHandle:lp,useInsertionEffect:op,useLayoutEffect:ap,useMemo:cp,useReducer:Gs,useRef:ip,useState:function(){return Gs(io)},useDebugValue:$u,useDeferredValue:function(e){var t=Qt();return rt===null?t.memoizedState=e:dp(t,rt.memoizedState,e)},useTransition:function(){var e=Gs(io)[0],t=Qt().memoizedState;return[e,t]},useMutableSource:Xh,useSyncExternalStore:Zh,useId:fp,unstable_isNewReconciler:!1};function tn(e,t){if(e&&e.defaultProps){t=qe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ol(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:qe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ns={isMounted:function(e){return(e=e._reactInternals)?Ar(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Rt(),i=Xn(e),o=Rn(r,i);o.payload=t,n!=null&&(o.callback=n),t=Yn(e,o,i),t!==null&&(an(t,e,i,r),Jo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Rt(),i=Xn(e),o=Rn(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Yn(e,o,i),t!==null&&(an(t,e,i,r),Jo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Rt(),r=Xn(e),i=Rn(n,r);i.tag=2,t!=null&&(i.callback=t),t=Yn(e,i,r),t!==null&&(an(t,e,r,n),Jo(t,e,r))}};function Nd(e,t,n,r,i,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!Xi(n,r)||!Xi(i,o):!0}function mp(e,t,n){var r=!1,i=er,o=t.contextType;return typeof o=="object"&&o!==null?o=Yt(o):(i=Dt(t)?mr:Et.current,r=t.contextTypes,o=(r=r!=null)?Jr(e,i):er),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ns,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Bd(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ns.enqueueReplaceState(t,t.state,null)}function Il(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Iu(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=Yt(o):(o=Dt(t)?mr:Et.current,i.context=Jr(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Ol(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&ns.enqueueReplaceState(i,i.state,null),ka(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function ri(e,t){try{var n="",r=t;do n+=Cg(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function Hs(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Nl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ty=typeof WeakMap=="function"?WeakMap:Map;function gp(e,t,n){n=Rn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){La||(La=!0,Wl=r),Nl(e,t)},n}function vp(e,t,n){n=Rn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Nl(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Nl(e,t),typeof r!="function"&&(Qn===null?Qn=new Set([this]):Qn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Ud(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new ty;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=_y.bind(null,e,t,n),t.then(e,e))}function jd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Fd(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Rn(-1,1),t.tag=2,Yn(n,t,1))),n.lanes|=1),e)}var ny=On.ReactCurrentOwner,Mt=!1;function kt(e,t,n,r){t.child=e===null?qh(t,null,n,r):ti(t,e.child,n,r)}function Vd(e,t,n,r,i){n=n.render;var o=t.ref;return qr(t,i),r=Fu(e,t,n,r,o,i),n=Vu(),e!==null&&!Mt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Mn(e,t,i)):(ze&&n&&Cu(t),t.flags|=1,kt(e,t,r,i),t.child)}function zd(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!Xu(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,yp(e,t,o,r,i)):(e=oa(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Xi,n(a,r)&&e.ref===t.ref)return Mn(e,t,i)}return t.flags|=1,e=Zn(o,r),e.ref=t.ref,e.return=t,t.child=e}function yp(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(Xi(o,r)&&e.ref===t.ref)if(Mt=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(Mt=!0);else return t.lanes=e.lanes,Mn(e,t,i)}return Bl(e,t,n,r,i)}function Sp(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(Vr,Nt),Nt|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,je(Vr,Nt),Nt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,je(Vr,Nt),Nt|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,je(Vr,Nt),Nt|=r;return kt(e,t,i,n),t.child}function Ep(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Bl(e,t,n,r,i){var o=Dt(n)?mr:Et.current;return o=Jr(t,o),qr(t,i),n=Fu(e,t,n,r,o,i),r=Vu(),e!==null&&!Mt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Mn(e,t,i)):(ze&&r&&Cu(t),t.flags|=1,kt(e,t,n,i),t.child)}function $d(e,t,n,r,i){if(Dt(n)){var o=!0;Sa(t)}else o=!1;if(qr(t,i),t.stateNode===null)na(e,t),mp(t,n,r),Il(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,u=t.memoizedProps;a.props=u;var d=a.context,h=n.contextType;typeof h=="object"&&h!==null?h=Yt(h):(h=Dt(n)?mr:Et.current,h=Jr(t,h));var _=n.getDerivedStateFromProps,S=typeof _=="function"||typeof a.getSnapshotBeforeUpdate=="function";S||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==r||d!==h)&&Bd(t,a,r,h),Fn=!1;var y=t.memoizedState;a.state=y,ka(t,r,a,i),d=t.memoizedState,u!==r||y!==d||Pt.current||Fn?(typeof _=="function"&&(Ol(t,n,_,r),d=t.memoizedState),(u=Fn||Nd(t,n,u,r,y,d,h))?(S||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=d),a.props=r,a.state=d,a.context=h,r=u):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Yh(e,t),u=t.memoizedProps,h=t.type===t.elementType?u:tn(t.type,u),a.props=h,S=t.pendingProps,y=a.context,d=n.contextType,typeof d=="object"&&d!==null?d=Yt(d):(d=Dt(n)?mr:Et.current,d=Jr(t,d));var v=n.getDerivedStateFromProps;(_=typeof v=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==S||y!==d)&&Bd(t,a,r,d),Fn=!1,y=t.memoizedState,a.state=y,ka(t,r,a,i);var x=t.memoizedState;u!==S||y!==x||Pt.current||Fn?(typeof v=="function"&&(Ol(t,n,v,r),x=t.memoizedState),(h=Fn||Nd(t,n,h,r,y,x,d)||!1)?(_||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,x,d),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,x,d)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=x),a.props=r,a.state=x,a.context=d,r=h):(typeof a.componentDidUpdate!="function"||u===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),r=!1)}return Ul(e,t,n,r,o,i)}function Ul(e,t,n,r,i,o){Ep(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&Cd(t,n,!1),Mn(e,t,o);r=t.stateNode,ny.current=t;var u=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=ti(t,e.child,null,o),t.child=ti(t,null,u,o)):kt(e,t,u,o),t.memoizedState=r.state,i&&Cd(t,n,!0),t.child}function wp(e){var t=e.stateNode;t.pendingContext?xd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&xd(e,t.context,!1),Nu(e,t.containerInfo)}function Gd(e,t,n,r,i){return ei(),Lu(i),t.flags|=256,kt(e,t,n,r),t.child}var jl={dehydrated:null,treeContext:null,retryLane:0};function Fl(e){return{baseLanes:e,cachePool:null,transitions:null}}function bp(e,t,n){var r=t.pendingProps,i=He.current,o=!1,a=(t.flags&128)!==0,u;if((u=a)||(u=e!==null&&e.memoizedState===null?!1:(i&2)!==0),u?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),je(He,i&1),e===null)return Pl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=os(a,r,0,null),e=pr(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Fl(n),t.memoizedState=jl,e):Gu(t,a));if(i=e.memoizedState,i!==null&&(u=i.dehydrated,u!==null))return ry(e,t,a,r,u,i,n);if(o){o=r.fallback,a=t.mode,i=e.child,u=i.sibling;var d={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=d,t.deletions=null):(r=Zn(i,d),r.subtreeFlags=i.subtreeFlags&14680064),u!==null?o=Zn(u,o):(o=pr(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?Fl(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=jl,r}return o=e.child,e=o.sibling,r=Zn(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Gu(e,t){return t=os({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function jo(e,t,n,r){return r!==null&&Lu(r),ti(t,e.child,null,n),e=Gu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ry(e,t,n,r,i,o,a){if(n)return t.flags&256?(t.flags&=-257,r=Hs(Error(ie(422))),jo(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=os({mode:"visible",children:r.children},i,0,null),o=pr(o,i,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&ti(t,e.child,null,a),t.child.memoizedState=Fl(a),t.memoizedState=jl,o);if(!(t.mode&1))return jo(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var u=r.dgst;return r=u,o=Error(ie(419)),r=Hs(o,r,void 0),jo(e,t,a,r)}if(u=(a&e.childLanes)!==0,Mt||u){if(r=lt,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Ln(e,i),an(r,e,i,-1))}return Qu(),r=Hs(Error(ie(421))),jo(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=my.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Bt=Kn(i.nextSibling),Ut=t,ze=!0,rn=null,e!==null&&(Gt[Ht++]=An,Gt[Ht++]=kn,Gt[Ht++]=gr,An=e.id,kn=e.overflow,gr=t),t=Gu(t,r.children),t.flags|=4096,t)}function Hd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Dl(e.return,t,n)}function Ws(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Ap(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(kt(e,t,r.children,n),r=He.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Hd(e,n,t);else if(e.tag===19)Hd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(je(He,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Ra(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ws(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Ra(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ws(t,!0,n,null,o);break;case"together":Ws(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function na(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Mn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),yr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ie(153));if(t.child!==null){for(e=t.child,n=Zn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Zn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function iy(e,t,n){switch(t.tag){case 3:wp(t),ei();break;case 5:Qh(t);break;case 1:Dt(t.type)&&Sa(t);break;case 4:Nu(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;je(ba,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(je(He,He.current&1),t.flags|=128,null):n&t.child.childLanes?bp(e,t,n):(je(He,He.current&1),e=Mn(e,t,n),e!==null?e.sibling:null);je(He,He.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Ap(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),je(He,He.current),r)break;return null;case 22:case 23:return t.lanes=0,Sp(e,t,n)}return Mn(e,t,n)}var kp,Vl,Rp,xp;kp=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Vl=function(){};Rp=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,cr(gn.current);var o=null;switch(n){case"input":i=ul(e,i),r=ul(e,r),o=[];break;case"select":i=qe({},i,{value:void 0}),r=qe({},r,{value:void 0}),o=[];break;case"textarea":i=fl(e,i),r=fl(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=va)}pl(n,r);var a;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var u=i[h];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Gi.hasOwnProperty(h)?o||(o=[]):(o=o||[]).push(h,null));for(h in r){var d=r[h];if(u=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&d!==u&&(d!=null||u!=null))if(h==="style")if(u){for(a in u)!u.hasOwnProperty(a)||d&&d.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in d)d.hasOwnProperty(a)&&u[a]!==d[a]&&(n||(n={}),n[a]=d[a])}else n||(o||(o=[]),o.push(h,n)),n=d;else h==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,u=u?u.__html:void 0,d!=null&&u!==d&&(o=o||[]).push(h,d)):h==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(h,""+d):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Gi.hasOwnProperty(h)?(d!=null&&h==="onScroll"&&Fe("scroll",e),o||u===d||(o=[])):(o=o||[]).push(h,d))}n&&(o=o||[]).push("style",n);var h=o;(t.updateQueue=h)&&(t.flags|=4)}};xp=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ri(e,t){if(!ze)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function gt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function oy(e,t,n){var r=t.pendingProps;switch(Tu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(t),null;case 1:return Dt(t.type)&&ya(),gt(t),null;case 3:return r=t.stateNode,ni(),Ve(Pt),Ve(Et),Uu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Bo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,rn!==null&&(Yl(rn),rn=null))),Vl(e,t),gt(t),null;case 5:Bu(t);var i=cr(no.current);if(n=t.type,e!==null&&t.stateNode!=null)Rp(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ie(166));return gt(t),null}if(e=cr(gn.current),Bo(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[_n]=t,r[eo]=o,e=(t.mode&1)!==0,n){case"dialog":Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":case"embed":Fe("load",r);break;case"video":case"audio":for(i=0;i<Pi.length;i++)Fe(Pi[i],r);break;case"source":Fe("error",r);break;case"img":case"image":case"link":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"input":ed(r,o),Fe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Fe("invalid",r);break;case"textarea":nd(r,o),Fe("invalid",r)}pl(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="children"?typeof u=="string"?r.textContent!==u&&(o.suppressHydrationWarning!==!0&&No(r.textContent,u,e),i=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&No(r.textContent,u,e),i=["children",""+u]):Gi.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&Fe("scroll",r)}switch(n){case"input":Co(r),td(r,o,!0);break;case"textarea":Co(r),rd(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=va)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=th(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[_n]=t,e[eo]=r,kp(e,t,!1,!1),t.stateNode=e;e:{switch(a=_l(n,r),n){case"dialog":Fe("cancel",e),Fe("close",e),i=r;break;case"iframe":case"object":case"embed":Fe("load",e),i=r;break;case"video":case"audio":for(i=0;i<Pi.length;i++)Fe(Pi[i],e);i=r;break;case"source":Fe("error",e),i=r;break;case"img":case"image":case"link":Fe("error",e),Fe("load",e),i=r;break;case"details":Fe("toggle",e),i=r;break;case"input":ed(e,r),i=ul(e,r),Fe("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=qe({},r,{value:void 0}),Fe("invalid",e);break;case"textarea":nd(e,r),i=fl(e,r),Fe("invalid",e);break;default:i=r}pl(n,i),u=i;for(o in u)if(u.hasOwnProperty(o)){var d=u[o];o==="style"?ih(e,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&nh(e,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Hi(e,d):typeof d=="number"&&Hi(e,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Gi.hasOwnProperty(o)?d!=null&&o==="onScroll"&&Fe("scroll",e):d!=null&&pu(e,o,d,a))}switch(n){case"input":Co(e),td(e,r,!1);break;case"textarea":Co(e),rd(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Jn(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?$r(e,!!r.multiple,o,!1):r.defaultValue!=null&&$r(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=va)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return gt(t),null;case 6:if(e&&t.stateNode!=null)xp(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ie(166));if(n=cr(no.current),cr(gn.current),Bo(t)){if(r=t.stateNode,n=t.memoizedProps,r[_n]=t,(o=r.nodeValue!==n)&&(e=Ut,e!==null))switch(e.tag){case 3:No(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&No(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_n]=t,t.stateNode=r}return gt(t),null;case 13:if(Ve(He),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ze&&Bt!==null&&t.mode&1&&!(t.flags&128))Hh(),ei(),t.flags|=98560,o=!1;else if(o=Bo(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(ie(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ie(317));o[_n]=t}else ei(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;gt(t),o=!1}else rn!==null&&(Yl(rn),rn=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||He.current&1?it===0&&(it=3):Qu())),t.updateQueue!==null&&(t.flags|=4),gt(t),null);case 4:return ni(),Vl(e,t),e===null&&Zi(t.stateNode.containerInfo),gt(t),null;case 10:return Du(t.type._context),gt(t),null;case 17:return Dt(t.type)&&ya(),gt(t),null;case 19:if(Ve(He),o=t.memoizedState,o===null)return gt(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)Ri(o,!1);else{if(it!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Ra(e),a!==null){for(t.flags|=128,Ri(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return je(He,He.current&1|2),t.child}e=e.sibling}o.tail!==null&&Ye()>ii&&(t.flags|=128,r=!0,Ri(o,!1),t.lanes=4194304)}else{if(!r)if(e=Ra(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ri(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!ze)return gt(t),null}else 2*Ye()-o.renderingStartTime>ii&&n!==1073741824&&(t.flags|=128,r=!0,Ri(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ye(),t.sibling=null,n=He.current,je(He,r?n&1|2:n&1),t):(gt(t),null);case 22:case 23:return Yu(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Nt&1073741824&&(gt(t),t.subtreeFlags&6&&(t.flags|=8192)):gt(t),null;case 24:return null;case 25:return null}throw Error(ie(156,t.tag))}function ay(e,t){switch(Tu(t),t.tag){case 1:return Dt(t.type)&&ya(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ni(),Ve(Pt),Ve(Et),Uu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Bu(t),null;case 13:if(Ve(He),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ie(340));ei()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ve(He),null;case 4:return ni(),null;case 10:return Du(t.type._context),null;case 22:case 23:return Yu(),null;case 24:return null;default:return null}}var Fo=!1,yt=!1,sy=typeof WeakSet=="function"?WeakSet:Set,fe=null;function Fr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ke(e,t,r)}else n.current=null}function zl(e,t,n){try{n()}catch(r){Ke(e,t,r)}}var Wd=!1;function ly(e,t){if(kl=_a,e=Ph(),xu(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,u=-1,d=-1,h=0,_=0,S=e,y=null;t:for(;;){for(var v;S!==n||i!==0&&S.nodeType!==3||(u=a+i),S!==o||r!==0&&S.nodeType!==3||(d=a+r),S.nodeType===3&&(a+=S.nodeValue.length),(v=S.firstChild)!==null;)y=S,S=v;for(;;){if(S===e)break t;if(y===n&&++h===i&&(u=a),y===o&&++_===r&&(d=a),(v=S.nextSibling)!==null)break;S=y,y=S.parentNode}S=v}n=u===-1||d===-1?null:{start:u,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Rl={focusedElem:e,selectionRange:n},_a=!1,fe=t;fe!==null;)if(t=fe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,fe=e;else for(;fe!==null;){t=fe;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var w=x.memoizedProps,N=x.memoizedState,A=t.stateNode,E=A.getSnapshotBeforeUpdate(t.elementType===t.type?w:tn(t.type,w),N);A.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var T=t.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ie(163))}}catch(M){Ke(t,t.return,M)}if(e=t.sibling,e!==null){e.return=t.return,fe=e;break}fe=t.return}return x=Wd,Wd=!1,x}function ji(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&zl(t,n,o)}i=i.next}while(i!==r)}}function rs(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function $l(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Cp(e){var t=e.alternate;t!==null&&(e.alternate=null,Cp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[_n],delete t[eo],delete t[Tl],delete t[Gv],delete t[Hv])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Tp(e){return e.tag===5||e.tag===3||e.tag===4}function qd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Tp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Gl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=va));else if(r!==4&&(e=e.child,e!==null))for(Gl(e,t,n),e=e.sibling;e!==null;)Gl(e,t,n),e=e.sibling}function Hl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Hl(e,t,n),e=e.sibling;e!==null;)Hl(e,t,n),e=e.sibling}var dt=null,nn=!1;function Bn(e,t,n){for(n=n.child;n!==null;)Lp(e,t,n),n=n.sibling}function Lp(e,t,n){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(Ya,n)}catch{}switch(n.tag){case 5:yt||Fr(n,t);case 6:var r=dt,i=nn;dt=null,Bn(e,t,n),dt=r,nn=i,dt!==null&&(nn?(e=dt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):dt.removeChild(n.stateNode));break;case 18:dt!==null&&(nn?(e=dt,n=n.stateNode,e.nodeType===8?js(e.parentNode,n):e.nodeType===1&&js(e,n),Yi(e)):js(dt,n.stateNode));break;case 4:r=dt,i=nn,dt=n.stateNode.containerInfo,nn=!0,Bn(e,t,n),dt=r,nn=i;break;case 0:case 11:case 14:case 15:if(!yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&zl(n,t,a),i=i.next}while(i!==r)}Bn(e,t,n);break;case 1:if(!yt&&(Fr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ke(n,t,u)}Bn(e,t,n);break;case 21:Bn(e,t,n);break;case 22:n.mode&1?(yt=(r=yt)||n.memoizedState!==null,Bn(e,t,n),yt=r):Bn(e,t,n);break;default:Bn(e,t,n)}}function Kd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new sy),t.forEach(function(r){var i=gy.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function en(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,u=a;e:for(;u!==null;){switch(u.tag){case 5:dt=u.stateNode,nn=!1;break e;case 3:dt=u.stateNode.containerInfo,nn=!0;break e;case 4:dt=u.stateNode.containerInfo,nn=!0;break e}u=u.return}if(dt===null)throw Error(ie(160));Lp(o,a,i),dt=null,nn=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(h){Ke(i,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Mp(t,e),t=t.sibling}function Mp(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(en(t,e),dn(e),r&4){try{ji(3,e,e.return),rs(3,e)}catch(w){Ke(e,e.return,w)}try{ji(5,e,e.return)}catch(w){Ke(e,e.return,w)}}break;case 1:en(t,e),dn(e),r&512&&n!==null&&Fr(n,n.return);break;case 5:if(en(t,e),dn(e),r&512&&n!==null&&Fr(n,n.return),e.flags&32){var i=e.stateNode;try{Hi(i,"")}catch(w){Ke(e,e.return,w)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,u=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&Jf(i,o),_l(u,a);var h=_l(u,o);for(a=0;a<d.length;a+=2){var _=d[a],S=d[a+1];_==="style"?ih(i,S):_==="dangerouslySetInnerHTML"?nh(i,S):_==="children"?Hi(i,S):pu(i,_,S,h)}switch(u){case"input":cl(i,o);break;case"textarea":eh(i,o);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var v=o.value;v!=null?$r(i,!!o.multiple,v,!1):y!==!!o.multiple&&(o.defaultValue!=null?$r(i,!!o.multiple,o.defaultValue,!0):$r(i,!!o.multiple,o.multiple?[]:"",!1))}i[eo]=o}catch(w){Ke(e,e.return,w)}}break;case 6:if(en(t,e),dn(e),r&4){if(e.stateNode===null)throw Error(ie(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(w){Ke(e,e.return,w)}}break;case 3:if(en(t,e),dn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Yi(t.containerInfo)}catch(w){Ke(e,e.return,w)}break;case 4:en(t,e),dn(e);break;case 13:en(t,e),dn(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(qu=Ye())),r&4&&Kd(e);break;case 22:if(_=n!==null&&n.memoizedState!==null,e.mode&1?(yt=(h=yt)||_,en(t,e),yt=h):en(t,e),dn(e),r&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!_&&e.mode&1)for(fe=e,_=e.child;_!==null;){for(S=fe=_;fe!==null;){switch(y=fe,v=y.child,y.tag){case 0:case 11:case 14:case 15:ji(4,y,y.return);break;case 1:Fr(y,y.return);var x=y.stateNode;if(typeof x.componentWillUnmount=="function"){r=y,n=y.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(w){Ke(r,n,w)}}break;case 5:Fr(y,y.return);break;case 22:if(y.memoizedState!==null){Qd(S);continue}}v!==null?(v.return=y,fe=v):Qd(S)}_=_.sibling}e:for(_=null,S=e;;){if(S.tag===5){if(_===null){_=S;try{i=S.stateNode,h?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=S.stateNode,d=S.memoizedProps.style,a=d!=null&&d.hasOwnProperty("display")?d.display:null,u.style.display=rh("display",a))}catch(w){Ke(e,e.return,w)}}}else if(S.tag===6){if(_===null)try{S.stateNode.nodeValue=h?"":S.memoizedProps}catch(w){Ke(e,e.return,w)}}else if((S.tag!==22&&S.tag!==23||S.memoizedState===null||S===e)&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===e)break e;for(;S.sibling===null;){if(S.return===null||S.return===e)break e;_===S&&(_=null),S=S.return}_===S&&(_=null),S.sibling.return=S.return,S=S.sibling}}break;case 19:en(t,e),dn(e),r&4&&Kd(e);break;case 21:break;default:en(t,e),dn(e)}}function dn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Tp(n)){var r=n;break e}n=n.return}throw Error(ie(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Hi(i,""),r.flags&=-33);var o=qd(e);Hl(e,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,u=qd(e);Gl(e,u,a);break;default:throw Error(ie(161))}}catch(d){Ke(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function uy(e,t,n){fe=e,Pp(e)}function Pp(e,t,n){for(var r=(e.mode&1)!==0;fe!==null;){var i=fe,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Fo;if(!a){var u=i.alternate,d=u!==null&&u.memoizedState!==null||yt;u=Fo;var h=yt;if(Fo=a,(yt=d)&&!h)for(fe=i;fe!==null;)a=fe,d=a.child,a.tag===22&&a.memoizedState!==null?Xd(i):d!==null?(d.return=a,fe=d):Xd(i);for(;o!==null;)fe=o,Pp(o),o=o.sibling;fe=i,Fo=u,yt=h}Yd(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,fe=o):Yd(e)}}function Yd(e){for(;fe!==null;){var t=fe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:yt||rs(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!yt)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:tn(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Dd(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Dd(t,a,n)}break;case 5:var u=t.stateNode;if(n===null&&t.flags&4){n=u;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var _=h.memoizedState;if(_!==null){var S=_.dehydrated;S!==null&&Yi(S)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ie(163))}yt||t.flags&512&&$l(t)}catch(y){Ke(t,t.return,y)}}if(t===e){fe=null;break}if(n=t.sibling,n!==null){n.return=t.return,fe=n;break}fe=t.return}}function Qd(e){for(;fe!==null;){var t=fe;if(t===e){fe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,fe=n;break}fe=t.return}}function Xd(e){for(;fe!==null;){var t=fe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rs(4,t)}catch(d){Ke(t,n,d)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(d){Ke(t,i,d)}}var o=t.return;try{$l(t)}catch(d){Ke(t,o,d)}break;case 5:var a=t.return;try{$l(t)}catch(d){Ke(t,a,d)}}}catch(d){Ke(t,t.return,d)}if(t===e){fe=null;break}var u=t.sibling;if(u!==null){u.return=t.return,fe=u;break}fe=t.return}}var cy=Math.ceil,Ta=On.ReactCurrentDispatcher,Hu=On.ReactCurrentOwner,qt=On.ReactCurrentBatchConfig,De=0,lt=null,Je=null,ft=0,Nt=0,Vr=nr(0),it=0,ao=null,yr=0,is=0,Wu=0,Fi=null,Tt=null,qu=0,ii=1/0,wn=null,La=!1,Wl=null,Qn=null,Vo=!1,Gn=null,Ma=0,Vi=0,ql=null,ra=-1,ia=0;function Rt(){return De&6?Ye():ra!==-1?ra:ra=Ye()}function Xn(e){return e.mode&1?De&2&&ft!==0?ft&-ft:qv.transition!==null?(ia===0&&(ia=mh()),ia):(e=Be,e!==0||(e=window.event,e=e===void 0?16:bh(e.type)),e):1}function an(e,t,n,r){if(50<Vi)throw Vi=0,ql=null,Error(ie(185));ho(e,n,r),(!(De&2)||e!==lt)&&(e===lt&&(!(De&2)&&(is|=n),it===4&&zn(e,ft)),Ot(e,r),n===1&&De===0&&!(t.mode&1)&&(ii=Ye()+500,es&&rr()))}function Ot(e,t){var n=e.callbackNode;qg(e,t);var r=pa(e,e===lt?ft:0);if(r===0)n!==null&&ad(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&ad(n),t===1)e.tag===0?Wv(Zd.bind(null,e)):zh(Zd.bind(null,e)),zv(function(){!(De&6)&&rr()}),n=null;else{switch(gh(r)){case 1:n=yu;break;case 4:n=ph;break;case 16:n=ha;break;case 536870912:n=_h;break;default:n=ha}n=Fp(n,Dp.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Dp(e,t){if(ra=-1,ia=0,De&6)throw Error(ie(327));var n=e.callbackNode;if(Kr()&&e.callbackNode!==n)return null;var r=pa(e,e===lt?ft:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Pa(e,r);else{t=r;var i=De;De|=2;var o=Ip();(lt!==e||ft!==t)&&(wn=null,ii=Ye()+500,hr(e,t));do try{hy();break}catch(u){Op(e,u)}while(!0);Pu(),Ta.current=o,De=i,Je!==null?t=0:(lt=null,ft=0,t=it)}if(t!==0){if(t===2&&(i=Sl(e),i!==0&&(r=i,t=Kl(e,i))),t===1)throw n=ao,hr(e,0),zn(e,r),Ot(e,Ye()),n;if(t===6)zn(e,r);else{if(i=e.current.alternate,!(r&30)&&!dy(i)&&(t=Pa(e,r),t===2&&(o=Sl(e),o!==0&&(r=o,t=Kl(e,o))),t===1))throw n=ao,hr(e,0),zn(e,r),Ot(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(ie(345));case 2:sr(e,Tt,wn);break;case 3:if(zn(e,r),(r&130023424)===r&&(t=qu+500-Ye(),10<t)){if(pa(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Rt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Cl(sr.bind(null,e,Tt,wn),t);break}sr(e,Tt,wn);break;case 4:if(zn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-on(r);o=1<<a,a=t[a],a>i&&(i=a),r&=~o}if(r=i,r=Ye()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*cy(r/1960))-r,10<r){e.timeoutHandle=Cl(sr.bind(null,e,Tt,wn),r);break}sr(e,Tt,wn);break;case 5:sr(e,Tt,wn);break;default:throw Error(ie(329))}}}return Ot(e,Ye()),e.callbackNode===n?Dp.bind(null,e):null}function Kl(e,t){var n=Fi;return e.current.memoizedState.isDehydrated&&(hr(e,t).flags|=256),e=Pa(e,t),e!==2&&(t=Tt,Tt=n,t!==null&&Yl(t)),e}function Yl(e){Tt===null?Tt=e:Tt.push.apply(Tt,e)}function dy(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sn(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zn(e,t){for(t&=~Wu,t&=~is,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-on(t),r=1<<n;e[n]=-1,t&=~r}}function Zd(e){if(De&6)throw Error(ie(327));Kr();var t=pa(e,0);if(!(t&1))return Ot(e,Ye()),null;var n=Pa(e,t);if(e.tag!==0&&n===2){var r=Sl(e);r!==0&&(t=r,n=Kl(e,r))}if(n===1)throw n=ao,hr(e,0),zn(e,t),Ot(e,Ye()),n;if(n===6)throw Error(ie(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,sr(e,Tt,wn),Ot(e,Ye()),null}function Ku(e,t){var n=De;De|=1;try{return e(t)}finally{De=n,De===0&&(ii=Ye()+500,es&&rr())}}function Sr(e){Gn!==null&&Gn.tag===0&&!(De&6)&&Kr();var t=De;De|=1;var n=qt.transition,r=Be;try{if(qt.transition=null,Be=1,e)return e()}finally{Be=r,qt.transition=n,De=t,!(De&6)&&rr()}}function Yu(){Nt=Vr.current,Ve(Vr)}function hr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Vv(n)),Je!==null)for(n=Je.return;n!==null;){var r=n;switch(Tu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ya();break;case 3:ni(),Ve(Pt),Ve(Et),Uu();break;case 5:Bu(r);break;case 4:ni();break;case 13:Ve(He);break;case 19:Ve(He);break;case 10:Du(r.type._context);break;case 22:case 23:Yu()}n=n.return}if(lt=e,Je=e=Zn(e.current,null),ft=Nt=t,it=0,ao=null,Wu=is=yr=0,Tt=Fi=null,ur!==null){for(t=0;t<ur.length;t++)if(n=ur[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}ur=null}return e}function Op(e,t){do{var n=Je;try{if(Pu(),ea.current=Ca,xa){for(var r=We.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}xa=!1}if(vr=0,st=rt=We=null,Ui=!1,ro=0,Hu.current=null,n===null||n.return===null){it=1,ao=t,Je=null;break}e:{var o=e,a=n.return,u=n,d=t;if(t=ft,u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var h=d,_=u,S=_.tag;if(!(_.mode&1)&&(S===0||S===11||S===15)){var y=_.alternate;y?(_.updateQueue=y.updateQueue,_.memoizedState=y.memoizedState,_.lanes=y.lanes):(_.updateQueue=null,_.memoizedState=null)}var v=jd(a);if(v!==null){v.flags&=-257,Fd(v,a,u,o,t),v.mode&1&&Ud(o,h,t),t=v,d=h;var x=t.updateQueue;if(x===null){var w=new Set;w.add(d),t.updateQueue=w}else x.add(d);break e}else{if(!(t&1)){Ud(o,h,t),Qu();break e}d=Error(ie(426))}}else if(ze&&u.mode&1){var N=jd(a);if(N!==null){!(N.flags&65536)&&(N.flags|=256),Fd(N,a,u,o,t),Lu(ri(d,u));break e}}o=d=ri(d,u),it!==4&&(it=2),Fi===null?Fi=[o]:Fi.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var A=gp(o,d,t);Pd(o,A);break e;case 1:u=d;var E=o.type,T=o.stateNode;if(!(o.flags&128)&&(typeof E.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Qn===null||!Qn.has(T)))){o.flags|=65536,t&=-t,o.lanes|=t;var M=vp(o,u,t);Pd(o,M);break e}}o=o.return}while(o!==null)}Bp(n)}catch(z){t=z,Je===n&&n!==null&&(Je=n=n.return);continue}break}while(!0)}function Ip(){var e=Ta.current;return Ta.current=Ca,e===null?Ca:e}function Qu(){(it===0||it===3||it===2)&&(it=4),lt===null||!(yr&268435455)&&!(is&268435455)||zn(lt,ft)}function Pa(e,t){var n=De;De|=2;var r=Ip();(lt!==e||ft!==t)&&(wn=null,hr(e,t));do try{fy();break}catch(i){Op(e,i)}while(!0);if(Pu(),De=n,Ta.current=r,Je!==null)throw Error(ie(261));return lt=null,ft=0,it}function fy(){for(;Je!==null;)Np(Je)}function hy(){for(;Je!==null&&!Ug();)Np(Je)}function Np(e){var t=jp(e.alternate,e,Nt);e.memoizedProps=e.pendingProps,t===null?Bp(e):Je=t,Hu.current=null}function Bp(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=ay(n,t),n!==null){n.flags&=32767,Je=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{it=6,Je=null;return}}else if(n=oy(n,t,Nt),n!==null){Je=n;return}if(t=t.sibling,t!==null){Je=t;return}Je=t=e}while(t!==null);it===0&&(it=5)}function sr(e,t,n){var r=Be,i=qt.transition;try{qt.transition=null,Be=1,py(e,t,n,r)}finally{qt.transition=i,Be=r}return null}function py(e,t,n,r){do Kr();while(Gn!==null);if(De&6)throw Error(ie(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ie(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(Kg(e,o),e===lt&&(Je=lt=null,ft=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Vo||(Vo=!0,Fp(ha,function(){return Kr(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=qt.transition,qt.transition=null;var a=Be;Be=1;var u=De;De|=4,Hu.current=null,ly(e,n),Mp(n,e),Ov(Rl),_a=!!kl,Rl=kl=null,e.current=n,uy(n),jg(),De=u,Be=a,qt.transition=o}else e.current=n;if(Vo&&(Vo=!1,Gn=e,Ma=i),o=e.pendingLanes,o===0&&(Qn=null),zg(n.stateNode),Ot(e,Ye()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(La)throw La=!1,e=Wl,Wl=null,e;return Ma&1&&e.tag!==0&&Kr(),o=e.pendingLanes,o&1?e===ql?Vi++:(Vi=0,ql=e):Vi=0,rr(),null}function Kr(){if(Gn!==null){var e=gh(Ma),t=qt.transition,n=Be;try{if(qt.transition=null,Be=16>e?16:e,Gn===null)var r=!1;else{if(e=Gn,Gn=null,Ma=0,De&6)throw Error(ie(331));var i=De;for(De|=4,fe=e.current;fe!==null;){var o=fe,a=o.child;if(fe.flags&16){var u=o.deletions;if(u!==null){for(var d=0;d<u.length;d++){var h=u[d];for(fe=h;fe!==null;){var _=fe;switch(_.tag){case 0:case 11:case 15:ji(8,_,o)}var S=_.child;if(S!==null)S.return=_,fe=S;else for(;fe!==null;){_=fe;var y=_.sibling,v=_.return;if(Cp(_),_===h){fe=null;break}if(y!==null){y.return=v,fe=y;break}fe=v}}}var x=o.alternate;if(x!==null){var w=x.child;if(w!==null){x.child=null;do{var N=w.sibling;w.sibling=null,w=N}while(w!==null)}}fe=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,fe=a;else e:for(;fe!==null;){if(o=fe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ji(9,o,o.return)}var A=o.sibling;if(A!==null){A.return=o.return,fe=A;break e}fe=o.return}}var E=e.current;for(fe=E;fe!==null;){a=fe;var T=a.child;if(a.subtreeFlags&2064&&T!==null)T.return=a,fe=T;else e:for(a=E;fe!==null;){if(u=fe,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:rs(9,u)}}catch(z){Ke(u,u.return,z)}if(u===a){fe=null;break e}var M=u.sibling;if(M!==null){M.return=u.return,fe=M;break e}fe=u.return}}if(De=i,rr(),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(Ya,e)}catch{}r=!0}return r}finally{Be=n,qt.transition=t}}return!1}function Jd(e,t,n){t=ri(n,t),t=gp(e,t,1),e=Yn(e,t,1),t=Rt(),e!==null&&(ho(e,1,t),Ot(e,t))}function Ke(e,t,n){if(e.tag===3)Jd(e,e,n);else for(;t!==null;){if(t.tag===3){Jd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Qn===null||!Qn.has(r))){e=ri(n,e),e=vp(t,e,1),t=Yn(t,e,1),e=Rt(),t!==null&&(ho(t,1,e),Ot(t,e));break}}t=t.return}}function _y(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Rt(),e.pingedLanes|=e.suspendedLanes&n,lt===e&&(ft&n)===n&&(it===4||it===3&&(ft&130023424)===ft&&500>Ye()-qu?hr(e,0):Wu|=n),Ot(e,t)}function Up(e,t){t===0&&(e.mode&1?(t=Mo,Mo<<=1,!(Mo&130023424)&&(Mo=4194304)):t=1);var n=Rt();e=Ln(e,t),e!==null&&(ho(e,t,n),Ot(e,n))}function my(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Up(e,n)}function gy(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ie(314))}r!==null&&r.delete(t),Up(e,n)}var jp;jp=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Pt.current)Mt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Mt=!1,iy(e,t,n);Mt=!!(e.flags&131072)}else Mt=!1,ze&&t.flags&1048576&&$h(t,wa,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;na(e,t),e=t.pendingProps;var i=Jr(t,Et.current);qr(t,n),i=Fu(null,t,r,e,i,n);var o=Vu();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Dt(r)?(o=!0,Sa(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Iu(t),i.updater=ns,t.stateNode=i,i._reactInternals=t,Il(t,r,e,n),t=Ul(null,t,r,!0,o,n)):(t.tag=0,ze&&o&&Cu(t),kt(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(na(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=yy(r),e=tn(r,e),i){case 0:t=Bl(null,t,r,e,n);break e;case 1:t=$d(null,t,r,e,n);break e;case 11:t=Vd(null,t,r,e,n);break e;case 14:t=zd(null,t,r,tn(r.type,e),n);break e}throw Error(ie(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:tn(r,i),Bl(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:tn(r,i),$d(e,t,r,i,n);case 3:e:{if(wp(t),e===null)throw Error(ie(387));r=t.pendingProps,o=t.memoizedState,i=o.element,Yh(e,t),ka(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=ri(Error(ie(423)),t),t=Gd(e,t,r,n,i);break e}else if(r!==i){i=ri(Error(ie(424)),t),t=Gd(e,t,r,n,i);break e}else for(Bt=Kn(t.stateNode.containerInfo.firstChild),Ut=t,ze=!0,rn=null,n=qh(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ei(),r===i){t=Mn(e,t,n);break e}kt(e,t,r,n)}t=t.child}return t;case 5:return Qh(t),e===null&&Pl(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,a=i.children,xl(r,i)?a=null:o!==null&&xl(r,o)&&(t.flags|=32),Ep(e,t),kt(e,t,a,n),t.child;case 6:return e===null&&Pl(t),null;case 13:return bp(e,t,n);case 4:return Nu(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ti(t,null,r,n):kt(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:tn(r,i),Vd(e,t,r,i,n);case 7:return kt(e,t,t.pendingProps,n),t.child;case 8:return kt(e,t,t.pendingProps.children,n),t.child;case 12:return kt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,je(ba,r._currentValue),r._currentValue=a,o!==null)if(sn(o.value,a)){if(o.children===i.children&&!Pt.current){t=Mn(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var u=o.dependencies;if(u!==null){a=o.child;for(var d=u.firstContext;d!==null;){if(d.context===r){if(o.tag===1){d=Rn(-1,n&-n),d.tag=2;var h=o.updateQueue;if(h!==null){h=h.shared;var _=h.pending;_===null?d.next=d:(d.next=_.next,_.next=d),h.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),Dl(o.return,n,t),u.lanes|=n;break}d=d.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(ie(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),Dl(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}kt(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,qr(t,n),i=Yt(i),r=r(i),t.flags|=1,kt(e,t,r,n),t.child;case 14:return r=t.type,i=tn(r,t.pendingProps),i=tn(r.type,i),zd(e,t,r,i,n);case 15:return yp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:tn(r,i),na(e,t),t.tag=1,Dt(r)?(e=!0,Sa(t)):e=!1,qr(t,n),mp(t,r,i),Il(t,r,i,n),Ul(null,t,r,!0,e,n);case 19:return Ap(e,t,n);case 22:return Sp(e,t,n)}throw Error(ie(156,t.tag))};function Fp(e,t){return hh(e,t)}function vy(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(e,t,n,r){return new vy(e,t,n,r)}function Xu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function yy(e){if(typeof e=="function")return Xu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===mu)return 11;if(e===gu)return 14}return 2}function Zn(e,t){var n=e.alternate;return n===null?(n=Wt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function oa(e,t,n,r,i,o){var a=2;if(r=e,typeof e=="function")Xu(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Mr:return pr(n.children,i,o,t);case _u:a=8,i|=8;break;case ol:return e=Wt(12,n,t,i|2),e.elementType=ol,e.lanes=o,e;case al:return e=Wt(13,n,t,i),e.elementType=al,e.lanes=o,e;case sl:return e=Wt(19,n,t,i),e.elementType=sl,e.lanes=o,e;case Qf:return os(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Kf:a=10;break e;case Yf:a=9;break e;case mu:a=11;break e;case gu:a=14;break e;case jn:a=16,r=null;break e}throw Error(ie(130,e==null?e:typeof e,""))}return t=Wt(a,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function pr(e,t,n,r){return e=Wt(7,e,r,t),e.lanes=n,e}function os(e,t,n,r){return e=Wt(22,e,r,t),e.elementType=Qf,e.lanes=n,e.stateNode={isHidden:!1},e}function qs(e,t,n){return e=Wt(6,e,null,t),e.lanes=n,e}function Ks(e,t,n){return t=Wt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Sy(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cs(0),this.expirationTimes=Cs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cs(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Zu(e,t,n,r,i,o,a,u,d){return e=new Sy(e,t,n,u,d),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Wt(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Iu(o),e}function Ey(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Lr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Vp(e){if(!e)return er;e=e._reactInternals;e:{if(Ar(e)!==e||e.tag!==1)throw Error(ie(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Dt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ie(171))}if(e.tag===1){var n=e.type;if(Dt(n))return Vh(e,n,t)}return t}function zp(e,t,n,r,i,o,a,u,d){return e=Zu(n,r,!0,e,i,o,a,u,d),e.context=Vp(null),n=e.current,r=Rt(),i=Xn(n),o=Rn(r,i),o.callback=t??null,Yn(n,o,i),e.current.lanes=i,ho(e,i,r),Ot(e,r),e}function as(e,t,n,r){var i=t.current,o=Rt(),a=Xn(i);return n=Vp(n),t.context===null?t.context=n:t.pendingContext=n,t=Rn(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Yn(i,t,a),e!==null&&(an(e,i,a,o),Jo(e,i,a)),a}function Da(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ef(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ju(e,t){ef(e,t),(e=e.alternate)&&ef(e,t)}function wy(){return null}var $p=typeof reportError=="function"?reportError:function(e){console.error(e)};function ec(e){this._internalRoot=e}ss.prototype.render=ec.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ie(409));as(e,t,null,null)};ss.prototype.unmount=ec.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Sr(function(){as(null,e,null,null)}),t[Tn]=null}};function ss(e){this._internalRoot=e}ss.prototype.unstable_scheduleHydration=function(e){if(e){var t=Sh();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Vn.length&&t!==0&&t<Vn[n].priority;n++);Vn.splice(n,0,e),n===0&&wh(e)}};function tc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ls(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function tf(){}function by(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var h=Da(a);o.call(h)}}var a=zp(t,r,e,0,null,!1,!1,"",tf);return e._reactRootContainer=a,e[Tn]=a.current,Zi(e.nodeType===8?e.parentNode:e),Sr(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var u=r;r=function(){var h=Da(d);u.call(h)}}var d=Zu(e,0,!1,null,null,!1,!1,"",tf);return e._reactRootContainer=d,e[Tn]=d.current,Zi(e.nodeType===8?e.parentNode:e),Sr(function(){as(t,d,n,r)}),d}function us(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var u=i;i=function(){var d=Da(a);u.call(d)}}as(t,a,e,i)}else a=by(n,t,e,i,r);return Da(a)}vh=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Mi(t.pendingLanes);n!==0&&(Su(t,n|1),Ot(t,Ye()),!(De&6)&&(ii=Ye()+500,rr()))}break;case 13:Sr(function(){var r=Ln(e,1);if(r!==null){var i=Rt();an(r,e,1,i)}}),Ju(e,1)}};Eu=function(e){if(e.tag===13){var t=Ln(e,134217728);if(t!==null){var n=Rt();an(t,e,134217728,n)}Ju(e,134217728)}};yh=function(e){if(e.tag===13){var t=Xn(e),n=Ln(e,t);if(n!==null){var r=Rt();an(n,e,t,r)}Ju(e,t)}};Sh=function(){return Be};Eh=function(e,t){var n=Be;try{return Be=e,t()}finally{Be=n}};gl=function(e,t,n){switch(t){case"input":if(cl(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ja(r);if(!i)throw Error(ie(90));Zf(r),cl(r,i)}}}break;case"textarea":eh(e,n);break;case"select":t=n.value,t!=null&&$r(e,!!n.multiple,t,!1)}};sh=Ku;lh=Sr;var Ay={usingClientEntryPoint:!1,Events:[_o,Ir,Ja,oh,ah,Ku]},xi={findFiberByHostInstance:lr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ky={bundleType:xi.bundleType,version:xi.version,rendererPackageName:xi.rendererPackageName,rendererConfig:xi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:On.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=dh(e),e===null?null:e.stateNode},findFiberByHostInstance:xi.findFiberByHostInstance||wy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zo.isDisabled&&zo.supportsFiber)try{Ya=zo.inject(ky),mn=zo}catch{}}Vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ay;Vt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tc(t))throw Error(ie(200));return Ey(e,t,null,n)};Vt.createRoot=function(e,t){if(!tc(e))throw Error(ie(299));var n=!1,r="",i=$p;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Zu(e,1,!1,null,null,n,!1,r,i),e[Tn]=t.current,Zi(e.nodeType===8?e.parentNode:e),new ec(t)};Vt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ie(188)):(e=Object.keys(e).join(","),Error(ie(268,e)));return e=dh(t),e=e===null?null:e.stateNode,e};Vt.flushSync=function(e){return Sr(e)};Vt.hydrate=function(e,t,n){if(!ls(t))throw Error(ie(200));return us(null,e,t,!0,n)};Vt.hydrateRoot=function(e,t,n){if(!tc(e))throw Error(ie(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=$p;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=zp(t,null,e,1,n??null,i,!1,o,a),e[Tn]=t.current,Zi(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new ss(t)};Vt.render=function(e,t,n){if(!ls(t))throw Error(ie(200));return us(null,e,t,!1,n)};Vt.unmountComponentAtNode=function(e){if(!ls(e))throw Error(ie(40));return e._reactRootContainer?(Sr(function(){us(null,null,e,!1,function(){e._reactRootContainer=null,e[Tn]=null})}),!0):!1};Vt.unstable_batchedUpdates=Ku;Vt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ls(n))throw Error(ie(200));if(e==null||e._reactInternals===void 0)throw Error(ie(38));return us(e,t,n,!1,r)};Vt.version="18.3.1-next-f1338f8080-20240426";function Gp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Gp)}catch(e){console.error(e)}}Gp(),Gf.exports=Vt;var Ry=Gf.exports,Hp,nf=Ry;Hp=nf.createRoot,nf.hydrateRoot;/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var rf="popstate";function xy(e={}){function t(i,o){let{pathname:a="/",search:u="",hash:d=""}=kr(i.location.hash.substring(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Ql("",{pathname:a,search:u,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){let a=i.document.querySelector("base"),u="";if(a&&a.getAttribute("href")){let d=i.location.href,h=d.indexOf("#");u=h===-1?d:d.slice(0,h)}return u+"#"+(typeof o=="string"?o:so(o))}function r(i,o){Ft(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return Ty(t,n,r,e)}function $e(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ft(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Cy(){return Math.random().toString(36).substring(2,10)}function of(e,t){return{usr:e.state,key:e.key,idx:t}}function Ql(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?kr(t):t,state:n,key:t&&t.key||r||Cy()}}function so({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function kr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function Ty(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,u="POP",d=null,h=_();h==null&&(h=0,a.replaceState({...a.state,idx:h},""));function _(){return(a.state||{idx:null}).idx}function S(){u="POP";let N=_(),A=N==null?null:N-h;h=N,d&&d({action:u,location:w.location,delta:A})}function y(N,A){u="PUSH";let E=Ql(w.location,N,A);n&&n(E,N),h=_()+1;let T=of(E,h),M=w.createHref(E);try{a.pushState(T,"",M)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;i.location.assign(M)}o&&d&&d({action:u,location:w.location,delta:1})}function v(N,A){u="REPLACE";let E=Ql(w.location,N,A);n&&n(E,N),h=_();let T=of(E,h),M=w.createHref(E);a.replaceState(T,"",M),o&&d&&d({action:u,location:w.location,delta:0})}function x(N){return Ly(N)}let w={get action(){return u},get location(){return e(i,a)},listen(N){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(rf,S),d=N,()=>{i.removeEventListener(rf,S),d=null}},createHref(N){return t(i,N)},createURL:x,encodeLocation(N){let A=x(N);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:y,replace:v,go(N){return a.go(N)}};return w}function Ly(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),$e(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:so(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function Wp(e,t,n="/"){return My(e,t,n,!1)}function My(e,t,n,r){let i=typeof t=="string"?kr(t):t,o=Pn(i.pathname||"/",n);if(o==null)return null;let a=qp(e);Py(a);let u=null;for(let d=0;u==null&&d<a.length;++d){let h=$y(o);u=Vy(a[d],h,r)}return u}function qp(e,t=[],n=[],r="",i=!1){let o=(a,u,d=i,h)=>{let _={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(r)&&d)return;$e(_.relativePath.startsWith(r),`Absolute route path "${_.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(r.length)}let S=xn([r,_.relativePath]),y=n.concat(_);a.children&&a.children.length>0&&($e(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${S}".`),qp(a.children,t,y,S,d)),!(a.path==null&&!a.index)&&t.push({path:S,score:jy(S,a.index),routesMeta:y})};return e.forEach((a,u)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))o(a,u);else for(let h of Kp(a.path))o(a,u,!0,h)}),t}function Kp(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let a=Kp(r.join("/")),u=[];return u.push(...a.map(d=>d===""?o:[o,d].join("/"))),i&&u.push(...a),u.map(d=>e.startsWith("/")&&d===""?"/":d)}function Py(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Fy(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Dy=/^:[\w-]+$/,Oy=3,Iy=2,Ny=1,By=10,Uy=-2,af=e=>e==="*";function jy(e,t){let n=e.split("/"),r=n.length;return n.some(af)&&(r+=Uy),t&&(r+=Iy),n.filter(i=>!af(i)).reduce((i,o)=>i+(Dy.test(o)?Oy:o===""?Ny:By),r)}function Fy(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function Vy(e,t,n=!1){let{routesMeta:r}=e,i={},o="/",a=[];for(let u=0;u<r.length;++u){let d=r[u],h=u===r.length-1,_=o==="/"?t:t.slice(o.length)||"/",S=Oa({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},_),y=d.route;if(!S&&h&&n&&!r[r.length-1].route.index&&(S=Oa({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},_)),!S)return null;Object.assign(i,S.params),a.push({params:i,pathname:xn([o,S.pathname]),pathnameBase:qy(xn([o,S.pathnameBase])),route:y}),S.pathnameBase!=="/"&&(o=xn([o,S.pathnameBase]))}return a}function Oa(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=zy(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((h,{paramName:_,isOptional:S},y)=>{if(_==="*"){let x=u[y]||"";a=o.slice(0,o.length-x.length).replace(/(.)\/+$/,"$1")}const v=u[y];return S&&!v?h[_]=void 0:h[_]=(v||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:a,pattern:e}}function zy(e,t=!1,n=!0){Ft(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function $y(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ft(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Pn(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}var Gy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Hy(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?kr(e):e,o;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?o=sf(n.substring(1),"/"):o=sf(n,t)):o=t,{pathname:o,search:Ky(r),hash:Yy(i)}}function sf(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Ys(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Wy(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function nc(e){let t=Wy(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function rc(e,t,n,r=!1){let i;typeof e=="string"?i=kr(e):(i={...e},$e(!i.pathname||!i.pathname.includes("?"),Ys("?","pathname","search",i)),$e(!i.pathname||!i.pathname.includes("#"),Ys("#","pathname","hash",i)),$e(!i.search||!i.search.includes("#"),Ys("#","search","hash",i)));let o=e===""||i.pathname==="",a=o?"/":i.pathname,u;if(a==null)u=n;else{let S=t.length-1;if(!r&&a.startsWith("..")){let y=a.split("/");for(;y[0]==="..";)y.shift(),S-=1;i.pathname=y.join("/")}u=S>=0?t[S]:"/"}let d=Hy(i,u),h=a&&a!=="/"&&a.endsWith("/"),_=(o||a===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(h||_)&&(d.pathname+="/"),d}var xn=e=>e.join("/").replace(/\/\/+/g,"/"),qy=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Ky=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Yy=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Qy=class{constructor(e,t,n,r=!1){this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Xy(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function Zy(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Yp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Qp(e,t){let n=e;if(typeof n!="string"||!Gy.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(Yp)try{let o=new URL(window.location.href),a=n.startsWith("//")?new URL(o.protocol+n):new URL(n),u=Pn(a.pathname,t);a.origin===o.origin&&u!=null?n=u+a.search+a.hash:i=!0}catch{Ft(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Xp=["POST","PUT","PATCH","DELETE"];new Set(Xp);var Jy=["GET",...Xp];new Set(Jy);var ci=W.createContext(null);ci.displayName="DataRouter";var cs=W.createContext(null);cs.displayName="DataRouterState";var e0=W.createContext(!1),Zp=W.createContext({isTransitioning:!1});Zp.displayName="ViewTransition";var t0=W.createContext(new Map);t0.displayName="Fetchers";var n0=W.createContext(null);n0.displayName="Await";var $t=W.createContext(null);$t.displayName="Navigation";var go=W.createContext(null);go.displayName="Location";var Zt=W.createContext({outlet:null,matches:[],isDataRoute:!1});Zt.displayName="Route";var ic=W.createContext(null);ic.displayName="RouteError";var Jp="REACT_ROUTER_ERROR",r0="REDIRECT",i0="ROUTE_ERROR_RESPONSE";function o0(e){if(e.startsWith(`${Jp}:${r0}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function a0(e){if(e.startsWith(`${Jp}:${i0}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new Qy(t.status,t.statusText,t.data)}catch{}}function s0(e,{relative:t}={}){$e(di(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=W.useContext($t),{hash:i,pathname:o,search:a}=vo(e,{relative:t}),u=o;return n!=="/"&&(u=o==="/"?n:xn([n,o])),r.createHref({pathname:u,search:a,hash:i})}function di(){return W.useContext(go)!=null}function ln(){return $e(di(),"useLocation() may be used only in the context of a <Router> component."),W.useContext(go).location}var e_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function t_(e){W.useContext($t).static||W.useLayoutEffect(e)}function oc(){let{isDataRoute:e}=W.useContext(Zt);return e?b0():l0()}function l0(){$e(di(),"useNavigate() may be used only in the context of a <Router> component.");let e=W.useContext(ci),{basename:t,navigator:n}=W.useContext($t),{matches:r}=W.useContext(Zt),{pathname:i}=ln(),o=JSON.stringify(nc(r)),a=W.useRef(!1);return t_(()=>{a.current=!0}),W.useCallback((d,h={})=>{if(Ft(a.current,e_),!a.current)return;if(typeof d=="number"){n.go(d);return}let _=rc(d,JSON.parse(o),i,h.relative==="path");e==null&&t!=="/"&&(_.pathname=_.pathname==="/"?t:xn([t,_.pathname])),(h.replace?n.replace:n.push)(_,h.state,h)},[t,n,o,i,e])}var u0=W.createContext(null);function c0(e){let t=W.useContext(Zt).outlet;return W.useMemo(()=>t&&W.createElement(u0.Provider,{value:e},t),[t,e])}function d0(){let{matches:e}=W.useContext(Zt),t=e[e.length-1];return t?t.params:{}}function vo(e,{relative:t}={}){let{matches:n}=W.useContext(Zt),{pathname:r}=ln(),i=JSON.stringify(nc(n));return W.useMemo(()=>rc(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function f0(e,t){return n_(e,t)}function n_(e,t,n,r,i){var E;$e(di(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=W.useContext($t),{matches:a}=W.useContext(Zt),u=a[a.length-1],d=u?u.params:{},h=u?u.pathname:"/",_=u?u.pathnameBase:"/",S=u&&u.route;{let T=S&&S.path||"";i_(h,!S||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let y=ln(),v;if(t){let T=typeof t=="string"?kr(t):t;$e(_==="/"||((E=T.pathname)==null?void 0:E.startsWith(_)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${T.pathname}" was given in the \`location\` prop.`),v=T}else v=y;let x=v.pathname||"/",w=x;if(_!=="/"){let T=_.replace(/^\//,"").split("/");w="/"+x.replace(/^\//,"").split("/").slice(T.length).join("/")}let N=Wp(e,{pathname:w});Ft(S||N!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Ft(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=g0(N&&N.map(T=>Object.assign({},T,{params:Object.assign({},d,T.params),pathname:xn([_,o.encodeLocation?o.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?_:xn([_,o.encodeLocation?o.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),a,n,r,i);return t&&A?W.createElement(go.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},A):A}function h0(){let e=w0(),t=Xy(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=W.createElement(W.Fragment,null,W.createElement("p",null," Hey developer "),W.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",W.createElement("code",{style:o},"ErrorBoundary")," or"," ",W.createElement("code",{style:o},"errorElement")," prop on your route.")),W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},t),n?W.createElement("pre",{style:i},n):null,a)}var p0=W.createElement(h0,null),r_=class extends W.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const n=a0(e.digest);n&&(e=n)}let t=e!==void 0?W.createElement(Zt.Provider,{value:this.props.routeContext},W.createElement(ic.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?W.createElement(_0,{error:e},t):t}};r_.contextType=e0;var Qs=new WeakMap;function _0({children:e,error:t}){let{basename:n}=W.useContext($t);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let r=o0(t.digest);if(r){let i=Qs.get(t);if(i)throw i;let o=Qp(r.location,n);if(Yp&&!Qs.get(t))if(o.isExternal||r.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const a=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:r.replace}));throw Qs.set(t,a),a}return W.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return e}function m0({routeContext:e,match:t,children:n}){let r=W.useContext(ci);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),W.createElement(Zt.Provider,{value:e},n)}function g0(e,t=[],n=null,r=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,a=n==null?void 0:n.errors;if(a!=null){let _=o.findIndex(S=>S.route.id&&(a==null?void 0:a[S.route.id])!==void 0);$e(_>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),o=o.slice(0,Math.min(o.length,_+1))}let u=!1,d=-1;if(n)for(let _=0;_<o.length;_++){let S=o[_];if((S.route.HydrateFallback||S.route.hydrateFallbackElement)&&(d=_),S.route.id){let{loaderData:y,errors:v}=n,x=S.route.loader&&!y.hasOwnProperty(S.route.id)&&(!v||v[S.route.id]===void 0);if(S.route.lazy||x){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let h=n&&r?(_,S)=>{var y,v;r(_,{location:n.location,params:((v=(y=n.matches)==null?void 0:y[0])==null?void 0:v.params)??{},unstable_pattern:Zy(n.matches),errorInfo:S})}:void 0;return o.reduceRight((_,S,y)=>{let v,x=!1,w=null,N=null;n&&(v=a&&S.route.id?a[S.route.id]:void 0,w=S.route.errorElement||p0,u&&(d<0&&y===0?(i_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,N=null):d===y&&(x=!0,N=S.route.hydrateFallbackElement||null)));let A=t.concat(o.slice(0,y+1)),E=()=>{let T;return v?T=w:x?T=N:S.route.Component?T=W.createElement(S.route.Component,null):S.route.element?T=S.route.element:T=_,W.createElement(m0,{match:S,routeContext:{outlet:_,matches:A,isDataRoute:n!=null},children:T})};return n&&(S.route.ErrorBoundary||S.route.errorElement||y===0)?W.createElement(r_,{location:n.location,revalidation:n.revalidation,component:w,error:v,children:E(),routeContext:{outlet:null,matches:A,isDataRoute:!0},onError:h}):E()},null)}function ac(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function v0(e){let t=W.useContext(ci);return $e(t,ac(e)),t}function y0(e){let t=W.useContext(cs);return $e(t,ac(e)),t}function S0(e){let t=W.useContext(Zt);return $e(t,ac(e)),t}function sc(e){let t=S0(e),n=t.matches[t.matches.length-1];return $e(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function E0(){return sc("useRouteId")}function w0(){var r;let e=W.useContext(ic),t=y0("useRouteError"),n=sc("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function b0(){let{router:e}=v0("useNavigate"),t=sc("useNavigate"),n=W.useRef(!1);return t_(()=>{n.current=!0}),W.useCallback(async(i,o={})=>{Ft(n.current,e_),n.current&&(typeof i=="number"?await e.navigate(i):await e.navigate(i,{fromRouteId:t,...o}))},[e,t])}var lf={};function i_(e,t,n){!t&&!lf[e]&&(lf[e]=!0,Ft(!1,n))}W.memo(A0);function A0({routes:e,future:t,state:n,onError:r}){return n_(e,void 0,n,r,t)}function k0({to:e,replace:t,state:n,relative:r}){$e(di(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=W.useContext($t);Ft(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=W.useContext(Zt),{pathname:a}=ln(),u=oc(),d=rc(e,nc(o),a,r==="path"),h=JSON.stringify(d);return W.useEffect(()=>{u(JSON.parse(h),{replace:t,state:n,relative:r})},[u,h,r,t,n]),null}function R0(e){return c0(e.context)}function At(e){$e(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function x0({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:o=!1,unstable_useTransitions:a}){$e(!di(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=e.replace(/^\/*/,"/"),d=W.useMemo(()=>({basename:u,navigator:i,static:o,unstable_useTransitions:a,future:{}}),[u,i,o,a]);typeof n=="string"&&(n=kr(n));let{pathname:h="/",search:_="",hash:S="",state:y=null,key:v="default"}=n,x=W.useMemo(()=>{let w=Pn(h,u);return w==null?null:{location:{pathname:w,search:_,hash:S,state:y,key:v},navigationType:r}},[u,h,_,S,y,v,r]);return Ft(x!=null,`<Router basename="${u}"> is not able to match the URL "${h}${_}${S}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:W.createElement($t.Provider,{value:d},W.createElement(go.Provider,{children:t,value:x}))}function C0({children:e,location:t}){return f0(Xl(e),t)}function Xl(e,t=[]){let n=[];return W.Children.forEach(e,(r,i)=>{if(!W.isValidElement(r))return;let o=[...t,i];if(r.type===W.Fragment){n.push.apply(n,Xl(r.props.children,o));return}$e(r.type===At,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),$e(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Xl(r.props.children,o)),n.push(a)}),n}var aa="get",sa="application/x-www-form-urlencoded";function ds(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function T0(e){return ds(e)&&e.tagName.toLowerCase()==="button"}function L0(e){return ds(e)&&e.tagName.toLowerCase()==="form"}function M0(e){return ds(e)&&e.tagName.toLowerCase()==="input"}function P0(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function D0(e,t){return e.button===0&&(!t||t==="_self")&&!P0(e)}function Zl(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function O0(e,t){let n=Zl(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(o=>{n.append(i,o)})}),n}var $o=null;function I0(){if($o===null)try{new FormData(document.createElement("form"),0),$o=!1}catch{$o=!0}return $o}var N0=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Xs(e){return e!=null&&!N0.has(e)?(Ft(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${sa}"`),null):e}function B0(e,t){let n,r,i,o,a;if(L0(e)){let u=e.getAttribute("action");r=u?Pn(u,t):null,n=e.getAttribute("method")||aa,i=Xs(e.getAttribute("enctype"))||sa,o=new FormData(e)}else if(T0(e)||M0(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||u.getAttribute("action");if(r=d?Pn(d,t):null,n=e.getAttribute("formmethod")||u.getAttribute("method")||aa,i=Xs(e.getAttribute("formenctype"))||Xs(u.getAttribute("enctype"))||sa,o=new FormData(u,e),!I0()){let{name:h,type:_,value:S}=e;if(_==="image"){let y=h?`${h}.`:"";o.append(`${y}x`,"0"),o.append(`${y}y`,"0")}else h&&o.append(h,S)}}else{if(ds(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=aa,r=null,i=sa,a=e}return o&&i==="text/plain"&&(a=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function lc(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function U0(e,t,n,r){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:t&&Pn(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function j0(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function F0(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function V0(e,t,n){let r=await Promise.all(e.map(async i=>{let o=t.routes[i.route.id];if(o){let a=await j0(o,n);return a.links?a.links():[]}return[]}));return H0(r.flat(1).filter(F0).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function uf(e,t,n,r,i,o){let a=(d,h)=>n[h]?d.route.id!==n[h].route.id:!0,u=(d,h)=>{var _;return n[h].pathname!==d.pathname||((_=n[h].route.path)==null?void 0:_.endsWith("*"))&&n[h].params["*"]!==d.params["*"]};return o==="assets"?t.filter((d,h)=>a(d,h)||u(d,h)):o==="data"?t.filter((d,h)=>{var S;let _=r.routes[d.route.id];if(!_||!_.hasLoader)return!1;if(a(d,h)||u(d,h))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((S=n[0])==null?void 0:S.params)||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function z0(e,t,{includeHydrateFallback:n}={}){return $0(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function $0(e){return[...new Set(e)]}function G0(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function H0(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let o=JSON.stringify(G0(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}function o_(){let e=W.useContext(ci);return lc(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function W0(){let e=W.useContext(cs);return lc(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var uc=W.createContext(void 0);uc.displayName="FrameworkContext";function a_(){let e=W.useContext(uc);return lc(e,"You must render this element inside a <HydratedRouter> element"),e}function q0(e,t){let n=W.useContext(uc),[r,i]=W.useState(!1),[o,a]=W.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:h,onMouseLeave:_,onTouchStart:S}=t,y=W.useRef(null);W.useEffect(()=>{if(e==="render"&&a(!0),e==="viewport"){let w=A=>{A.forEach(E=>{a(E.isIntersecting)})},N=new IntersectionObserver(w,{threshold:.5});return y.current&&N.observe(y.current),()=>{N.disconnect()}}},[e]),W.useEffect(()=>{if(r){let w=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(w)}}},[r]);let v=()=>{i(!0)},x=()=>{i(!1),a(!1)};return n?e!=="intent"?[o,y,{}]:[o,y,{onFocus:Ci(u,v),onBlur:Ci(d,x),onMouseEnter:Ci(h,v),onMouseLeave:Ci(_,x),onTouchStart:Ci(S,v)}]:[!1,y,{}]}function Ci(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function K0({page:e,...t}){let{router:n}=o_(),r=W.useMemo(()=>Wp(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?W.createElement(Q0,{page:e,matches:r,...t}):null}function Y0(e){let{manifest:t,routeModules:n}=a_(),[r,i]=W.useState([]);return W.useEffect(()=>{let o=!1;return V0(e,t,n).then(a=>{o||i(a)}),()=>{o=!0}},[e,t,n]),r}function Q0({page:e,matches:t,...n}){let r=ln(),{future:i,manifest:o,routeModules:a}=a_(),{basename:u}=o_(),{loaderData:d,matches:h}=W0(),_=W.useMemo(()=>uf(e,t,h,o,r,"data"),[e,t,h,o,r]),S=W.useMemo(()=>uf(e,t,h,o,r,"assets"),[e,t,h,o,r]),y=W.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let w=new Set,N=!1;if(t.forEach(E=>{var M;let T=o.routes[E.route.id];!T||!T.hasLoader||(!_.some(z=>z.route.id===E.route.id)&&E.route.id in d&&((M=a[E.route.id])!=null&&M.shouldRevalidate)||T.hasClientLoader?N=!0:w.add(E.route.id))}),w.size===0)return[];let A=U0(e,u,i.unstable_trailingSlashAwareDataRequests,"data");return N&&w.size>0&&A.searchParams.set("_routes",t.filter(E=>w.has(E.route.id)).map(E=>E.route.id).join(",")),[A.pathname+A.search]},[u,i.unstable_trailingSlashAwareDataRequests,d,r,o,_,t,e,a]),v=W.useMemo(()=>z0(S,o),[S,o]),x=Y0(S);return W.createElement(W.Fragment,null,y.map(w=>W.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),v.map(w=>W.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),x.map(({key:w,link:N})=>W.createElement("link",{key:w,nonce:n.nonce,...N,crossOrigin:N.crossOrigin??n.crossOrigin})))}function X0(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var Z0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Z0&&(window.__reactRouterVersion="7.13.0")}catch{}function J0({basename:e,children:t,unstable_useTransitions:n,window:r}){let i=W.useRef();i.current==null&&(i.current=xy({window:r,v5Compat:!0}));let o=i.current,[a,u]=W.useState({action:o.action,location:o.location}),d=W.useCallback(h=>{n===!1?u(h):W.startTransition(()=>u(h))},[n]);return W.useLayoutEffect(()=>o.listen(d),[o,d]),W.createElement(x0,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,unstable_useTransitions:n})}var s_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Er=W.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:a,state:u,target:d,to:h,preventScrollReset:_,viewTransition:S,unstable_defaultShouldRevalidate:y,...v},x){let{basename:w,unstable_useTransitions:N}=W.useContext($t),A=typeof h=="string"&&s_.test(h),E=Qp(h,w);h=E.to;let T=s0(h,{relative:i}),[M,z,H]=q0(r,v),U=r1(h,{replace:a,state:u,target:d,preventScrollReset:_,relative:i,viewTransition:S,unstable_defaultShouldRevalidate:y,unstable_useTransitions:N});function R(k){t&&t(k),k.defaultPrevented||U(k)}let C=W.createElement("a",{...v,...H,href:E.absoluteURL||T,onClick:E.isExternal||o?t:R,ref:X0(x,z),target:d,"data-discover":!A&&n==="render"?"true":void 0});return M&&!A?W.createElement(W.Fragment,null,C,W.createElement(K0,{page:T})):C});Er.displayName="Link";var e1=W.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:a,viewTransition:u,children:d,...h},_){let S=vo(a,{relative:h.relative}),y=ln(),v=W.useContext(cs),{navigator:x,basename:w}=W.useContext($t),N=v!=null&&u1(S)&&u===!0,A=x.encodeLocation?x.encodeLocation(S).pathname:S.pathname,E=y.pathname,T=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(E=E.toLowerCase(),T=T?T.toLowerCase():null,A=A.toLowerCase()),T&&w&&(T=Pn(T,w)||T);const M=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let z=E===A||!i&&E.startsWith(A)&&E.charAt(M)==="/",H=T!=null&&(T===A||!i&&T.startsWith(A)&&T.charAt(A.length)==="/"),U={isActive:z,isPending:H,isTransitioning:N},R=z?t:void 0,C;typeof r=="function"?C=r(U):C=[r,z?"active":null,H?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let k=typeof o=="function"?o(U):o;return W.createElement(Er,{...h,"aria-current":R,className:C,ref:_,style:k,to:a,viewTransition:u},typeof d=="function"?d(U):d)});e1.displayName="NavLink";var t1=W.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:o,method:a=aa,action:u,onSubmit:d,relative:h,preventScrollReset:_,viewTransition:S,unstable_defaultShouldRevalidate:y,...v},x)=>{let{unstable_useTransitions:w}=W.useContext($t),N=s1(),A=l1(u,{relative:h}),E=a.toLowerCase()==="get"?"get":"post",T=typeof u=="string"&&s_.test(u),M=z=>{if(d&&d(z),z.defaultPrevented)return;z.preventDefault();let H=z.nativeEvent.submitter,U=(H==null?void 0:H.getAttribute("formmethod"))||a,R=()=>N(H||z.currentTarget,{fetcherKey:t,method:U,navigate:n,replace:i,state:o,relative:h,preventScrollReset:_,viewTransition:S,unstable_defaultShouldRevalidate:y});w&&n!==!1?W.startTransition(()=>R()):R()};return W.createElement("form",{ref:x,method:E,action:A,onSubmit:r?d:M,...v,"data-discover":!T&&e==="render"?"true":void 0})});t1.displayName="Form";function n1(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function l_(e){let t=W.useContext(ci);return $e(t,n1(e)),t}function r1(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:a,unstable_defaultShouldRevalidate:u,unstable_useTransitions:d}={}){let h=oc(),_=ln(),S=vo(e,{relative:o});return W.useCallback(y=>{if(D0(y,t)){y.preventDefault();let v=n!==void 0?n:so(_)===so(S),x=()=>h(e,{replace:v,state:r,preventScrollReset:i,relative:o,viewTransition:a,unstable_defaultShouldRevalidate:u});d?W.startTransition(()=>x()):x()}},[_,h,S,n,r,t,e,i,o,a,u,d])}function i1(e){Ft(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=W.useRef(Zl(e)),n=W.useRef(!1),r=ln(),i=W.useMemo(()=>O0(r.search,n.current?null:t.current),[r.search]),o=oc(),a=W.useCallback((u,d)=>{const h=Zl(typeof u=="function"?u(new URLSearchParams(i)):u);n.current=!0,o("?"+h,d)},[o,i]);return[i,a]}var o1=0,a1=()=>`__${String(++o1)}__`;function s1(){let{router:e}=l_("useSubmit"),{basename:t}=W.useContext($t),n=E0(),r=e.fetch,i=e.navigate;return W.useCallback(async(o,a={})=>{let{action:u,method:d,encType:h,formData:_,body:S}=B0(o,t);if(a.navigate===!1){let y=a.fetcherKey||a1();await r(y,n,a.action||u,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:_,body:S,formMethod:a.method||d,formEncType:a.encType||h,flushSync:a.flushSync})}else await i(a.action||u,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:_,body:S,formMethod:a.method||d,formEncType:a.encType||h,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[r,i,t,n])}function l1(e,{relative:t}={}){let{basename:n}=W.useContext($t),r=W.useContext(Zt);$e(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...vo(e||".",{relative:t})},a=ln();if(e==null){o.search=a.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(_=>_==="")){u.delete("index"),d.filter(S=>S).forEach(S=>u.append("index",S));let _=u.toString();o.search=_?`?${_}`:""}}return(!e||e===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:xn([n,o.pathname])),so(o)}function u1(e,{relative:t}={}){let n=W.useContext(Zp);$e(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=l_("useViewTransitionState"),i=vo(e,{relative:t});if(!n.isTransitioning)return!1;let o=Pn(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=Pn(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Oa(i.pathname,a)!=null||Oa(i.pathname,o)!=null}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var c1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Rr=(e,t)=>{const n=W.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:u="",children:d,...h},_)=>W.createElement("svg",{ref:_,...c1,width:i,height:i,stroke:r,strokeWidth:a?Number(o)*24/Number(i):o,className:["lucide",`lucide-${d1(e)}`,u].join(" "),...h},[...t.map(([S,y])=>W.createElement(S,y)),...Array.isArray(d)?d:[d]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=Rr("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1=Rr("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p1=Rr("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=Rr("Construction",[["rect",{x:"2",y:"6",width:"20",height:"8",rx:"1",key:"1estib"}],["path",{d:"M17 14v7",key:"7m2elx"}],["path",{d:"M7 14v7",key:"1cm7wv"}],["path",{d:"M17 3v3",key:"1v4jwn"}],["path",{d:"M7 3v3",key:"7o6guu"}],["path",{d:"M10 14 2.3 6.3",key:"1023jk"}],["path",{d:"m14 6 7.7 7.7",key:"1s8pl2"}],["path",{d:"m8 6 8 8",key:"hl96qh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=Rr("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=Rr("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1=Rr("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),y1=[{name:"Systems",path:"/systems",icon:g1}];function S1(){const e=ln(),[t,n]=W.useState(!1);return F.jsxs("div",{className:"flex h-screen bg-base-100",children:[F.jsxs("aside",{className:`${t?"w-20":"w-64"} bg-base-200 border-r border-base-300 flex flex-col transition-all duration-300`,children:[F.jsxs("div",{className:`border-b border-base-300 flex items-center ${t?"justify-center p-4":"justify-between p-4"}`,children:[!t&&F.jsx("h1",{className:"text-2xl font-bold",children:F.jsx("img",{src:"./logo_dts.svg",alt:"UCLA Digital Technology Solutions logo",className:"h-16"})}),F.jsx("button",{onClick:()=>n(!t),className:"btn btn-ghost btn-sm btn-circle",title:t?"Expand sidebar":"Collapse sidebar",children:t?F.jsx(p1,{size:18}):F.jsx(h1,{size:18})})]}),F.jsx("nav",{className:`flex-1 overflow-y-auto ${t?"px-2 py-4":"p-4"}`,children:F.jsx("ul",{className:"nav-menu space-y-1",children:y1.map(r=>{const i=r.icon,o=e.pathname===r.path||e.pathname.startsWith(r.path+"/");return F.jsx("li",{children:F.jsxs(Er,{to:r.path,className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors hover:bg-base-300 ${o?"bg-primary text-primary-content":""} ${t?"tooltip tooltip-right justify-center":""}`,"data-tip":t?r.name:void 0,children:[F.jsx(i,{size:20,className:"flex-shrink-0"}),!t&&F.jsx("span",{children:r.name})]})},r.path)})})}),F.jsx("div",{className:`border-t border-base-300 ${t?"p-3":"p-4"}`,children:F.jsxs("div",{className:`flex items-center ${t?"justify-center":"gap-3"}`,children:[F.jsx("div",{className:`avatar placeholder ${t?"tooltip tooltip-right":""}`,"data-tip":t?"KENNETH VU":void 0,children:F.jsx("div",{className:"bg-neutral text-neutral-content rounded-full w-10",children:F.jsx("span",{className:"text-xs",children:"KV"})})}),!t&&F.jsxs("div",{className:"flex-1",children:[F.jsx("div",{className:"text-sm font-medium",children:"KENNETH VU"}),F.jsx("div",{className:"text-xs text-base-content/60",children:"Admin"})]})]})})]}),F.jsxs("main",{className:"flex-1 overflow-auto flex flex-col",children:[F.jsx("div",{className:"border-b border-base-300 px-6 py-3 flex items-center justify-end"}),F.jsx("div",{className:"flex-1 overflow-auto",children:F.jsx(R0,{})})]})]})}var Jl=function(e,t){return Jl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Jl(e,t)};function un(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Jl(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var lo=function(){return lo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},lo.apply(this,arguments)};function E1(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function w1(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function u(_){try{h(r.next(_))}catch(S){a(S)}}function d(_){try{h(r.throw(_))}catch(S){a(S)}}function h(_){_.done?o(_.value):i(_.value).then(u,d)}h((r=r.apply(e,[])).next())})}function u_(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(h){return function(_){return d([h,_])}}function d(h){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,h[0]&&(n=0)),n;)try{if(r=1,i&&(o=h[0]&2?i.return:h[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,h[1])).done)return o;switch(i=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,i=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){n.label=h[1];break}if(h[0]===6&&n.label<o[1]){n.label=o[1],o=h;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(h);break}o[2]&&n.ops.pop(),n.trys.pop();continue}h=t.call(e,n)}catch(_){h=[6,_],i=0}finally{r=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function oi(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ia(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o}function Na(e,t,n){if(arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}function Yr(e){return this instanceof Yr?(this.v=e,this):new Yr(e)}function b1(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(v){return function(x){return Promise.resolve(x).then(v,S)}}function u(v,x){r[v]&&(i[v]=function(w){return new Promise(function(N,A){o.push([v,w,N,A])>1||d(v,w)})},x&&(i[v]=x(i[v])))}function d(v,x){try{h(r[v](x))}catch(w){y(o[0][3],w)}}function h(v){v.value instanceof Yr?Promise.resolve(v.value.v).then(_,S):y(o[0][2],v)}function _(v){d("next",v)}function S(v){d("throw",v)}function y(v,x){v(x),o.shift(),o.length&&d(o[0][0],o[0][1])}}function A1(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof oi=="function"?oi(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(a){return new Promise(function(u,d){a=e[o](a),i(u,d,a.done,a.value)})}}function i(o,a,u,d){Promise.resolve(d).then(function(h){o({value:h,done:u})},a)}}function et(e){return typeof e=="function"}function cc(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Zs=cc(function(e){return function(t){e(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(n,r){return r+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function Ba(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var fi=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,r,i,o;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var u=oi(a),d=u.next();!d.done;d=u.next()){var h=d.value;h.remove(this)}}catch(w){t={error:w}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}else a.remove(this);var _=this.initialTeardown;if(et(_))try{_()}catch(w){o=w instanceof Zs?w.errors:[w]}var S=this._finalizers;if(S){this._finalizers=null;try{for(var y=oi(S),v=y.next();!v.done;v=y.next()){var x=v.value;try{cf(x)}catch(w){o=o??[],w instanceof Zs?o=Na(Na([],Ia(o)),Ia(w.errors)):o.push(w)}}}catch(w){r={error:w}}finally{try{v&&!v.done&&(i=y.return)&&i.call(y)}finally{if(r)throw r.error}}}if(o)throw new Zs(o)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)cf(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&Ba(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&Ba(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),c_=fi.EMPTY;function d_(e){return e instanceof fi||e&&"closed"in e&&et(e.remove)&&et(e.add)&&et(e.unsubscribe)}function cf(e){et(e)?e():e.unsubscribe()}var k1={Promise:void 0},R1={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,Na([e,t],Ia(n)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function f_(e){R1.setTimeout(function(){throw e})}function df(){}function la(e){e()}var fs=function(e){un(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,d_(n)&&n.add(r)):r.destination=T1,r}return t.create=function(n,r,i){return new eu(n,r,i)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(fi),x1=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(r){Go(r)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(r){Go(r)}else Go(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){Go(n)}},e}(),eu=function(e){un(t,e);function t(n,r,i){var o=e.call(this)||this,a;return et(n)||!n?a={next:n??void 0,error:r??void 0,complete:i??void 0}:a=n,o.destination=new x1(a),o}return t}(fs);function Go(e){f_(e)}function C1(e){throw e}var T1={closed:!0,next:df,error:C1,complete:df},dc=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function fc(e){return e}function L1(e){return e.length===0?fc:e.length===1?e[0]:function(t){return e.reduce(function(n,r){return r(n)},t)}}var ut=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var i=this,o=P1(t)?t:new eu(t,n,r);return la(function(){var a=i,u=a.operator,d=a.source;o.add(u?u.call(o,d):d?i._subscribe(o):i._trySubscribe(o))}),o},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=ff(n),new n(function(i,o){var a=new eu({next:function(u){try{t(u)}catch(d){o(d),a.unsubscribe()}},error:o,complete:i});r.subscribe(a)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[dc]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return L1(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=ff(t),new t(function(r,i){var o;n.subscribe(function(a){return o=a},function(a){return i(a)},function(){return r(o)})})},e.create=function(t){return new e(t)},e}();function ff(e){var t;return(t=e??k1.Promise)!==null&&t!==void 0?t:Promise}function M1(e){return e&&et(e.next)&&et(e.error)&&et(e.complete)}function P1(e){return e&&e instanceof fs||M1(e)&&d_(e)}function D1(e){return et(e==null?void 0:e.lift)}function In(e){return function(t){if(D1(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Xt(e,t,n,r,i){return new O1(e,t,n,r,i)}var O1=function(e){un(t,e);function t(n,r,i,o,a,u){var d=e.call(this,n)||this;return d.onFinalize=a,d.shouldUnsubscribe=u,d._next=r?function(h){try{r(h)}catch(_){n.error(_)}}:e.prototype._next,d._error=o?function(h){try{o(h)}catch(_){n.error(_)}finally{this.unsubscribe()}}:e.prototype._error,d._complete=i?function(){try{i()}catch(h){n.error(h)}finally{this.unsubscribe()}}:e.prototype._complete,d}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t}(fs),I1=cc(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),wr=function(e){un(t,e);function t(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype.lift=function(n){var r=new tu(this,this);return r.operator=n,r},t.prototype._throwIfClosed=function(){if(this.closed)throw new I1},t.prototype.next=function(n){var r=this;la(function(){var i,o;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var a=oi(r.currentObservers),u=a.next();!u.done;u=a.next()){var d=u.value;d.next(n)}}catch(h){i={error:h}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}}})},t.prototype.error=function(n){var r=this;la(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},t.prototype.complete=function(){var n=this;la(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},t.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},t.prototype._innerSubscribe=function(n){var r=this,i=this,o=i.hasError,a=i.isStopped,u=i.observers;return o||a?c_:(this.currentObservers=null,u.push(n),new fi(function(){r.currentObservers=null,Ba(u,n)}))},t.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,o=r.thrownError,a=r.isStopped;i?n.error(o):a&&n.complete()},t.prototype.asObservable=function(){var n=new ut;return n.source=this,n},t.create=function(n,r){return new tu(n,r)},t}(ut),tu=function(e){un(t,e);function t(n,r){var i=e.call(this)||this;return i.destination=n,i.source=r,i}return t.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},t.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},t.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},t.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:c_},t}(wr),xr=function(e){un(t,e);function t(n){var r=e.call(this)||this;return r._value=n,r}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(n){var r=e.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},t.prototype.getValue=function(){var n=this,r=n.hasError,i=n.thrownError,o=n._value;if(r)throw i;return this._throwIfClosed(),o},t.prototype.next=function(n){e.prototype.next.call(this,this._value=n)},t}(wr),hc={now:function(){return(hc.delegate||Date).now()},delegate:void 0},Js=function(e){un(t,e);function t(n,r,i){n===void 0&&(n=1/0),r===void 0&&(r=1/0),i===void 0&&(i=hc);var o=e.call(this)||this;return o._bufferSize=n,o._windowTime=r,o._timestampProvider=i,o._buffer=[],o._infiniteTimeWindow=!0,o._infiniteTimeWindow=r===1/0,o._bufferSize=Math.max(1,n),o._windowTime=Math.max(1,r),o}return t.prototype.next=function(n){var r=this,i=r.isStopped,o=r._buffer,a=r._infiniteTimeWindow,u=r._timestampProvider,d=r._windowTime;i||(o.push(n),!a&&o.push(u.now()+d)),this._trimBuffer(),e.prototype.next.call(this,n)},t.prototype._subscribe=function(n){this._throwIfClosed(),this._trimBuffer();for(var r=this._innerSubscribe(n),i=this,o=i._infiniteTimeWindow,a=i._buffer,u=a.slice(),d=0;d<u.length&&!n.closed;d+=o?1:2)n.next(u[d]);return this._checkFinalizedStatuses(n),r},t.prototype._trimBuffer=function(){var n=this,r=n._bufferSize,i=n._timestampProvider,o=n._buffer,a=n._infiniteTimeWindow,u=(a?1:2)*r;if(r<1/0&&u<o.length&&o.splice(0,o.length-u),!a){for(var d=i.now(),h=0,_=1;_<o.length&&o[_]<=d;_+=2)h=_;h&&o.splice(0,h+1)}},t}(wr),N1=function(e){un(t,e);function t(n,r){return e.call(this)||this}return t.prototype.schedule=function(n,r){return this},t}(fi),hf={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,Na([e,t],Ia(n)))},clearInterval:function(e){return clearInterval(e)},delegate:void 0},B1=function(e){un(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return t.prototype.schedule=function(n,r){var i;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var o=this.id,a=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(a,o,r)),this.pending=!0,this.delay=r,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(a,this.id,r),this},t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),hf.setInterval(n.flush.bind(n,this),i)},t.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;r!=null&&hf.clearInterval(r)},t.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(n,r){var i=!1,o;try{this.work(n)}catch(a){i=!0,o=a||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o},t.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,i=n.scheduler,o=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Ba(o,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(N1),pf=function(){function e(t,n){n===void 0&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(t,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,t).schedule(r,n)},e.now=hc.now,e}(),U1=function(e){un(t,e);function t(n,r){r===void 0&&(r=pf.now);var i=e.call(this,n,r)||this;return i.actions=[],i._active=!1,i}return t.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,i){for(;n=r.shift();)n.unsubscribe();throw i}},t}(pf),h_=new U1(B1),j1=h_,F1=new ut(function(e){return e.complete()});function V1(e){return e&&et(e.schedule)}var p_=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function __(e){return et(e==null?void 0:e.then)}function m_(e){return et(e[dc])}function g_(e){return Symbol.asyncIterator&&et(e==null?void 0:e[Symbol.asyncIterator])}function v_(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function z1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var y_=z1();function S_(e){return et(e==null?void 0:e[y_])}function E_(e){return b1(this,arguments,function(){var t,n,r,i;return u_(this,function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,Yr(t.read())];case 3:return n=o.sent(),r=n.value,i=n.done,i?[4,Yr(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,Yr(r)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function w_(e){return et(e==null?void 0:e.getReader)}function Nn(e){if(e instanceof ut)return e;if(e!=null){if(m_(e))return $1(e);if(p_(e))return G1(e);if(__(e))return H1(e);if(g_(e))return b_(e);if(S_(e))return W1(e);if(w_(e))return q1(e)}throw v_(e)}function $1(e){return new ut(function(t){var n=e[dc]();if(et(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function G1(e){return new ut(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function H1(e){return new ut(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,f_)})}function W1(e){return new ut(function(t){var n,r;try{for(var i=oi(e),o=i.next();!o.done;o=i.next()){var a=o.value;if(t.next(a),t.closed)return}}catch(u){n={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()})}function b_(e){return new ut(function(t){K1(e,t).catch(function(n){return t.error(n)})})}function q1(e){return b_(E_(e))}function K1(e,t){var n,r,i,o;return w1(this,void 0,void 0,function(){var a,u;return u_(this,function(d){switch(d.label){case 0:d.trys.push([0,5,6,11]),n=A1(e),d.label=1;case 1:return[4,n.next()];case 2:if(r=d.sent(),!!r.done)return[3,4];if(a=r.value,t.next(a),t.closed)return[2];d.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return u=d.sent(),i={error:u},[3,11];case 6:return d.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:d.sent(),d.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function _r(e,t,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function A_(e,t){return t===void 0&&(t=0),In(function(n,r){n.subscribe(Xt(r,function(i){return _r(r,e,function(){return r.next(i)},t)},function(){return _r(r,e,function(){return r.complete()},t)},function(i){return _r(r,e,function(){return r.error(i)},t)}))})}function k_(e,t){return t===void 0&&(t=0),In(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function Y1(e,t){return Nn(e).pipe(k_(t),A_(t))}function Q1(e,t){return Nn(e).pipe(k_(t),A_(t))}function X1(e,t){return new ut(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function Z1(e,t){return new ut(function(n){var r;return _r(n,t,function(){r=e[y_](),_r(n,t,function(){var i,o,a;try{i=r.next(),o=i.value,a=i.done}catch(u){n.error(u);return}a?n.complete():n.next(o)},0,!0)}),function(){return et(r==null?void 0:r.return)&&r.return()}})}function R_(e,t){if(!e)throw new Error("Iterable cannot be null");return new ut(function(n){_r(n,t,function(){var r=e[Symbol.asyncIterator]();_r(n,t,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function J1(e,t){return R_(E_(e),t)}function eS(e,t){if(e!=null){if(m_(e))return Y1(e,t);if(p_(e))return X1(e,t);if(__(e))return Q1(e,t);if(g_(e))return R_(e,t);if(S_(e))return Z1(e,t);if(w_(e))return J1(e,t)}throw v_(e)}function tS(e,t){return t?eS(e,t):Nn(e)}function x_(e,t){var n=et(e)?e:function(){return e},r=function(i){return i.error(n())};return new ut(r)}var nS=cc(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});function rS(e,t){return new Promise(function(n,r){var i=!1,o;e.subscribe({next:function(a){o=a,i=!0},error:r,complete:function(){i?n(o):r(new nS)}})})}function iS(e){return e instanceof Date&&!isNaN(e)}function yo(e,t){return In(function(n,r){var i=0;n.subscribe(Xt(r,function(o){r.next(e.call(t,o,i++))}))})}function oS(e,t,n,r,i,o,a,u){var d=[],h=0,_=0,S=!1,y=function(){S&&!d.length&&!h&&t.complete()},v=function(w){return h<r?x(w):d.push(w)},x=function(w){h++;var N=!1;Nn(n(w,_++)).subscribe(Xt(t,function(A){t.next(A)},function(){N=!0},void 0,function(){if(N)try{h--;for(var A=function(){var E=d.shift();a||x(E)};d.length&&h<r;)A();y()}catch(E){t.error(E)}}))};return e.subscribe(Xt(t,v,function(){S=!0,y()})),function(){}}function C_(e,t,n){return n===void 0&&(n=1/0),et(t)?C_(function(r,i){return yo(function(o,a){return t(r,o,i,a)})(Nn(e(r,i)))},n):(typeof t=="number"&&(n=t),In(function(r,i){return oS(r,i,e,n)}))}function pc(e,t,n){e===void 0&&(e=0),n===void 0&&(n=j1);var r=-1;return t!=null&&(V1(t)?n=t:r=t),new ut(function(i){var o=iS(e)?+e-n.now():e;o<0&&(o=0);var a=0;return n.schedule(function(){i.closed||(i.next(a++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function aS(e,t){return In(function(n,r){var i=0;n.subscribe(Xt(r,function(o){return e.call(t,o,i++)&&r.next(o)}))})}function T_(e){return e<=0?function(){return F1}:In(function(t,n){var r=0;t.subscribe(Xt(n,function(i){++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function sS(e){return yo(function(){return e})}function lS(e,t){return C_(function(n,r){return Nn(e(n,r)).pipe(T_(1),sS(n))})}function uS(e,t){t===void 0&&(t=h_);var n=pc(e,t);return lS(function(){return n})}function cS(e,t){return t===void 0&&(t=fc),e=e??dS,In(function(n,r){var i,o=!0;n.subscribe(Xt(r,function(a){var u=t(a);(o||!e(i,u))&&(o=!1,i=u,r.next(a))}))})}function dS(e,t){return e===t}function fS(e){e===void 0&&(e=1/0);var t;e&&typeof e=="object"?t=e:t={count:e};var n=t.count,r=n===void 0?1/0:n,i=t.delay,o=t.resetOnSuccess,a=o===void 0?!1:o;return r<=0?fc:In(function(u,d){var h=0,_,S=function(){var y=!1;_=u.subscribe(Xt(d,function(v){a&&(h=0),d.next(v)},void 0,function(v){if(h++<r){var x=function(){_?(_.unsubscribe(),_=null,S()):y=!0};if(i!=null){var w=typeof i=="number"?pc(i):Nn(i(v,h)),N=Xt(d,function(){N.unsubscribe(),x()},function(){d.complete()});w.subscribe(N)}else x()}else d.error(v)})),y&&(_.unsubscribe(),_=null,S())};S()})}function _f(e,t){return In(function(n,r){var i=null,o=0,a=!1,u=function(){return a&&!i&&r.complete()};n.subscribe(Xt(r,function(d){i==null||i.unsubscribe();var h=0,_=o++;Nn(e(d,_)).subscribe(i=Xt(r,function(S){return r.next(t?t(d,S,_,h++):S)},function(){i=null,u()}))},function(){a=!0,u()}))})}function _c(e,t){t===void 0&&(t={});var n=t.selector,r=E1(t,["selector"]);return new ut(function(i){var o=new AbortController,a=o.signal,u=!0,d=r.signal;if(d)if(d.aborted)o.abort();else{var h=function(){a.aborted||o.abort()};d.addEventListener("abort",h),i.add(function(){return d.removeEventListener("abort",h)})}var _=lo(lo({},r),{signal:a}),S=function(y){u=!1,i.error(y)};return fetch(e,_).then(function(y){n?Nn(n(y)).subscribe(Xt(i,void 0,function(){u=!1,i.complete()},S)):(u=!1,i.next(y),i.complete())}).catch(S),function(){u&&o.abort()}})}const En=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],mf=[255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];function Ho(e){if(e>=mf.length)throw new Error("Unable to parse base64 string.");const t=mf[e];if(t===255)throw new Error("Unable to parse base64 string.");return t}function L_(e){let t="",n,r=e.length;for(n=2;n<r;n+=3)t+=En[e[n-2]>>2],t+=En[(e[n-2]&3)<<4|e[n-1]>>4],t+=En[(e[n-1]&15)<<2|e[n]>>6],t+=En[e[n]&63];return n===r+1&&(t+=En[e[n-2]>>2],t+=En[(e[n-2]&3)<<4],t+="=="),n===r&&(t+=En[e[n-2]>>2],t+=En[(e[n-2]&3)<<4|e[n-1]>>4],t+=En[(e[n-1]&15)<<2],t+="="),t}function hS(e){if(e.length%4!==0)throw new Error("Unable to parse base64 string.");const t=e.indexOf("=");if(t!==-1&&t<e.length-2)throw new Error("Unable to parse base64 string.");let n=e.endsWith("==")?2:e.endsWith("=")?1:0,r=e.length,i=new Uint8Array(3*(r/4)),o;for(let a=0,u=0;a<r;a+=4,u+=3)o=Ho(e.charCodeAt(a))<<18|Ho(e.charCodeAt(a+1))<<12|Ho(e.charCodeAt(a+2))<<6|Ho(e.charCodeAt(a+3)),i[u]=o>>16,i[u+1]=o>>8&255,i[u+2]=o&255;return i.subarray(0,i.length-n)}function pS(e,t=new TextEncoder){return L_(t.encode(e))}var nu={exports:{}},_S=nu.exports,gf;function mS(){return gf||(gf=1,function(e){(function(t,n){var r={};n(r);var i=r.default;for(var o in r)i[o]=r[o];e.exports=i})(_S,function(t){t.__esModule=!0,t.digestLength=32,t.blockSize=64;var n=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function r(y,v,x,w,N){for(var A,E,T,M,z,H,U,R,C,k,P,Y,J;N>=64;){for(A=v[0],E=v[1],T=v[2],M=v[3],z=v[4],H=v[5],U=v[6],R=v[7],k=0;k<16;k++)P=w+k*4,y[k]=(x[P]&255)<<24|(x[P+1]&255)<<16|(x[P+2]&255)<<8|x[P+3]&255;for(k=16;k<64;k++)C=y[k-2],Y=(C>>>17|C<<15)^(C>>>19|C<<13)^C>>>10,C=y[k-15],J=(C>>>7|C<<25)^(C>>>18|C<<14)^C>>>3,y[k]=(Y+y[k-7]|0)+(J+y[k-16]|0);for(k=0;k<64;k++)Y=(((z>>>6|z<<26)^(z>>>11|z<<21)^(z>>>25|z<<7))+(z&H^~z&U)|0)+(R+(n[k]+y[k]|0)|0)|0,J=((A>>>2|A<<30)^(A>>>13|A<<19)^(A>>>22|A<<10))+(A&E^A&T^E&T)|0,R=U,U=H,H=z,z=M+Y|0,M=T,T=E,E=A,A=Y+J|0;v[0]+=A,v[1]+=E,v[2]+=T,v[3]+=M,v[4]+=z,v[5]+=H,v[6]+=U,v[7]+=R,w+=64,N-=64}return w}var i=function(){function y(){this.digestLength=t.digestLength,this.blockSize=t.blockSize,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return y.prototype.reset=function(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},y.prototype.clean=function(){for(var v=0;v<this.buffer.length;v++)this.buffer[v]=0;for(var v=0;v<this.temp.length;v++)this.temp[v]=0;this.reset()},y.prototype.update=function(v,x){if(x===void 0&&(x=v.length),this.finished)throw new Error("SHA256: can't update because hash was finished.");var w=0;if(this.bytesHashed+=x,this.bufferLength>0){for(;this.bufferLength<64&&x>0;)this.buffer[this.bufferLength++]=v[w++],x--;this.bufferLength===64&&(r(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(x>=64&&(w=r(this.temp,this.state,v,w,x),x%=64);x>0;)this.buffer[this.bufferLength++]=v[w++],x--;return this},y.prototype.finish=function(v){if(!this.finished){var x=this.bytesHashed,w=this.bufferLength,N=x/536870912|0,A=x<<3,E=x%64<56?64:128;this.buffer[w]=128;for(var T=w+1;T<E-8;T++)this.buffer[T]=0;this.buffer[E-8]=N>>>24&255,this.buffer[E-7]=N>>>16&255,this.buffer[E-6]=N>>>8&255,this.buffer[E-5]=N>>>0&255,this.buffer[E-4]=A>>>24&255,this.buffer[E-3]=A>>>16&255,this.buffer[E-2]=A>>>8&255,this.buffer[E-1]=A>>>0&255,r(this.temp,this.state,this.buffer,0,E),this.finished=!0}for(var T=0;T<8;T++)v[T*4+0]=this.state[T]>>>24&255,v[T*4+1]=this.state[T]>>>16&255,v[T*4+2]=this.state[T]>>>8&255,v[T*4+3]=this.state[T]>>>0&255;return this},y.prototype.digest=function(){var v=new Uint8Array(this.digestLength);return this.finish(v),v},y.prototype._saveState=function(v){for(var x=0;x<this.state.length;x++)v[x]=this.state[x]},y.prototype._restoreState=function(v,x){for(var w=0;w<this.state.length;w++)this.state[w]=v[w];this.bytesHashed=x,this.finished=!1,this.bufferLength=0},y}();t.Hash=i;var o=function(){function y(v){this.inner=new i,this.outer=new i,this.blockSize=this.inner.blockSize,this.digestLength=this.inner.digestLength;var x=new Uint8Array(this.blockSize);if(v.length>this.blockSize)new i().update(v).finish(x).clean();else for(var w=0;w<v.length;w++)x[w]=v[w];for(var w=0;w<x.length;w++)x[w]^=54;this.inner.update(x);for(var w=0;w<x.length;w++)x[w]^=106;this.outer.update(x),this.istate=new Uint32Array(8),this.ostate=new Uint32Array(8),this.inner._saveState(this.istate),this.outer._saveState(this.ostate);for(var w=0;w<x.length;w++)x[w]=0}return y.prototype.reset=function(){return this.inner._restoreState(this.istate,this.inner.blockSize),this.outer._restoreState(this.ostate,this.outer.blockSize),this},y.prototype.clean=function(){for(var v=0;v<this.istate.length;v++)this.ostate[v]=this.istate[v]=0;this.inner.clean(),this.outer.clean()},y.prototype.update=function(v){return this.inner.update(v),this},y.prototype.finish=function(v){return this.outer.finished?this.outer.finish(v):(this.inner.finish(v),this.outer.update(v,this.digestLength).finish(v)),this},y.prototype.digest=function(){var v=new Uint8Array(this.digestLength);return this.finish(v),v},y}();t.HMAC=o;function a(y){var v=new i().update(y),x=v.digest();return v.clean(),x}t.hash=a,t.default=a;function u(y,v){var x=new o(y).update(v),w=x.digest();return x.clean(),w}t.hmac=u;function d(y,v,x,w){var N=w[0];if(N===0)throw new Error("hkdf: cannot expand more");v.reset(),N>1&&v.update(y),x&&v.update(x),v.update(w),v.finish(y),w[0]++}var h=new Uint8Array(t.digestLength);function _(y,v,x,w){v===void 0&&(v=h),w===void 0&&(w=32);for(var N=new Uint8Array([1]),A=u(v,y),E=new o(A),T=new Uint8Array(E.digestLength),M=T.length,z=new Uint8Array(w),H=0;H<w;H++)M===T.length&&(d(T,E,x,N),M=0),z[H]=T[M++];return E.clean(),T.fill(0),N.fill(0),z}t.hkdf=_;function S(y,v,x,w){for(var N=new o(y),A=N.digestLength,E=new Uint8Array(4),T=new Uint8Array(A),M=new Uint8Array(A),z=new Uint8Array(w),H=0;H*A<w;H++){var U=H+1;E[0]=U>>>24&255,E[1]=U>>>16&255,E[2]=U>>>8&255,E[3]=U>>>0&255,N.reset(),N.update(v),N.update(E),N.finish(M);for(var R=0;R<A;R++)T[R]=M[R];for(var R=2;R<=x;R++){N.reset(),N.update(M).finish(M);for(var C=0;C<A;C++)T[C]^=M[C]}for(var R=0;R<A&&H*A+R<w;R++)z[H*A+R]=T[R]}for(var H=0;H<A;H++)T[H]=M[H]=0;for(var H=0;H<4;H++)E[H]=0;return N.clean(),z}t.pbkdf2=S})}(nu)),nu.exports}var gS=mS();const vS=new Int32Array(4),nt=class nt{constructor(){te(this,"_dataLength",0);te(this,"_bufferLength",0);te(this,"_state",new Int32Array(4));te(this,"_buffer",new ArrayBuffer(68));te(this,"_buffer8");te(this,"_buffer32");this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashStr(t,n=!1){return this.onePassHasher.start().appendStr(t).end(n)}static hashAsciiStr(t,n=!1){return this.onePassHasher.start().appendAsciiStr(t).end(n)}static _hex(t){const n=nt.hexChars,r=nt.hexOut;let i,o,a,u;for(u=0;u<4;u+=1)for(o=u*8,i=t[u],a=0;a<8;a+=2)r[o+1+a]=n.charAt(i&15),i>>>=4,r[o+0+a]=n.charAt(i&15),i>>>=4;return r.join("")}static _md5cycle(t,n){let r=t[0],i=t[1],o=t[2],a=t[3];r+=(i&o|~i&a)+n[0]-680876936|0,r=(r<<7|r>>>25)+i|0,a+=(r&i|~r&o)+n[1]-389564586|0,a=(a<<12|a>>>20)+r|0,o+=(a&r|~a&i)+n[2]+606105819|0,o=(o<<17|o>>>15)+a|0,i+=(o&a|~o&r)+n[3]-1044525330|0,i=(i<<22|i>>>10)+o|0,r+=(i&o|~i&a)+n[4]-176418897|0,r=(r<<7|r>>>25)+i|0,a+=(r&i|~r&o)+n[5]+1200080426|0,a=(a<<12|a>>>20)+r|0,o+=(a&r|~a&i)+n[6]-1473231341|0,o=(o<<17|o>>>15)+a|0,i+=(o&a|~o&r)+n[7]-45705983|0,i=(i<<22|i>>>10)+o|0,r+=(i&o|~i&a)+n[8]+1770035416|0,r=(r<<7|r>>>25)+i|0,a+=(r&i|~r&o)+n[9]-1958414417|0,a=(a<<12|a>>>20)+r|0,o+=(a&r|~a&i)+n[10]-42063|0,o=(o<<17|o>>>15)+a|0,i+=(o&a|~o&r)+n[11]-1990404162|0,i=(i<<22|i>>>10)+o|0,r+=(i&o|~i&a)+n[12]+1804603682|0,r=(r<<7|r>>>25)+i|0,a+=(r&i|~r&o)+n[13]-40341101|0,a=(a<<12|a>>>20)+r|0,o+=(a&r|~a&i)+n[14]-1502002290|0,o=(o<<17|o>>>15)+a|0,i+=(o&a|~o&r)+n[15]+1236535329|0,i=(i<<22|i>>>10)+o|0,r+=(i&a|o&~a)+n[1]-165796510|0,r=(r<<5|r>>>27)+i|0,a+=(r&o|i&~o)+n[6]-1069501632|0,a=(a<<9|a>>>23)+r|0,o+=(a&i|r&~i)+n[11]+643717713|0,o=(o<<14|o>>>18)+a|0,i+=(o&r|a&~r)+n[0]-373897302|0,i=(i<<20|i>>>12)+o|0,r+=(i&a|o&~a)+n[5]-701558691|0,r=(r<<5|r>>>27)+i|0,a+=(r&o|i&~o)+n[10]+38016083|0,a=(a<<9|a>>>23)+r|0,o+=(a&i|r&~i)+n[15]-660478335|0,o=(o<<14|o>>>18)+a|0,i+=(o&r|a&~r)+n[4]-405537848|0,i=(i<<20|i>>>12)+o|0,r+=(i&a|o&~a)+n[9]+568446438|0,r=(r<<5|r>>>27)+i|0,a+=(r&o|i&~o)+n[14]-1019803690|0,a=(a<<9|a>>>23)+r|0,o+=(a&i|r&~i)+n[3]-187363961|0,o=(o<<14|o>>>18)+a|0,i+=(o&r|a&~r)+n[8]+1163531501|0,i=(i<<20|i>>>12)+o|0,r+=(i&a|o&~a)+n[13]-1444681467|0,r=(r<<5|r>>>27)+i|0,a+=(r&o|i&~o)+n[2]-51403784|0,a=(a<<9|a>>>23)+r|0,o+=(a&i|r&~i)+n[7]+1735328473|0,o=(o<<14|o>>>18)+a|0,i+=(o&r|a&~r)+n[12]-1926607734|0,i=(i<<20|i>>>12)+o|0,r+=(i^o^a)+n[5]-378558|0,r=(r<<4|r>>>28)+i|0,a+=(r^i^o)+n[8]-2022574463|0,a=(a<<11|a>>>21)+r|0,o+=(a^r^i)+n[11]+1839030562|0,o=(o<<16|o>>>16)+a|0,i+=(o^a^r)+n[14]-35309556|0,i=(i<<23|i>>>9)+o|0,r+=(i^o^a)+n[1]-1530992060|0,r=(r<<4|r>>>28)+i|0,a+=(r^i^o)+n[4]+1272893353|0,a=(a<<11|a>>>21)+r|0,o+=(a^r^i)+n[7]-155497632|0,o=(o<<16|o>>>16)+a|0,i+=(o^a^r)+n[10]-1094730640|0,i=(i<<23|i>>>9)+o|0,r+=(i^o^a)+n[13]+681279174|0,r=(r<<4|r>>>28)+i|0,a+=(r^i^o)+n[0]-358537222|0,a=(a<<11|a>>>21)+r|0,o+=(a^r^i)+n[3]-722521979|0,o=(o<<16|o>>>16)+a|0,i+=(o^a^r)+n[6]+76029189|0,i=(i<<23|i>>>9)+o|0,r+=(i^o^a)+n[9]-640364487|0,r=(r<<4|r>>>28)+i|0,a+=(r^i^o)+n[12]-421815835|0,a=(a<<11|a>>>21)+r|0,o+=(a^r^i)+n[15]+530742520|0,o=(o<<16|o>>>16)+a|0,i+=(o^a^r)+n[2]-995338651|0,i=(i<<23|i>>>9)+o|0,r+=(o^(i|~a))+n[0]-198630844|0,r=(r<<6|r>>>26)+i|0,a+=(i^(r|~o))+n[7]+1126891415|0,a=(a<<10|a>>>22)+r|0,o+=(r^(a|~i))+n[14]-1416354905|0,o=(o<<15|o>>>17)+a|0,i+=(a^(o|~r))+n[5]-57434055|0,i=(i<<21|i>>>11)+o|0,r+=(o^(i|~a))+n[12]+1700485571|0,r=(r<<6|r>>>26)+i|0,a+=(i^(r|~o))+n[3]-1894986606|0,a=(a<<10|a>>>22)+r|0,o+=(r^(a|~i))+n[10]-1051523|0,o=(o<<15|o>>>17)+a|0,i+=(a^(o|~r))+n[1]-2054922799|0,i=(i<<21|i>>>11)+o|0,r+=(o^(i|~a))+n[8]+1873313359|0,r=(r<<6|r>>>26)+i|0,a+=(i^(r|~o))+n[15]-30611744|0,a=(a<<10|a>>>22)+r|0,o+=(r^(a|~i))+n[6]-1560198380|0,o=(o<<15|o>>>17)+a|0,i+=(a^(o|~r))+n[13]+1309151649|0,i=(i<<21|i>>>11)+o|0,r+=(o^(i|~a))+n[4]-145523070|0,r=(r<<6|r>>>26)+i|0,a+=(i^(r|~o))+n[11]-1120210379|0,a=(a<<10|a>>>22)+r|0,o+=(r^(a|~i))+n[2]+718787259|0,o=(o<<15|o>>>17)+a|0,i+=(a^(o|~r))+n[9]-343485551|0,i=(i<<21|i>>>11)+o|0,t[0]=r+t[0]|0,t[1]=i+t[1]|0,t[2]=o+t[2]|0,t[3]=a+t[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(nt.stateIdentity),this}appendStr(t){const n=this._buffer8,r=this._buffer32;let i=this._bufferLength,o,a;for(a=0;a<t.length;a+=1){if(o=t.charCodeAt(a),o<128)n[i++]=o;else if(o<2048)n[i++]=(o>>>6)+192,n[i++]=o&63|128;else if(o<55296||o>56319)n[i++]=(o>>>12)+224,n[i++]=o>>>6&63|128,n[i++]=o&63|128;else{if(o=(o-55296)*1024+(t.charCodeAt(++a)-56320)+65536,o>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");n[i++]=(o>>>18)+240,n[i++]=o>>>12&63|128,n[i++]=o>>>6&63|128,n[i++]=o&63|128}i>=64&&(this._dataLength+=64,nt._md5cycle(this._state,r),i-=64,r[0]=r[16])}return this._bufferLength=i,this}appendAsciiStr(t){const n=this._buffer8,r=this._buffer32;let i=this._bufferLength,o,a=0;for(;;){for(o=Math.min(t.length-a,64-i);o--;)n[i++]=t.charCodeAt(a++);if(i<64)break;this._dataLength+=64,nt._md5cycle(this._state,r),i=0}return this._bufferLength=i,this}appendByteArray(t){const n=this._buffer8,r=this._buffer32;let i=this._bufferLength,o,a=0;for(;;){for(o=Math.min(t.length-a,64-i);o--;)n[i++]=t[a++];if(i<64)break;this._dataLength+=64,nt._md5cycle(this._state,r),i=0}return this._bufferLength=i,this}getState(){const t=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[t[0],t[1],t[2],t[3]]}}setState(t){const n=t.buffer,r=t.state,i=this._state;let o;for(this._dataLength=t.length,this._bufferLength=t.buflen,i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],o=0;o<n.length;o+=1)this._buffer8[o]=n.charCodeAt(o)}end(t=!1){const n=this._bufferLength,r=this._buffer8,i=this._buffer32,o=(n>>2)+1;this._dataLength+=n;const a=this._dataLength*8;if(r[n]=128,r[n+1]=r[n+2]=r[n+3]=0,i.set(nt.buffer32Identity.subarray(o),o),n>55&&(nt._md5cycle(this._state,i),i.set(nt.buffer32Identity)),a<=4294967295)i[14]=a;else{const u=a.toString(16).match(/(.*?)(.{0,8})$/);if(u===null)return t?vS:"";const d=parseInt(u[2],16),h=parseInt(u[1],16)||0;i[14]=d,i[15]=h}return nt._md5cycle(this._state,i),t?this._state:nt._hex(this._state)}};te(nt,"stateIdentity",new Int32Array([1732584193,-271733879,-1732584194,271733878])),te(nt,"buffer32Identity",new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),te(nt,"hexChars","0123456789abcdef"),te(nt,"hexOut",[]),te(nt,"onePassHasher",new nt);let Ua=nt;if(Ua.hashStr("hello")!=="5d41402abc4b2a76b9719d911017c592")throw new Error("Md5 self test failed.");const vf=Symbol.for("constructDateFrom");function M_(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&vf in e?e[vf](t):e instanceof Date?new e.constructor(t):new Date(t)}function ru(e,t){return M_(e,e)}function yS(e,t,n){return M_(e,+ru(e)+t)}function SS(e,t,n){return yS(e,t*1e3)}function ES(e,t){return+ru(e)<+ru(t)}function he(e,t,n,r="debug",i){if(window.debug){const o=["color: #0288D1",`color:${i||"#009688"}`,"color: default"];n?yf()?console[r](`%c[PlaceOS]%c[${e}] %c${t}`,...o,n):console[r](`[PlaceOS][${e}] ${t}`,n):yf()?console[r](`%c[PlaceOS]%c[${e}] %c${t}`,...o):console[r](`[PlaceOS][${e}] ${t}`)}}function yf(){return!(document.documentMode||/Edge/.test(navigator.userAgent))}function P_(){var i,o,a,u,d,h;const e=(i=window.location)!=null&&i.hash?(o=window.location)==null?void 0:o.hash.slice(1):((a=window.location)==null?void 0:a.href.split("#")[1])||"";let t=(u=window.location)!=null&&u.search?(d=window.location)==null?void 0:d.search.slice(1):((h=window.location)==null?void 0:h.href.split("?")[1])||"",n={};if(e)if(e.indexOf("?")>=0){const _=e.split("?");n=zi(_[0]),t||(t=_[1])}else n=zi(e);let r={};return t&&(r=zi(t)),{...n,...r}}function zi(e){const t={},n=e.split("&");for(const r of n){const i=r.split("=");i[1]&&(t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]))}return t}const Sf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function wS(e=40){let t="";for(let n=0;n<e;n++)t+=Sf.charAt(Math.floor(Math.random()*Sf.length));return t}function dr(e){var r,i,o,a,u;const t=(((r=window.location)==null?void 0:r.hash)||"").replace(new RegExp(`${e}[a-zA-Z0-9_+-.%=]*&?`,"g"),"").replace(/&&/g,"&").replace(/#&/g,"#").replace(/&$/g,"#"),n=(((i=window.location)==null?void 0:i.search)||"").replace(new RegExp(`${e}[a-zA-Z0-9_+-.%=]*&?`,"g"),"").replace(/&&/g,"&").replace(/\?&/g,"#").replace(/&$/g,"#");(o=window.history)!=null&&o.replaceState&&((u=window.history)==null||u.replaceState(null,"",`${(a=window.location)==null?void 0:a.pathname}${t}${n}`))}function bS(e){if(e.length===0)throw new Error("Input must not be of zero length");const t=e.split(","),n={};for(const r of t){const i=r.split(";");if(i.length!==2)throw new Error("Section could not be split on ';'");const o=i[0].replace(/<(.*)>/,"$1").trim(),a=i[1].replace(/rel="(.*)"/,"$1").trim();n[a]=o}return n}function AS(e,t){for(const n in e)e.hasOwnProperty(n)&&t.indexOf(e[n])>=0&&delete e[n];return e}function kS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function RS(){return window.location!==window.parent.location}function xS(e=Date.now(),t=60*1e3){return Math.floor(e/t)}class CS{abort(){he("Stub","Aborted")}}function mc(e){let t="";if(e)for(const n in e)e.hasOwnProperty(n)&&e[n]!==void 0&&e[n]!==null&&(t+=`${t?"&":""}${n}=${encodeURIComponent(e[n])}`);return t}const $i={};function Dn(e,t,n=300){if(e&&t&&t instanceof Function)hi(e),$i[e]=setTimeout(()=>{t(),delete $i[e]},n);else throw new Error(e?"Cannot create named timeout without a name":"Cannot create a timeout without a callback")}function hi(e){$i[e]&&(clearTimeout($i[e]),delete $i[e])}const TS={id:"mock-authority",name:"localhost:4200",description:"",domain:"localhost:4200",login_url:"/login?continue={{url}}",logout_url:"/logout",session:!0,production:!1,config:{},version:"2.0.0"};let Te={},Qe=localStorage,at;const Pe={};let Xe="",ai="";const uo=new xr(""),gc=new xr("");let D_="/api/engine/v2";const zr=new xr(!1);zr.asObservable();let ja=0;function vc(){var e,t;return`${`${Te.secure||((e=window.location)==null?void 0:e.protocol.indexOf("https"))>=0?"https:":"http:"}//${Te.host||((t=window.location)==null?void 0:t.host)}`}${O_()}`}function O_(){return Te.version==="ACA Engine"?"/control/api":D_}function LS(){return!!Te.token_header}function MS(){return Xe}function hs(){return Va("x-api-key",!1)||""}function Kt(e=!0){if(Te.mock)return"mock-token";if(!Qe)return"";if(hs()&&!Te.ignore_api_key)return"x-api-key";const t=Qe.getItem(`${Xe}_expires_at`)||"",n=uo.getValue();return ES(+t,new Date)&&(he("Auth","Token expired. Requesting new token..."),Ec(),Pe.load_authority||(ja+=1,Dn("re-authorise",async()=>{delete Pe.authorise,await B_().catch(r=>he("Auth",`Failed to get token: ${r}`))},200*Math.min(20,ja))),!e)?"":n||Qe.getItem(`${Xe}_access_token`)||""}function iu(){return gc.getValue()||Qe.getItem(`${Xe}_refresh_token`)||""}function ou(){var e;return Te.host||((e=window.location)==null?void 0:e.host)}function PS(){return!!Kt()}function DS(){return uo.pipe(yo(e=>!!PS()))}function Fa(){return at}function yc(){return!!Te.mock}function OS(){return!!Te.secure}function Sc(){return Va("trust")==="true"||Va("trusted")==="true"}function I_(){return!!hs()&&!Te.ignore_api_key||Va("fixed_device")==="true"}function Va(e,t=!0){let n=P_()[e];if(Qe){const r=`${MS()}_${e}`;n=n||Qe.getItem(r)||Qe.getItem(e)||"",t&&Qe.setItem(r,`${n}`)}return n}async function IS(e){return Te=e||Te,Te.token_header=Te.token_header??RS(),window.AbortController||(window.AbortController=CS),Qe=Te.storage==="session"?sessionStorage:localStorage,Xe=Ua.hashStr(Te.redirect_uri,!1),Te.delay&&Te.delay>0&&await rS(pc(Te.delay)),wc()}function N_(){return he("Auth","Refreshing authorty."),at=void 0,wc()}function Ec(){he("Auth","Invalidating tokens."),Qe.removeItem(`${Xe}_access_token`),Qe.removeItem(`${Xe}_expires_at`),uo.getValue()&&uo.next("")}function B_(e,t=at){return Pe.authorise||(Pe.authorise=new Promise((n,r)=>{if(!t)return delete Pe.authorise,r("Authority is not loaded");he("Auth","Authorising user...");const i=()=>{if(Kt(!1))he("Auth","Valid token found."),delete Pe.authorise,n(Kt());else{const o=[()=>{he("Auth","Successfully generated token."),n(Kt()),delete Pe.authorise},()=>{he("Auth","Failed to generate token."),r("Failed to generate token"),setTimeout(()=>delete Pe.authorise,200)}];Te&&Te.auth_type==="password"?(he("Auth","Logging in with credentials."),HS(Te).then(...o),ja=0):ai||iu()?(he("Auth",`Generating token with ${ai?"code":"refresh token"}`),j_().then(...o),ja=0):t.session?(he("Auth","Users has session. Authorising application..."),BS(e).then(...o)):(he("Auth","No user session"),U_(t),r("No user session"),setTimeout(()=>delete Pe.authorise,200))}};jS().then(i,i)})),Pe.authorise}function NS(){const e=at?at.logout_url:"/logout";fetch(e,{method:"GET",redirect:"manual",headers:{Authorization:"Bearer "+Kt()}}).then(t=>{var r;const n=t.headers.get("Location")||e;for(let i=0;i<Qe.length;i++){const o=Qe.key(i);o&&o.indexOf(Xe)>=0&&Qe.removeItem(o)}(r=window.location)==null||r.assign(n)})}function wc(e=0){return Pe.load_authority||(Pe.load_authority=new Promise(t=>{var i;if(zr.next(!1),Te.mock){at=TS,he("Auth","System in mock mode"),zr.next(!0),t();return}he("Auth",`Fixed: ${I_()} | Trusted: ${Sc()}`),he("Auth","Loading authority...");const n=Te.secure||((i=window.location)==null?void 0:i.protocol.indexOf("https"))>=0,r=o=>{he("Auth",`Failed to load authority(${o})`),zr.next(!1),Dn("load_authority",()=>{delete Pe.load_authority,wc(e).then(a=>t())},300*Math.min(20,++e))};_c(`${n?"https:":"http:"}//${ou()}/auth/authority`,{credentials:"same-origin"}).subscribe(async o=>{if(!o.ok)return r(await o.text().catch(u=>u));at=await o.json(),D_=/[2-9]\.[0-9]+\.[0-9]+/g.test(at.version||"")?"/api/engine/v2":"/control/api",he("Auth","Loaded authority.",[],"group"),at&&(he("Auth",`Name: ${at.name}`),he("Auth",`Version: ${at.version}`),he("Auth",`Domain: ${at.domain}`),he("Auth",`Session: ${at.session}`),he("Auth",`Production: ${at.production}`),he("Auth",`Config Keys: ${Object.keys(at.config||{}).length}`)),he("Auth","",[],"groupEnd");const a=()=>{zr.next(!0),he("Auth","Application set online."),t()};delete Pe.load_authority,B_("").then(a,a)},r)})),Pe.load_authority}async function BS(e){var n;const t=VS(e);if(Te.use_iframe)return US(t);(n=window.location)==null||n.assign(t)}function US(e){return Pe.iframe_auth||(Pe.iframe_auth=new Promise((t,n)=>{he("Auth","Authorizing in an iFrame...");const r=document.createElement("iframe");r.style.position="absolute",r.style.top="0",r.style.left="0",r.style.height="1px",r.style.width="1px",r.style.zIndex="-1",r.id="place-authorize",r.src=`${e}`;const i=o=>{var a;if(o.origin===((a=window.location)==null?void 0:a.origin)&&o.data.type==="place-os"){const u=o.data;if(he("Auth","Received credentials from iFrame..."),document.body.removeChild(r),hi("iframe_auth"),window.removeEventListener("message",i),delete Pe.iframe_auth,u.token)return t(),bc({access_token:u.token,...u});ai=u.code||"",j_().then(d=>t(d),d=>n(d))}};Dn("iframe_auth",()=>{he("Auth","Unable to resolve iFrame after 15 seconds..."),n()},15*1e3),window.addEventListener("message",i),r.onerror=o=>{he("Auth","iFrame error.",o),delete Pe.iframe_auth,n()},document.body.appendChild(r)})),Pe.iframe_auth}let Ef=!1;function U_(e){var t,n;if(Te.handle_login!==!1&&!Ef){he("Auth","Redirecting to login page...");const r=(n=e.login_url)==null?void 0:n.replace("{{url}}",encodeURIComponent((t=window.location)==null?void 0:t.href));throw setTimeout(()=>{var i;return(i=window.location)==null?void 0:i.assign(r)},300),Ef=!0,new Error("Redirecting to login page...")}else he("Auth","Login being handled locally.");delete Pe.authorise}function jS(){return Pe.check_token||(Pe.check_token=new Promise(async(e,t)=>{Kt()?(he("Auth","Valid token found."),e(Kt())):(he("Auth","No token. Checking URL for auth credentials..."),await FS()?e(!0):t()),delete Pe.check_token})),Pe.check_token}function FS(){return Pe.check_params||(Pe.check_params=new Promise(e=>{he("Auth","Checking for auth parameters...");let t=P_();if((!t||Object.keys(t).length<=0)&&sessionStorage&&(t=JSON.parse(sessionStorage.getItem("ENGINE.auth.params")||"{}")),t&&(t.code||t.access_token||t.refresh_token)){t.code&&(ai=t.code,dr("code")),t.refresh_token&&(Qe.setItem(`${Xe}_refresh_token`,t.refresh_token),dr("refresh_token"));const n=Qe.getItem(`${Xe}_nonce`)||"",r=(t.state||"").split(";");dr("state"),dr("token_type");const i=r[0];n===i?(bc(t),e(!!t.access_token)):e(!1)}else e(!1);Dn("check_params_promise",()=>delete Pe.check_params,50)})),Pe.check_params}function VS(e){const t=WS();e=e?`${t};${e}`:t;const n=Te?(Te.auth_uri||"").indexOf("?")>=0:!1,r=(Te?Te.auth_uri:null)||"/auth/oauth/authorize",i=Sc()||Te.auth_type==="auth_code"?"code":"token";let o=`${r}${n?"&":"?"}response_type=${encodeURIComponent(i)}&client_id=${encodeURIComponent(Xe)}&state=${encodeURIComponent(e)}&redirect_uri=${encodeURIComponent(Te.redirect_uri)}&scope=${encodeURIComponent(Te.scope)}`;if(Te.auth_type==="auth_code"){const{challenge:a,verify:u}=zS();sessionStorage.setItem(`${Xe}_challenge`,a),o+="&code_challenge_method=S256",o+=`&code_challenge=${u}`}return o}const wf="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".split("");function zS(e=43){const t=new Array(e).fill(0).map(()=>wf[Math.floor(Math.random()*wf.length)]).join(""),n=hS(pS(t)),r=L_(gS.hash(n)).split("=")[0].replace(/\//g,"_").replace(/\+/g,"-");return{challenge:t,verify:r}}function $S(){let e=(Te.token_uri||"/auth/token")+`?client_id=${encodeURIComponent(Xe)}`,t="";if(e+=`&redirect_uri=${encodeURIComponent(Te.redirect_uri)}`,iu()){e+=`&refresh_token=${encodeURIComponent(iu())}`,e+="&grant_type=refresh_token";const n=e.split("?");e=n[0],t=n[1]}else{e+=`&code=${encodeURIComponent(ai)}`,e+="&grant_type=authorization_code";const n=sessionStorage.getItem(`${Xe}_challenge`);n&&(e+=`&code_verifier=${n}`,sessionStorage.removeItem(`${Xe}_challenge`)),ai=""}return[e,t]}function GS(e){const t=e.token_uri||"/auth/token",n=mc({grant_type:"password",client_id:Xe,client_secret:e.client_secret,redirect_uri:e.redirect_uri,authority:at==null?void 0:at.id,scope:e.scope,username:e.username,password:e.password});return`${t}?${n}`}function j_(){return F_(...$S())}function HS(e){return F_(GS(e))}function F_(e,t=""){return Pe.generate_tokens||(Pe.generate_tokens=new Promise((n,r)=>{he("Auth","Generating new token...");const i=o=>{he("Auth","Error generating new tokens.",o),Qe.removeItem(`${Xe}_refresh_token`),gc.next(""),r(),delete Pe.generate_tokens};_c(e,{method:"POST",body:t,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).subscribe(async o=>{if(!o.ok)return i(o);const a=await o.json();bc(a),n(),delete Pe.generate_tokens},i)})),Pe.generate_tokens}function bc(e){const t=SS(new Date,Math.max(60,parseInt(e.expires_in,10)-300));he("Auth","Tokens generated storing..."),Sc()&&(e.access_token&&(Qe.setItem(`${Xe}_access_token`,e.access_token),dr("access_token")),e.refresh_token&&(Qe.setItem(`${Xe}_refresh_token`,e.refresh_token),dr("refresh_token"))),e.expires_in&&(Qe.setItem(`${Xe}_expires_at`,`${t.valueOf()}`),dr("expires_in")),zr.next(!0),uo.next(e.access_token||""),gc.next(e.refresh_token||"")}function WS(){const e=wS();return Qe.setItem(`${Xe}_nonce`,e),e}const V_={};let qS=(e,t)=>{const n=new Error(`Mock endpoint not found: ${e} ${t}`);return n.status=404,he("HTTP(M)",`404 ${e}:`,t),x_(n)};function KS(e,t,n,r=V_){const i=YS(e,t,r);if(i){const o=QS(t,i,n);return XS(i,o)}return qS(e,t)}function YS(e,t,n=V_){const r=t.replace(/(http|https):\/\/[a-zA-Z0-9.-]*:?([0-9]*)?/g,"").replace(/^\//,"").split("?")[0].split("/"),i=Object.keys(n).reduce((o,a)=>(a.indexOf(`${e}|`)===0&&o.push(n[a]),o),[]);for(const o of i)if(o.path_structure.length===r.length){let a=!0;for(let u=0;u<o.path_structure.length;u++)if(!o.path_structure[u]&&o.path_parts[u]!==r[u]){a=!1;break}if(a)return o}return null}function QS(e,t,n){const r=e.replace(/(http|https):\/\/[a-zA-Z0-9.-]*:?([0-9]*)?/g,"").split("?"),i=r[0].replace(/^\//,""),o=r[1]||"",a=zi(o),u=i.split("/"),d={};for(let _=0;_<t.path_structure.length;_++){const S=t.path_structure[_];S&&(d[S]=u[_])}const h={url:e,path:t.path,method:t.method,metadata:t.metadata,route_params:d,query_params:a,body:n};return he("HTTP(M)",`MATCHED ${h.method}:`,h),h}function XS(e,t){let n;try{n=e.callback?e.callback(t):e.metadata}catch(a){throw he("HTTP(M)",`ERROR ${t.method}:`,[t.url,a]),a}const r=e.delay_variance||100,i=e.delay||300,o=Math.floor(Math.random()*r-r/2)+i;return he("HTTP(M)",`RESP ${t.method}:`,[t.url,n]),tS([n]).pipe(uS(Math.max(200,o)))}const z_={};function ZS(e,t=z_){return t[e]||{}}function $_(e,t,n=eE){return t||(t={response_type:"json"}),n("GET",e,{response_type:"json",...t})}async function JS(e,t,n=z_){if(e.headers){const r={};e.headers.forEach?e.headers.forEach((i,o)=>r[o.toLowerCase()]=i):Object.keys(e.headers).forEach(i=>r[i.toLowerCase()]=e.headers[i]),n[e.url||""]=r}switch(t){case"json":return await e.json().catch(()=>({}));case"text":return await e.text();case"void":return;default:return await e.json().catch(()=>({}))}}const G_=()=>(Ec(),N_().then(()=>Promise.resolve(),()=>new Promise(e=>{setTimeout(()=>{G_().then(()=>e())},1e3)})));function eE(e,t,n,r=yc,i=KS,o=JS){if(r()){const a=i(e,t,n==null?void 0:n.body);if(a)return a}return n.headers=n.headers||{},!n.headers["Content-Type"]&&!n.headers["content-type"]&&(n.headers["Content-Type"]="application/json"),DS().pipe(aS(a=>a),T_(1),_f(a=>{Kt()==="x-api-key"?n.headers["X-API-Key"]=hs():n.headers.Authorization=`Bearer ${Kt()}`;const u={...n,method:e,credentials:"same-origin"};return["POST","PUT","PATCH"].includes(e)&&n.body!==void 0&&(u.body=typeof n.body=="string"?n.body:JSON.stringify(n.body)),_c(t,u)}),_f(a=>a.ok?o(a,n.response_type):x_(a)),fS({count:4,delay:(a,u)=>new ut(d=>{if(a.status===511){U_(Fa()),d.error(a);return}if(a.status!==401){d.error(a||{});return}he("HTTP","Auth error",a);const h=Math.pow(2,u-1)*1e3;G_().then(()=>{d.next(h),d.complete()}).catch(()=>{d.error(a)})})}))}class So{constructor(t={}){te(this,"id");te(this,"name");te(this,"created_at");te(this,"updated_at");te(this,"version");this.id=t.id||"",this.name=t.name||"",this.created_at=t.created_at||0,this.updated_at=t.updated_at||0,this.version=t.version||0}toJSON(){const t={...this};return t.version=this.version,delete t.created_at,AS(t,[void 0,null,""])}}let bf="";const H_=e=>e;function W_(e){const{query_params:t,fn:n,path:r,endpoint:i}=e,o=mc(t),a=`${i||vc()}${r?"/"+r:""}${o?"?"+o:""}`;return $_(a).pipe(yo(u=>{const d=tE(a,o);return{total:d.total||0,next:d.next?()=>W_({query_params:d.next,fn:n,endpoint:i,path:r}):null,data:u&&u instanceof Array?u.map(h=>(n||H_)(h)):u&&!(u instanceof Array)&&u.results?u.results.map(h=>h):[]}}))}function Ac(e){const{query_params:t,id:n,path:r,fn:i,options:o}=e,a=mc(t),u=`${vc()}/${r}/${n}${a?"?"+a:""}`;return $_(u,o).pipe(yo(d=>(i||H_)(d)))}function tE(e,t,n){const r=ZS(e[0]==="/"?`${location.origin}${e}`:e),i={total:0,next:null};if(r&&r["x-total-count"]){const o=+(r["x-total-count"]||0);t.length<2||t.length<12&&t.indexOf("offset=")>=0,i.total=o}return r&&r.link&&(bf=bS(r.link||"").next,i.next=zi(bf.split("?")[1])),i}var Eo=(e=>(e[e.None=0]="None",e[e.Support=1]="Support",e[e.Admin=2]="Admin",e[e.NeverDisplay=3]="NeverDisplay",e))(Eo||{});class kc extends So{constructor(n={}){super(n);te(this,"parent_id");te(this,"updated_at");te(this,"encryption_level");te(this,"settings_string");te(this,"keys");te(this,"modified_by_id");this.parent_id=n.parent_id||"",this.updated_at=n.updated_at||Math.floor(new Date().getTime()/1e3),this.settings_string=n.settings_string||"",this.encryption_level=n.encryption_level||Eo.None,this.keys=n.keys||[],this.modified_by_id=n.modified_by_id||""}get value(){return this.settings_string}}var za=(e=>(e[e.SSH=0]="SSH",e[e.Device=1]="Device",e[e.Service=2]="Service",e[e.Websocket=3]="Websocket",e[e.Logic=99]="Logic",e))(za||{});class nE extends So{constructor(n={}){super(n);te(this,"class_name");te(this,"description");te(this,"module_name");te(this,"role");te(this,"default_uri");te(this,"default_port");te(this,"repository_id");te(this,"file_name");te(this,"commit");te(this,"ignore_connected");te(this,"update_available");te(this,"update_info");te(this,"settings");this.description=n.description||"",this.module_name=n.module_name||"",this.role=n.role??za.Logic,this.default_uri=n.default_uri||"",this.default_port=n.default_port||1,this.ignore_connected=n.ignore_connected||!1,this.class_name=n.class_name||"",this.repository_id=n.repository_id||"",this.file_name=n.file_name||"",this.commit=n.commit||"",this.update_available=n.update_available||!1,this.update_info=n.update_info,this.settings=n.settings||[null,null,null,null],typeof this.settings!="object"&&(this.settings=[null,null,null,null]);for(const r in Eo)!isNaN(Number(r))&&!this.settings[r]&&(this.settings[r]=new kc({parent_id:this.id,encryption_level:+r}))}}class q_ extends So{constructor(n={}){super(n);te(this,"settings",[null,null,null,null]);te(this,"display_name");te(this,"description");te(this,"email");te(this,"code");te(this,"capacity");te(this,"features");te(this,"bookable");te(this,"public");te(this,"installed_ui_devices");te(this,"support_url");te(this,"timetable_url");te(this,"camera_snapshot_url");te(this,"camera_url");te(this,"room_booking_url");te(this,"map_id");te(this,"modules");te(this,"images");te(this,"zones");te(this,"timezone");te(this,"module_list",[]);te(this,"signage");te(this,"playlists");te(this,"approval");te(this,"orientation");this.display_name=n.display_name||"",this.description=n.description||"",this.email=n.email||"",this.code=n.code||"",this.capacity=n.capacity||0,this.features=n.features||[],this.bookable=n.bookable||!1,this.public=n.public??!1,this.installed_ui_devices=n.installed_ui_devices||0,this.support_url=n.support_url||"",this.camera_snapshot_url=n.camera_snapshot_url||"",this.camera_url=n.camera_url||"",this.timetable_url=n.timetable_url||"",this.room_booking_url=n.room_booking_url||"",this.map_id=n.map_id||"",this.modules=n.modules||[],this.images=n.images||[],this.zones=n.zones||[],this.settings=n.settings||[null,null,null,null],this.timezone=n.timezone||"",this.signage=n.signage||!1,this.playlists=n.playlists||[],this.orientation=n.orientation||"unspecified",this.approval=n.approval||!1,typeof this.settings!="object"&&(this.settings=[null,null,null,null]);for(const r in Eo)!isNaN(Number(r))&&!this.settings[r]&&(this.settings[r]=new kc({parent_id:this.id,encryption_level:+r}));n.module_data&&n.module_data instanceof Array&&(this.module_list=n.module_data.map(r=>new K_(r)))}}class K_ extends So{constructor(n={}){super(n);te(this,"connected");te(this,"running");te(this,"updated_at");te(this,"edge_id");te(this,"driver_id");te(this,"driver");te(this,"control_system_id");te(this,"system");te(this,"ip");te(this,"tls");te(this,"udp");te(this,"port");te(this,"makebreak");te(this,"uri");te(this,"custom_name");te(this,"role");te(this,"notes");te(this,"ignore_connected");te(this,"settings",[null,null,null,null]);te(this,"has_runtime_error");te(this,"error_timestamp");this.driver_id=n.driver_id||n.dependency_id||"",this.control_system_id=n.control_system_id||"",this.edge_id=n.edge_id||"",this.ip=n.ip||"",this.tls=n.tls||!1,this.udp=n.udp||!1,this.port=n.port||1,this.makebreak=n.makebreak||!1,this.uri=n.uri||"",this.custom_name=n.custom_name||"",this.role=n.role??za.Logic,this.notes=n.notes||"",this.ignore_connected=n.ignore_connected||!1,this.connected=n.connected,this.running=n.running||!1,this.updated_at=n.updated_at||0,this.system=new q_(n.control_system||n.system),this.has_runtime_error=n.has_runtime_error||!1,this.error_timestamp=n.error_timestamp||0,this.driver=new nE(n.dependency||n.driver),this.settings=n.settings||[null,null,null,null],typeof this.settings!="object"&&(this.settings=[null,null,null,null]);for(const r in Eo)!isNaN(Number(r))&&!this.settings[r]&&(this.settings[r]=new kc({parent_id:this.id,encryption_level:+r}))}get system_id(){return this.control_system_id}toJSON(n=!1){const r=super.toJSON();return(r.role!==za.Logic&&!n||!r.control_system_id)&&delete r.control_system_id,delete r.driver,delete r.system,delete r.error_timestamp,delete r.has_runtime_error,r}}const rE="modules";function iE(e){return new K_(e)}function oE(e,t={}){return Ac({id:e,query_params:t,fn:iE,path:rE})}const Y_="systems";function Q_(e){return new q_(e)}function aE(e={}){return W_({query_params:e,fn:Q_,path:Y_})}function sE(e,t={}){return Ac({id:e,query_params:t,fn:Q_,path:Y_})}class lE extends So{constructor(n={}){super(n);te(this,"email_digest");te(this,"authority_id");te(this,"email");te(this,"phone");te(this,"country");te(this,"building");te(this,"groups");te(this,"image");te(this,"metadata");te(this,"login_name");te(this,"staff_id");te(this,"first_name");te(this,"last_name");te(this,"support");te(this,"sys_admin");te(this,"ui_theme");te(this,"card_number");te(this,"department");te(this,"work_preferences");te(this,"work_overrides");te(this,"photo_upload_id");te(this,"locatable");te(this,"password","");te(this,"confirm_password","");this.authority_id=n.authority_id||"",this.email=n.email||"",this.email_digest=n.email_digest||"",this.phone=n.phone||"",this.country=n.country||"",this.building=n.building||"",this.image=n.image||"",this.metadata=n.metadata||"",this.login_name=n.login_name||"",this.staff_id=n.staff_id||"",this.first_name=n.first_name||"",this.last_name=n.last_name||"",this.support=!!n.support,this.sys_admin=!!n.sys_admin,this.ui_theme=n.ui_theme||"",this.card_number=n.card_number||"",this.groups=n.groups||[],this.department=n.department||"",this.photo_upload_id=n.photo_upload_id||"",this.work_preferences=n.work_preferences||[],this.work_overrides=n.work_overrides||{},this.locatable=n.locatable??!0}}const uE="users";function cE(e){return new lE(e)}function dE(e,t={}){return Ac({id:e,query_params:t,fn:cE,path:uE})}var fE={url:"",deserializer:function(e){return JSON.parse(e.data)},serializer:function(e){return JSON.stringify(e)}},hE="WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }",pE=function(e){un(t,e);function t(n,r){var i=e.call(this)||this;if(i._socket=null,n instanceof ut)i.destination=r,i.source=n;else{var o=i._config=lo({},fE);if(i._output=new wr,typeof n=="string")o.url=n;else for(var a in n)n.hasOwnProperty(a)&&(o[a]=n[a]);if(!o.WebSocketCtor&&WebSocket)o.WebSocketCtor=WebSocket;else if(!o.WebSocketCtor)throw new Error("no WebSocket constructor can be found");i.destination=new Js}return i}return t.prototype.lift=function(n){var r=new t(this._config,this.destination);return r.operator=n,r.source=this,r},t.prototype._resetState=function(){this._socket=null,this.source||(this.destination=new Js),this._output=new wr},t.prototype.multiplex=function(n,r,i){var o=this;return new ut(function(a){try{o.next(n())}catch(d){a.error(d)}var u=o.subscribe({next:function(d){try{i(d)&&a.next(d)}catch(h){a.error(h)}},error:function(d){return a.error(d)},complete:function(){return a.complete()}});return function(){try{o.next(r())}catch(d){a.error(d)}u.unsubscribe()}})},t.prototype._connectSocket=function(){var n=this,r=this._config,i=r.WebSocketCtor,o=r.protocol,a=r.url,u=r.binaryType,d=this._output,h=null;try{h=o?new i(a,o):new i(a),this._socket=h,u&&(this._socket.binaryType=u)}catch(S){d.error(S);return}var _=new fi(function(){n._socket=null,h&&h.readyState===1&&h.close()});h.onopen=function(S){var y=n._socket;if(!y){h.close(),n._resetState();return}var v=n._config.openObserver;v&&v.next(S);var x=n.destination;n.destination=fs.create(function(w){if(h.readyState===1)try{var N=n._config.serializer;h.send(N(w))}catch(A){n.destination.error(A)}},function(w){var N=n._config.closingObserver;N&&N.next(void 0),w&&w.code?h.close(w.code,w.reason):d.error(new TypeError(hE)),n._resetState()},function(){var w=n._config.closingObserver;w&&w.next(void 0),h.close(),n._resetState()}),x&&x instanceof Js&&_.add(x.subscribe(n.destination))},h.onerror=function(S){n._resetState(),d.error(S)},h.onclose=function(S){h===n._socket&&n._resetState();var y=n._config.closeObserver;y&&y.next(S),S.wasClean?d.complete():d.error(S)},h.onmessage=function(S){try{var y=n._config.deserializer;d.next(y(S))}catch(v){d.error(v)}}},t.prototype._subscribe=function(n){var r=this,i=this.source;return i?i.subscribe(n):(this._socket||this._connectSocket(),this._output.subscribe(n),n.add(function(){var o=r._socket;r._output.observers.length===0&&(o&&(o.readyState===1||o.readyState===0)&&o.close(),r._resetState())}),n)},t.prototype.unsubscribe=function(){var n=this._socket;n&&(n.readyState===1||n.readyState===0)&&n.close(),this._resetState(),e.prototype.unsubscribe.call(this)},t}(tu);function _E(e){return new pE(e)}var pn=(e=>(e[e.PARSE_ERROR=0]="PARSE_ERROR",e[e.BAD_REQUEST=1]="BAD_REQUEST",e[e.ACCESS_DENIED=2]="ACCESS_DENIED",e[e.REQUEST_FAILED=3]="REQUEST_FAILED",e[e.UNKNOWN_CMD=4]="UNKNOWN_CMD",e[e.SYS_NOT_FOUND=5]="SYS_NOT_FOUND",e[e.MOD_NOT_FOUND=6]="MOD_NOT_FOUND",e[e.UNEXPECTED_FAILURE=7]="UNEXPECTED_FAILURE",e))(pn||{}),X_=(e=>(e.Info="info",e.Debug="debug",e.Warning="warn",e.Error="error",e.Fatal="fatal",e.Trace="trace",e))(X_||{});const mE={};function gE(e){return mE[e]}const Z_=15;let Rc=0,Lt,J_=0;const vt={},xc={},pi={},vE={},fr=new xr(!1);pi._place_os_status=fr.asObservable();const em=new xr([0,0]);pi._place_os_sync=em.asObservable();let tm=Date.now(),Qr,$a=0,Un=null,ua,Cc=0;const Tc=10*1e3,nm=new wr;pi._place_os_debug_events=nm.asObservable();function el(){return vc().indexOf("/control/")>=0?"/control/websocket":`${O_()}/systems/control`}function rm(){return fr.getValue()}function yE(){return pi._place_os_status}function SE(e,t=xc,n=pi){const r=`${e.sys}|${e.mod}_${e.index}|${e.name}`;return t[r]||(t[r]=new xr(void 0),n[r]=t[r].asObservable()),n[r]}function EE(e,t=xc){const n=`${e.sys}|${e.mod}_${e.index}|${e.name}`;if(t[n])return t[n].getValue()}function Af(e,t=0,n=ps){const r={id:++Rc,cmd:"bind",...e};return n(r,t)}function wE(e,t=0,n=ps){const r={id:++Rc,cmd:"unbind",...e};return n(r,t)}function bE(e,t=Tc,n=ps){const r={id:++Rc,cmd:"exec",...e};return n(r,t)}function ps(e,t=Tc,n=0){const r=`${e.cmd}|${e.sys}|${e.mod}${e.index}|${e.name}|${e.args}|${xS()}`;if(vt[r])he("WS","Request already in progress. Waiting...",e);else{const i={...e,key:r};i.promise=new Promise((o,a)=>{const u=()=>{delete vt[r],vt[r]=null,ps(e,t,n).then(d=>o(d),d=>a(d))};if(Lt&&rm()){yc()&&LE(e,Lt,vE),i.resolve=o,i.reject=a;const d=`${e.sys}, ${e.mod}_${e.index}, ${e.name}`;he("WS",`[${e.cmd.toUpperCase()}](${e.id}) ${d}`,e.args),Lt.next(e),t>0&&Dn(`${r}`,()=>{a("Request timed out."),delete vt[r],vt[r]=null},t)}else Un?setTimeout(()=>u(),1e3):Lc().then(()=>u())}),vt[r]=i}return vt[r].promise}function im(e){if(e!=="pong"&&e instanceof Object){if(e.type==="notify"&&e.meta)RE(e.meta,e.value);else if(e.type==="success")AE(e);else if(e.type==="debug"){he("WS",`[DEBUG] ${e.mod}${e.klass||""} `,e.msg);const t=e.meta||{mod:"",index:""};nm.next({mod_id:e.mod||"<empty>",module:`${t.mod}_${t.index}`,class_name:e.klass||"<empty>",message:e.msg||"<empty>",level:e.level||X_.Debug,time:Math.floor(new Date().getTime()/1e3)})}else e.type==="error"?kE(e):e.cmd||he("WS","Invalid websocket message",e,"error");hi(`${e.id}`)}else e==="pong"&&(Cc=Date.now(),he("WS","Pong!"))}function AE(e){const t=Object.keys(vt).map(n=>vt[n]).find(n=>(n==null?void 0:n.id)===e.id);he("WS",`[SUCCESS](${e.id})`),t&&t.resolve&&(t.resolve(e.value),delete vt[t.key])}function kE(e){let t="UNEXPECTED FAILURE";switch(e.code){case pn.ACCESS_DENIED:t="ACCESS DENIED";break;case pn.BAD_REQUEST:t="BAD REQUEST";break;case pn.MOD_NOT_FOUND:t="MODULE NOT FOUND";break;case pn.SYS_NOT_FOUND:t="SYSTEM NOT FOUND";break;case pn.PARSE_ERROR:t="PARSE ERROR";break;case pn.REQUEST_FAILED:t="REQUEST FAILED";break;case pn.UNKNOWN_CMD:t="UNKNOWN COMMAND";break}he("WS",`[ERROR] ${t}(${e.id}): ${e.msg}`,void 0,"error");const n=Object.keys(vt).map(r=>vt[r]).filter(r=>r).find(r=>r.id===e.id);n&&n.reject&&(n.reject(e),hi(`${n.key}`),delete vt[n.key])}function RE(e,t,n=xc,r=pi){const i=`${e.sys}|${e.mod}_${e.index}|${e.name}`;n[i]||(n[i]=new xr(null),r[i]=n[i].asObservable());const o=`${e.sys}, ${e.mod}_${e.index}, ${e.name}`;he("WS",`[NOTIFY] ${o} changed`,[n[i].getValue(),"",t]),n[i].next(t)}function Lc(e=0){return Un==null&&(Un=new Promise(t=>{if(e>40)return location.reload();$a++,tm=Date.now(),Lt=yc()?TE():xE(),Lt?(he("WS(Debug)","Authority:",[Fa()]),he("WS","Connecting to websocket..."),Lt.subscribe(n=>{fr.getValue()||(he("WS","Connection established."),t()),fr.next(!0),$a=0,tl(),im(n)},n=>{Lt=void 0,Un=null,Rf(),tl(),CE(n)},()=>{Lt=void 0,Un=null,Rf(),he("WS","Connection closed by browser."),fr.next(!1),Ga()}),Qr&&clearInterval(Qr),Cc=Date.now(),kf(),Qr=setInterval(()=>kf(),Z_*1e3),tl(),J_+=1,ua=setTimeout(()=>{he("WS","Unhealthy connection. Reconnecting..."),fr.next(!1),Un=null,Ga()},30*1e3)):(Lt?he("WS",`Waiting on auth(${e}). Retrying in ${1e3*Math.min(10,e+1)}ms...`,[!!Kt(),!!Fa()],"info"):he("WS",`Failed to create websocket(${e}). Retrying in ${1e3*Math.min(10,e+1)}ms...`,void 0,"error"),setTimeout(()=>{Un=null,Lc(e).then(n=>t(n))},1e3*Math.min(10,++e)))})),Un}function xE(){if(!Fa()||!Kt())return null;const e=OS()||location.protocol.indexOf("https")>=0;let t=`ws${e?"s":""}://${ou()}${el()}${I_()?"?fixed_device=true":""}`;const n=Kt();let r=n==="x-api-key"?`api-key=${hs()}`:`bearer_token=${n}`;return!LS()&&!kS()?(he("WS","Authenticating through cookie..."),r+=`;max-age=120;path=${el()};`,r+=`${e?"secure;":""}samesite=strict`,document.cookie=r,he("WS","Cookies:",[document.cookie,r])):(he("WS","Authenticating through URL query parameter..."),t+=`${t.indexOf("?")>=0?"&":"?"}${r}`),he("WS",`Creating websocket connection to ws${e?"s":""}://${ou()}${el()}`),_E({url:t,serializer:i=>typeof i=="object"?JSON.stringify(i):i,deserializer:i=>{let o=i.data;if(o==="pong")return o;try{return JSON.parse(i.data)}catch{return o}}})}function Ga(){em.next([J_,Date.now()-tm]),Lt&&rm()&&(Lt.complete(),Qr&&(clearInterval(Qr),Qr=void 0)),he("WS",`Reconnecting in ${Math.min(5e3,$a*300||1e3)}ms...`),Dn("reconnect",()=>Lc(),Math.min(5e3,($a+1)*300||1e3))}function kf(){if(Date.now()-Cc>4*Z_*1e3)return Ga();Lt==null||Lt.next("ping")}function CE(e){fr.next(!1),he("WS","Websocket error:",e,void 0,"error"),e.status===401&&Ec(),N_(),Ga()}function tl(){ua&&(clearTimeout(ua),ua=void 0)}function TE(){const e=new wr;return e.subscribe(t=>im(t)),e}function LE(e,t,n){const r=`${e.sys}|${e.mod}_${e.index}|${e.name}`,i=gE(e.sys),o=i&&i[e.mod]?i[e.mod][e.index-1||0]:null;if(o){switch(e.cmd){case"bind":n[r]=o.listen(e.name).subscribe(a=>{setTimeout(()=>{t.next({type:"notify",value:a,meta:e})},Math.floor(Math.random()*100+50))});break;case"unbind":n[r]&&(n[r].unsubscribe(),delete n[r],hi(`${r}`));break}Dn(`${e.id}-response`,()=>{const a={id:e.id,type:"success",value:e.cmd==="exec"?o.call(e.name,e.args):null};t.next(a)},10)}else Dn(`${e.id}-error`,()=>t.next({id:e.id,type:"error",code:i?pn.SYS_NOT_FOUND:pn.MOD_NOT_FOUND}),10)}function Rf(){for(const e in vt)vt[e]&&delete vt[e]}class xf{constructor(t,n){te(this,"name");te(this,"_pending",0);te(this,"_binding_count",0);te(this,"_stale_bindings",0);this._module=t,this.name=n,yE().pipe(cS()).subscribe(r=>{r&&(this._stale_bindings||this._pending===1)?(he("VAR","Re-binding to status variable",this.binding()),this.rebind()):r||(hi(`rebind:${JSON.stringify(this.binding())}`),he("VAR","Binding dropped due to disconnection, re-binding when possible.",this.binding()),this._stale_bindings=this._binding_count||this._stale_bindings,this._binding_count=0)})}get count(){return this._binding_count}get value(){return EE(this.binding())}listen(){return SE(this.binding())}subscribe(t){return this.listen().subscribe(t)}bindThenSubscribe(t){const n=this.bind();return this.listen().subscribe({next:t,complete:()=>n(),error:()=>n()})}bind(){return(this._binding_count<=0&&this._stale_bindings<=0||this._pending===2)&&(this._pending=1,Af(this.binding()).then(()=>{this._binding_count++,this._pending=0}).catch(()=>null)),()=>this.unbind()}unbind(){this._binding_count===1&&this._pending===0?(this._pending=2,wE(this.binding()).then(()=>{this._pending===2&&(this._pending=0),this._binding_count--})):this._binding_count=Math.max(this._binding_count-1,0)}async rebind(){!this._stale_bindings&&this._pending!==1||Dn(`rebind:${JSON.stringify(this.binding())}`,async()=>{await Af(this.binding()),this._binding_count=this._stale_bindings||1,this._stale_bindings=0},100)}binding(){return{sys:this._module.system.id,mod:this._module.name,index:this._module.index,name:this.name}}}class ME{constructor(t,n){te(this,"_bindings",{});this._system=t,this._id=n}get id(){return`${this.name}_${this.index}`}get system(){return this._system}get index(){const t=this._id.split("_").pop();return parseInt(t||"",10)||1}get name(){const t=this._id.split("_");return t.pop(),t.join("_")}binding(t){return this._bindings[t]||(this._bindings[t]=new xf(this,t)),this._bindings[t]}variable(t){return this._bindings[t]||(this._bindings[t]=new xf(this,t)),this._bindings[t]}execute(t,n,r=Tc){return bE({sys:this._system.id,mod:this.name,index:this.index,name:t,args:n},r)}}class PE{constructor(t){te(this,"id");te(this,"_module_list",{});this.id=t}module(t,n=1){if(!t)throw new Error("Invalid module ID");const r=t.split("_");r.length>1&&Number.isInteger(+r[r.length-1])&&(n=+r[r.length-1],r.pop()),n<1&&(n=1);const i=r.join("_");for(this._module_list[i]||(this._module_list[i]=[]);this._module_list[i].length<n;)this._module_list[i].push(new ME(this,`${i}_${this._module_list[i].length+1}`));return this._module_list[i][n-1]}}const nl={};function DE(e){return nl[e]||(nl[e]=new PE(e)),nl[e]}function om(e,t,n=1){return DE(e).module(t,n)}var au=function(e,t){return au=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},au(e,t)};function _i(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");au(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function OE(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function u(_){try{h(r.next(_))}catch(S){a(S)}}function d(_){try{h(r.throw(_))}catch(S){a(S)}}function h(_){_.done?o(_.value):i(_.value).then(u,d)}h((r=r.apply(e,t||[])).next())})}function am(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(h){return function(_){return d([h,_])}}function d(h){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,h[0]&&(n=0)),n;)try{if(r=1,i&&(o=h[0]&2?i.return:h[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,h[1])).done)return o;switch(i=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,i=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){n.label=h[1];break}if(h[0]===6&&n.label<o[1]){n.label=o[1],o=h;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(h);break}o[2]&&n.ops.pop(),n.trys.pop();continue}h=t.call(e,n)}catch(_){h=[6,_],i=0}finally{r=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function co(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ha(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o}function Wa(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}function Xr(e){return this instanceof Xr?(this.v=e,this):new Xr(e)}function IE(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(v){return function(x){return Promise.resolve(x).then(v,S)}}function u(v,x){r[v]&&(i[v]=function(w){return new Promise(function(N,A){o.push([v,w,N,A])>1||d(v,w)})},x&&(i[v]=x(i[v])))}function d(v,x){try{h(r[v](x))}catch(w){y(o[0][3],w)}}function h(v){v.value instanceof Xr?Promise.resolve(v.value.v).then(_,S):y(o[0][2],v)}function _(v){d("next",v)}function S(v){d("throw",v)}function y(v,x){v(x),o.shift(),o.length&&d(o[0][0],o[0][1])}}function NE(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof co=="function"?co(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(a){return new Promise(function(u,d){a=e[o](a),i(u,d,a.done,a.value)})}}function i(o,a,u,d){Promise.resolve(d).then(function(h){o({value:h,done:u})},a)}}function St(e){return typeof e=="function"}function sm(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var rl=sm(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function su(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var _s=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,r,i,o;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var u=co(a),d=u.next();!d.done;d=u.next()){var h=d.value;h.remove(this)}}catch(w){t={error:w}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}else a.remove(this);var _=this.initialTeardown;if(St(_))try{_()}catch(w){o=w instanceof rl?w.errors:[w]}var S=this._finalizers;if(S){this._finalizers=null;try{for(var y=co(S),v=y.next();!v.done;v=y.next()){var x=v.value;try{Cf(x)}catch(w){o=o??[],w instanceof rl?o=Wa(Wa([],Ha(o)),Ha(w.errors)):o.push(w)}}}catch(w){r={error:w}}finally{try{v&&!v.done&&(i=y.return)&&i.call(y)}finally{if(r)throw r.error}}}if(o)throw new rl(o)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)Cf(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&su(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&su(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}();_s.EMPTY;function lm(e){return e instanceof _s||e&&"closed"in e&&St(e.remove)&&St(e.add)&&St(e.unsubscribe)}function Cf(e){St(e)?e():e.unsubscribe()}var BE={Promise:void 0},UE={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,Wa([e,t],Ha(n)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function um(e){UE.setTimeout(function(){throw e})}function Tf(){}function jE(e){e()}var Mc=function(e){_i(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,lm(n)&&n.add(r)):r.destination=zE,r}return t.create=function(n,r,i){return new qa(n,r,i)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(_s),FE=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(r){Wo(r)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(r){Wo(r)}else Wo(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){Wo(n)}},e}(),qa=function(e){_i(t,e);function t(n,r,i){var o=e.call(this)||this,a;return St(n)||!n?a={next:n??void 0,error:r??void 0,complete:i??void 0}:a=n,o.destination=new FE(a),o}return t}(Mc);function Wo(e){um(e)}function VE(e){throw e}var zE={closed:!0,next:Tf,error:VE,complete:Tf},Pc=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function $E(e){return e}function GE(e){return e.length===0?$E:e.length===1?e[0]:function(n){return e.reduce(function(r,i){return i(r)},n)}}var ir=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var i=this,o=WE(t)?t:new qa(t,n,r);return jE(function(){var a=i,u=a.operator,d=a.source;o.add(u?u.call(o,d):d?i._subscribe(o):i._trySubscribe(o))}),o},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=Lf(n),new n(function(i,o){var a=new qa({next:function(u){try{t(u)}catch(d){o(d),a.unsubscribe()}},error:o,complete:i});r.subscribe(a)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[Pc]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return GE(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=Lf(t),new t(function(r,i){var o;n.subscribe(function(a){return o=a},function(a){return i(a)},function(){return r(o)})})},e.create=function(t){return new e(t)},e}();function Lf(e){var t;return(t=e??BE.Promise)!==null&&t!==void 0?t:Promise}function HE(e){return e&&St(e.next)&&St(e.error)&&St(e.complete)}function WE(e){return e&&e instanceof Mc||HE(e)&&lm(e)}function qE(e){return St(e==null?void 0:e.lift)}function cm(e){return function(t){if(qE(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Dc(e,t,n,r,i){return new KE(e,t,n,r,i)}var KE=function(e){_i(t,e);function t(n,r,i,o,a,u){var d=e.call(this,n)||this;return d.onFinalize=a,d.shouldUnsubscribe=u,d._next=r?function(h){try{r(h)}catch(_){n.error(_)}}:e.prototype._next,d._error=o?function(h){try{o(h)}catch(_){n.error(_)}finally{this.unsubscribe()}}:e.prototype._error,d._complete=i?function(){try{i()}catch(h){n.error(h)}finally{this.unsubscribe()}}:e.prototype._complete,d}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t}(Mc),YE={now:function(){return Date.now()}},QE=function(e){_i(t,e);function t(n,r){return e.call(this)||this}return t.prototype.schedule=function(n,r){return this},t}(_s),Mf={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,Wa([e,t],Ha(n)))},clearInterval:function(e){return clearInterval(e)},delegate:void 0},XE=function(e){_i(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return t.prototype.schedule=function(n,r){var i;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var o=this.id,a=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(a,o,r)),this.pending=!0,this.delay=r,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(a,this.id,r),this},t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),Mf.setInterval(n.flush.bind(n,this),i)},t.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;r!=null&&Mf.clearInterval(r)},t.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(n,r){var i=!1,o;try{this.work(n)}catch(a){i=!0,o=a||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o},t.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,i=n.scheduler,o=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,su(o,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(QE),Pf=function(){function e(t,n){n===void 0&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(t,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,t).schedule(r,n)},e.now=YE.now,e}(),ZE=function(e){_i(t,e);function t(n,r){r===void 0&&(r=Pf.now);var i=e.call(this,n,r)||this;return i.actions=[],i._active=!1,i}return t.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,i){for(;n=r.shift();)n.unsubscribe();throw i}},t}(Pf),JE=new ZE(XE),ew=JE,tw=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function nw(e){return St(e==null?void 0:e.then)}function rw(e){return St(e[Pc])}function iw(e){return Symbol.asyncIterator&&St(e==null?void 0:e[Symbol.asyncIterator])}function ow(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function aw(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var sw=aw();function lw(e){return St(e==null?void 0:e[sw])}function uw(e){return IE(this,arguments,function(){var n,r,i,o;return am(this,function(a){switch(a.label){case 0:n=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,Xr(n.read())];case 3:return r=a.sent(),i=r.value,o=r.done,o?[4,Xr(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,Xr(i)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function cw(e){return St(e==null?void 0:e.getReader)}function dm(e){if(e instanceof ir)return e;if(e!=null){if(rw(e))return dw(e);if(tw(e))return fw(e);if(nw(e))return hw(e);if(iw(e))return fm(e);if(lw(e))return pw(e);if(cw(e))return _w(e)}throw ow(e)}function dw(e){return new ir(function(t){var n=e[Pc]();if(St(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function fw(e){return new ir(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function hw(e){return new ir(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,um)})}function pw(e){return new ir(function(t){var n,r;try{for(var i=co(e),o=i.next();!o.done;o=i.next()){var a=o.value;if(t.next(a),t.closed)return}}catch(u){n={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()})}function fm(e){return new ir(function(t){mw(e,t).catch(function(n){return t.error(n)})})}function _w(e){return fm(uw(e))}function mw(e,t){var n,r,i,o;return OE(this,void 0,void 0,function(){var a,u;return am(this,function(d){switch(d.label){case 0:d.trys.push([0,5,6,11]),n=NE(e),d.label=1;case 1:return[4,n.next()];case 2:if(r=d.sent(),!!r.done)return[3,4];if(a=r.value,t.next(a),t.closed)return[2];d.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return u=d.sent(),i={error:u},[3,11];case 6:return d.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:d.sent(),d.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}var hm=sm(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});function gw(e,t){return new Promise(function(n,r){var i=!1,o;e.subscribe({next:function(a){o=a,i=!0},error:r,complete:function(){i?n(o):r(new hm)}})})}function wo(e,t){return new Promise(function(n,r){var i=new qa({next:function(o){n(o),i.unsubscribe()},error:r,complete:function(){r(new hm)}});e.subscribe(i)})}function vw(e){return e instanceof Date&&!isNaN(e)}function pm(e,t){return cm(function(n,r){var i=0;n.subscribe(Dc(r,function(o){r.next(e.call(t,o,i++))}))})}function _m(e,t,n){return n===void 0&&(n=ew),new ir(function(r){var i=vw(e)?+e-n.now():e;i<0&&(i=0);var o=0;return n.schedule(function(){r.closed||(r.next(o++),r.complete())},i)})}var yw=Array.isArray;function Sw(e){return e.length===1&&yw(e[0])?e[0]:e}function mm(e,t){return cm(function(n,r){var i=0;n.subscribe(Dc(r,function(o){return e.call(t,o,i++)&&r.next(o)}))})}function gm(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e=Sw(e),e.length===1?dm(e[0]):new ir(Ew(e))}function Ew(e){return function(t){for(var n=[],r=function(o){n.push(dm(e[o]).subscribe(Dc(t,function(a){if(n){for(var u=0;u<n.length;u++)u!==o&&n[u].unsubscribe();n=null}t.next(a)})))},i=0;n&&!t.closed&&i<e.length;i++)r(i)}}var vm=(e=>(e.Recording="recording",e.Booking="booking",e.AV="av",e.Lighting="lighting",e.HVAC="hvac",e.CameraControl="camera_control",e.PTZ="ptz",e.Signage="signage",e.AccessControl="access_control",e.Occupancy="occupancy",e))(vm||{});const ww=async()=>{try{const e=await wo(aE({limit:500,features:`${vm.Recording}`}));console.log("Query systems response: ",e);const t=(e==null?void 0:e.data)||[];return!Array.isArray(t)||t.length===0?[]:(console.log("Filtered systems response: ",t),t)}catch(e){throw console.error("Failed to fetch systems:",e),e}},bw=async e=>{try{return await wo(sE(e))}catch(t){throw console.error("Failed to fetch system:",t),t}},Aw=async e=>{try{return await wo(oE(e))}catch(t){return console.error(`Failed to fetch module ${e}:`,t),null}},ym=async e=>{try{const t=e.map(r=>Aw(r));return(await Promise.all(t)).filter(r=>r!==null)}catch(t){return console.error("Failed to fetch system modules:",t),[]}},kw=(e,t,n,r)=>{console.log(`Executing camera ${t} with ${n}`),console.log(`Executing module ${e} with ${r}`)},Rw="placeos-prod.avit.it.ucla.edu",xw=async(e,t)=>{try{console.log(`[getActiveNDIInputs] Starting for system: ${e}, module: ${t}`);const n=om(e,t),r=[],i=Array.from({length:6},(a,u)=>u+1).map(async a=>{const u=`NDI${a}_video_status`;try{const d=n.binding(u);d.bind();const h=await wo(gm(d.listen().pipe(mm(_=>typeof _=="boolean")),_m(3e3).pipe(pm(()=>!1))));return console.log(`[getActiveNDIInputs] ${u} = ${h}`),{input:a,active:h===!0}}catch(d){return console.log(`[getActiveNDIInputs]  ${u} error:`,d),{input:a,active:!1}}});return(await Promise.all(i)).forEach(({input:a,active:u})=>{u&&(r.push(a),console.log(`[getActiveNDIInputs]  Added NDI${a} to active inputs`))}),console.log("[getActiveNDIInputs] Final active inputs:",r.sort((a,u)=>a-u)),r.sort((a,u)=>a-u)}catch(n){return console.error("[getActiveNDIInputs] ERROR:",n),[]}},Sm=async(e,t)=>{try{console.log(`[generateCameraPreviews] Starting for system: ${e}`),console.log("[generateCameraPreviews] Total modules:",t.length);const n=t.filter(d=>d.name==="Recording");if(console.log(`[generateCameraPreviews] Found ${n.length} Recording modules`),n.length===0)return console.log("[generateCameraPreviews]  No Recording modules found"),[];const r=n[0],i={id:r.id,name:r.name,referenceName:"Recording_1",ip:r.ip||"",uri:r.uri||""};console.log("[generateCameraPreviews] Recording_1 details:",i);let o=null;if(i.ip)o=i.ip,console.log(`[generateCameraPreviews] Using IP: ${o}`);else if(i.uri)try{o=new URL(i.uri).hostname,console.log(`[generateCameraPreviews] Extracted IP from URI: ${o}`)}catch(d){console.error("[generateCameraPreviews] Failed to parse URI:",d)}if(!o)return console.log("[generateCameraPreviews]  No IP or URI found for Recording_1"),[];console.log("[generateCameraPreviews] Fetching active NDI inputs...");const a=await xw(e,i.referenceName);if(console.log("[generateCameraPreviews] Active NDI inputs:",a),a.length===0)return console.log("[generateCameraPreviews]  No active NDI inputs found"),[];const u=a.map(d=>{const h={module:i.referenceName,url:`https://${Rw}/epiphan/https/${o}/api/v2.0/inputs/NDI${d}/preview?resolution=300x300&keep_aspect_ratio=true&format=jpg`,label:`Recording - NDI${d}`};return console.log(`[generateCameraPreviews] Generated preview for NDI${d}:`,h.url),h});return console.log("[generateCameraPreviews]  Total previews generated:",u.length),u}catch(n){return console.error("[generateCameraPreviews] ERROR:",n),[]}};function Cw({previews:e,systemId:t}){const[n,r]=W.useState(0),i=e.slice(0,3),o=e.length-3;return W.useEffect(()=>{const a=setInterval(()=>{r(u=>u+1)},3e3);return()=>clearInterval(a)},[]),F.jsxs("div",{className:"flex-shrink-0",children:[F.jsxs("div",{className:"flex gap-2",children:[i.map((a,u)=>F.jsxs(Er,{to:`/systems/${t}?camera=${encodeURIComponent(a.module)}`,className:"w-48 h-48 rounded-lg overflow-hidden bg-base-300 relative group hover:ring-4 hover:ring-primary transition-all",children:[F.jsx("img",{src:`${a.url}&t=${n}`,alt:a.label,className:"w-full h-full object-cover"}),F.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-3",children:F.jsx("div",{className:"text-white text-sm font-medium",children:a.label})})]},u)),o>0&&F.jsxs(Er,{to:`/systems/${t}`,className:"w-48 h-48 rounded-lg bg-base-300 flex items-center justify-center text-2xl font-bold text-base-content/60 hover:bg-base-content/10 transition-colors",children:["+",o]})]}),F.jsxs("div",{className:"text-xs text-center mt-1 text-base-content/60",children:[e.length," camera",e.length!==1?"s":""]})]})}function Tw({system:e}){const t=e.camera_previews&&e.camera_previews.length>0;return F.jsx("div",{className:"card bg-base-200",children:F.jsx("div",{className:"card-body p-4",children:F.jsxs("div",{className:"flex gap-4",children:[t&&F.jsx(Cw,{previews:e.camera_previews,systemId:e.id}),F.jsxs(Er,{to:`/systems/${e.id}`,state:{system:e,modules:e.loadedModules,cameraPreviews:e.camera_previews},className:"flex-1 min-w-0 hover:opacity-70 transition-opacity",children:[F.jsx("h3",{className:"card-title text-base",children:e.name}),F.jsx("div",{className:"text-xs text-base-content/50 font-mono mt-1",children:e.id})]})]})})})}function Lw(){const[e,t]=W.useState([]),[n,r]=W.useState(!0),[i,o]=W.useState(null),[a,u]=W.useState("");W.useEffect(()=>{d()},[]);const d=async()=>{try{r(!0),o(null);const _=await ww(),S=await Promise.all(_.map(async y=>{if(!y.modules||y.modules.length===0)return{...y,loadedModules:[]};try{const v=await ym([...y.modules]),x=await Sm(y.id,v);return{...y,camera_previews:x.length>0?x:void 0,loadedModules:v}}catch(v){return console.error(`Failed to load modules for system ${y.id}:`,v),{...y,loadedModules:[]}}}));t(S)}catch(_){console.error("Error loading systems:",_),o(_ instanceof Error?_.message:"Failed to load systems")}finally{r(!1)}},h=e.filter(_=>{var S,y;return((S=_.name)==null?void 0:S.toLowerCase().includes(a.toLowerCase()))||((y=_.id)==null?void 0:y.toLowerCase().includes(a.toLowerCase()))});return F.jsxs("div",{className:"h-full flex flex-col",children:[F.jsxs("div",{className:"p-6 border-b border-base-300",children:[F.jsx("div",{className:"flex items-center gap-4",children:F.jsxs("div",{className:"flex-1 relative",children:[F.jsx(v1,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-base-content/50",size:20}),F.jsx("input",{type:"text",placeholder:"Search systems...",className:"input input-bordered w-full pl-10",value:a,onChange:_=>u(_.target.value)})]})}),!n&&F.jsxs("div",{className:"mt-2 text-sm text-base-content/60",children:[h.length," items"]})]}),F.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[n&&F.jsx("div",{className:"flex items-center justify-center h-64",children:F.jsx("span",{className:"loading loading-spinner loading-lg"})}),i&&F.jsx("div",{className:"alert alert-error",children:F.jsx("span",{children:i})}),!n&&!i&&h.length===0&&F.jsx("div",{className:"text-center py-12 text-base-content/60",children:a?"No systems found matching your search":"No systems available"}),!n&&!i&&h.length>0&&F.jsx("div",{className:"space-y-2",children:h.map(_=>F.jsx(Tw,{system:_},_.id))})]})]})}var Em={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(window,function(){return function(n){var r={};function i(o){if(r[o])return r[o].exports;var a=r[o]={i:o,l:!1,exports:{}};return n[o].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=n,i.c=r,i.d=function(o,a,u){i.o(o,a)||Object.defineProperty(o,a,{enumerable:!0,get:u})},i.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},i.t=function(o,a){if(1&a&&(o=i(o)),8&a||4&a&&typeof o=="object"&&o&&o.__esModule)return o;var u=Object.create(null);if(i.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:o}),2&a&&typeof o!="string")for(var d in o)i.d(u,d,(function(h){return o[h]}).bind(null,d));return u},i.n=function(o){var a=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(a,"a",a),a},i.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)},i.p="",i(i.s=20)}([function(n,r,i){var o=i(9),a=i.n(o),u=function(){function d(){}return d.e=function(h,_){h&&!d.FORCE_GLOBAL_TAG||(h=d.GLOBAL_TAG);var S="[".concat(h,"] > ").concat(_);d.ENABLE_CALLBACK&&d.emitter.emit("log","error",S),d.ENABLE_ERROR&&(console.error?console.error(S):console.warn?console.warn(S):console.log(S))},d.i=function(h,_){h&&!d.FORCE_GLOBAL_TAG||(h=d.GLOBAL_TAG);var S="[".concat(h,"] > ").concat(_);d.ENABLE_CALLBACK&&d.emitter.emit("log","info",S),d.ENABLE_INFO&&(console.info?console.info(S):console.log(S))},d.w=function(h,_){h&&!d.FORCE_GLOBAL_TAG||(h=d.GLOBAL_TAG);var S="[".concat(h,"] > ").concat(_);d.ENABLE_CALLBACK&&d.emitter.emit("log","warn",S),d.ENABLE_WARN&&(console.warn?console.warn(S):console.log(S))},d.d=function(h,_){h&&!d.FORCE_GLOBAL_TAG||(h=d.GLOBAL_TAG);var S="[".concat(h,"] > ").concat(_);d.ENABLE_CALLBACK&&d.emitter.emit("log","debug",S),d.ENABLE_DEBUG&&(console.debug?console.debug(S):console.log(S))},d.v=function(h,_){h&&!d.FORCE_GLOBAL_TAG||(h=d.GLOBAL_TAG);var S="[".concat(h,"] > ").concat(_);d.ENABLE_CALLBACK&&d.emitter.emit("log","verbose",S),d.ENABLE_VERBOSE&&console.log(S)},d}();u.GLOBAL_TAG="mpegts.js",u.FORCE_GLOBAL_TAG=!1,u.ENABLE_ERROR=!0,u.ENABLE_INFO=!0,u.ENABLE_WARN=!0,u.ENABLE_DEBUG=!0,u.ENABLE_VERBOSE=!0,u.ENABLE_CALLBACK=!1,u.emitter=new a.a,r.a=u},function(n,r,i){var o;(function(a){a.IO_ERROR="io_error",a.DEMUX_ERROR="demux_error",a.INIT_SEGMENT="init_segment",a.MEDIA_SEGMENT="media_segment",a.LOADING_COMPLETE="loading_complete",a.RECOVERED_EARLY_EOF="recovered_early_eof",a.MEDIA_INFO="media_info",a.METADATA_ARRIVED="metadata_arrived",a.SCRIPTDATA_ARRIVED="scriptdata_arrived",a.TIMED_ID3_METADATA_ARRIVED="timed_id3_metadata_arrived",a.SYNCHRONOUS_KLV_METADATA_ARRIVED="synchronous_klv_metadata_arrived",a.ASYNCHRONOUS_KLV_METADATA_ARRIVED="asynchronous_klv_metadata_arrived",a.SMPTE2038_METADATA_ARRIVED="smpte2038_metadata_arrived",a.SCTE35_METADATA_ARRIVED="scte35_metadata_arrived",a.PES_PRIVATE_DATA_DESCRIPTOR="pes_private_data_descriptor",a.PES_PRIVATE_DATA_ARRIVED="pes_private_data_arrived",a.STATISTICS_INFO="statistics_info",a.RECOMMEND_SEEKPOINT="recommend_seekpoint"})(o||(o={})),r.a=o},function(n,r,i){i.d(r,"c",function(){return a}),i.d(r,"b",function(){return u}),i.d(r,"a",function(){return d});var o=i(3),a={kIdle:0,kConnecting:1,kBuffering:2,kError:3,kComplete:4},u={OK:"OK",EXCEPTION:"Exception",HTTP_STATUS_CODE_INVALID:"HttpStatusCodeInvalid",CONNECTING_TIMEOUT:"ConnectingTimeout",EARLY_EOF:"EarlyEof",UNRECOVERABLE_EARLY_EOF:"UnrecoverableEarlyEof"},d=function(){function h(_){this._type=_||"undefined",this._status=a.kIdle,this._needStash=!1,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}return h.prototype.destroy=function(){this._status=a.kIdle,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null},h.prototype.isWorking=function(){return this._status===a.kConnecting||this._status===a.kBuffering},Object.defineProperty(h.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"needStashBuffer",{get:function(){return this._needStash},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"onContentLengthKnown",{get:function(){return this._onContentLengthKnown},set:function(_){this._onContentLengthKnown=_},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"onURLRedirect",{get:function(){return this._onURLRedirect},set:function(_){this._onURLRedirect=_},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(_){this._onDataArrival=_},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"onError",{get:function(){return this._onError},set:function(_){this._onError=_},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"onComplete",{get:function(){return this._onComplete},set:function(_){this._onComplete=_},enumerable:!1,configurable:!0}),h.prototype.open=function(_,S){throw new o.c("Unimplemented abstract function!")},h.prototype.abort=function(){throw new o.c("Unimplemented abstract function!")},h}()},function(n,r,i){i.d(r,"d",function(){return u}),i.d(r,"a",function(){return d}),i.d(r,"b",function(){return h}),i.d(r,"c",function(){return _});var o,a=(o=function(S,y){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,x){v.__proto__=x}||function(v,x){for(var w in x)Object.prototype.hasOwnProperty.call(x,w)&&(v[w]=x[w])})(S,y)},function(S,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function v(){this.constructor=S}o(S,y),S.prototype=y===null?Object.create(y):(v.prototype=y.prototype,new v)}),u=function(){function S(y){this._message=y}return Object.defineProperty(S.prototype,"name",{get:function(){return"RuntimeException"},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"message",{get:function(){return this._message},enumerable:!1,configurable:!0}),S.prototype.toString=function(){return this.name+": "+this.message},S}(),d=function(S){function y(v){return S.call(this,v)||this}return a(y,S),Object.defineProperty(y.prototype,"name",{get:function(){return"IllegalStateException"},enumerable:!1,configurable:!0}),y}(u),h=function(S){function y(v){return S.call(this,v)||this}return a(y,S),Object.defineProperty(y.prototype,"name",{get:function(){return"InvalidArgumentException"},enumerable:!1,configurable:!0}),y}(u),_=function(S){function y(v){return S.call(this,v)||this}return a(y,S),Object.defineProperty(y.prototype,"name",{get:function(){return"NotImplementedException"},enumerable:!1,configurable:!0}),y}(u)},function(n,r,i){var o;(function(a){a.ERROR="error",a.LOADING_COMPLETE="loading_complete",a.RECOVERED_EARLY_EOF="recovered_early_eof",a.MEDIA_INFO="media_info",a.METADATA_ARRIVED="metadata_arrived",a.SCRIPTDATA_ARRIVED="scriptdata_arrived",a.TIMED_ID3_METADATA_ARRIVED="timed_id3_metadata_arrived",a.SYNCHRONOUS_KLV_METADATA_ARRIVED="synchronous_klv_metadata_arrived",a.ASYNCHRONOUS_KLV_METADATA_ARRIVED="asynchronous_klv_metadata_arrived",a.SMPTE2038_METADATA_ARRIVED="smpte2038_metadata_arrived",a.SCTE35_METADATA_ARRIVED="scte35_metadata_arrived",a.PES_PRIVATE_DATA_DESCRIPTOR="pes_private_data_descriptor",a.PES_PRIVATE_DATA_ARRIVED="pes_private_data_arrived",a.STATISTICS_INFO="statistics_info",a.DESTROYING="destroying"})(o||(o={})),r.a=o},function(n,r,i){var o={};(function(){var a=self.navigator.userAgent.toLowerCase(),u=/(edge)\/([\w.]+)/.exec(a)||/(opr)[\/]([\w.]+)/.exec(a)||/(chrome)[ \/]([\w.]+)/.exec(a)||/(iemobile)[\/]([\w.]+)/.exec(a)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(firefox)[ \/]([\w.]+)/.exec(a)||[],d=/(ipad)/.exec(a)||/(ipod)/.exec(a)||/(windows phone)/.exec(a)||/(iphone)/.exec(a)||/(kindle)/.exec(a)||/(android)/.exec(a)||/(windows)/.exec(a)||/(mac)/.exec(a)||/(linux)/.exec(a)||/(cros)/.exec(a)||[],h={browser:u[5]||u[3]||u[1]||"",version:u[2]||u[4]||"0",majorVersion:u[4]||u[2]||"0",platform:d[0]||""},_={};if(h.browser){_[h.browser]=!0;var S=h.majorVersion.split(".");_.version={major:parseInt(h.majorVersion,10),string:h.version},S.length>1&&(_.version.minor=parseInt(S[1],10)),S.length>2&&(_.version.build=parseInt(S[2],10))}h.platform&&(_[h.platform]=!0),(_.chrome||_.opr||_.safari)&&(_.webkit=!0),(_.rv||_.iemobile)&&(_.rv&&delete _.rv,h.browser="msie",_.msie=!0),_.edge&&(delete _.edge,h.browser="msedge",_.msedge=!0),_.opr&&(h.browser="opera",_.opera=!0),_.safari&&_.android&&(h.browser="android",_.android=!0);for(var y in _.name=h.browser,_.platform=h.platform,o)o.hasOwnProperty(y)&&delete o[y];Object.assign(o,_)})(),r.a=o},function(n,r,i){r.a={OK:"OK",FORMAT_ERROR:"FormatError",FORMAT_UNSUPPORTED:"FormatUnsupported",CODEC_UNSUPPORTED:"CodecUnsupported"}},function(n,r,i){var o;(function(a){a.ERROR="error",a.SOURCE_OPEN="source_open",a.UPDATE_END="update_end",a.BUFFER_FULL="buffer_full",a.START_STREAMING="start_streaming",a.END_STREAMING="end_streaming"})(o||(o={})),r.a=o},function(n,r,i){var o=i(9),a=i.n(o),u=i(0),d=function(){function h(){}return Object.defineProperty(h,"forceGlobalTag",{get:function(){return u.a.FORCE_GLOBAL_TAG},set:function(_){u.a.FORCE_GLOBAL_TAG=_,h._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(h,"globalTag",{get:function(){return u.a.GLOBAL_TAG},set:function(_){u.a.GLOBAL_TAG=_,h._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(h,"enableAll",{get:function(){return u.a.ENABLE_VERBOSE&&u.a.ENABLE_DEBUG&&u.a.ENABLE_INFO&&u.a.ENABLE_WARN&&u.a.ENABLE_ERROR},set:function(_){u.a.ENABLE_VERBOSE=_,u.a.ENABLE_DEBUG=_,u.a.ENABLE_INFO=_,u.a.ENABLE_WARN=_,u.a.ENABLE_ERROR=_,h._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(h,"enableDebug",{get:function(){return u.a.ENABLE_DEBUG},set:function(_){u.a.ENABLE_DEBUG=_,h._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(h,"enableVerbose",{get:function(){return u.a.ENABLE_VERBOSE},set:function(_){u.a.ENABLE_VERBOSE=_,h._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(h,"enableInfo",{get:function(){return u.a.ENABLE_INFO},set:function(_){u.a.ENABLE_INFO=_,h._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(h,"enableWarn",{get:function(){return u.a.ENABLE_WARN},set:function(_){u.a.ENABLE_WARN=_,h._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(h,"enableError",{get:function(){return u.a.ENABLE_ERROR},set:function(_){u.a.ENABLE_ERROR=_,h._notifyChange()},enumerable:!1,configurable:!0}),h.getConfig=function(){return{globalTag:u.a.GLOBAL_TAG,forceGlobalTag:u.a.FORCE_GLOBAL_TAG,enableVerbose:u.a.ENABLE_VERBOSE,enableDebug:u.a.ENABLE_DEBUG,enableInfo:u.a.ENABLE_INFO,enableWarn:u.a.ENABLE_WARN,enableError:u.a.ENABLE_ERROR,enableCallback:u.a.ENABLE_CALLBACK}},h.applyConfig=function(_){u.a.GLOBAL_TAG=_.globalTag,u.a.FORCE_GLOBAL_TAG=_.forceGlobalTag,u.a.ENABLE_VERBOSE=_.enableVerbose,u.a.ENABLE_DEBUG=_.enableDebug,u.a.ENABLE_INFO=_.enableInfo,u.a.ENABLE_WARN=_.enableWarn,u.a.ENABLE_ERROR=_.enableError,u.a.ENABLE_CALLBACK=_.enableCallback},h._notifyChange=function(){var _=h.emitter;if(_.listenerCount("change")>0){var S=h.getConfig();_.emit("change",S)}},h.registerListener=function(_){h.emitter.addListener("change",_)},h.removeListener=function(_){h.emitter.removeListener("change",_)},h.addLogListener=function(_){u.a.emitter.addListener("log",_),u.a.emitter.listenerCount("log")>0&&(u.a.ENABLE_CALLBACK=!0,h._notifyChange())},h.removeLogListener=function(_){u.a.emitter.removeListener("log",_),u.a.emitter.listenerCount("log")===0&&(u.a.ENABLE_CALLBACK=!1,h._notifyChange())},h}();d.emitter=new a.a,r.a=d},function(n,r,i){var o,a=typeof Reflect=="object"?Reflect:null,u=a&&typeof a.apply=="function"?a.apply:function(M,z,H){return Function.prototype.apply.call(M,z,H)};o=a&&typeof a.ownKeys=="function"?a.ownKeys:Object.getOwnPropertySymbols?function(M){return Object.getOwnPropertyNames(M).concat(Object.getOwnPropertySymbols(M))}:function(M){return Object.getOwnPropertyNames(M)};var d=Number.isNaN||function(M){return M!=M};function h(){h.init.call(this)}n.exports=h,n.exports.once=function(M,z){return new Promise(function(H,U){function R(k){M.removeListener(z,C),U(k)}function C(){typeof M.removeListener=="function"&&M.removeListener("error",R),H([].slice.call(arguments))}T(M,z,C,{once:!0}),z!=="error"&&function(k,P,Y){typeof k.on=="function"&&T(k,"error",P,Y)}(M,R,{once:!0})})},h.EventEmitter=h,h.prototype._events=void 0,h.prototype._eventsCount=0,h.prototype._maxListeners=void 0;var _=10;function S(M){if(typeof M!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof M)}function y(M){return M._maxListeners===void 0?h.defaultMaxListeners:M._maxListeners}function v(M,z,H,U){var R,C,k,P;if(S(H),(C=M._events)===void 0?(C=M._events=Object.create(null),M._eventsCount=0):(C.newListener!==void 0&&(M.emit("newListener",z,H.listener?H.listener:H),C=M._events),k=C[z]),k===void 0)k=C[z]=H,++M._eventsCount;else if(typeof k=="function"?k=C[z]=U?[H,k]:[k,H]:U?k.unshift(H):k.push(H),(R=y(M))>0&&k.length>R&&!k.warned){k.warned=!0;var Y=new Error("Possible EventEmitter memory leak detected. "+k.length+" "+String(z)+" listeners added. Use emitter.setMaxListeners() to increase limit");Y.name="MaxListenersExceededWarning",Y.emitter=M,Y.type=z,Y.count=k.length,P=Y,console&&console.warn&&console.warn(P)}return M}function x(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function w(M,z,H){var U={fired:!1,wrapFn:void 0,target:M,type:z,listener:H},R=x.bind(U);return R.listener=H,U.wrapFn=R,R}function N(M,z,H){var U=M._events;if(U===void 0)return[];var R=U[z];return R===void 0?[]:typeof R=="function"?H?[R.listener||R]:[R]:H?function(C){for(var k=new Array(C.length),P=0;P<k.length;++P)k[P]=C[P].listener||C[P];return k}(R):E(R,R.length)}function A(M){var z=this._events;if(z!==void 0){var H=z[M];if(typeof H=="function")return 1;if(H!==void 0)return H.length}return 0}function E(M,z){for(var H=new Array(z),U=0;U<z;++U)H[U]=M[U];return H}function T(M,z,H,U){if(typeof M.on=="function")U.once?M.once(z,H):M.on(z,H);else{if(typeof M.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof M);M.addEventListener(z,function R(C){U.once&&M.removeEventListener(z,R),H(C)})}}Object.defineProperty(h,"defaultMaxListeners",{enumerable:!0,get:function(){return _},set:function(M){if(typeof M!="number"||M<0||d(M))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+M+".");_=M}}),h.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},h.prototype.setMaxListeners=function(M){if(typeof M!="number"||M<0||d(M))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+M+".");return this._maxListeners=M,this},h.prototype.getMaxListeners=function(){return y(this)},h.prototype.emit=function(M){for(var z=[],H=1;H<arguments.length;H++)z.push(arguments[H]);var U=M==="error",R=this._events;if(R!==void 0)U=U&&R.error===void 0;else if(!U)return!1;if(U){var C;if(z.length>0&&(C=z[0]),C instanceof Error)throw C;var k=new Error("Unhandled error."+(C?" ("+C.message+")":""));throw k.context=C,k}var P=R[M];if(P===void 0)return!1;if(typeof P=="function")u(P,this,z);else{var Y=P.length,J=E(P,Y);for(H=0;H<Y;++H)u(J[H],this,z)}return!0},h.prototype.addListener=function(M,z){return v(this,M,z,!1)},h.prototype.on=h.prototype.addListener,h.prototype.prependListener=function(M,z){return v(this,M,z,!0)},h.prototype.once=function(M,z){return S(z),this.on(M,w(this,M,z)),this},h.prototype.prependOnceListener=function(M,z){return S(z),this.prependListener(M,w(this,M,z)),this},h.prototype.removeListener=function(M,z){var H,U,R,C,k;if(S(z),(U=this._events)===void 0)return this;if((H=U[M])===void 0)return this;if(H===z||H.listener===z)--this._eventsCount==0?this._events=Object.create(null):(delete U[M],U.removeListener&&this.emit("removeListener",M,H.listener||z));else if(typeof H!="function"){for(R=-1,C=H.length-1;C>=0;C--)if(H[C]===z||H[C].listener===z){k=H[C].listener,R=C;break}if(R<0)return this;R===0?H.shift():function(P,Y){for(;Y+1<P.length;Y++)P[Y]=P[Y+1];P.pop()}(H,R),H.length===1&&(U[M]=H[0]),U.removeListener!==void 0&&this.emit("removeListener",M,k||z)}return this},h.prototype.off=h.prototype.removeListener,h.prototype.removeAllListeners=function(M){var z,H,U;if((H=this._events)===void 0)return this;if(H.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):H[M]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete H[M]),this;if(arguments.length===0){var R,C=Object.keys(H);for(U=0;U<C.length;++U)(R=C[U])!=="removeListener"&&this.removeAllListeners(R);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(z=H[M])=="function")this.removeListener(M,z);else if(z!==void 0)for(U=z.length-1;U>=0;U--)this.removeListener(M,z[U]);return this},h.prototype.listeners=function(M){return N(this,M,!0)},h.prototype.rawListeners=function(M){return N(this,M,!1)},h.listenerCount=function(M,z){return typeof M.listenerCount=="function"?M.listenerCount(z):A.call(M,z)},h.prototype.listenerCount=A,h.prototype.eventNames=function(){return this._eventsCount>0?o(this._events):[]}},function(n,r,i){i.d(r,"b",function(){return u}),i.d(r,"a",function(){return d});var o=i(2),a=i(6),u={NETWORK_ERROR:"NetworkError",MEDIA_ERROR:"MediaError",OTHER_ERROR:"OtherError"},d={NETWORK_EXCEPTION:o.b.EXCEPTION,NETWORK_STATUS_CODE_INVALID:o.b.HTTP_STATUS_CODE_INVALID,NETWORK_TIMEOUT:o.b.CONNECTING_TIMEOUT,NETWORK_UNRECOVERABLE_EARLY_EOF:o.b.UNRECOVERABLE_EARLY_EOF,MEDIA_MSE_ERROR:"MediaMSEError",MEDIA_FORMAT_ERROR:a.a.FORMAT_ERROR,MEDIA_FORMAT_UNSUPPORTED:a.a.FORMAT_UNSUPPORTED,MEDIA_CODEC_UNSUPPORTED:a.a.CODEC_UNSUPPORTED}},function(n,r,i){i.d(r,"d",function(){return o}),i.d(r,"b",function(){return a}),i.d(r,"a",function(){return u}),i.d(r,"c",function(){return d});var o=function(h,_,S,y,v){this.dts=h,this.pts=_,this.duration=S,this.originalDts=y,this.isSyncPoint=v,this.fileposition=null},a=function(){function h(){this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}return h.prototype.appendSyncPoint=function(_){_.isSyncPoint=!0,this.syncPoints.push(_)},h}(),u=function(){function h(){this._list=[]}return h.prototype.clear=function(){this._list=[]},h.prototype.appendArray=function(_){var S=this._list;_.length!==0&&(S.length>0&&_[0].originalDts<S[S.length-1].originalDts&&this.clear(),Array.prototype.push.apply(S,_))},h.prototype.getLastSyncPointBeforeDts=function(_){if(this._list.length==0)return null;var S=this._list,y=0,v=S.length-1,x=0,w=0,N=v;for(_<S[0].dts&&(y=0,w=N+1);w<=N;){if((x=w+Math.floor((N-w)/2))===v||_>=S[x].dts&&_<S[x+1].dts){y=x;break}S[x].dts<_?w=x+1:N=x-1}return this._list[y]},h}(),d=function(){function h(_){this._type=_,this._list=[],this._lastAppendLocation=-1}return Object.defineProperty(h.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"length",{get:function(){return this._list.length},enumerable:!1,configurable:!0}),h.prototype.isEmpty=function(){return this._list.length===0},h.prototype.clear=function(){this._list=[],this._lastAppendLocation=-1},h.prototype._searchNearestSegmentBefore=function(_){var S=this._list;if(S.length===0)return-2;var y=S.length-1,v=0,x=0,w=y,N=0;if(_<S[0].originalBeginDts)return N=-1;for(;x<=w;){if((v=x+Math.floor((w-x)/2))===y||_>S[v].lastSample.originalDts&&_<S[v+1].originalBeginDts){N=v;break}S[v].originalBeginDts<_?x=v+1:w=v-1}return N},h.prototype._searchNearestSegmentAfter=function(_){return this._searchNearestSegmentBefore(_)+1},h.prototype.append=function(_){var S=this._list,y=_,v=this._lastAppendLocation,x=0;v!==-1&&v<S.length&&y.originalBeginDts>=S[v].lastSample.originalDts&&(v===S.length-1||v<S.length-1&&y.originalBeginDts<S[v+1].originalBeginDts)?x=v+1:S.length>0&&(x=this._searchNearestSegmentBefore(y.originalBeginDts)+1),this._lastAppendLocation=x,this._list.splice(x,0,y)},h.prototype.getLastSegmentBefore=function(_){var S=this._searchNearestSegmentBefore(_);return S>=0?this._list[S]:null},h.prototype.getLastSampleBefore=function(_){var S=this.getLastSegmentBefore(_);return S!=null?S.lastSample:null},h.prototype.getLastSyncPointBefore=function(_){for(var S=this._searchNearestSegmentBefore(_),y=this._list[S].syncPoints;y.length===0&&S>0;)S--,y=this._list[S].syncPoints;return y.length>0?y[y.length-1]:null},h}()},function(n,r,i){var o=function(){function a(){this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.refFrames=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}return a.prototype.isComplete=function(){var u=this.hasAudio===!1||this.hasAudio===!0&&this.audioCodec!=null&&this.audioSampleRate!=null&&this.audioChannelCount!=null,d=this.hasVideo===!1||this.hasVideo===!0&&this.videoCodec!=null&&this.width!=null&&this.height!=null&&this.fps!=null&&this.profile!=null&&this.level!=null&&this.refFrames!=null&&this.chromaFormat!=null&&this.sarNum!=null&&this.sarDen!=null;return this.mimeType!=null&&u&&d},a.prototype.isSeekable=function(){return this.hasKeyframesIndex===!0},a.prototype.getNearestKeyframe=function(u){if(this.keyframesIndex==null)return null;var d=this.keyframesIndex,h=this._search(d.times,u);return{index:h,milliseconds:d.times[h],fileposition:d.filepositions[h]}},a.prototype._search=function(u,d){var h=0,_=u.length-1,S=0,y=0,v=_;for(d<u[0]&&(h=0,y=v+1);y<=v;){if((S=y+Math.floor((v-y)/2))===_||d>=u[S]&&d<u[S+1]){h=S;break}u[S]<d?y=S+1:v=S-1}return h},a}();r.a=o},function(n,r,i){var o=i(9),a=i.n(o),u=i(0),d=i(5),h=i(12);function _(f,c,l){var s=f;if(c+l<s.length){for(;l--;)if((192&s[++c])!=128)return!1;return!0}return!1}var S,y=function(f){for(var c=[],l=f,s=0,p=f.length;s<p;)if(l[s]<128)c.push(String.fromCharCode(l[s])),++s;else{if(!(l[s]<192)){if(l[s]<224){if(_(l,s,1)&&(g=(31&l[s])<<6|63&l[s+1])>=128){c.push(String.fromCharCode(65535&g)),s+=2;continue}}else if(l[s]<240){if(_(l,s,2)&&(g=(15&l[s])<<12|(63&l[s+1])<<6|63&l[s+2])>=2048&&(63488&g)!=55296){c.push(String.fromCharCode(65535&g)),s+=3;continue}}else if(l[s]<248){var g;if(_(l,s,3)&&(g=(7&l[s])<<18|(63&l[s+1])<<12|(63&l[s+2])<<6|63&l[s+3])>65536&&g<1114112){g-=65536,c.push(String.fromCharCode(g>>>10|55296)),c.push(String.fromCharCode(1023&g|56320)),s+=4;continue}}}c.push(""),++s}return c.join("")},v=i(3),x=(S=new ArrayBuffer(2),new DataView(S).setInt16(0,256,!0),new Int16Array(S)[0]===256),w=function(){function f(){}return f.parseScriptData=function(c,l,s){var p={};try{var g=f.parseValue(c,l,s),m=f.parseValue(c,l+g.size,s-g.size);p[g.data]=m.data}catch(b){u.a.e("AMF",b.toString())}return p},f.parseObject=function(c,l,s){if(s<3)throw new v.a("Data not enough when parse ScriptDataObject");var p=f.parseString(c,l,s),g=f.parseValue(c,l+p.size,s-p.size),m=g.objectEnd;return{data:{name:p.data,value:g.data},size:p.size+g.size,objectEnd:m}},f.parseVariable=function(c,l,s){return f.parseObject(c,l,s)},f.parseString=function(c,l,s){if(s<2)throw new v.a("Data not enough when parse String");var p=new DataView(c,l,s).getUint16(0,!x);return{data:p>0?y(new Uint8Array(c,l+2,p)):"",size:2+p}},f.parseLongString=function(c,l,s){if(s<4)throw new v.a("Data not enough when parse LongString");var p=new DataView(c,l,s).getUint32(0,!x);return{data:p>0?y(new Uint8Array(c,l+4,p)):"",size:4+p}},f.parseDate=function(c,l,s){if(s<10)throw new v.a("Data size invalid when parse Date");var p=new DataView(c,l,s),g=p.getFloat64(0,!x),m=p.getInt16(8,!x);return{data:new Date(g+=60*m*1e3),size:10}},f.parseValue=function(c,l,s){if(s<1)throw new v.a("Data not enough when parse Value");var p,g=new DataView(c,l,s),m=1,b=g.getUint8(0),O=!1;try{switch(b){case 0:p=g.getFloat64(1,!x),m+=8;break;case 1:p=!!g.getUint8(1),m+=1;break;case 2:var D=f.parseString(c,l+1,s-1);p=D.data,m+=D.size;break;case 3:p={};var B=0;for((16777215&g.getUint32(s-4,!x))==9&&(B=3);m<s-4;){var V=f.parseObject(c,l+m,s-m-B);if(V.objectEnd)break;p[V.data.name]=V.data.value,m+=V.size}m<=s-3&&(16777215&g.getUint32(m-1,!x))===9&&(m+=3);break;case 8:for(p={},m+=4,B=0,(16777215&g.getUint32(s-4,!x))==9&&(B=3);m<s-8;){var j=f.parseVariable(c,l+m,s-m-B);if(j.objectEnd)break;p[j.data.name]=j.data.value,m+=j.size}m<=s-3&&(16777215&g.getUint32(m-1,!x))===9&&(m+=3);break;case 9:p=void 0,m=1,O=!0;break;case 10:p=[];var G=g.getUint32(1,!x);m+=4;for(var K=0;K<G;K++){var re=f.parseValue(c,l+m,s-m);p.push(re.data),m+=re.size}break;case 11:var X=f.parseDate(c,l+1,s-1);p=X.data,m+=X.size;break;case 12:var ue=f.parseString(c,l+1,s-1);p=ue.data,m+=ue.size;break;default:m=s,u.a.w("AMF","Unsupported AMF value type "+b)}}catch(se){u.a.e("AMF",se.toString())}return{data:p,size:m,objectEnd:O}},f}(),N=function(){function f(c){this.TAG="ExpGolomb",this._buffer=c,this._buffer_index=0,this._total_bytes=c.byteLength,this._total_bits=8*c.byteLength,this._current_word=0,this._current_word_bits_left=0}return f.prototype.destroy=function(){this._buffer=null},f.prototype._fillCurrentWord=function(){var c=this._total_bytes-this._buffer_index;if(c<=0)throw new v.a("ExpGolomb: _fillCurrentWord() but no bytes available");var l=Math.min(4,c),s=new Uint8Array(4);s.set(this._buffer.subarray(this._buffer_index,this._buffer_index+l)),this._current_word=new DataView(s.buffer).getUint32(0,!1),this._buffer_index+=l,this._current_word_bits_left=8*l},f.prototype.readBits=function(c){if(c>32)throw new v.b("ExpGolomb: readBits() bits exceeded max 32bits!");if(c<=this._current_word_bits_left){var l=this._current_word>>>32-c;return this._current_word<<=c,this._current_word_bits_left-=c,l}var s=this._current_word_bits_left?this._current_word:0;s>>>=32-this._current_word_bits_left;var p=c-this._current_word_bits_left;this._fillCurrentWord();var g=Math.min(p,this._current_word_bits_left),m=this._current_word>>>32-g;return this._current_word<<=g,this._current_word_bits_left-=g,s=s<<g|m},f.prototype.readBool=function(){return this.readBits(1)===1},f.prototype.readByte=function(){return this.readBits(8)},f.prototype._skipLeadingZero=function(){var c;for(c=0;c<this._current_word_bits_left;c++)if(this._current_word&2147483648>>>c)return this._current_word<<=c,this._current_word_bits_left-=c,c;return this._fillCurrentWord(),c+this._skipLeadingZero()},f.prototype.readUEG=function(){var c=this._skipLeadingZero();return this.readBits(c+1)-1},f.prototype.readSEG=function(){var c=this.readUEG();return 1&c?c+1>>>1:-1*(c>>>1)},f}(),A=function(){function f(){}return f._ebsp2rbsp=function(c){for(var l=c,s=l.byteLength,p=new Uint8Array(s),g=0,m=0;m<s;m++)m>=2&&l[m]===3&&l[m-1]===0&&l[m-2]===0||(p[g]=l[m],g++);return new Uint8Array(p.buffer,0,g)},f.parseSPS=function(c){for(var l=c.subarray(1,4),s="avc1.",p=0;p<3;p++){var g=l[p].toString(16);g.length<2&&(g="0"+g),s+=g}var m=f._ebsp2rbsp(c),b=new N(m);b.readByte();var O=b.readByte();b.readByte();var D=b.readByte();b.readUEG();var B=f.getProfileString(O),V=f.getLevelString(D),j=1,G=420,K=8,re=8;if((O===100||O===110||O===122||O===244||O===44||O===83||O===86||O===118||O===128||O===138||O===144)&&((j=b.readUEG())===3&&b.readBits(1),j<=3&&(G=[0,420,422,444][j]),K=b.readUEG()+8,re=b.readUEG()+8,b.readBits(1),b.readBool()))for(var X=j!==3?8:12,ue=0;ue<X;ue++)b.readBool()&&(ue<6?f._skipScalingList(b,16):f._skipScalingList(b,64));b.readUEG();var se=b.readUEG();if(se===0)b.readUEG();else if(se===1){b.readBits(1),b.readSEG(),b.readSEG();var ae=b.readUEG();for(ue=0;ue<ae;ue++)b.readSEG()}var ge=b.readUEG();b.readBits(1);var ke=b.readUEG(),le=b.readUEG(),me=b.readBits(1);me===0&&b.readBits(1),b.readBits(1);var Re=0,ve=0,Ee=0,Me=0;b.readBool()&&(Re=b.readUEG(),ve=b.readUEG(),Ee=b.readUEG(),Me=b.readUEG());var Ne=1,we=1,xe=0,Ue=!0,Ze=0,Jt=0;if(b.readBool()){if(b.readBool()){var pt=b.readByte();pt>0&&pt<16?(Ne=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][pt-1],we=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][pt-1]):pt===255&&(Ne=b.readByte()<<8|b.readByte(),we=b.readByte()<<8|b.readByte())}if(b.readBool()&&b.readBool(),b.readBool()&&(b.readBits(4),b.readBool()&&b.readBits(24)),b.readBool()&&(b.readUEG(),b.readUEG()),b.readBool()){var It=b.readBits(32),wt=b.readBits(32);Ue=b.readBool(),xe=(Ze=wt)/(Jt=2*It)}}var _t=1;Ne===1&&we===1||(_t=Ne/we);var bt=0,Ie=0;j===0?(bt=1,Ie=2-me):(bt=j===3?1:2,Ie=(j===1?2:1)*(2-me));var yn=16*(ke+1),Sn=16*(le+1)*(2-me);yn-=(Re+ve)*bt,Sn-=(Ee+Me)*Ie;var Ao=Math.ceil(yn*_t);return b.destroy(),b=null,{codec_mimetype:s,profile_idc:O,level_idc:D,profile_string:B,level_string:V,chroma_format_idc:j,bit_depth:K,bit_depth_luma:K,bit_depth_chroma:re,ref_frames:ge,chroma_format:G,chroma_format_string:f.getChromaFormatString(G),frame_rate:{fixed:Ue,fps:xe,fps_den:Jt,fps_num:Ze},sar_ratio:{width:Ne,height:we},codec_size:{width:yn,height:Sn},present_size:{width:Ao,height:Sn}}},f._skipScalingList=function(c,l){for(var s=8,p=8,g=0;g<l;g++)p!==0&&(p=(s+c.readSEG()+256)%256),s=p===0?s:p},f.getProfileString=function(c){switch(c){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}},f.getLevelString=function(c){return(c/10).toFixed(1)},f.getChromaFormatString=function(c){switch(c){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}},f}(),E=i(6),T=function(){function f(){}return f._ebsp2rbsp=function(c){for(var l=c,s=l.byteLength,p=new Uint8Array(s),g=0,m=0;m<s;m++)m>=2&&l[m]===3&&l[m-1]===0&&l[m-2]===0||(p[g]=l[m],g++);return new Uint8Array(p.buffer,0,g)},f.parseVPS=function(c){var l=f._ebsp2rbsp(c),s=new N(l);return s.readByte(),s.readByte(),s.readBits(4),s.readBits(2),s.readBits(6),{num_temporal_layers:s.readBits(3)+1,temporal_id_nested:s.readBool()}},f.parseSPS=function(c){var l=f._ebsp2rbsp(c),s=new N(l);s.readByte(),s.readByte();for(var p=0,g=0,m=0,b=0,O=(s.readBits(4),s.readBits(3)),D=(s.readBool(),s.readBits(2)),B=s.readBool(),V=s.readBits(5),j=s.readByte(),G=s.readByte(),K=s.readByte(),re=s.readByte(),X=s.readByte(),ue=s.readByte(),se=s.readByte(),ae=s.readByte(),ge=s.readByte(),ke=s.readByte(),le=s.readByte(),me=[],Re=[],ve=0;ve<O;ve++)me.push(s.readBool()),Re.push(s.readBool());if(O>0)for(ve=O;ve<8;ve++)s.readBits(2);for(ve=0;ve<O;ve++)me[ve]&&(s.readByte(),s.readByte(),s.readByte(),s.readByte(),s.readByte(),s.readByte(),s.readByte(),s.readByte(),s.readByte(),s.readByte(),s.readByte()),Re[ve]&&s.readByte();s.readUEG();var Ee=s.readUEG();Ee==3&&s.readBits(1);var Me=s.readUEG(),Ne=s.readUEG();s.readBool()&&(p+=s.readUEG(),g+=s.readUEG(),m+=s.readUEG(),b+=s.readUEG());var we=s.readUEG(),xe=s.readUEG(),Ue=s.readUEG();for(ve=s.readBool()?0:O;ve<=O;ve++)s.readUEG(),s.readUEG(),s.readUEG();if(s.readUEG(),s.readUEG(),s.readUEG(),s.readUEG(),s.readUEG(),s.readUEG(),s.readBool()&&s.readBool())for(var Ze=0;Ze<4;Ze++)for(var Jt=0;Jt<(Ze===3?2:6);Jt++)if(s.readBool()){var pt=Math.min(64,1<<4+(Ze<<1));for(Ze>1&&s.readSEG(),ve=0;ve<pt;ve++)s.readSEG()}else s.readUEG();s.readBool(),s.readBool(),s.readBool()&&(s.readByte(),s.readUEG(),s.readUEG(),s.readBool());var It=s.readUEG(),wt=0;for(ve=0;ve<It;ve++){var _t=!1;if(ve!==0&&(_t=s.readBool()),_t){ve===It&&s.readUEG(),s.readBool(),s.readUEG();for(var bt=0,Ie=0;Ie<=wt;Ie++){var yn=s.readBool(),Sn=!1;yn||(Sn=s.readBool()),(yn||Sn)&&bt++}wt=bt}else{var Ao=s.readUEG(),jc=s.readUEG();for(wt=Ao+jc,Ie=0;Ie<Ao;Ie++)s.readUEG(),s.readBool();for(Ie=0;Ie<jc;Ie++)s.readUEG(),s.readBool()}}if(s.readBool()){var Qm=s.readUEG();for(ve=0;ve<Qm;ve++){for(Ie=0;Ie<Ue+4;Ie++)s.readBits(1);s.readBits(1)}}var Fc=0,gi=1,vi=1,Vc=!1,vs=1,ys=1;if(s.readBool(),s.readBool(),s.readBool()){if(s.readBool()){var yi=s.readByte();yi>0&&yi<=16?(gi=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][yi-1],vi=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][yi-1]):yi===255&&(gi=s.readBits(16),vi=s.readBits(16))}if(s.readBool()&&s.readBool(),s.readBool()&&(s.readBits(3),s.readBool(),s.readBool()&&(s.readByte(),s.readByte(),s.readByte())),s.readBool()&&(s.readUEG(),s.readUEG()),s.readBool(),s.readBool(),s.readBool(),s.readBool()&&(s.readUEG(),s.readUEG(),s.readUEG(),s.readUEG()),s.readBool()&&(vs=s.readBits(32),ys=s.readBits(32),s.readBool()&&s.readUEG(),s.readBool())){var Ss=!1,Es=!1,ko=!1;for(Ss=s.readBool(),Es=s.readBool(),(Ss||Es)&&((ko=s.readBool())&&(s.readByte(),s.readBits(5),s.readBool(),s.readBits(5)),s.readBits(4),s.readBits(4),ko&&s.readBits(4),s.readBits(5),s.readBits(5),s.readBits(5)),ve=0;ve<=O;ve++){var zc=s.readBool();Vc=zc;var $c=!0,ws=1;zc||($c=s.readBool());var Gc=!1;if($c?s.readUEG():Gc=s.readBool(),Gc||(ws=s.readUEG()+1),Ss){for(Ie=0;Ie<ws;Ie++)s.readUEG(),s.readUEG(),ko&&(s.readUEG(),s.readUEG());s.readBool()}if(Es){for(Ie=0;Ie<ws;Ie++)s.readUEG(),s.readUEG(),ko&&(s.readUEG(),s.readUEG());s.readBool()}}}s.readBool()&&(s.readBool(),s.readBool(),s.readBool(),Fc=s.readUEG(),s.readUEG(),s.readUEG(),s.readUEG(),s.readUEG())}s.readBool();var Xm="hvc1.".concat(V,".1.L").concat(le,".B0"),Hc=Me-(p+g)*(Ee===1||Ee===2?2:1),Wc=Ne-(m+b)*(Ee===1?2:1),qc=1;return gi!==1&&vi!==1&&(qc=gi/vi),s.destroy(),s=null,{codec_mimetype:Xm,profile_string:f.getProfileString(V),level_string:f.getLevelString(le),profile_idc:V,bit_depth:we+8,ref_frames:1,chroma_format:Ee,chroma_format_string:f.getChromaFormatString(Ee),general_level_idc:le,general_profile_space:D,general_tier_flag:B,general_profile_idc:V,general_profile_compatibility_flags_1:j,general_profile_compatibility_flags_2:G,general_profile_compatibility_flags_3:K,general_profile_compatibility_flags_4:re,general_constraint_indicator_flags_1:X,general_constraint_indicator_flags_2:ue,general_constraint_indicator_flags_3:se,general_constraint_indicator_flags_4:ae,general_constraint_indicator_flags_5:ge,general_constraint_indicator_flags_6:ke,min_spatial_segmentation_idc:Fc,constant_frame_rate:0,chroma_format_idc:Ee,bit_depth_luma_minus8:we,bit_depth_chroma_minus8:xe,frame_rate:{fixed:Vc,fps:ys/vs,fps_den:vs,fps_num:ys},sar_ratio:{width:gi,height:vi},codec_size:{width:Hc,height:Wc},present_size:{width:Hc*qc,height:Wc}}},f.parsePPS=function(c){var l=f._ebsp2rbsp(c),s=new N(l);s.readByte(),s.readByte(),s.readUEG(),s.readUEG(),s.readBool(),s.readBool(),s.readBits(3),s.readBool(),s.readBool(),s.readUEG(),s.readUEG(),s.readSEG(),s.readBool(),s.readBool(),s.readBool()&&s.readUEG(),s.readSEG(),s.readSEG(),s.readBool(),s.readBool(),s.readBool(),s.readBool();var p=s.readBool(),g=s.readBool(),m=1;return g&&p?m=0:g?m=3:p&&(m=2),{parallelismType:m}},f.getChromaFormatString=function(c){switch(c){case 0:return"4:0:0";case 1:return"4:2:0";case 2:return"4:2:2";case 3:return"4:4:4";default:return"Unknown"}},f.getProfileString=function(c){switch(c){case 1:return"Main";case 2:return"Main10";case 3:return"MainSP";case 4:return"Rext";case 9:return"SCC";default:return"Unknown"}},f.getLevelString=function(c){return(c/30).toFixed(1)},f}();function M(f){return f.byteOffset%2==0&&f.byteLength%2==0}function z(f){return f.byteOffset%4==0&&f.byteLength%4==0}function H(f,c){for(var l=0;l<f.length;l++)if(f[l]!==c[l])return!1;return!0}var U=function(f,c){return f.byteLength===c.byteLength&&(z(f)&&z(c)?function(l,s){return H(new Uint32Array(l.buffer,l.byteOffset,l.byteLength/4),new Uint32Array(s.buffer,s.byteOffset,s.byteLength/4))}(f,c):M(f)&&M(c)?function(l,s){return H(new Uint16Array(l.buffer,l.byteOffset,l.byteLength/2),new Uint16Array(s.buffer,s.byteOffset,s.byteLength/2))}(f,c):function(l,s){return H(l,s)}(f,c))},R=function(){return(R=Object.assign||function(f){for(var c,l=1,s=arguments.length;l<s;l++)for(var p in c=arguments[l])Object.prototype.hasOwnProperty.call(c,p)&&(f[p]=c[p]);return f}).apply(this,arguments)},C=function(){function f(){}return f.parseOBUs=function(c,l){for(var s=0;s<c.byteLength;){var p=s,g=(c[s],(120&c[s])>>3),m=(4&c[s])!=0,b=(2&c[s])!=0;c[s],s+=1,m&&(s+=1);var O=Number.POSITIVE_INFINITY;if(b){O=0;for(var D=0;;D++){var B=c[s++];if(O|=(127&B)<<7*D,(128&B)==0)break}}console.log(g),g===1?l=R(R({},f.parseSeuqneceHeader(c.subarray(s,s+O))),{sequence_header_data:c.subarray(p,s+O)}):(g==3&&l||g==6&&l)&&(l=f.parseOBUFrameHeader(c.subarray(s,s+O),0,0,l)),s+=O}return l},f.parseSeuqneceHeader=function(c){var l=new N(c),s=l.readBits(3),p=(l.readBool(),l.readBool()),g=!0,m=0,b=1,O=void 0,D=[];if(p)D.push({operating_point_idc:0,level:l.readBits(5),tier:0});else{if(l.readBool()){var B=l.readBits(32),V=l.readBits(32),j=l.readBool();if(j){for(var G=0;l.readBits(1)===0;)G+=1;G>=32||(1<<G)-1+l.readBits(G)}(m=V)/(b=B),g=j,l.readBool()&&(l.readBits(5),l.readBits(32),O=l.readBits(5),l.readBits(5))}for(var K=l.readBool(),re=l.readBits(5),X=0;X<=re;X++){var ue=l.readBits(12),se=l.readBits(5),ae=se>7?l.readBits(1):0;D.push({operating_point_idc:ue,level:se,tier:ae}),K&&l.readBool()&&l.readBits(4)}}var ge=D[0],ke=ge.level,le=ge.tier,me=l.readBits(4),Re=l.readBits(4),ve=l.readBits(me+1)+1,Ee=l.readBits(Re+1)+1,Me=!1;p||(Me=l.readBool()),Me&&(l.readBits(4),l.readBits(4)),l.readBool(),l.readBool(),l.readBool();var Ne=!1,we=2,xe=2,Ue=0;p||(l.readBool(),l.readBool(),l.readBool(),l.readBool(),(Ne=l.readBool())&&(l.readBool(),l.readBool()),(we=l.readBool()?2:l.readBits(1))?xe=l.readBool()?2:l.readBits(1):xe=2,Ne?Ue=l.readBits(3)+1:Ue=0);var Ze=l.readBool(),Jt=(l.readBool(),l.readBool(),l.readBool()),pt=8;s===2&&Jt?pt=l.readBool()?12:10:pt=Jt?10:8;var It=!1;s!==1&&(It=l.readBool()),l.readBool()&&(l.readBits(8),l.readBits(8),l.readBits(8));var wt=1,_t=1;return It?(l.readBits(1),wt=1,_t=1):(l.readBits(1),s==0?(wt=1,_t=1):s==1?(wt=0,_t=0):pt==12?l.readBits(1)&&l.readBits(1):(wt=1,_t=0),wt&&_t&&l.readBits(2),l.readBits(1)),l.readBool(),l.destroy(),l=null,{codec_mimetype:"av01.".concat(s,".").concat(f.getLevelString(ke,le),".").concat(pt.toString(10).padStart(2,"0")),level:ke,tier:le,level_string:f.getLevelString(ke,le),profile_idc:s,profile_string:"".concat(s),bit_depth:pt,ref_frames:1,chroma_format:f.getChromaFormat(It,wt,_t),chroma_format_string:f.getChromaFormatString(It,wt,_t),sequence_header:{frame_id_numbers_present_flag:Me,additional_frame_id_length_minus_1:void 0,delta_frame_id_length_minus_2:void 0,reduced_still_picture_header:p,decoder_model_info_present_flag:!1,operating_points:D,buffer_removal_time_length_minus_1:O,equal_picture_interval:g,seq_force_screen_content_tools:we,seq_force_integer_mv:xe,enable_order_hint:Ne,order_hint_bits:Ue,enable_superres:Ze,frame_width_bit:me+1,frame_height_bit:Re+1,max_frame_width:ve,max_frame_height:Ee},keyframe:void 0,frame_rate:{fixed:g,fps:m/b,fps_den:b,fps_num:m}}},f.parseOBUFrameHeader=function(c,l,s,p){var g=p.sequence_header,m=new N(c),b=(g.max_frame_width,g.max_frame_height,0);g.frame_id_numbers_present_flag&&(b=g.additional_frame_id_length_minus_1+g.delta_frame_id_length_minus_2+3);var O=0,D=!0,B=!0,V=!1;if(!g.reduced_still_picture_header){if(m.readBool())return p;D=(O=m.readBits(2))===2||O===0,(B=m.readBool())&&g.decoder_model_info_present_flag&&g.equal_picture_interval,B&&m.readBool(),V=!!(O===3||O===0&&B)||m.readBool()}p.keyframe=D,m.readBool();var j=g.seq_force_screen_content_tools;g.seq_force_screen_content_tools===2&&(j=m.readBits(1)),j&&(g.seq_force_integer_mv,g.seq_force_integer_mv==2&&m.readBits(1)),g.frame_id_numbers_present_flag&&m.readBits(b);var G=!1;if(G=O==3||!g.reduced_still_picture_header&&m.readBool(),m.readBits(g.order_hint_bits),D||V||m.readBits(3),g.decoder_model_info_present_flag&&m.readBool()){for(var K=0;K<=g.operating_points_cnt_minus_1;K++)if(g.operating_points[K].decoder_model_present_for_this_op[K]){var re=g.operating_points[K].operating_point_idc;(re===0||re>>l&1&&re>>s+8&1)&&m.readBits(g.buffer_removal_time_length_minus_1+1)}}var X=255;if(O===3||O==0&&B||(X=m.readBits(8)),(D||X!==255)&&V&&g.enable_order_hint)for(var ue=0;ue<8;ue++)m.readBits(g.order_hint_bits);if(D){var se=f.frameSizeAndRenderSize(m,G,g);p.codec_size={width:se.FrameWidth,height:se.FrameHeight},p.present_size={width:se.RenderWidth,height:se.RenderHeight},p.sar_ratio={width:se.RenderWidth/se.FrameWidth,height:se.RenderHeight/se.FrameHeight}}return m.destroy(),m=null,p},f.frameSizeAndRenderSize=function(c,l,s){var p=s.max_frame_width,g=s.max_frame_height;l&&(p=c.readBits(s.frame_width_bit)+1,g=c.readBits(s.frame_height_bit)+1);var m=!1;s.enable_superres&&(m=c.readBool());var b=8;m&&(b=c.readBits(3)+9);var O=p;p=Math.floor((8*O+b/2)/b);var D=O,B=g;if(c.readBool()){var V=c.readBits(16)+1,j=c.readBits(16)+1;D=c.readBits(V)+1,B=c.readBits(j)+1}return{UpscaledWidth:O,FrameWidth:p,FrameHeight:g,RenderWidth:D,RenderHeight:B}},f.getLevelString=function(c,l){return"".concat(c.toString(10).padStart(2,"0")).concat(l===0?"M":"H")},f.getChromaFormat=function(c,l,s){return c?0:l===0&&s===0?3:l===1&&s===0?2:l===1&&s===1?1:Number.NaN},f.getChromaFormatString=function(c,l,s){return c?"4:0:0":l===0&&s===0?"4:4:4":l===1&&s===0?"4:2:2":l===1&&s===1?"4:2:0":"Unknown"},f}(),k,P=function(){function f(c,l){this.TAG="FLVDemuxer",this._config=l,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null,this._dataOffset=c.dataOffset,this._firstParse=!0,this._dispatch=!1,this._hasAudio=c.hasAudioTrack,this._hasVideo=c.hasVideoTrack,this._hasAudioFlagOverrided=!1,this._hasVideoFlagOverrided=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new h.a,this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this._flvSoundRateTable=[5500,11025,22050,44100,48e3],this._mpegSamplingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],this._mpegAudioV10SampleRateTable=[44100,48e3,32e3,0],this._mpegAudioV20SampleRateTable=[22050,24e3,16e3,0],this._mpegAudioV25SampleRateTable=[11025,12e3,8e3,0],this._mpegAudioL1BitRateTable=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],this._mpegAudioL2BitRateTable=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],this._mpegAudioL3BitRateTable=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],this._videoTrack={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this._littleEndian=function(){var s=new ArrayBuffer(2);return new DataView(s).setInt16(0,256,!0),new Int16Array(s)[0]===256}()}return f.prototype.destroy=function(){this._mediaInfo=null,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._videoTrack=null,this._audioTrack=null,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null},f.probe=function(c){var l=new Uint8Array(c);if(l.byteLength<9)return{needMoreData:!0};var s={match:!1};if(l[0]!==70||l[1]!==76||l[2]!==86||l[3]!==1)return s;var p,g,m=(4&l[4])>>>2!=0,b=(1&l[4])!=0,O=(p=l)[g=5]<<24|p[g+1]<<16|p[g+2]<<8|p[g+3];return O<9?s:{match:!0,consumed:O,dataOffset:O,hasAudioTrack:m,hasVideoTrack:b}},f.prototype.bindDataSource=function(c){return c.onDataArrival=this.parseChunks.bind(this),this},Object.defineProperty(f.prototype,"onTrackMetadata",{get:function(){return this._onTrackMetadata},set:function(c){this._onTrackMetadata=c},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onMediaInfo",{get:function(){return this._onMediaInfo},set:function(c){this._onMediaInfo=c},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onMetaDataArrived",{get:function(){return this._onMetaDataArrived},set:function(c){this._onMetaDataArrived=c},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onScriptDataArrived",{get:function(){return this._onScriptDataArrived},set:function(c){this._onScriptDataArrived=c},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onError",{get:function(){return this._onError},set:function(c){this._onError=c},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onDataAvailable",{get:function(){return this._onDataAvailable},set:function(c){this._onDataAvailable=c},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"timestampBase",{get:function(){return this._timestampBase},set:function(c){this._timestampBase=c},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"overridedDuration",{get:function(){return this._duration},set:function(c){this._durationOverrided=!0,this._duration=c,this._mediaInfo.duration=c},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"overridedHasAudio",{set:function(c){this._hasAudioFlagOverrided=!0,this._hasAudio=c,this._mediaInfo.hasAudio=c},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"overridedHasVideo",{set:function(c){this._hasVideoFlagOverrided=!0,this._hasVideo=c,this._mediaInfo.hasVideo=c},enumerable:!1,configurable:!0}),f.prototype.resetMediaInfo=function(){this._mediaInfo=new h.a},f.prototype._isInitialMetadataDispatched=function(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!(this._hasAudio||!this._hasVideo)&&this._videoInitialMetadataDispatched},f.prototype.parseChunks=function(c,l){if(!(this._onError&&this._onMediaInfo&&this._onTrackMetadata&&this._onDataAvailable))throw new v.a("Flv: onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var s=0,p=this._littleEndian;if(l===0){if(!(c.byteLength>13))return 0;s=f.probe(c).dataOffset}for(this._firstParse&&(this._firstParse=!1,l+s!==this._dataOffset&&u.a.w(this.TAG,"First time parsing but chunk byteStart invalid!"),(g=new DataView(c,s)).getUint32(0,!p)!==0&&u.a.w(this.TAG,"PrevTagSize0 !== 0 !!!"),s+=4);s<c.byteLength;){this._dispatch=!0;var g=new DataView(c,s);if(s+11+4>c.byteLength)break;var m=g.getUint8(0),b=16777215&g.getUint32(0,!p);if(s+11+b+4>c.byteLength)break;if(m===8||m===9||m===18){var O=g.getUint8(4),D=g.getUint8(5),B=g.getUint8(6)|D<<8|O<<16|g.getUint8(7)<<24;16777215&g.getUint32(7,!p)&&u.a.w(this.TAG,"Meet tag which has StreamID != 0!");var V=s+11;switch(m){case 8:this._parseAudioData(c,V,b,B);break;case 9:this._parseVideoData(c,V,b,B,l+s);break;case 18:this._parseScriptData(c,V,b)}var j=g.getUint32(11+b,!p);j!==11+b&&u.a.w(this.TAG,"Invalid PrevTagSize ".concat(j)),s+=11+b+4}else u.a.w(this.TAG,"Unsupported tag type ".concat(m,", skipped")),s+=11+b+4}return this._isInitialMetadataDispatched()&&this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack),s},f.prototype._parseScriptData=function(c,l,s){var p=w.parseScriptData(c,l,s);if(p.hasOwnProperty("onMetaData")){if(p.onMetaData==null||typeof p.onMetaData!="object")return void u.a.w(this.TAG,"Invalid onMetaData structure!");this._metadata&&u.a.w(this.TAG,"Found another onMetaData tag!"),this._metadata=p;var g=this._metadata.onMetaData;if(this._onMetaDataArrived&&this._onMetaDataArrived(Object.assign({},g)),typeof g.hasAudio=="boolean"&&this._hasAudioFlagOverrided===!1&&(this._hasAudio=g.hasAudio,this._mediaInfo.hasAudio=this._hasAudio),typeof g.hasVideo=="boolean"&&this._hasVideoFlagOverrided===!1&&(this._hasVideo=g.hasVideo,this._mediaInfo.hasVideo=this._hasVideo),typeof g.audiodatarate=="number"&&(this._mediaInfo.audioDataRate=g.audiodatarate),typeof g.videodatarate=="number"&&(this._mediaInfo.videoDataRate=g.videodatarate),typeof g.width=="number"&&(this._mediaInfo.width=g.width),typeof g.height=="number"&&(this._mediaInfo.height=g.height),typeof g.duration=="number"){if(!this._durationOverrided){var m=Math.floor(g.duration*this._timescale);this._duration=m,this._mediaInfo.duration=m}}else this._mediaInfo.duration=0;if(typeof g.framerate=="number"){var b=Math.floor(1e3*g.framerate);if(b>0){var O=b/1e3;this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=O,this._referenceFrameRate.fps_num=b,this._referenceFrameRate.fps_den=1e3,this._mediaInfo.fps=O}}if(typeof g.keyframes=="object"){this._mediaInfo.hasKeyframesIndex=!0;var D=g.keyframes;this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(D),g.keyframes=null}else this._mediaInfo.hasKeyframesIndex=!1;this._dispatch=!1,this._mediaInfo.metadata=g,u.a.v(this.TAG,"Parsed onMetaData"),this._mediaInfo.isComplete()&&this._onMediaInfo(this._mediaInfo)}Object.keys(p).length>0&&this._onScriptDataArrived&&this._onScriptDataArrived(Object.assign({},p))},f.prototype._parseKeyframesIndex=function(c){for(var l=[],s=[],p=1;p<c.times.length;p++){var g=this._timestampBase+Math.floor(1e3*c.times[p]);l.push(g),s.push(c.filepositions[p])}return{times:l,filepositions:s}},f.prototype._parseAudioData=function(c,l,s,p){if(s<=1)u.a.w(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!");else if(this._hasAudioFlagOverrided!==!0||this._hasAudio!==!1){this._littleEndian;var g=new DataView(c,l,s).getUint8(0),m=g>>>4;if(m!==9)if(m===2||m===10){var b=0,O=(12&g)>>>2;if(O>=0&&O<=4){b=this._flvSoundRateTable[O];var D=1&g,B=this._audioMetadata,V=this._audioTrack;if(B||(this._hasAudio===!1&&this._hasAudioFlagOverrided===!1&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),(B=this._audioMetadata={}).type="audio",B.id=V.id,B.timescale=this._timescale,B.duration=this._duration,B.audioSampleRate=b,B.channelCount=D===0?1:2),m===10){var j=this._parseAACAudioData(c,l+1,s-1);if(j==null)return;if(j.packetType===0){if(B.config){if(U(j.data.config,B.config))return;u.a.w(this.TAG,"AudioSpecificConfig has been changed, re-generate initialization segment")}var G=j.data;B.audioSampleRate=G.samplingRate,B.channelCount=G.channelCount,B.codec=G.codec,B.originalCodec=G.originalCodec,B.config=G.config,B.refSampleDuration=1024/B.audioSampleRate*B.timescale,u.a.v(this.TAG,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",B),(X=this._mediaInfo).audioCodec=B.originalCodec,X.audioSampleRate=B.audioSampleRate,X.audioChannelCount=B.channelCount,X.hasVideo?X.videoCodec!=null&&(X.mimeType='video/x-flv; codecs="'+X.videoCodec+","+X.audioCodec+'"'):X.mimeType='video/x-flv; codecs="'+X.audioCodec+'"',X.isComplete()&&this._onMediaInfo(X)}else if(j.packetType===1){var K=this._timestampBase+p,re={unit:j.data,length:j.data.byteLength,dts:K,pts:K};V.samples.push(re),V.length+=j.data.length}else u.a.e(this.TAG,"Flv: Unsupported AAC data type ".concat(j.packetType))}else if(m===2){if(!B.codec){var X;if((G=this._parseMP3AudioData(c,l+1,s-1,!0))==null)return;B.audioSampleRate=G.samplingRate,B.channelCount=G.channelCount,B.codec=G.codec,B.originalCodec=G.originalCodec,B.refSampleDuration=1152/B.audioSampleRate*B.timescale,u.a.v(this.TAG,"Parsed MPEG Audio Frame Header"),this._audioInitialMetadataDispatched=!0,this._onTrackMetadata("audio",B),(X=this._mediaInfo).audioCodec=B.codec,X.audioSampleRate=B.audioSampleRate,X.audioChannelCount=B.channelCount,X.audioDataRate=G.bitRate,X.hasVideo?X.videoCodec!=null&&(X.mimeType='video/x-flv; codecs="'+X.videoCodec+","+X.audioCodec+'"'):X.mimeType='video/x-flv; codecs="'+X.audioCodec+'"',X.isComplete()&&this._onMediaInfo(X)}var ue=this._parseMP3AudioData(c,l+1,s-1,!1);if(ue==null)return;K=this._timestampBase+p;var se={unit:ue,length:ue.byteLength,dts:K,pts:K};V.samples.push(se),V.length+=ue.length}}else this._onError(E.a.FORMAT_ERROR,"Flv: Invalid audio sample rate idx: "+O)}else this._onError(E.a.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec idx: "+m);else{if(s<=5)return void u.a.w(this.TAG,"Flv: Invalid audio packet, missing AudioFourCC in Ehnanced FLV payload!");var ae=15&g,ge=String.fromCharCode.apply(String,new Uint8Array(c,l,s).slice(1,5));switch(ge){case"Opus":this._parseOpusAudioPacket(c,l+5,s-5,p,ae);break;case"fLaC":this._parseFlacAudioPacket(c,l+5,s-5,p,ae);break;default:this._onError(E.a.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec: "+ge)}}}},f.prototype._parseAACAudioData=function(c,l,s){if(!(s<=1)){var p={},g=new Uint8Array(c,l,s);return p.packetType=g[0],g[0]===0?p.data=this._parseAACAudioSpecificConfig(c,l+1,s-1):p.data=g.subarray(1),p}u.a.w(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!")},f.prototype._parseAACAudioSpecificConfig=function(c,l,s){var p,g,m=new Uint8Array(c,l,s),b=null,O=0,D=null;if(O=p=m[0]>>>3,(g=(7&m[0])<<1|m[1]>>>7)<0||g>=this._mpegSamplingRates.length)this._onError(E.a.FORMAT_ERROR,"Flv: AAC invalid sampling frequency index!");else{var B=this._mpegSamplingRates[g],V=(120&m[1])>>>3;if(!(V<0||V>=8)){O===5&&(D=(7&m[1])<<1|m[2]>>>7,(124&m[2])>>>2);var j=self.navigator.userAgent.toLowerCase();return j.indexOf("firefox")!==-1?g>=6?(O=5,b=new Array(4),D=g-3):(O=2,b=new Array(2),D=g):j.indexOf("android")!==-1?(O=2,b=new Array(2),D=g):(O=5,D=g,b=new Array(4),g>=6?D=g-3:V===1&&(O=2,b=new Array(2),D=g)),b[0]=O<<3,b[0]|=(15&g)>>>1,b[1]=(15&g)<<7,b[1]|=(15&V)<<3,O===5&&(b[1]|=(15&D)>>>1,b[2]=(1&D)<<7,b[2]|=8,b[3]=0),{config:b,samplingRate:B,channelCount:V,codec:"mp4a.40."+O,originalCodec:"mp4a.40."+p}}this._onError(E.a.FORMAT_ERROR,"Flv: AAC invalid channel configuration")}},f.prototype._parseMP3AudioData=function(c,l,s,p){if(!(s<4)){this._littleEndian;var g=new Uint8Array(c,l,s),m=null;if(p){if(g[0]!==255)return;var b=g[1]>>>3&3,O=(6&g[1])>>1,D=(240&g[2])>>>4,B=(12&g[2])>>>2,V=(g[3]>>>6&3)!==3?2:1,j=0,G=0;switch(b){case 0:j=this._mpegAudioV25SampleRateTable[B];break;case 2:j=this._mpegAudioV20SampleRateTable[B];break;case 3:j=this._mpegAudioV10SampleRateTable[B]}switch(O){case 1:D<this._mpegAudioL3BitRateTable.length&&(G=this._mpegAudioL3BitRateTable[D]);break;case 2:D<this._mpegAudioL2BitRateTable.length&&(G=this._mpegAudioL2BitRateTable[D]);break;case 3:D<this._mpegAudioL1BitRateTable.length&&(G=this._mpegAudioL1BitRateTable[D])}m={bitRate:G,samplingRate:j,channelCount:V,codec:"mp3",originalCodec:"mp3"}}else m=g;return m}u.a.w(this.TAG,"Flv: Invalid MP3 packet, header missing!")},f.prototype._parseOpusAudioPacket=function(c,l,s,p,g){if(g===0)this._parseOpusSequenceHeader(c,l,s);else if(g===1)this._parseOpusAudioData(c,l,s,p);else if(g!==2)return void this._onError(E.a.FORMAT_ERROR,"Flv: Invalid video packet type ".concat(g))},f.prototype._parseOpusSequenceHeader=function(c,l,s){if(s<=16)u.a.w(this.TAG,"Flv: Invalid OpusSequenceHeader, lack of data!");else{var p=this._audioMetadata,g=this._audioTrack;p||(this._hasAudio===!1&&this._hasAudioFlagOverrided===!1&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),(p=this._audioMetadata={}).type="audio",p.id=g.id,p.timescale=this._timescale,p.duration=this._duration);var m=new DataView(c,l,s);m.setUint8(8,0);var b=m.getUint8(9);m.setUint16(10,m.getUint16(10,!0),!1);var O=m.getUint32(12,!0);m.setUint32(12,m.getUint32(12,!0),!1);var D={config:new Uint8Array(c,l+8,s-8),channelCount:b,samplingFrequence:O,codec:"opus",originalCodec:"opus"};if(p.config){if(U(D.config,p.config))return;u.a.w(this.TAG,"OpusSequenceHeader has been changed, re-generate initialization segment")}p.audioSampleRate=D.samplingFrequence,p.channelCount=D.channelCount,p.codec=D.codec,p.originalCodec=D.originalCodec,p.config=D.config,p.refSampleDuration=20,u.a.v(this.TAG,"Parsed OpusSequenceHeader"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",p);var B=this._mediaInfo;B.audioCodec=p.originalCodec,B.audioSampleRate=p.audioSampleRate,B.audioChannelCount=p.channelCount,B.hasVideo?B.videoCodec!=null&&(B.mimeType='video/x-flv; codecs="'+B.videoCodec+","+B.audioCodec+'"'):B.mimeType='video/x-flv; codecs="'+B.audioCodec+'"',B.isComplete()&&this._onMediaInfo(B)}},f.prototype._parseOpusAudioData=function(c,l,s,p){var g=this._audioTrack,m=new Uint8Array(c,l,s),b=this._timestampBase+p,O={unit:m,length:m.byteLength,dts:b,pts:b};g.samples.push(O),g.length+=m.length},f.prototype._parseFlacAudioPacket=function(c,l,s,p,g){if(g===0)this._parseFlacSequenceHeader(c,l,s);else if(g===1)this._parseFlacAudioData(c,l,s,p);else if(g!==2)return void this._onError(E.a.FORMAT_ERROR,"Flv: Invalid Flac audio packet type ".concat(g))},f.prototype._parseFlacSequenceHeader=function(c,l,s){var p=this._audioMetadata,g=this._audioTrack;p||(this._hasAudio===!1&&this._hasAudioFlagOverrided===!1&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),(p=this._audioMetadata={}).type="audio",p.id=g.id,p.timescale=this._timescale,p.duration=this._duration);var m=new Uint8Array(c,l+4,s-4),b=new N(m),O=b.readBits(16),D=b.readBits(16),B=D===O?D:null;b.readBits(24),b.readBits(24);var V=b.readBits(20),j=b.readBits(3)+1,G=b.readBits(5)+1;b.destroy();var K=new Uint8Array(m.byteLength+4);K.set(m,4),K[0]=128,K[1]=m.byteLength>>>16&255,K[2]=m.byteLength>>>8&255,K[3]=m.byteLength>>>0&255;var re={config:K,channelCount:j,samplingFrequence:V,sampleSize:G,codec:"flac",originalCodec:"flac"};if(p.config){if(U(re.config,p.config))return;u.a.w(this.TAG,"FlacSequenceHeader has been changed, re-generate initialization segment")}p.audioSampleRate=re.samplingFrequence,p.channelCount=re.channelCount,p.sampleSize=re.sampleSize,p.codec=re.codec,p.originalCodec=re.originalCodec,p.config=re.config,p.refSampleDuration=B!=null?1e3*B/re.samplingFrequence:null,u.a.v(this.TAG,"Parsed FlacSequenceHeader"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",p);var X=this._mediaInfo;X.audioCodec=p.originalCodec,X.audioSampleRate=p.audioSampleRate,X.audioChannelCount=p.channelCount,X.hasVideo?X.videoCodec!=null&&(X.mimeType='video/x-flv; codecs="'+X.videoCodec+","+X.audioCodec+'"'):X.mimeType='video/x-flv; codecs="'+X.audioCodec+'"',X.isComplete()&&this._onMediaInfo(X)},f.prototype._parseFlacAudioData=function(c,l,s,p){var g=this._audioTrack,m=new Uint8Array(c,l,s),b=this._timestampBase+p,O={unit:m,length:m.byteLength,dts:b,pts:b};g.samples.push(O),g.length+=m.length},f.prototype._parseVideoData=function(c,l,s,p,g){if(s<=1)u.a.w(this.TAG,"Flv: Invalid video packet, missing VideoData payload!");else if(this._hasVideoFlagOverrided!==!0||this._hasVideo!==!1){var m=new Uint8Array(c,l,s)[0],b=(112&m)>>>4;if(128&m){var O=15&m,D=String.fromCharCode.apply(String,new Uint8Array(c,l,s).slice(1,5));if(D==="hvc1")this._parseEnhancedHEVCVideoPacket(c,l+5,s-5,p,g,b,O);else{if(D!=="av01")return void this._onError(E.a.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: ".concat(D));this._parseEnhancedAV1VideoPacket(c,l+5,s-5,p,g,b,O)}}else{var B=15&m;if(B===7)this._parseAVCVideoPacket(c,l+1,s-1,p,g,b);else{if(B!==12)return void this._onError(E.a.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: ".concat(B));this._parseHEVCVideoPacket(c,l+1,s-1,p,g,b)}}}},f.prototype._parseAVCVideoPacket=function(c,l,s,p,g,m){if(s<4)u.a.w(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");else{var b=this._littleEndian,O=new DataView(c,l,s),D=O.getUint8(0),B=(16777215&O.getUint32(0,!b))<<8>>8;if(D===0)this._parseAVCDecoderConfigurationRecord(c,l+4,s-4);else if(D===1)this._parseAVCVideoData(c,l+4,s-4,p,g,m,B);else if(D!==2)return void this._onError(E.a.FORMAT_ERROR,"Flv: Invalid video packet type ".concat(D))}},f.prototype._parseHEVCVideoPacket=function(c,l,s,p,g,m){if(s<4)u.a.w(this.TAG,"Flv: Invalid HEVC packet, missing HEVCPacketType or/and CompositionTime");else{var b=this._littleEndian,O=new DataView(c,l,s),D=O.getUint8(0),B=(16777215&O.getUint32(0,!b))<<8>>8;if(D===0)this._parseHEVCDecoderConfigurationRecord(c,l+4,s-4);else if(D===1)this._parseHEVCVideoData(c,l+4,s-4,p,g,m,B);else if(D!==2)return void this._onError(E.a.FORMAT_ERROR,"Flv: Invalid video packet type ".concat(D))}},f.prototype._parseEnhancedHEVCVideoPacket=function(c,l,s,p,g,m,b){var O=this._littleEndian,D=new DataView(c,l,s);if(b===0)this._parseHEVCDecoderConfigurationRecord(c,l,s);else if(b===1){var B=(4294967040&D.getUint32(0,!O))>>8;this._parseHEVCVideoData(c,l+3,s-3,p,g,m,B)}else if(b===3)this._parseHEVCVideoData(c,l,s,p,g,m,0);else if(b!==2)return void this._onError(E.a.FORMAT_ERROR,"Flv: Invalid video packet type ".concat(b))},f.prototype._parseEnhancedAV1VideoPacket=function(c,l,s,p,g,m,b){if(this._littleEndian,b===0)this._parseAV1CodecConfigurationRecord(c,l,s);else if(b===1)this._parseAV1VideoData(c,l,s,p,g,m,0);else{if(b===5)return void this._onError(E.a.FORMAT_ERROR,"Flv: Not Supported MP2T AV1 video packet type ".concat(b));if(b!==2)return void this._onError(E.a.FORMAT_ERROR,"Flv: Invalid video packet type ".concat(b))}},f.prototype._parseAVCDecoderConfigurationRecord=function(c,l,s){if(s<7)u.a.w(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");else{var p=this._videoMetadata,g=this._videoTrack,m=this._littleEndian,b=new DataView(c,l,s);if(p){if(p.avcc!==void 0){var O=new Uint8Array(c,l,s);if(U(O,p.avcc))return;u.a.w(this.TAG,"AVCDecoderConfigurationRecord has been changed, re-generate initialization segment")}}else this._hasVideo===!1&&this._hasVideoFlagOverrided===!1&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(p=this._videoMetadata={}).type="video",p.id=g.id,p.timescale=this._timescale,p.duration=this._duration;var D=b.getUint8(0),B=b.getUint8(1);if(b.getUint8(2),b.getUint8(3),D===1&&B!==0)if(this._naluLengthSize=1+(3&b.getUint8(4)),this._naluLengthSize===3||this._naluLengthSize===4){var V=31&b.getUint8(5);if(V!==0){V>1&&u.a.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: SPS Count = ".concat(V));for(var j=6,G=0;G<V;G++){var K=b.getUint16(j,!m);if(j+=2,K!==0){var re=new Uint8Array(c,l+j,K);j+=K;var X=A.parseSPS(re);if(G===0){p.codecWidth=X.codec_size.width,p.codecHeight=X.codec_size.height,p.presentWidth=X.present_size.width,p.presentHeight=X.present_size.height,p.profile=X.profile_string,p.level=X.level_string,p.bitDepth=X.bit_depth,p.chromaFormat=X.chroma_format,p.sarRatio=X.sar_ratio,p.frameRate=X.frame_rate,X.frame_rate.fixed!==!1&&X.frame_rate.fps_num!==0&&X.frame_rate.fps_den!==0||(p.frameRate=this._referenceFrameRate);var ue=p.frameRate.fps_den,se=p.frameRate.fps_num;p.refSampleDuration=p.timescale*(ue/se);for(var ae=re.subarray(1,4),ge="avc1.",ke=0;ke<3;ke++){var le=ae[ke].toString(16);le.length<2&&(le="0"+le),ge+=le}p.codec=ge;var me=this._mediaInfo;me.width=p.codecWidth,me.height=p.codecHeight,me.fps=p.frameRate.fps,me.profile=p.profile,me.level=p.level,me.refFrames=X.ref_frames,me.chromaFormat=X.chroma_format_string,me.sarNum=p.sarRatio.width,me.sarDen=p.sarRatio.height,me.videoCodec=ge,me.hasAudio?me.audioCodec!=null&&(me.mimeType='video/x-flv; codecs="'+me.videoCodec+","+me.audioCodec+'"'):me.mimeType='video/x-flv; codecs="'+me.videoCodec+'"',me.isComplete()&&this._onMediaInfo(me)}}}var Re=b.getUint8(j);if(Re!==0){for(Re>1&&u.a.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: PPS Count = ".concat(Re)),j++,G=0;G<Re;G++)K=b.getUint16(j,!m),j+=2,K!==0&&(j+=K);p.avcc=new Uint8Array(s),p.avcc.set(new Uint8Array(c,l,s),0),u.a.v(this.TAG,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",p)}else this._onError(E.a.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No PPS")}else this._onError(E.a.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No SPS")}else this._onError(E.a.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: ".concat(this._naluLengthSize-1));else this._onError(E.a.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord")}},f.prototype._parseHEVCDecoderConfigurationRecord=function(c,l,s){if(s<22)u.a.w(this.TAG,"Flv: Invalid HEVCDecoderConfigurationRecord, lack of data!");else{var p=this._videoMetadata,g=this._videoTrack,m=this._littleEndian,b=new DataView(c,l,s);if(p){if(p.hvcc!==void 0){var O=new Uint8Array(c,l,s);if(U(O,p.hvcc))return;u.a.w(this.TAG,"HEVCDecoderConfigurationRecord has been changed, re-generate initialization segment")}}else this._hasVideo===!1&&this._hasVideoFlagOverrided===!1&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(p=this._videoMetadata={}).type="video",p.id=g.id,p.timescale=this._timescale,p.duration=this._duration;var D=b.getUint8(0),B=31&b.getUint8(1);if(D!==0&&D!==1||B===0)this._onError(E.a.FORMAT_ERROR,"Flv: Invalid HEVCDecoderConfigurationRecord");else if(this._naluLengthSize=1+(3&b.getUint8(21)),this._naluLengthSize===3||this._naluLengthSize===4){for(var V=b.getUint8(22),j=0,G=23;j<V;j++){var K=63&b.getUint8(G+0),re=b.getUint16(G+1,!m);G+=3;for(var X=0;X<re;X++){var ue=b.getUint16(G+0,!m);if(X===0)if(K===33){G+=2;var se=new Uint8Array(c,l+G,ue),ae=T.parseSPS(se);p.codecWidth=ae.codec_size.width,p.codecHeight=ae.codec_size.height,p.presentWidth=ae.present_size.width,p.presentHeight=ae.present_size.height,p.profile=ae.profile_string,p.level=ae.level_string,p.bitDepth=ae.bit_depth,p.chromaFormat=ae.chroma_format,p.sarRatio=ae.sar_ratio,p.frameRate=ae.frame_rate,ae.frame_rate.fixed!==!1&&ae.frame_rate.fps_num!==0&&ae.frame_rate.fps_den!==0||(p.frameRate=this._referenceFrameRate);var ge=p.frameRate.fps_den,ke=p.frameRate.fps_num;p.refSampleDuration=p.timescale*(ge/ke),p.codec=ae.codec_mimetype;var le=this._mediaInfo;le.width=p.codecWidth,le.height=p.codecHeight,le.fps=p.frameRate.fps,le.profile=p.profile,le.level=p.level,le.refFrames=ae.ref_frames,le.chromaFormat=ae.chroma_format_string,le.sarNum=p.sarRatio.width,le.sarDen=p.sarRatio.height,le.videoCodec=ae.codec_mimetype,le.hasAudio?le.audioCodec!=null&&(le.mimeType='video/x-flv; codecs="'+le.videoCodec+","+le.audioCodec+'"'):le.mimeType='video/x-flv; codecs="'+le.videoCodec+'"',le.isComplete()&&this._onMediaInfo(le),G+=ue}else G+=2+ue;else G+=2+ue}}p.hvcc=new Uint8Array(s),p.hvcc.set(new Uint8Array(c,l,s),0),u.a.v(this.TAG,"Parsed HEVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",p)}else this._onError(E.a.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: ".concat(this._naluLengthSize-1))}},f.prototype._parseAV1CodecConfigurationRecord=function(c,l,s){if(s<4)u.a.w(this.TAG,"Flv: Invalid AV1CodecConfigurationRecord, lack of data!");else{var p=this._videoMetadata,g=this._videoTrack,m=(this._littleEndian,new DataView(c,l,s));p?p.av1c!==void 0&&u.a.w(this.TAG,"Found another AV1CodecConfigurationRecord!"):(this._hasVideo===!1&&this._hasVideoFlagOverrided===!1&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(p=this._videoMetadata={}).type="video",p.id=g.id,p.timescale=this._timescale,p.duration=this._duration);var b=127&m.getUint8(0);if(m.getUint8(1),m.getUint8(1),m.getUint8(2),b===1){var O=C.parseOBUs(new Uint8Array(c,l+4,s-4));if(O!=null){p.profile=O.profile_string,p.level=O.level_string,p.bitDepth=O.bit_depth,p.chromaFormat=O.chroma_format,p.frameRate=O.frame_rate,O.frame_rate.fixed!==!1&&O.frame_rate.fps_num!==0&&O.frame_rate.fps_den!==0||(p.frameRate=this._referenceFrameRate);var D=p.frameRate.fps_den,B=p.frameRate.fps_num;p.refSampleDuration=p.timescale*(D/B),p.codec=O.codec_mimetype,p.extra=O;var V=this._mediaInfo;V.fps=p.frameRate.fps,V.profile=p.profile,V.level=p.level,V.refFrames=O.ref_frames,V.chromaFormat=O.chroma_format_string,V.videoCodec=O.codec_mimetype,V.hasAudio?V.audioCodec!=null&&(V.mimeType='video/x-flv; codecs="'+V.videoCodec+","+V.audioCodec+'"'):V.mimeType='video/x-flv; codecs="'+V.videoCodec+'"',V.isComplete()&&this._onMediaInfo(V),p.av1c=new Uint8Array(s),p.av1c.set(new Uint8Array(c,l,s),0),u.a.v(this.TAG,"Preparing AV1CodecConfigurationRecord")}else this._onError(E.a.FORMAT_ERROR,"Flv: Invalid AV1CodecConfigurationRecord")}else this._onError(E.a.FORMAT_ERROR,"Flv: Invalid AV1CodecConfigurationRecord")}},f.prototype._parseAVCVideoData=function(c,l,s,p,g,m,b){for(var O=this._littleEndian,D=new DataView(c,l,s),B=[],V=0,j=0,G=this._naluLengthSize,K=this._timestampBase+p,re=m===1;j<s;){if(j+4>=s){u.a.w(this.TAG,"Malformed Nalu near timestamp ".concat(K,", offset = ").concat(j,", dataSize = ").concat(s));break}var X=D.getUint32(j,!O);if(G===3&&(X>>>=8),X>s-G)return void u.a.w(this.TAG,"Malformed Nalus near timestamp ".concat(K,", NaluSize > DataSize!"));var ue=31&D.getUint8(j+G);ue===5&&(re=!0);var se=new Uint8Array(c,l+j,G+X),ae={type:ue,data:se};B.push(ae),V+=se.byteLength,j+=G+X}if(B.length){var ge=this._videoTrack,ke={units:B,length:V,isKeyframe:re,dts:K,cts:b,pts:K+b};re&&(ke.fileposition=g),ge.samples.push(ke),ge.length+=V}},f.prototype._parseHEVCVideoData=function(c,l,s,p,g,m,b){for(var O=this._littleEndian,D=new DataView(c,l,s),B=[],V=0,j=0,G=this._naluLengthSize,K=this._timestampBase+p,re=m===1;j<s;){if(j+4>=s){u.a.w(this.TAG,"Malformed Nalu near timestamp ".concat(K,", offset = ").concat(j,", dataSize = ").concat(s));break}var X=D.getUint32(j,!O);if(G===3&&(X>>>=8),X>s-G)return void u.a.w(this.TAG,"Malformed Nalus near timestamp ".concat(K,", NaluSize > DataSize!"));var ue=D.getUint8(j+G)>>1&63;ue!==19&&ue!==20&&ue!==21||(re=!0);var se=new Uint8Array(c,l+j,G+X),ae={type:ue,data:se};B.push(ae),V+=se.byteLength,j+=G+X}if(B.length){var ge=this._videoTrack,ke={units:B,length:V,isKeyframe:re,dts:K,cts:b,pts:K+b};re&&(ke.fileposition=g),ge.samples.push(ke),ge.length+=V}},f.prototype._parseAV1VideoData=function(c,l,s,p,g,m,b){this._littleEndian;var O,D=[],B=this._timestampBase+p,V=m===1;if(V){var j=this._videoMetadata,G=C.parseOBUs(new Uint8Array(c,l,s),j.extra);if(G==null)return void this._onError(E.a.FORMAT_ERROR,"Flv: Invalid AV1 VideoData");console.log(G),j.codecWidth=G.codec_size.width,j.codecHeight=G.codec_size.height,j.presentWidth=G.present_size.width,j.presentHeight=G.present_size.height,j.sarRatio=G.sar_ratio;var K=this._mediaInfo;K.width=j.codecWidth,K.height=j.codecHeight,K.sarNum=j.sarRatio.width,K.sarDen=j.sarRatio.height,u.a.v(this.TAG,"Parsed AV1DecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",j)}if(O=s,D.push({unitType:0,data:new Uint8Array(c,l+0,s)}),D.length){var re=this._videoTrack,X={units:D,length:O,isKeyframe:V,dts:B,cts:b,pts:B+b};V&&(X.fileposition=g),re.samples.push(X),re.length+=O}},f}(),Y=function(){function f(){}return f.prototype.destroy=function(){this.onError=null,this.onMediaInfo=null,this.onMetaDataArrived=null,this.onTrackMetadata=null,this.onDataAvailable=null,this.onTimedID3Metadata=null,this.onSynchronousKLVMetadata=null,this.onAsynchronousKLVMetadata=null,this.onSMPTE2038Metadata=null,this.onSCTE35Metadata=null,this.onPESPrivateData=null,this.onPESPrivateDataDescriptor=null},f}(),J=function(){this.program_pmt_pid={}};(function(f){f[f.kMPEG1Audio=3]="kMPEG1Audio",f[f.kMPEG2Audio=4]="kMPEG2Audio",f[f.kPESPrivateData=6]="kPESPrivateData",f[f.kADTSAAC=15]="kADTSAAC",f[f.kLOASAAC=17]="kLOASAAC",f[f.kAC3=129]="kAC3",f[f.kEAC3=135]="kEAC3",f[f.kMetadata=21]="kMetadata",f[f.kSCTE35=134]="kSCTE35",f[f.kH264=27]="kH264",f[f.kH265=36]="kH265"})(k||(k={}));var q,ne=function(){this.pid_stream_type={},this.common_pids={h264:void 0,h265:void 0,av1:void 0,adts_aac:void 0,loas_aac:void 0,opus:void 0,ac3:void 0,eac3:void 0,mp3:void 0},this.pes_private_data_pids={},this.timed_id3_pids={},this.synchronous_klv_pids={},this.asynchronous_klv_pids={},this.scte_35_pids={},this.smpte2038_pids={}},ce=function(){},be=function(){},Z=function(){this.slices=[],this.total_length=0,this.expected_length=0,this.file_position=0};(function(f){f[f.kUnspecified=0]="kUnspecified",f[f.kSliceNonIDR=1]="kSliceNonIDR",f[f.kSliceDPA=2]="kSliceDPA",f[f.kSliceDPB=3]="kSliceDPB",f[f.kSliceDPC=4]="kSliceDPC",f[f.kSliceIDR=5]="kSliceIDR",f[f.kSliceSEI=6]="kSliceSEI",f[f.kSliceSPS=7]="kSliceSPS",f[f.kSlicePPS=8]="kSlicePPS",f[f.kSliceAUD=9]="kSliceAUD",f[f.kEndOfSequence=10]="kEndOfSequence",f[f.kEndOfStream=11]="kEndOfStream",f[f.kFiller=12]="kFiller",f[f.kSPSExt=13]="kSPSExt",f[f.kReserved0=14]="kReserved0"})(q||(q={}));var I,L,$=function(){},Q=function(f){var c=f.data.byteLength;this.type=f.type,this.data=new Uint8Array(4+c),new DataView(this.data.buffer).setUint32(0,c),this.data.set(f.data,4)},de=function(){function f(c){this.TAG="H264AnnexBParser",this.current_startcode_offset_=0,this.eof_flag_=!1,this.data_=c,this.current_startcode_offset_=this.findNextStartCodeOffset(0),this.eof_flag_&&u.a.e(this.TAG,"Could not find H264 startcode until payload end!")}return f.prototype.findNextStartCodeOffset=function(c){for(var l=c,s=this.data_;;){if(l+3>=s.byteLength)return this.eof_flag_=!0,s.byteLength;var p=s[l+0]<<24|s[l+1]<<16|s[l+2]<<8|s[l+3],g=s[l+0]<<16|s[l+1]<<8|s[l+2];if(p===1||g===1)return l;l++}},f.prototype.readNextNaluPayload=function(){for(var c=this.data_,l=null;l==null&&!this.eof_flag_;){var s=this.current_startcode_offset_,p=31&c[s+=(c[s]<<24|c[s+1]<<16|c[s+2]<<8|c[s+3])===1?4:3],g=(128&c[s])>>>7,m=this.findNextStartCodeOffset(s);if(this.current_startcode_offset_=m,!(p>=q.kReserved0)&&g===0){var b=c.subarray(s,m);(l=new $).type=p,l.data=b}}return l},f}(),pe=function(){function f(c,l,s){var p=8+c.byteLength+1+2+l.byteLength,g=!1;c[3]!==66&&c[3]!==77&&c[3]!==88&&(g=!0,p+=4);var m=this.data=new Uint8Array(p);m[0]=1,m[1]=c[1],m[2]=c[2],m[3]=c[3],m[4]=255,m[5]=225;var b=c.byteLength;m[6]=b>>>8,m[7]=255&b;var O=8;m.set(c,8),m[O+=b]=1;var D=l.byteLength;m[O+1]=D>>>8,m[O+2]=255&D,m.set(l,O+3),O+=3+D,g&&(m[O]=252|s.chroma_format_idc,m[O+1]=248|s.bit_depth_luma-8,m[O+2]=248|s.bit_depth_chroma-8,m[O+3]=0,O+=4)}return f.prototype.getData=function(){return this.data},f}();(function(f){f[f.kNull=0]="kNull",f[f.kAACMain=1]="kAACMain",f[f.kAAC_LC=2]="kAAC_LC",f[f.kAAC_SSR=3]="kAAC_SSR",f[f.kAAC_LTP=4]="kAAC_LTP",f[f.kAAC_SBR=5]="kAAC_SBR",f[f.kAAC_Scalable=6]="kAAC_Scalable",f[f.kLayer1=32]="kLayer1",f[f.kLayer2=33]="kLayer2",f[f.kLayer3=34]="kLayer3"})(I||(I={})),function(f){f[f.k96000Hz=0]="k96000Hz",f[f.k88200Hz=1]="k88200Hz",f[f.k64000Hz=2]="k64000Hz",f[f.k48000Hz=3]="k48000Hz",f[f.k44100Hz=4]="k44100Hz",f[f.k32000Hz=5]="k32000Hz",f[f.k24000Hz=6]="k24000Hz",f[f.k22050Hz=7]="k22050Hz",f[f.k16000Hz=8]="k16000Hz",f[f.k12000Hz=9]="k12000Hz",f[f.k11025Hz=10]="k11025Hz",f[f.k8000Hz=11]="k8000Hz",f[f.k7350Hz=12]="k7350Hz"}(L||(L={}));var Oe,Ae,ee=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],oe=(Oe=function(f,c){return(Oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,s){l.__proto__=s}||function(l,s){for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(l[p]=s[p])})(f,c)},function(f,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function l(){this.constructor=f}Oe(f,c),f.prototype=c===null?Object.create(c):(l.prototype=c.prototype,new l)}),_e=function(){},ye=function(f){function c(){return f!==null&&f.apply(this,arguments)||this}return oe(c,f),c}(_e),Se=function(){function f(c){this.TAG="AACADTSParser",this.data_=c,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&u.a.e(this.TAG,"Could not found ADTS syncword until payload end")}return f.prototype.findNextSyncwordOffset=function(c){for(var l=c,s=this.data_;;){if(l+7>=s.byteLength)return this.eof_flag_=!0,s.byteLength;if((s[l+0]<<8|s[l+1])>>>4===4095)return l;l++}},f.prototype.readNextAACFrame=function(){for(var c=this.data_,l=null;l==null&&!this.eof_flag_;){var s=this.current_syncword_offset_,p=(8&c[s+1])>>>3,g=(6&c[s+1])>>>1,m=1&c[s+1],b=(192&c[s+2])>>>6,O=(60&c[s+2])>>>2,D=(1&c[s+2])<<2|(192&c[s+3])>>>6,B=(3&c[s+3])<<11|c[s+4]<<3|(224&c[s+5])>>>5;if(c[s+6],s+B>this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}var V=m===1?7:9,j=B-V;s+=V;var G=this.findNextSyncwordOffset(s+j);if(this.current_syncword_offset_=G,(p===0||p===1)&&g===0){var K=c.subarray(s,s+j);(l=new _e).audio_object_type=b+1,l.sampling_freq_index=O,l.sampling_frequency=ee[O],l.channel_config=D,l.data=K}}return l},f.prototype.hasIncompleteData=function(){return this.has_last_incomplete_data},f.prototype.getIncompleteData=function(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null},f}(),Le=function(){function f(c){this.TAG="AACLOASParser",this.data_=c,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&u.a.e(this.TAG,"Could not found LOAS syncword until payload end")}return f.prototype.findNextSyncwordOffset=function(c){for(var l=c,s=this.data_;;){if(l+1>=s.byteLength)return this.eof_flag_=!0,s.byteLength;if((s[l+0]<<3|s[l+1]>>>5)===695)return l;l++}},f.prototype.getLATMValue=function(c){for(var l=c.readBits(2),s=0,p=0;p<=l;p++)s<<=8,s|=c.readByte();return s},f.prototype.readNextAACFrame=function(c){for(var l=this.data_,s=null;s==null&&!this.eof_flag_;){var p=this.current_syncword_offset_,g=(31&l[p+1])<<8|l[p+2];if(p+3+g>=this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}var m=new N(l.subarray(p+3,p+3+g)),b=null;if(m.readBool()){if(c==null){u.a.w(this.TAG,"StreamMuxConfig Missing"),this.current_syncword_offset_=this.findNextSyncwordOffset(p+3+g),m.destroy();continue}b=c}else{var O=m.readBool();if(O&&m.readBool()){u.a.e(this.TAG,"audioMuxVersionA is Not Supported"),m.destroy();break}if(O&&this.getLATMValue(m),!m.readBool()){u.a.e(this.TAG,"allStreamsSameTimeFraming zero is Not Supported"),m.destroy();break}if(m.readBits(6)!==0){u.a.e(this.TAG,"more than 2 numSubFrames Not Supported"),m.destroy();break}if(m.readBits(4)!==0){u.a.e(this.TAG,"more than 2 numProgram Not Supported"),m.destroy();break}if(m.readBits(3)!==0){u.a.e(this.TAG,"more than 2 numLayer Not Supported"),m.destroy();break}var D=O?this.getLATMValue(m):0,B=m.readBits(5);D-=5;var V=m.readBits(4);D-=4;var j=m.readBits(4);D-=4,m.readBits(3),(D-=3)>0&&m.readBits(D);var G=m.readBits(3);if(G!==0){u.a.e(this.TAG,"frameLengthType = ".concat(G,". Only frameLengthType = 0 Supported")),m.destroy();break}m.readByte();var K=m.readBool();if(K)if(O)this.getLATMValue(m);else{for(var re=0;;){re<<=8;var X=m.readBool();if(re+=m.readByte(),!X)break}console.log(re)}m.readBool()&&m.readByte(),(b=new ye).audio_object_type=B,b.sampling_freq_index=V,b.sampling_frequency=ee[b.sampling_freq_index],b.channel_config=j,b.other_data_present=K}for(var ue=0;;){var se=m.readByte();if(ue+=se,se!==255)break}for(var ae=new Uint8Array(ue),ge=0;ge<ue;ge++)ae[ge]=m.readByte();(s=new ye).audio_object_type=b.audio_object_type,s.sampling_freq_index=b.sampling_freq_index,s.sampling_frequency=ee[b.sampling_freq_index],s.channel_config=b.channel_config,s.other_data_present=b.other_data_present,s.data=ae,this.current_syncword_offset_=this.findNextSyncwordOffset(p+3+g)}return s},f.prototype.hasIncompleteData=function(){return this.has_last_incomplete_data},f.prototype.getIncompleteData=function(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null},f}(),ot=function(f){var c=null,l=f.audio_object_type,s=f.audio_object_type,p=f.sampling_freq_index,g=f.channel_config,m=0,b=navigator.userAgent.toLowerCase();b.indexOf("firefox")!==-1?p>=6?(s=5,c=new Array(4),m=p-3):(s=2,c=new Array(2),m=p):b.indexOf("android")!==-1?(s=2,c=new Array(2),m=p):(s=5,m=p,c=new Array(4),p>=6?m=p-3:g===1&&(s=2,c=new Array(2),m=p)),c[0]=s<<3,c[0]|=(15&p)>>>1,c[1]=(15&p)<<7,c[1]|=(15&g)<<3,s===5&&(c[1]|=(15&m)>>>1,c[2]=(1&m)<<7,c[2]|=8,c[3]=0),this.config=c,this.sampling_rate=ee[p],this.channel_count=g,this.codec_mimetype="mp4a.40."+s,this.original_codec_mimetype="mp4a.40."+l},ct=function(){},cn=function(){};(function(f){f[f.kSpliceNull=0]="kSpliceNull",f[f.kSpliceSchedule=4]="kSpliceSchedule",f[f.kSpliceInsert=5]="kSpliceInsert",f[f.kTimeSignal=6]="kTimeSignal",f[f.kBandwidthReservation=7]="kBandwidthReservation",f[f.kPrivateCommand=255]="kPrivateCommand"})(Ae||(Ae={}));var Ge,mi=function(f){var c=f.readBool();return c?(f.readBits(6),{time_specified_flag:c,pts_time:4*f.readBits(31)+f.readBits(2)}):(f.readBits(7),{time_specified_flag:c})},bo=function(f){var c=f.readBool();return f.readBits(6),{auto_return:c,duration:4*f.readBits(31)+f.readBits(2)}},ms=function(f,c){var l=c.readBits(8);return f?{component_tag:l}:{component_tag:l,splice_time:mi(c)}},gs=function(f){return{component_tag:f.readBits(8),utc_splice_time:f.readBits(32)}},bm=function(f){var c=f.readBits(32),l=f.readBool();f.readBits(7);var s={splice_event_id:c,splice_event_cancel_indicator:l};if(l)return s;if(s.out_of_network_indicator=f.readBool(),s.program_splice_flag=f.readBool(),s.duration_flag=f.readBool(),f.readBits(5),s.program_splice_flag)s.utc_splice_time=f.readBits(32);else{s.component_count=f.readBits(8),s.components=[];for(var p=0;p<s.component_count;p++)s.components.push(gs(f))}return s.duration_flag&&(s.break_duration=bo(f)),s.unique_program_id=f.readBits(16),s.avail_num=f.readBits(8),s.avails_expected=f.readBits(8),s},Am=function(f,c,l,s){return{descriptor_tag:f,descriptor_length:c,identifier:l,provider_avail_id:s.readBits(32)}},km=function(f,c,l,s){var p=s.readBits(8),g=s.readBits(3);s.readBits(5);for(var m="",b=0;b<g;b++)m+=String.fromCharCode(s.readBits(8));return{descriptor_tag:f,descriptor_length:c,identifier:l,preroll:p,dtmf_count:g,DTMF_char:m}},Rm=function(f){var c=f.readBits(8);return f.readBits(7),{component_tag:c,pts_offset:4*f.readBits(31)+f.readBits(2)}},xm=function(f,c,l,s){var p=s.readBits(32),g=s.readBool();s.readBits(7);var m={descriptor_tag:f,descriptor_length:c,identifier:l,segmentation_event_id:p,segmentation_event_cancel_indicator:g};if(g)return m;if(m.program_segmentation_flag=s.readBool(),m.segmentation_duration_flag=s.readBool(),m.delivery_not_restricted_flag=s.readBool(),m.delivery_not_restricted_flag?s.readBits(5):(m.web_delivery_allowed_flag=s.readBool(),m.no_regional_blackout_flag=s.readBool(),m.archive_allowed_flag=s.readBool(),m.device_restrictions=s.readBits(2)),!m.program_segmentation_flag){m.component_count=s.readBits(8),m.components=[];for(var b=0;b<m.component_count;b++)m.components.push(Rm(s))}m.segmentation_duration_flag&&(m.segmentation_duration=s.readBits(40)),m.segmentation_upid_type=s.readBits(8),m.segmentation_upid_length=s.readBits(8);var O=new Uint8Array(m.segmentation_upid_length);for(b=0;b<m.segmentation_upid_length;b++)O[b]=s.readBits(8);return m.segmentation_upid=O.buffer,m.segmentation_type_id=s.readBits(8),m.segment_num=s.readBits(8),m.segments_expected=s.readBits(8),m.segmentation_type_id!==52&&m.segmentation_type_id!==54&&m.segmentation_type_id!==56&&m.segmentation_type_id!==58||(m.sub_segment_num=s.readBits(8),m.sub_segments_expected=s.readBits(8)),m},Cm=function(f,c,l,s){return{descriptor_tag:f,descriptor_length:c,identifier:l,TAI_seconds:s.readBits(48),TAI_ns:s.readBits(32),UTC_offset:s.readBits(16)}},Tm=function(f){return{component_tag:f.readBits(8),ISO_code:String.fromCharCode(f.readBits(8),f.readBits(8),f.readBits(8)),Bit_Stream_Mode:f.readBits(3),Num_Channels:f.readBits(4),Full_Srvc_Audio:f.readBool()}},Lm=function(f,c,l,s){for(var p=s.readBits(4),g=[],m=0;m<p;m++)g.push(Tm(s));return{descriptor_tag:f,descriptor_length:c,identifier:l,audio_count:p,components:g}},Mm=function(f){var c=new N(f),l=c.readBits(8),s=c.readBool(),p=c.readBool();c.readBits(2);var g=c.readBits(12),m=c.readBits(8),b=c.readBool(),O=c.readBits(6),D=4*c.readBits(31)+c.readBits(2),B=c.readBits(8),V=c.readBits(12),j=c.readBits(12),G=c.readBits(8),K=null;G===Ae.kSpliceNull?K={}:G===Ae.kSpliceSchedule?K=function(Ee){for(var Me=Ee.readBits(8),Ne=[],we=0;we<Me;we++)Ne.push(bm(Ee));return{splice_count:Me,events:Ne}}(c):G===Ae.kSpliceInsert?K=function(Ee){var Me=Ee.readBits(32),Ne=Ee.readBool();Ee.readBits(7);var we={splice_event_id:Me,splice_event_cancel_indicator:Ne};if(Ne)return we;if(we.out_of_network_indicator=Ee.readBool(),we.program_splice_flag=Ee.readBool(),we.duration_flag=Ee.readBool(),we.splice_immediate_flag=Ee.readBool(),Ee.readBits(4),we.program_splice_flag&&!we.splice_immediate_flag&&(we.splice_time=mi(Ee)),!we.program_splice_flag){we.component_count=Ee.readBits(8),we.components=[];for(var xe=0;xe<we.component_count;xe++)we.components.push(ms(we.splice_immediate_flag,Ee))}return we.duration_flag&&(we.break_duration=bo(Ee)),we.unique_program_id=Ee.readBits(16),we.avail_num=Ee.readBits(8),we.avails_expected=Ee.readBits(8),we}(c):G===Ae.kTimeSignal?K=function(Ee){return{splice_time:mi(Ee)}}(c):G===Ae.kBandwidthReservation?K={}:G===Ae.kPrivateCommand?K=function(Ee,Me){for(var Ne=String.fromCharCode(Me.readBits(8),Me.readBits(8),Me.readBits(8),Me.readBits(8)),we=new Uint8Array(Ee-4),xe=0;xe<Ee-4;xe++)we[xe]=Me.readBits(8);return{identifier:Ne,private_data:we.buffer}}(j,c):c.readBits(8*j);for(var re=[],X=c.readBits(16),ue=0;ue<X;){var se=c.readBits(8),ae=c.readBits(8),ge=String.fromCharCode(c.readBits(8),c.readBits(8),c.readBits(8),c.readBits(8));se===0?re.push(Am(se,ae,ge,c)):se===1?re.push(km(se,ae,ge,c)):se===2?re.push(xm(se,ae,ge,c)):se===3?re.push(Cm(se,ae,ge,c)):se===4?re.push(Lm(se,ae,ge,c)):c.readBits(8*(ae-4)),ue+=2+ae}var ke={table_id:l,section_syntax_indicator:s,private_indicator:p,section_length:g,protocol_version:m,encrypted_packet:b,encryption_algorithm:O,pts_adjustment:D,cw_index:B,tier:V,splice_command_length:j,splice_command_type:G,splice_command:K,descriptor_loop_length:X,splice_descriptors:re,E_CRC32:b?c.readBits(32):void 0,CRC32:c.readBits(32)};if(G===Ae.kSpliceInsert){var le=K;if(le.splice_event_cancel_indicator)return{splice_command_type:G,detail:ke,data:f};if(le.program_splice_flag&&!le.splice_immediate_flag){var me=le.duration_flag?le.break_duration.auto_return:void 0,Re=le.duration_flag?le.break_duration.duration/90:void 0;return le.splice_time.time_specified_flag?{splice_command_type:G,pts:(D+le.splice_time.pts_time)%Math.pow(2,33),auto_return:me,duraiton:Re,detail:ke,data:f}:{splice_command_type:G,auto_return:me,duraiton:Re,detail:ke,data:f}}return{splice_command_type:G,auto_return:me=le.duration_flag?le.break_duration.auto_return:void 0,duraiton:Re=le.duration_flag?le.break_duration.duration/90:void 0,detail:ke,data:f}}if(G===Ae.kTimeSignal){var ve=K;return ve.splice_time.time_specified_flag?{splice_command_type:G,pts:(D+ve.splice_time.pts_time)%Math.pow(2,33),detail:ke,data:f}:{splice_command_type:G,detail:ke,data:f}}return{splice_command_type:G,detail:ke,data:f}};(function(f){f[f.kSliceIDR_W_RADL=19]="kSliceIDR_W_RADL",f[f.kSliceIDR_N_LP=20]="kSliceIDR_N_LP",f[f.kSliceCRA_NUT=21]="kSliceCRA_NUT",f[f.kSliceVPS=32]="kSliceVPS",f[f.kSliceSPS=33]="kSliceSPS",f[f.kSlicePPS=34]="kSlicePPS",f[f.kSliceAUD=35]="kSliceAUD"})(Ge||(Ge={}));var Pm=function(){},Dm=function(f){var c=f.data.byteLength;this.type=f.type,this.data=new Uint8Array(4+c),new DataView(this.data.buffer).setUint32(0,c),this.data.set(f.data,4)},Om=function(){function f(c){this.TAG="H265AnnexBParser",this.current_startcode_offset_=0,this.eof_flag_=!1,this.data_=c,this.current_startcode_offset_=this.findNextStartCodeOffset(0),this.eof_flag_&&u.a.e(this.TAG,"Could not find H265 startcode until payload end!")}return f.prototype.findNextStartCodeOffset=function(c){for(var l=c,s=this.data_;;){if(l+3>=s.byteLength)return this.eof_flag_=!0,s.byteLength;var p=s[l+0]<<24|s[l+1]<<16|s[l+2]<<8|s[l+3],g=s[l+0]<<16|s[l+1]<<8|s[l+2];if(p===1||g===1)return l;l++}},f.prototype.readNextNaluPayload=function(){for(var c=this.data_,l=null;l==null&&!this.eof_flag_;){var s=this.current_startcode_offset_,p=c[s+=(c[s]<<24|c[s+1]<<16|c[s+2]<<8|c[s+3])===1?4:3]>>1&63,g=(128&c[s])>>>7,m=this.findNextStartCodeOffset(s);if(this.current_startcode_offset_=m,g===0){var b=c.subarray(s,m);(l=new Pm).type=p,l.data=b}}return l},f}(),Im=function(){function f(c,l,s,p){var g=23+(5+c.byteLength)+(5+l.byteLength)+(5+s.byteLength),m=this.data=new Uint8Array(g);m[0]=1,m[1]=(3&p.general_profile_space)<<6|(p.general_tier_flag?1:0)<<5|31&p.general_profile_idc,m[2]=p.general_profile_compatibility_flags_1,m[3]=p.general_profile_compatibility_flags_2,m[4]=p.general_profile_compatibility_flags_3,m[5]=p.general_profile_compatibility_flags_4,m[6]=p.general_constraint_indicator_flags_1,m[7]=p.general_constraint_indicator_flags_2,m[8]=p.general_constraint_indicator_flags_3,m[9]=p.general_constraint_indicator_flags_4,m[10]=p.general_constraint_indicator_flags_5,m[11]=p.general_constraint_indicator_flags_6,m[12]=p.general_level_idc,m[13]=240|(3840&p.min_spatial_segmentation_idc)>>8,m[14]=255&p.min_spatial_segmentation_idc,m[15]=252|3&p.parallelismType,m[16]=252|3&p.chroma_format_idc,m[17]=248|7&p.bit_depth_luma_minus8,m[18]=248|7&p.bit_depth_chroma_minus8,m[19]=0,m[20]=0,m[21]=(3&p.constant_frame_rate)<<6|(7&p.num_temporal_layers)<<3|(p.temporal_id_nested?1:0)<<2|3,m[22]=3,m[23]=128|Ge.kSliceVPS,m[24]=0,m[25]=1,m[26]=(65280&c.byteLength)>>8,m[27]=(255&c.byteLength)>>0,m.set(c,28),m[23+(5+c.byteLength)+0]=128|Ge.kSliceSPS,m[23+(5+c.byteLength)+1]=0,m[23+(5+c.byteLength)+2]=1,m[23+(5+c.byteLength)+3]=(65280&l.byteLength)>>8,m[23+(5+c.byteLength)+4]=(255&l.byteLength)>>0,m.set(l,23+(5+c.byteLength)+5),m[23+(5+c.byteLength+5+l.byteLength)+0]=128|Ge.kSlicePPS,m[23+(5+c.byteLength+5+l.byteLength)+1]=0,m[23+(5+c.byteLength+5+l.byteLength)+2]=1,m[23+(5+c.byteLength+5+l.byteLength)+3]=(65280&s.byteLength)>>8,m[23+(5+c.byteLength+5+l.byteLength)+4]=(255&s.byteLength)>>0,m.set(s,23+(5+c.byteLength+5+l.byteLength)+5)}return f.prototype.getData=function(){return this.data},f}(),Nm=function(){},Bm=function(){},Um=function(){},jm=[[64,64,80,80,96,96,112,112,128,128,160,160,192,192,224,224,256,256,320,320,384,384,448,448,512,512,640,640,768,768,896,896,1024,1024,1152,1152,1280,1280],[69,70,87,88,104,105,121,122,139,140,174,175,208,209,243,244,278,279,348,349,417,418,487,488,557,558,696,697,835,836,975,976,1114,1115,1253,1254,1393,1394],[96,96,120,120,144,144,168,168,192,192,240,240,288,288,336,336,384,384,480,480,576,576,672,672,768,768,960,960,1152,1152,1344,1344,1536,1536,1728,1728,1920,1920]],Fm=function(){function f(c){this.TAG="AC3Parser",this.data_=c,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&u.a.e(this.TAG,"Could not found AC3 syncword until payload end")}return f.prototype.findNextSyncwordOffset=function(c){for(var l=c,s=this.data_;;){if(l+7>=s.byteLength)return this.eof_flag_=!0,s.byteLength;if((s[l+0]<<8|s[l+1]<<0)===2935)return l;l++}},f.prototype.readNextAC3Frame=function(){for(var c=this.data_,l=null;l==null&&!this.eof_flag_;){var s=this.current_syncword_offset_,p=c[s+4]>>6,g=[48e3,44200,33e3][p],m=63&c[s+4],b=2*jm[p][m];if(isNaN(b)||s+b>this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}var O=this.findNextSyncwordOffset(s+b);this.current_syncword_offset_=O;var D=c[s+5]>>3,B=7&c[s+5],V=c[s+6]>>5,j=0;1&V&&V!==1&&(j+=2),4&V&&(j+=2),V===2&&(j+=2);var G=(c[s+6]<<8|c[s+7]<<0)>>12-j&1,K=[2,1,2,3,3,4,4,5][V]+G;(l=new Um).sampling_frequency=g,l.channel_count=K,l.channel_mode=V,l.bit_stream_identification=D,l.low_frequency_effects_channel_on=G,l.bit_stream_mode=B,l.frame_size_code=m,l.data=c.subarray(s,s+b)}return l},f.prototype.hasIncompleteData=function(){return this.has_last_incomplete_data},f.prototype.getIncompleteData=function(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null},f}(),Vm=function(f){var c;c=[f.sampling_rate_code<<6|f.bit_stream_identification<<1|f.bit_stream_mode>>2,(3&f.bit_stream_mode)<<6|f.channel_mode<<3|f.low_frequency_effects_channel_on<<2|f.frame_size_code>>4,f.frame_size_code<<4&224],this.config=c,this.sampling_rate=f.sampling_frequency,this.bit_stream_identification=f.bit_stream_identification,this.bit_stream_mode=f.bit_stream_mode,this.low_frequency_effects_channel_on=f.low_frequency_effects_channel_on,this.channel_count=f.channel_count,this.channel_mode=f.channel_mode,this.codec_mimetype="ac-3",this.original_codec_mimetype="ac-3"},zm=function(){},$m=function(){function f(c){this.TAG="EAC3Parser",this.data_=c,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&u.a.e(this.TAG,"Could not found AC3 syncword until payload end")}return f.prototype.findNextSyncwordOffset=function(c){for(var l=c,s=this.data_;;){if(l+7>=s.byteLength)return this.eof_flag_=!0,s.byteLength;if((s[l+0]<<8|s[l+1]<<0)===2935)return l;l++}},f.prototype.readNextEAC3Frame=function(){for(var c=this.data_,l=null;l==null&&!this.eof_flag_;){var s=this.current_syncword_offset_,p=new N(c.subarray(s+2)),g=(p.readBits(2),p.readBits(3),p.readBits(11)+1<<1),m=p.readBits(2),b=null,O=null;m===3?(b=[24e3,22060,16e3][m=p.readBits(2)],O=3):(b=[48e3,44100,32e3][m],O=p.readBits(2));var D=p.readBits(3),B=p.readBits(1),V=p.readBits(5);if(s+g>this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}var j=this.findNextSyncwordOffset(s+g);this.current_syncword_offset_=j;var G=[2,1,2,3,3,4,4,5][D]+B;p.destroy(),(l=new zm).sampling_frequency=b,l.channel_count=G,l.channel_mode=D,l.bit_stream_identification=V,l.low_frequency_effects_channel_on=B,l.frame_size=g,l.num_blks=[1,2,3,6][O],l.data=c.subarray(s,s+g)}return l},f.prototype.hasIncompleteData=function(){return this.has_last_incomplete_data},f.prototype.getIncompleteData=function(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null},f}(),Gm=function(f){var c,l=Math.floor(f.frame_size*f.sampling_frequency/(16*f.num_blks));c=[255&l,248&l,f.sampling_rate_code<<6|f.bit_stream_identification<<1|0,0|f.channel_mode<<1|f.low_frequency_effects_channel_on<<0,0],this.config=c,this.sampling_rate=f.sampling_frequency,this.bit_stream_identification=f.bit_stream_identification,this.num_blks=f.num_blks,this.low_frequency_effects_channel_on=f.low_frequency_effects_channel_on,this.channel_count=f.channel_count,this.channel_mode=f.channel_mode,this.codec_mimetype="ec-3",this.original_codec_mimetype="ec-3"},Hm=function(){},Wm=function(){function f(c){this.TAG="AV1OBUInMpegTsParser",this.current_startcode_offset_=0,this.eof_flag_=!1,this.data_=c,this.current_startcode_offset_=this.findNextStartCodeOffset(0),this.eof_flag_&&u.a.e(this.TAG,"Could not find AV1 startcode until payload end!")}return f._ebsp2rbsp=function(c){for(var l=c,s=l.byteLength,p=new Uint8Array(s),g=0,m=0;m<s;m++)m>=2&&l[m]===3&&l[m-1]===0&&l[m-2]===0||(p[g]=l[m],g++);return new Uint8Array(p.buffer,0,g)},f.prototype.findNextStartCodeOffset=function(c){for(var l=c,s=this.data_;;){if(l+2>=s.byteLength)return this.eof_flag_=!0,s.byteLength;if((s[l+0]<<16|s[l+1]<<8|s[l+2])===1)return l;l++}},f.prototype.readNextOBUPayload=function(){for(var c=this.data_,l=null;l==null&&!this.eof_flag_;){var s=this.current_startcode_offset_+3,p=this.findNextStartCodeOffset(s);this.current_startcode_offset_=p,l=f._ebsp2rbsp(c.subarray(s,p))}return l},f}(),qm=function(){var f=function(c,l){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,p){s.__proto__=p}||function(s,p){for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(s[g]=p[g])})(c,l)};return function(c,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function s(){this.constructor=c}f(c,l),c.prototype=l===null?Object.create(l):(s.prototype=l.prototype,new s)}}(),or=function(){return(or=Object.assign||function(f){for(var c,l=1,s=arguments.length;l<s;l++)for(var p in c=arguments[l])Object.prototype.hasOwnProperty.call(c,p)&&(f[p]=c[p]);return f}).apply(this,arguments)},Oc=function(f){function c(l,s){var p=f.call(this)||this;return p.TAG="TSDemuxer",p.first_parse_=!0,p.media_info_=new h.a,p.timescale_=90,p.duration_=0,p.current_pmt_pid_=-1,p.program_pmt_map_={},p.pes_slice_queues_={},p.section_slice_queues_={},p.video_metadata_={vps:void 0,sps:void 0,pps:void 0,av1c:void 0,details:void 0},p.audio_metadata_={codec:void 0,audio_object_type:void 0,sampling_freq_index:void 0,sampling_frequency:void 0,channel_config:void 0},p.last_pcr_base_=NaN,p.timestamp_offset_=0,p.audio_last_sample_pts_=void 0,p.aac_last_incomplete_data_=null,p.has_video_=!1,p.has_audio_=!1,p.video_init_segment_dispatched_=!1,p.audio_init_segment_dispatched_=!1,p.video_metadata_changed_=!1,p.audio_metadata_changed_=!1,p.loas_previous_frame=null,p.video_track_={type:"video",id:1,sequenceNumber:0,samples:[],length:0},p.audio_track_={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},p.ts_packet_size_=l.ts_packet_size,p.sync_offset_=l.sync_offset,p.config_=s,p}return qm(c,f),c.prototype.destroy=function(){this.media_info_=null,this.pes_slice_queues_=null,this.section_slice_queues_=null,this.video_metadata_=null,this.audio_metadata_=null,this.aac_last_incomplete_data_=null,this.video_track_=null,this.audio_track_=null,f.prototype.destroy.call(this)},c.probe=function(l){var s=new Uint8Array(l),p=-1,g=188;if(s.byteLength<=3*g)return{needMoreData:!0};for(;p===-1;){for(var m=Math.min(1e3,s.byteLength-3*g),b=0;b<m;){if(s[b]===71&&s[b+g]===71&&s[b+2*g]===71){p=b;break}b++}if(p===-1)if(g===188)g=192;else{if(g!==192)break;g=204}}return p===-1?{match:!1}:(g===192&&p>=4?(u.a.v("TSDemuxer","ts_packet_size = 192, m2ts mode"),p-=4):g===204&&u.a.v("TSDemuxer","ts_packet_size = 204, RS encoded MPEG2-TS stream"),{match:!0,consumed:0,ts_packet_size:g,sync_offset:p})},c.prototype.bindDataSource=function(l){return l.onDataArrival=this.parseChunks.bind(this),this},c.prototype.resetMediaInfo=function(){this.media_info_=new h.a},c.prototype.parseChunks=function(l,s){if(!(this.onError&&this.onMediaInfo&&this.onTrackMetadata&&this.onDataAvailable))throw new v.a("onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var p=0;for(this.first_parse_&&(this.first_parse_=!1,p=this.sync_offset_);p+this.ts_packet_size_<=l.byteLength;){var g=s+p;this.ts_packet_size_===192&&(p+=4);var m=new Uint8Array(l,p,188),b=m[0];if(b!==71){u.a.e(this.TAG,"sync_byte = ".concat(b,", not 0x47"));break}var O=(64&m[1])>>>6,D=(m[1],(31&m[1])<<8|m[2]),B=(48&m[3])>>>4,V=15&m[3],j=!(!this.pmt_||this.pmt_.pcr_pid!==D),G={},K=4;if(B==2||B==3){var re=m[4];if(re>0&&(j||B==3)&&(G.discontinuity_indicator=(128&m[5])>>>7,G.random_access_indicator=(64&m[5])>>>6,G.elementary_stream_priority_indicator=(32&m[5])>>>5,(16&m[5])>>>4)){var X=300*this.getPcrBase(m)+((1&m[10])<<8|m[11]);this.last_pcr_=X}if(B==2||5+re===188){p+=188,this.ts_packet_size_===204&&(p+=16);continue}K=5+re}if(B==1||B==3){if(D===0||D===this.current_pmt_pid_||this.pmt_!=null&&this.pmt_.pid_stream_type[D]===k.kSCTE35){var ue=188-K;this.handleSectionSlice(l,p+K,ue,{pid:D,file_position:g,payload_unit_start_indicator:O,continuity_conunter:V,random_access_indicator:G.random_access_indicator})}else if(this.pmt_!=null&&this.pmt_.pid_stream_type[D]!=null){ue=188-K;var se=this.pmt_.pid_stream_type[D];D!==this.pmt_.common_pids.h264&&D!==this.pmt_.common_pids.h265&&D!==this.pmt_.common_pids.av1&&D!==this.pmt_.common_pids.adts_aac&&D!==this.pmt_.common_pids.loas_aac&&D!==this.pmt_.common_pids.ac3&&D!==this.pmt_.common_pids.eac3&&D!==this.pmt_.common_pids.opus&&D!==this.pmt_.common_pids.mp3&&this.pmt_.pes_private_data_pids[D]!==!0&&this.pmt_.timed_id3_pids[D]!==!0&&this.pmt_.synchronous_klv_pids[D]!==!0&&this.pmt_.asynchronous_klv_pids[D]!==!0||this.handlePESSlice(l,p+K,ue,{pid:D,stream_type:se,file_position:g,payload_unit_start_indicator:O,continuity_conunter:V,random_access_indicator:G.random_access_indicator})}}p+=188,this.ts_packet_size_===204&&(p+=16)}return this.dispatchAudioVideoMediaSegment(),p},c.prototype.handleSectionSlice=function(l,s,p,g){var m=new Uint8Array(l,s,p),b=this.section_slice_queues_[g.pid];if(g.payload_unit_start_indicator){var O=m[0];if(b!=null&&b.total_length!==0){var D=new Uint8Array(l,s+1,Math.min(p,O));b.slices.push(D),b.total_length+=D.byteLength,b.total_length===b.expected_length?this.emitSectionSlices(b,g):this.clearSlices(b,g)}for(var B=1+O;B<m.byteLength&&m[B+0]!==255;){var V=(15&m[B+1])<<8|m[B+2];this.section_slice_queues_[g.pid]=new Z,(b=this.section_slice_queues_[g.pid]).expected_length=V+3,b.file_position=g.file_position,b.random_access_indicator=g.random_access_indicator,D=new Uint8Array(l,s+B,Math.min(p-B,b.expected_length-b.total_length)),b.slices.push(D),b.total_length+=D.byteLength,b.total_length===b.expected_length?this.emitSectionSlices(b,g):b.total_length>=b.expected_length&&this.clearSlices(b,g),B+=D.byteLength}}else b!=null&&b.total_length!==0&&(D=new Uint8Array(l,s,Math.min(p,b.expected_length-b.total_length)),b.slices.push(D),b.total_length+=D.byteLength,b.total_length===b.expected_length?this.emitSectionSlices(b,g):b.total_length>=b.expected_length&&this.clearSlices(b,g))},c.prototype.handlePESSlice=function(l,s,p,g){var m=new Uint8Array(l,s,p),b=m[0]<<16|m[1]<<8|m[2],O=(m[3],m[4]<<8|m[5]);if(g.payload_unit_start_indicator){if(b!==1)return void u.a.e(this.TAG,"handlePESSlice: packet_start_code_prefix should be 1 but with value ".concat(b));var D=this.pes_slice_queues_[g.pid];D&&(D.expected_length===0||D.expected_length===D.total_length?this.emitPESSlices(D,g):this.clearSlices(D,g)),this.pes_slice_queues_[g.pid]=new Z,this.pes_slice_queues_[g.pid].file_position=g.file_position,this.pes_slice_queues_[g.pid].random_access_indicator=g.random_access_indicator}if(this.pes_slice_queues_[g.pid]!=null){var B=this.pes_slice_queues_[g.pid];B.slices.push(m),g.payload_unit_start_indicator&&(B.expected_length=O===0?0:O+6),B.total_length+=m.byteLength,B.expected_length>0&&B.expected_length===B.total_length?this.emitPESSlices(B,g):B.expected_length>0&&B.expected_length<B.total_length&&this.clearSlices(B,g)}},c.prototype.emitSectionSlices=function(l,s){for(var p=new Uint8Array(l.total_length),g=0,m=0;g<l.slices.length;g++){var b=l.slices[g];p.set(b,m),m+=b.byteLength}l.slices=[],l.expected_length=-1,l.total_length=0;var O=new be;O.pid=s.pid,O.data=p,O.file_position=l.file_position,O.random_access_indicator=l.random_access_indicator,this.parseSection(O)},c.prototype.emitPESSlices=function(l,s){for(var p=new Uint8Array(l.total_length),g=0,m=0;g<l.slices.length;g++){var b=l.slices[g];p.set(b,m),m+=b.byteLength}l.slices=[],l.expected_length=-1,l.total_length=0;var O=new ce;O.pid=s.pid,O.data=p,O.stream_type=s.stream_type,O.file_position=l.file_position,O.random_access_indicator=l.random_access_indicator,this.parsePES(O)},c.prototype.clearSlices=function(l,s){l.slices=[],l.expected_length=-1,l.total_length=0},c.prototype.parseSection=function(l){var s=l.data,p=l.pid;p===0?this.parsePAT(s):p===this.current_pmt_pid_?this.parsePMT(s):this.pmt_!=null&&this.pmt_.scte_35_pids[p]&&this.parseSCTE35(s)},c.prototype.parsePES=function(l){var s=l.data,p=s[0]<<16|s[1]<<8|s[2],g=s[3],m=s[4]<<8|s[5];if(p===1)if(g!==188&&g!==190&&g!==191&&g!==240&&g!==241&&g!==255&&g!==242&&g!==248){s[6];var b=(192&s[7])>>>6,O=s[8],D=void 0,B=void 0;b!==2&&b!==3||(D=this.getTimestamp(s,9),B=b===3?this.getTimestamp(s,14):D);var V=9+O,j=void 0;if(m!==0){if(m<3+O)return void u.a.v(this.TAG,"Malformed PES: PES_packet_length < 3 + PES_header_data_length");j=m-3-O}else j=s.byteLength-V;var G=s.subarray(V,V+j);switch(l.stream_type){case k.kMPEG1Audio:case k.kMPEG2Audio:this.parseMP3Payload(G,D);break;case k.kPESPrivateData:this.pmt_.common_pids.av1===l.pid?this.parseAV1Payload(G,D,B,l.file_position,l.random_access_indicator):this.pmt_.common_pids.opus===l.pid?this.parseOpusPayload(G,D):this.pmt_.common_pids.ac3===l.pid?this.parseAC3Payload(G,D):this.pmt_.common_pids.eac3===l.pid?this.parseEAC3Payload(G,D):this.pmt_.asynchronous_klv_pids[l.pid]?this.parseAsynchronousKLVMetadataPayload(G,l.pid,g):this.pmt_.smpte2038_pids[l.pid]?this.parseSMPTE2038MetadataPayload(G,D,B,l.pid,g):this.parsePESPrivateDataPayload(G,D,B,l.pid,g);break;case k.kADTSAAC:this.parseADTSAACPayload(G,D);break;case k.kLOASAAC:this.parseLOASAACPayload(G,D);break;case k.kAC3:this.parseAC3Payload(G,D);break;case k.kEAC3:this.parseEAC3Payload(G,D);break;case k.kMetadata:this.pmt_.timed_id3_pids[l.pid]?this.parseTimedID3MetadataPayload(G,D,B,l.pid,g):this.pmt_.synchronous_klv_pids[l.pid]&&this.parseSynchronousKLVMetadataPayload(G,D,B,l.pid,g);break;case k.kH264:this.parseH264Payload(G,D,B,l.file_position,l.random_access_indicator);break;case k.kH265:this.parseH265Payload(G,D,B,l.file_position,l.random_access_indicator)}}else(g===188||g===191||g===240||g===241||g===255||g===242||g===248)&&l.stream_type===k.kPESPrivateData&&(V=6,j=void 0,j=m!==0?m:s.byteLength-V,G=s.subarray(V,V+j),this.parsePESPrivateDataPayload(G,void 0,void 0,l.pid,g));else u.a.e(this.TAG,"parsePES: packet_start_code_prefix should be 1 but with value ".concat(p))},c.prototype.parsePAT=function(l){var s=l[0];if(s===0){var p=(15&l[1])<<8|l[2],g=(l[3],l[4],(62&l[5])>>>1),m=1&l[5],b=l[6],O=(l[7],null);if(m===1&&b===0)(O=new J).version_number=g;else if((O=this.pat_)==null)return;for(var D=p-5-4,B=-1,V=-1,j=8;j<8+D;j+=4){var G=l[j]<<8|l[j+1],K=(31&l[j+2])<<8|l[j+3];G===0?O.network_pid=K:(O.program_pmt_pid[G]=K,B===-1&&(B=G),V===-1&&(V=K))}m===1&&b===0&&(this.pat_==null&&u.a.v(this.TAG,"Parsed first PAT: ".concat(JSON.stringify(O))),this.pat_=O,this.current_program_=B,this.current_pmt_pid_=V)}else u.a.e(this.TAG,"parsePAT: table_id ".concat(s," is not corresponded to PAT!"))},c.prototype.parsePMT=function(l){var s=l[0];if(s===2){var p=(15&l[1])<<8|l[2],g=l[3]<<8|l[4],m=(62&l[5])>>>1,b=1&l[5],O=l[6],D=(l[7],null);if(b===1&&O===0)(D=new ne).program_number=g,D.version_number=m,this.program_pmt_map_[g]=D;else if((D=this.program_pmt_map_[g])==null)return;D.pcr_pid=(31&l[8])<<8|l[9];for(var B=(15&l[10])<<8|l[11],V=12+B,j=p-9-B-4,G=V;G<V+j;){var K=l[G],re=(31&l[G+1])<<8|l[G+2],X=(15&l[G+3])<<8|l[G+4];D.pid_stream_type[re]=K;var ue=D.common_pids.h264||D.common_pids.h265,se=D.common_pids.adts_aac||D.common_pids.loas_aac||D.common_pids.ac3||D.common_pids.eac3||D.common_pids.opus||D.common_pids.mp3;if(K!==k.kH264||ue)if(K!==k.kH265||ue)if(K!==k.kADTSAAC||se)if(K!==k.kLOASAAC||se)if(K!==k.kAC3||se)if(K!==k.kEAC3||se)if(K!==k.kMPEG1Audio&&K!==k.kMPEG2Audio||se)if(K===k.kPESPrivateData){if(D.pes_private_data_pids[re]=!0,X>0){for(var ae=G+5;ae<G+5+X;){var ge=l[ae+0],ke=l[ae+1];if(ge===5){var le=String.fromCharCode.apply(String,Array.from(l.subarray(ae+2,ae+2+ke)));le==="VANC"?D.smpte2038_pids[re]=!0:le==="AV01"?D.common_pids.av1=re:le==="Opus"?D.common_pids.opus=re:le==="KLVA"&&(D.asynchronous_klv_pids[re]=!0)}else if(ge===127){if(re===D.common_pids.opus){var me=null;if(l[ae+2]===128&&(me=l[ae+3]),me==null){u.a.e(this.TAG,"Not Supported Opus channel count.");continue}var Re={codec:"opus",channel_count:15&me?15&me:2,channel_config_code:me,sample_rate:48e3},ve={codec:"opus",meta:Re};this.audio_init_segment_dispatched_==0?(this.audio_metadata_=Re,this.dispatchAudioInitSegment(ve)):this.detectAudioMetadataChange(ve)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(ve))}}else ge===128&&re===D.common_pids.av1&&(this.video_metadata_.av1c=l.subarray(ae+2,ae+2+ke));ae+=2+ke}var Ee=l.subarray(G+5,G+5+X);this.dispatchPESPrivateDataDescriptor(re,K,Ee)}}else if(K===k.kMetadata){if(X>0)for(ae=G+5;ae<G+5+X;){ge=l[ae+0];var Me=l[ae+1];if(ge===38){var Ne=l[ae+2]<<8|l[ae+3]<<0,we=null;Ne===65535&&(we=String.fromCharCode.apply(String,Array.from(l.subarray(ae+4,ae+4+4))));var xe=null;if(l[ae+4+(Ne===65535?4:0)]===255){var Ue=4+(Ne===65535?4:0)+1;xe=String.fromCharCode.apply(String,Array.from(l.subarray(ae+Ue,ae+Ue+4)))}we==="ID3 "&&xe==="ID3 "?D.timed_id3_pids[re]=!0:xe==="KLVA"&&(D.synchronous_klv_pids[re]=!0)}ae+=2+Me}}else K===k.kSCTE35&&(D.scte_35_pids[re]=!0);else D.common_pids.mp3=re;else D.common_pids.eac3=re;else D.common_pids.ac3=re;else D.common_pids.loas_aac=re;else D.common_pids.adts_aac=re;else D.common_pids.h265=re;else D.common_pids.h264=re;G+=5+X}g===this.current_program_&&(this.pmt_==null&&u.a.v(this.TAG,"Parsed first PMT: ".concat(JSON.stringify(D))),this.pmt_=D,(D.common_pids.h264||D.common_pids.h265||D.common_pids.av1)&&(this.has_video_=!0),(D.common_pids.adts_aac||D.common_pids.loas_aac||D.common_pids.ac3||D.common_pids.opus||D.common_pids.mp3)&&(this.has_audio_=!0))}else u.a.e(this.TAG,"parsePMT: table_id ".concat(s," is not corresponded to PMT!"))},c.prototype.parseSCTE35=function(l){var s=Mm(l);if(s.pts!=null){var p=Math.floor(s.pts/this.timescale_);s.pts=p}else s.nearest_pts=this.getNearestTimestampMilliseconds();this.onSCTE35Metadata&&this.onSCTE35Metadata(s)},c.prototype.parseAV1Payload=function(l,s,p,g,m){for(var b=new Wm(l),O=null,D=[],B=0,V=!1,j=null;(O=b.readNextOBUPayload())!=null;){if((j=C.parseOBUs(O,this.video_metadata_.details))&&j.keyframe===!0)if(this.video_init_segment_dispatched_){if(this.detectVideoMetadataChange(null,j)===!0){var G;this.video_metadata_changed_=!0,this.dispatchVideoMediaSegment(),(G=new Uint8Array(new ArrayBuffer(this.video_metadata_.av1c.byteLength+j.sequence_header_data.byteLength))).set(this.video_metadata_.av1c,0),G.set(j.sequence_header_data,this.video_metadata_.av1c.byteLength),j.av1c=G,this.dispatchVideoInitSegment()}}else(G=new Uint8Array(new ArrayBuffer(this.video_metadata_.av1c.byteLength+j.sequence_header_data.byteLength))).set(this.video_metadata_.av1c,0),G.set(j.sequence_header_data,this.video_metadata_.av1c.byteLength),j.av1c=G,this.video_metadata_.details=j,this.dispatchVideoInitSegment();this.video_metadata_.details=j,V||(V=j.keyframe),D.push({data:O}),B+=O.byteLength}var K=Math.floor(s/this.timescale_),re=Math.floor(p/this.timescale_);if(D.length){var X=this.video_track_,ue={units:D,length:B,isKeyframe:V,dts:re,pts:K,cts:K-re,file_position:g};X.samples.push(ue),X.length+=B}},c.prototype.parseH264Payload=function(l,s,p,g,m){for(var b=new de(l),O=null,D=[],B=0,V=!1;(O=b.readNextNaluPayload())!=null;){var j=new Q(O);if(j.type===q.kSliceSPS){var G=A.parseSPS(O.data);this.video_init_segment_dispatched_?this.detectVideoMetadataChange(j,G)===!0&&(u.a.v(this.TAG,"H264: Critical h264 metadata has been changed, attempt to re-generate InitSegment"),this.video_metadata_changed_=!0,this.video_metadata_={vps:void 0,sps:j,pps:void 0,av1c:void 0,details:G}):(this.video_metadata_.sps=j,this.video_metadata_.details=G)}else j.type===q.kSlicePPS?this.video_init_segment_dispatched_&&!this.video_metadata_changed_||(this.video_metadata_.pps=j,this.video_metadata_.sps&&this.video_metadata_.pps&&(this.video_metadata_changed_&&this.dispatchVideoMediaSegment(),this.dispatchVideoInitSegment())):(j.type===q.kSliceIDR||j.type===q.kSliceNonIDR&&m===1)&&(V=!0);this.video_init_segment_dispatched_&&(D.push(j),B+=j.data.byteLength)}var K=Math.floor(s/this.timescale_),re=Math.floor(p/this.timescale_);if(D.length){var X=this.video_track_,ue={units:D,length:B,isKeyframe:V,dts:re,pts:K,cts:K-re,file_position:g};X.samples.push(ue),X.length+=B}},c.prototype.parseH265Payload=function(l,s,p,g,m){for(var b=new Om(l),O=null,D=[],B=0,V=!1;(O=b.readNextNaluPayload())!=null;){var j=new Dm(O);if(j.type===Ge.kSliceVPS){if(!this.video_init_segment_dispatched_){var G=T.parseVPS(O.data);this.video_metadata_.vps=j,this.video_metadata_.details=or(or({},this.video_metadata_.details),G)}}else j.type===Ge.kSliceSPS?(G=T.parseSPS(O.data),this.video_init_segment_dispatched_?this.detectVideoMetadataChange(j,G)===!0&&(u.a.v(this.TAG,"H265: Critical h265 metadata has been changed, attempt to re-generate InitSegment"),this.video_metadata_changed_=!0,this.video_metadata_={vps:void 0,sps:j,pps:void 0,av1c:void 0,details:G}):(this.video_metadata_.sps=j,this.video_metadata_.details=or(or({},this.video_metadata_.details),G))):j.type===Ge.kSlicePPS?(!this.video_init_segment_dispatched_||this.video_metadata_changed_)&&(G=T.parsePPS(O.data),this.video_metadata_.pps=j,this.video_metadata_.details=or(or({},this.video_metadata_.details),G),this.video_metadata_.vps&&this.video_metadata_.sps&&this.video_metadata_.pps&&(this.video_metadata_changed_&&this.dispatchVideoMediaSegment(),this.dispatchVideoInitSegment())):j.type!==Ge.kSliceIDR_W_RADL&&j.type!==Ge.kSliceIDR_N_LP&&j.type!==Ge.kSliceCRA_NUT||(V=!0);this.video_init_segment_dispatched_&&(D.push(j),B+=j.data.byteLength)}var K=Math.floor(s/this.timescale_),re=Math.floor(p/this.timescale_);if(D.length){var X=this.video_track_,ue={units:D,length:B,isKeyframe:V,dts:re,pts:K,cts:K-re,file_position:g};X.samples.push(ue),X.length+=B}},c.prototype.detectVideoMetadataChange=function(l,s){if(s.codec_mimetype!==this.video_metadata_.details.codec_mimetype)return u.a.v(this.TAG,"Video: Codec mimeType changed from "+"".concat(this.video_metadata_.details.codec_mimetype," to ").concat(s.codec_mimetype)),!0;if(s.codec_size.width!==this.video_metadata_.details.codec_size.width||s.codec_size.height!==this.video_metadata_.details.codec_size.height){var p=this.video_metadata_.details.codec_size,g=s.codec_size;return u.a.v(this.TAG,"Video: Coded Resolution changed from "+"".concat(p.width,"x").concat(p.height," to ").concat(g.width,"x").concat(g.height)),!0}return s.present_size.width!==this.video_metadata_.details.present_size.width&&(u.a.v(this.TAG,"Video: Present resolution width changed from "+"".concat(this.video_metadata_.details.present_size.width," to ").concat(s.present_size.width)),!0)},c.prototype.isInitSegmentDispatched=function(){return this.has_video_&&this.has_audio_?this.video_init_segment_dispatched_&&this.audio_init_segment_dispatched_:this.has_video_&&!this.has_audio_?this.video_init_segment_dispatched_:!(this.has_video_||!this.has_audio_)&&this.audio_init_segment_dispatched_},c.prototype.dispatchVideoInitSegment=function(){var l=this.video_metadata_.details,s={type:"video"};s.id=this.video_track_.id,s.timescale=1e3,s.duration=this.duration_,s.codecWidth=l.codec_size.width,s.codecHeight=l.codec_size.height,s.presentWidth=l.present_size.width,s.presentHeight=l.present_size.height,s.profile=l.profile_string,s.level=l.level_string,s.bitDepth=l.bit_depth,s.chromaFormat=l.chroma_format,s.sarRatio=l.sar_ratio,s.frameRate=l.frame_rate;var p=s.frameRate.fps_den,g=s.frameRate.fps_num;if(s.refSampleDuration=p/g*1e3,s.codec=l.codec_mimetype,this.video_metadata_.av1c)s.av1c=this.video_metadata_.av1c,this.video_init_segment_dispatched_==0&&u.a.v(this.TAG,"Generated first AV1 for mimeType: ".concat(s.codec));else if(this.video_metadata_.vps){var m=this.video_metadata_.vps.data.subarray(4),b=this.video_metadata_.sps.data.subarray(4),O=this.video_metadata_.pps.data.subarray(4),D=new Im(m,b,O,l);s.hvcc=D.getData(),this.video_init_segment_dispatched_==0&&u.a.v(this.TAG,"Generated first HEVCDecoderConfigurationRecord for mimeType: ".concat(s.codec))}else{b=this.video_metadata_.sps.data.subarray(4),O=this.video_metadata_.pps.data.subarray(4);var B=new pe(b,O,l);s.avcc=B.getData(),this.video_init_segment_dispatched_==0&&u.a.v(this.TAG,"Generated first AVCDecoderConfigurationRecord for mimeType: ".concat(s.codec))}this.onTrackMetadata("video",s),this.video_init_segment_dispatched_=!0,this.video_metadata_changed_=!1;var V=this.media_info_;V.hasVideo=!0,V.width=s.codecWidth,V.height=s.codecHeight,V.fps=s.frameRate.fps,V.profile=s.profile,V.level=s.level,V.refFrames=l.ref_frames,V.chromaFormat=l.chroma_format_string,V.sarNum=s.sarRatio.width,V.sarDen=s.sarRatio.height,V.videoCodec=s.codec,V.hasAudio&&V.audioCodec?V.mimeType='video/mp2t; codecs="'.concat(V.videoCodec,",").concat(V.audioCodec,'"'):V.mimeType='video/mp2t; codecs="'.concat(V.videoCodec,'"'),V.isComplete()&&this.onMediaInfo(V)},c.prototype.dispatchVideoMediaSegment=function(){this.isInitSegmentDispatched()&&this.video_track_.length&&this.onDataAvailable(null,this.video_track_)},c.prototype.dispatchAudioMediaSegment=function(){this.isInitSegmentDispatched()&&this.audio_track_.length&&this.onDataAvailable(this.audio_track_,null)},c.prototype.dispatchAudioVideoMediaSegment=function(){this.isInitSegmentDispatched()&&(this.audio_track_.length||this.video_track_.length)&&this.onDataAvailable(this.audio_track_,this.video_track_)},c.prototype.parseADTSAACPayload=function(l,s){if(!this.has_video_||this.video_init_segment_dispatched_){if(this.aac_last_incomplete_data_){var p=new Uint8Array(l.byteLength+this.aac_last_incomplete_data_.byteLength);p.set(this.aac_last_incomplete_data_,0),p.set(l,this.aac_last_incomplete_data_.byteLength),l=p}var g,m;if(s!=null&&(m=s/this.timescale_),this.audio_metadata_.codec==="aac"){if(s==null&&this.audio_last_sample_pts_!=null)g=1024/this.audio_metadata_.sampling_frequency*1e3,m=this.audio_last_sample_pts_+g;else if(s==null)return void u.a.w(this.TAG,"AAC: Unknown pts");if(this.aac_last_incomplete_data_&&this.audio_last_sample_pts_){g=1024/this.audio_metadata_.sampling_frequency*1e3;var b=this.audio_last_sample_pts_+g;Math.abs(b-m)>1&&(u.a.w(this.TAG,"AAC: Detected pts overlapped, "+"expected: ".concat(b,"ms, PES pts: ").concat(m,"ms")),m=b)}}for(var O,D=new Se(l),B=null,V=m;(B=D.readNextAACFrame())!=null;){g=1024/B.sampling_frequency*1e3;var j={codec:"aac",data:B};this.audio_init_segment_dispatched_==0?(this.audio_metadata_={codec:"aac",audio_object_type:B.audio_object_type,sampling_freq_index:B.sampling_freq_index,sampling_frequency:B.sampling_frequency,channel_config:B.channel_config},this.dispatchAudioInitSegment(j)):this.detectAudioMetadataChange(j)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(j)),O=V;var G=Math.floor(V),K={unit:B.data,length:B.data.byteLength,pts:G,dts:G};this.audio_track_.samples.push(K),this.audio_track_.length+=B.data.byteLength,V+=g}D.hasIncompleteData()&&(this.aac_last_incomplete_data_=D.getIncompleteData()),O&&(this.audio_last_sample_pts_=O)}},c.prototype.parseLOASAACPayload=function(l,s){var p;if(!this.has_video_||this.video_init_segment_dispatched_){if(this.aac_last_incomplete_data_){var g=new Uint8Array(l.byteLength+this.aac_last_incomplete_data_.byteLength);g.set(this.aac_last_incomplete_data_,0),g.set(l,this.aac_last_incomplete_data_.byteLength),l=g}var m,b;if(s!=null&&(b=s/this.timescale_),this.audio_metadata_.codec==="aac"){if(s==null&&this.audio_last_sample_pts_!=null)m=1024/this.audio_metadata_.sampling_frequency*1e3,b=this.audio_last_sample_pts_+m;else if(s==null)return void u.a.w(this.TAG,"AAC: Unknown pts");if(this.aac_last_incomplete_data_&&this.audio_last_sample_pts_){m=1024/this.audio_metadata_.sampling_frequency*1e3;var O=this.audio_last_sample_pts_+m;Math.abs(O-b)>1&&(u.a.w(this.TAG,"AAC: Detected pts overlapped, "+"expected: ".concat(O,"ms, PES pts: ").concat(b,"ms")),b=O)}}for(var D,B=new Le(l),V=null,j=b;(V=B.readNextAACFrame((p=this.loas_previous_frame)!==null&&p!==void 0?p:void 0))!=null;){this.loas_previous_frame=V,m=1024/V.sampling_frequency*1e3;var G={codec:"aac",data:V};this.audio_init_segment_dispatched_==0?(this.audio_metadata_={codec:"aac",audio_object_type:V.audio_object_type,sampling_freq_index:V.sampling_freq_index,sampling_frequency:V.sampling_frequency,channel_config:V.channel_config},this.dispatchAudioInitSegment(G)):this.detectAudioMetadataChange(G)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(G)),D=j;var K=Math.floor(j),re={unit:V.data,length:V.data.byteLength,pts:K,dts:K};this.audio_track_.samples.push(re),this.audio_track_.length+=V.data.byteLength,j+=m}B.hasIncompleteData()&&(this.aac_last_incomplete_data_=B.getIncompleteData()),D&&(this.audio_last_sample_pts_=D)}},c.prototype.parseAC3Payload=function(l,s){if(!this.has_video_||this.video_init_segment_dispatched_){var p,g;if(s!=null&&(g=s/this.timescale_),this.audio_metadata_.codec==="ac-3"){if(s==null&&this.audio_last_sample_pts_!=null)p=1536/this.audio_metadata_.sampling_frequency*1e3,g=this.audio_last_sample_pts_+p;else if(s==null)return void u.a.w(this.TAG,"AC3: Unknown pts")}for(var m,b=new Fm(l),O=null,D=g;(O=b.readNextAC3Frame())!=null;){p=1536/O.sampling_frequency*1e3;var B={codec:"ac-3",data:O};this.audio_init_segment_dispatched_==0?(this.audio_metadata_={codec:"ac-3",sampling_frequency:O.sampling_frequency,bit_stream_identification:O.bit_stream_identification,bit_stream_mode:O.bit_stream_mode,low_frequency_effects_channel_on:O.low_frequency_effects_channel_on,channel_mode:O.channel_mode},this.dispatchAudioInitSegment(B)):this.detectAudioMetadataChange(B)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(B)),m=D;var V=Math.floor(D),j={unit:O.data,length:O.data.byteLength,pts:V,dts:V};this.audio_track_.samples.push(j),this.audio_track_.length+=O.data.byteLength,D+=p}m&&(this.audio_last_sample_pts_=m)}},c.prototype.parseEAC3Payload=function(l,s){if(!this.has_video_||this.video_init_segment_dispatched_){var p,g;if(s!=null&&(g=s/this.timescale_),this.audio_metadata_.codec==="ec-3"){if(s==null&&this.audio_last_sample_pts_!=null)p=256*this.audio_metadata_.num_blks/this.audio_metadata_.sampling_frequency*1e3,g=this.audio_last_sample_pts_+p;else if(s==null)return void u.a.w(this.TAG,"EAC3: Unknown pts")}for(var m,b=new $m(l),O=null,D=g;(O=b.readNextEAC3Frame())!=null;){p=1536/O.sampling_frequency*1e3;var B={codec:"ec-3",data:O};this.audio_init_segment_dispatched_==0?(this.audio_metadata_={codec:"ec-3",sampling_frequency:O.sampling_frequency,bit_stream_identification:O.bit_stream_identification,low_frequency_effects_channel_on:O.low_frequency_effects_channel_on,num_blks:O.num_blks,channel_mode:O.channel_mode},this.dispatchAudioInitSegment(B)):this.detectAudioMetadataChange(B)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(B)),m=D;var V=Math.floor(D),j={unit:O.data,length:O.data.byteLength,pts:V,dts:V};this.audio_track_.samples.push(j),this.audio_track_.length+=O.data.byteLength,D+=p}m&&(this.audio_last_sample_pts_=m)}},c.prototype.parseOpusPayload=function(l,s){if(!this.has_video_||this.video_init_segment_dispatched_){var p,g;if(s!=null&&(g=s/this.timescale_),this.audio_metadata_.codec==="opus"){if(s==null&&this.audio_last_sample_pts_!=null)p=20,g=this.audio_last_sample_pts_+p;else if(s==null)return void u.a.w(this.TAG,"Opus: Unknown pts")}for(var m,b=g,O=0;O<l.length;){p=20;for(var D=(16&l[O+1])!=0,B=(8&l[O+1])!=0,V=O+2,j=0;l[V]===255;)j+=255,V+=1;j+=l[V],V+=1,V+=D?2:0,V+=B?2:0,m=b;var G=Math.floor(b),K=l.slice(V,V+j),re={unit:K,length:K.byteLength,pts:G,dts:G};this.audio_track_.samples.push(re),this.audio_track_.length+=K.byteLength,b+=p,O=V+j}m&&(this.audio_last_sample_pts_=m)}},c.prototype.parseMP3Payload=function(l,s){if(!this.has_video_||this.video_init_segment_dispatched_){var p=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],g=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],m=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],b=l[1]>>>3&3,O=(6&l[1])>>1,D=(240&l[2])>>>4,B=(12&l[2])>>>2,V=(l[3]>>>6&3)!==3?2:1,j=0,G=34;switch(b){case 0:j=[11025,12e3,8e3,0][B];break;case 2:j=[22050,24e3,16e3,0][B];break;case 3:j=[44100,48e3,32e3,0][B]}switch(O){case 1:G=34,D<m.length&&m[D];break;case 2:G=33,D<g.length&&g[D];break;case 3:G=32,D<p.length&&p[D]}var K=new Bm;K.object_type=G,K.sample_rate=j,K.channel_count=V,K.data=l;var re={codec:"mp3",data:K};this.audio_init_segment_dispatched_==0?(this.audio_metadata_={codec:"mp3",object_type:G,sample_rate:j,channel_count:V},this.dispatchAudioInitSegment(re)):this.detectAudioMetadataChange(re)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(re));var X={unit:l,length:l.byteLength,pts:s/this.timescale_,dts:s/this.timescale_};this.audio_track_.samples.push(X),this.audio_track_.length+=l.byteLength}},c.prototype.detectAudioMetadataChange=function(l){if(l.codec!==this.audio_metadata_.codec)return u.a.v(this.TAG,"Audio: Audio Codecs changed from "+"".concat(this.audio_metadata_.codec," to ").concat(l.codec)),!0;if(l.codec==="aac"&&this.audio_metadata_.codec==="aac"){if((s=l.data).audio_object_type!==this.audio_metadata_.audio_object_type)return u.a.v(this.TAG,"AAC: AudioObjectType changed from "+"".concat(this.audio_metadata_.audio_object_type," to ").concat(s.audio_object_type)),!0;if(s.sampling_freq_index!==this.audio_metadata_.sampling_freq_index)return u.a.v(this.TAG,"AAC: SamplingFrequencyIndex changed from "+"".concat(this.audio_metadata_.sampling_freq_index," to ").concat(s.sampling_freq_index)),!0;if(s.channel_config!==this.audio_metadata_.channel_config)return u.a.v(this.TAG,"AAC: Channel configuration changed from "+"".concat(this.audio_metadata_.channel_config," to ").concat(s.channel_config)),!0}else if(l.codec==="ac-3"&&this.audio_metadata_.codec==="ac-3"){var s;if((s=l.data).sampling_frequency!==this.audio_metadata_.sampling_frequency)return u.a.v(this.TAG,"AC3: Sampling Frequency changed from "+"".concat(this.audio_metadata_.sampling_frequency," to ").concat(s.sampling_frequency)),!0;if(s.bit_stream_identification!==this.audio_metadata_.bit_stream_identification)return u.a.v(this.TAG,"AC3: Bit Stream Identification changed from "+"".concat(this.audio_metadata_.bit_stream_identification," to ").concat(s.bit_stream_identification)),!0;if(s.bit_stream_mode!==this.audio_metadata_.bit_stream_mode)return u.a.v(this.TAG,"AC3: BitStream Mode changed from "+"".concat(this.audio_metadata_.bit_stream_mode," to ").concat(s.bit_stream_mode)),!0;if(s.channel_mode!==this.audio_metadata_.channel_mode)return u.a.v(this.TAG,"AC3: Channel Mode changed from "+"".concat(this.audio_metadata_.channel_mode," to ").concat(s.channel_mode)),!0;if(s.low_frequency_effects_channel_on!==this.audio_metadata_.low_frequency_effects_channel_on)return u.a.v(this.TAG,"AC3: Low Frequency Effects Channel On changed from "+"".concat(this.audio_metadata_.low_frequency_effects_channel_on," to ").concat(s.low_frequency_effects_channel_on)),!0}else if(l.codec==="opus"&&this.audio_metadata_.codec==="opus"){if((p=l.meta).sample_rate!==this.audio_metadata_.sample_rate)return u.a.v(this.TAG,"Opus: SamplingFrequencyIndex changed from "+"".concat(this.audio_metadata_.sample_rate," to ").concat(p.sample_rate)),!0;if(p.channel_count!==this.audio_metadata_.channel_count)return u.a.v(this.TAG,"Opus: Channel count changed from "+"".concat(this.audio_metadata_.channel_count," to ").concat(p.channel_count)),!0}else if(l.codec==="mp3"&&this.audio_metadata_.codec==="mp3"){var p;if((p=l.data).object_type!==this.audio_metadata_.object_type)return u.a.v(this.TAG,"MP3: AudioObjectType changed from "+"".concat(this.audio_metadata_.object_type," to ").concat(p.object_type)),!0;if(p.sample_rate!==this.audio_metadata_.sample_rate)return u.a.v(this.TAG,"MP3: SamplingFrequencyIndex changed from "+"".concat(this.audio_metadata_.sample_rate," to ").concat(p.sample_rate)),!0;if(p.channel_count!==this.audio_metadata_.channel_count)return u.a.v(this.TAG,"MP3: Channel count changed from "+"".concat(this.audio_metadata_.channel_count," to ").concat(p.channel_count)),!0}return!1},c.prototype.dispatchAudioInitSegment=function(l){var s={type:"audio"};if(s.id=this.audio_track_.id,s.timescale=1e3,s.duration=this.duration_,this.audio_metadata_.codec==="aac"){var p=l.codec==="aac"?l.data:null,g=new ot(p);s.audioSampleRate=g.sampling_rate,s.channelCount=g.channel_count,s.codec=g.codec_mimetype,s.originalCodec=g.original_codec_mimetype,s.config=g.config,s.refSampleDuration=1024/s.audioSampleRate*s.timescale}else if(this.audio_metadata_.codec==="ac-3"){var m=l.codec==="ac-3"?l.data:null,b=new Vm(m);s.audioSampleRate=b.sampling_rate,s.channelCount=b.channel_count,s.codec=b.codec_mimetype,s.originalCodec=b.original_codec_mimetype,s.config=b.config,s.refSampleDuration=1536/s.audioSampleRate*s.timescale}else if(this.audio_metadata_.codec==="ec-3"){var O=l.codec==="ec-3"?l.data:null,D=new Gm(O);s.audioSampleRate=D.sampling_rate,s.channelCount=D.channel_count,s.codec=D.codec_mimetype,s.originalCodec=D.original_codec_mimetype,s.config=D.config,s.refSampleDuration=256*D.num_blks/s.audioSampleRate*s.timescale}else this.audio_metadata_.codec==="opus"?(s.audioSampleRate=this.audio_metadata_.sample_rate,s.channelCount=this.audio_metadata_.channel_count,s.channelConfigCode=this.audio_metadata_.channel_config_code,s.codec="opus",s.originalCodec="opus",s.config=void 0,s.refSampleDuration=20):this.audio_metadata_.codec==="mp3"&&(s.audioSampleRate=this.audio_metadata_.sample_rate,s.channelCount=this.audio_metadata_.channel_count,s.codec="mp3",s.originalCodec="mp3",s.config=void 0);this.audio_init_segment_dispatched_==0&&u.a.v(this.TAG,"Generated first AudioSpecificConfig for mimeType: ".concat(s.codec)),this.onTrackMetadata("audio",s),this.audio_init_segment_dispatched_=!0,this.video_metadata_changed_=!1;var B=this.media_info_;B.hasAudio=!0,B.audioCodec=s.originalCodec,B.audioSampleRate=s.audioSampleRate,B.audioChannelCount=s.channelCount,B.hasVideo&&B.videoCodec?B.mimeType='video/mp2t; codecs="'.concat(B.videoCodec,",").concat(B.audioCodec,'"'):B.mimeType='video/mp2t; codecs="'.concat(B.audioCodec,'"'),B.isComplete()&&this.onMediaInfo(B)},c.prototype.dispatchPESPrivateDataDescriptor=function(l,s,p){var g=new cn;g.pid=l,g.stream_type=s,g.descriptor=p,this.onPESPrivateDataDescriptor&&this.onPESPrivateDataDescriptor(g)},c.prototype.parsePESPrivateDataPayload=function(l,s,p,g,m){var b=new ct;if(b.pid=g,b.stream_id=m,b.len=l.byteLength,b.data=l,s!=null){var O=Math.floor(s/this.timescale_);b.pts=O}else b.nearest_pts=this.getNearestTimestampMilliseconds();if(p!=null){var D=Math.floor(p/this.timescale_);b.dts=D}this.onPESPrivateData&&this.onPESPrivateData(b)},c.prototype.parseTimedID3MetadataPayload=function(l,s,p,g,m){var b=new ct;if(b.pid=g,b.stream_id=m,b.len=l.byteLength,b.data=l,s!=null){var O=Math.floor(s/this.timescale_);b.pts=O}if(p!=null){var D=Math.floor(p/this.timescale_);b.dts=D}this.onTimedID3Metadata&&this.onTimedID3Metadata(b)},c.prototype.parseSynchronousKLVMetadataPayload=function(l,s,p,g,m){var b=new Hm;if(b.pid=g,b.stream_id=m,b.len=l.byteLength,b.data=l,s!=null){var O=Math.floor(s/this.timescale_);b.pts=O}if(p!=null){var D=Math.floor(p/this.timescale_);b.dts=D}b.access_units=function(B){for(var V=[],j=0;j+5<B.byteLength;){var G=B[j+0],K=B[j+1],re=B[j+2],X=B[j+3]<<8|B[j+4]<<0,ue=B.slice(j+5,j+5+X);V.push({service_id:G,sequence_number:K,flags:re,data:ue}),j+=5+X}return V}(l),this.onSynchronousKLVMetadata&&this.onSynchronousKLVMetadata(b)},c.prototype.parseAsynchronousKLVMetadataPayload=function(l,s,p){var g=new ct;g.pid=s,g.stream_id=p,g.len=l.byteLength,g.data=l,this.onAsynchronousKLVMetadata&&this.onAsynchronousKLVMetadata(g)},c.prototype.parseSMPTE2038MetadataPayload=function(l,s,p,g,m){var b=new Nm;if(b.pid=g,b.stream_id=m,b.len=l.byteLength,b.data=l,s!=null){var O=Math.floor(s/this.timescale_);b.pts=O}if(b.nearest_pts=this.getNearestTimestampMilliseconds(),p!=null){var D=Math.floor(p/this.timescale_);b.dts=D}b.ancillaries=function(B){for(var V=new N(B),j=0,G=[];j+=6,V.readBits(6)===0;){var K=V.readBool();j+=1;var re=V.readBits(11);j+=11;var X=V.readBits(12);j+=12;var ue=255&V.readBits(10);j+=10;var se=255&V.readBits(10);j+=10;var ae=255&V.readBits(10);j+=10;for(var ge=new Uint8Array(ae),ke=0;ke<ae;ke++){var le=255&V.readBits(10);j+=10,ge[ke]=le}V.readBits(10),j+=10;var me="User Defined";ue===65?se===7&&(me="SCTE-104"):ue===95?se===220?me="ARIB STD-B37 (1SEG)":se===221?me="ARIB STD-B37 (ANALOG)":se===222?me="ARIB STD-B37 (SD)":se===223&&(me="ARIB STD-B37 (HD)"):ue===97&&(se===1?me="EIA-708":se===2&&(me="EIA-608")),G.push({yc_indicator:K,line_number:re,horizontal_offset:X,did:ue,sdid:se,user_data:ge,description:me,information:{}}),V.readBits(8-(j-Math.floor(j/8))%8),j+=(8-(j-Math.floor(j/8)))%8}return V.destroy(),V=null,G}(l),this.onSMPTE2038Metadata&&this.onSMPTE2038Metadata(b)},c.prototype.getNearestTimestampMilliseconds=function(){return this.audio_last_sample_pts_!=null?Math.floor(this.audio_last_sample_pts_):this.last_pcr_!=null?Math.floor(this.last_pcr_/300/this.timescale_):void 0},c.prototype.getPcrBase=function(l){var s=33554432*l[6]+131072*l[7]+512*l[8]+2*l[9]+(128&l[10])/128+this.timestamp_offset_;return s+4294967296<this.last_pcr_base_&&(s+=8589934592,this.timestamp_offset_+=8589934592),this.last_pcr_base_=s,s},c.prototype.getTimestamp=function(l,s){var p=536870912*(14&l[s])+4194304*(255&l[s+1])+16384*(254&l[s+2])+128*(255&l[s+3])+(254&l[s+4])/2+this.timestamp_offset_;return p+4294967296<this.last_pcr_base_&&(p+=8589934592),p},c}(Y),Ic=function(f,c,l){for(var s,p=0,g=c.length;p<g;p++)!s&&p in c||(s||(s=Array.prototype.slice.call(c,0,p)),s[p]=c[p]);return f.concat(s||Array.prototype.slice.call(c))},Nc=function(){function f(){}return f.init=function(){for(var c in f.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],hvc1:[],hvcC:[],av01:[],av1C:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],".mp3":[],Opus:[],dOps:[],"ac-3":[],dac3:[],"ec-3":[],dec3:[],fLaC:[],dfLa:[]},f.types)f.types.hasOwnProperty(c)&&(f.types[c]=[c.charCodeAt(0),c.charCodeAt(1),c.charCodeAt(2),c.charCodeAt(3)]);var l=f.constants={};l.FTYP=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),l.STSD_PREFIX=new Uint8Array([0,0,0,0,0,0,0,1]),l.STTS=new Uint8Array([0,0,0,0,0,0,0,0]),l.STSC=l.STCO=l.STTS,l.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),l.HDLR_VIDEO=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),l.HDLR_AUDIO=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),l.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),l.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),l.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])},f.box=function(c){for(var l=8,s=null,p=Array.prototype.slice.call(arguments,1),g=p.length,m=0;m<g;m++)l+=p[m].byteLength;(s=new Uint8Array(l))[0]=l>>>24&255,s[1]=l>>>16&255,s[2]=l>>>8&255,s[3]=255&l,s.set(c,4);var b=8;for(m=0;m<g;m++)s.set(p[m],b),b+=p[m].byteLength;return s},f.generateInitSegment=function(c){var l=f.box(f.types.ftyp,f.constants.FTYP),s=f.moov(c),p=new Uint8Array(l.byteLength+s.byteLength);return p.set(l,0),p.set(s,l.byteLength),p},f.moov=function(c){var l=f.mvhd(c.timescale,c.duration),s=f.trak(c),p=f.mvex(c);return f.box(f.types.moov,l,s,p)},f.mvhd=function(c,l){return f.box(f.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,c>>>24&255,c>>>16&255,c>>>8&255,255&c,l>>>24&255,l>>>16&255,l>>>8&255,255&l,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))},f.trak=function(c){return f.box(f.types.trak,f.tkhd(c),f.mdia(c))},f.tkhd=function(c){var l=c.id,s=c.duration,p=c.presentWidth,g=c.presentHeight;return f.box(f.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,l>>>24&255,l>>>16&255,l>>>8&255,255&l,0,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,p>>>8&255,255&p,0,0,g>>>8&255,255&g,0,0]))},f.mdia=function(c){return f.box(f.types.mdia,f.mdhd(c),f.hdlr(c),f.minf(c))},f.mdhd=function(c){var l=c.timescale,s=c.duration;return f.box(f.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,l>>>24&255,l>>>16&255,l>>>8&255,255&l,s>>>24&255,s>>>16&255,s>>>8&255,255&s,85,196,0,0]))},f.hdlr=function(c){var l=null;return l=c.type==="audio"?f.constants.HDLR_AUDIO:f.constants.HDLR_VIDEO,f.box(f.types.hdlr,l)},f.minf=function(c){var l=null;return l=c.type==="audio"?f.box(f.types.smhd,f.constants.SMHD):f.box(f.types.vmhd,f.constants.VMHD),f.box(f.types.minf,l,f.dinf(),f.stbl(c))},f.dinf=function(){return f.box(f.types.dinf,f.box(f.types.dref,f.constants.DREF))},f.stbl=function(c){return f.box(f.types.stbl,f.stsd(c),f.box(f.types.stts,f.constants.STTS),f.box(f.types.stsc,f.constants.STSC),f.box(f.types.stsz,f.constants.STSZ),f.box(f.types.stco,f.constants.STCO))},f.stsd=function(c){return c.type==="audio"?c.codec==="mp3"?f.box(f.types.stsd,f.constants.STSD_PREFIX,f.mp3(c)):c.codec==="ac-3"?f.box(f.types.stsd,f.constants.STSD_PREFIX,f.ac3(c)):c.codec==="ec-3"?f.box(f.types.stsd,f.constants.STSD_PREFIX,f.ec3(c)):c.codec==="opus"?f.box(f.types.stsd,f.constants.STSD_PREFIX,f.Opus(c)):c.codec=="flac"?f.box(f.types.stsd,f.constants.STSD_PREFIX,f.fLaC(c)):f.box(f.types.stsd,f.constants.STSD_PREFIX,f.mp4a(c)):c.type==="video"&&c.codec.startsWith("hvc1")?f.box(f.types.stsd,f.constants.STSD_PREFIX,f.hvc1(c)):c.type==="video"&&c.codec.startsWith("av01")?f.box(f.types.stsd,f.constants.STSD_PREFIX,f.av01(c)):f.box(f.types.stsd,f.constants.STSD_PREFIX,f.avc1(c))},f.mp3=function(c){var l=c.channelCount,s=c.audioSampleRate,p=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,l,0,16,0,0,0,0,s>>>8&255,255&s,0,0]);return f.box(f.types[".mp3"],p)},f.mp4a=function(c){var l=c.channelCount,s=c.audioSampleRate,p=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,l,0,16,0,0,0,0,s>>>8&255,255&s,0,0]);return f.box(f.types.mp4a,p,f.esds(c))},f.ac3=function(c){var l=c.channelCount,s=c.audioSampleRate,p=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,l,0,16,0,0,0,0,s>>>8&255,255&s,0,0]);return f.box(f.types["ac-3"],p,f.box(f.types.dac3,new Uint8Array(c.config)))},f.ec3=function(c){var l=c.channelCount,s=c.audioSampleRate,p=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,l,0,16,0,0,0,0,s>>>8&255,255&s,0,0]);return f.box(f.types["ec-3"],p,f.box(f.types.dec3,new Uint8Array(c.config)))},f.esds=function(c){var l=c.config||[],s=l.length,p=new Uint8Array([0,0,0,0,3,23+s,0,1,0,4,15+s,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([s]).concat(l).concat([6,1,2]));return f.box(f.types.esds,p)},f.Opus=function(c){var l=c.channelCount,s=c.audioSampleRate,p=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,l,0,16,0,0,0,0,s>>>8&255,255&s,0,0]);return f.box(f.types.Opus,p,f.dOps(c))},f.dOps=function(c){var l=c.channelCount,s=c.channelConfigCode,p=c.audioSampleRate;if(c.config)return f.box(f.types.dOps,c.config);var g=[];switch(s){case 1:case 2:g=[0];break;case 0:g=[255,1,1,0,1];break;case 128:g=[255,2,0,0,1];break;case 3:g=[1,2,1,0,2,1];break;case 4:g=[1,2,2,0,1,2,3];break;case 5:g=[1,3,2,0,4,1,2,3];break;case 6:g=[1,4,2,0,4,1,2,3,5];break;case 7:g=[1,4,2,0,4,1,2,3,5,6];break;case 8:g=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:g=[1,1,2,0,1];break;case 131:g=[1,1,3,0,1,2];break;case 132:g=[1,1,4,0,1,2,3];break;case 133:g=[1,1,5,0,1,2,3,4];break;case 134:g=[1,1,6,0,1,2,3,4,5];break;case 135:g=[1,1,7,0,1,2,3,4,5,6];break;case 136:g=[1,1,8,0,1,2,3,4,5,6,7]}var m=new Uint8Array(Ic([0,l,0,0,p>>>24&255,p>>>17&255,p>>>8&255,p>>>0&255,0,0],g));return f.box(f.types.dOps,m)},f.fLaC=function(c){var l=c.channelCount,s=Math.min(c.audioSampleRate,65535),p=c.sampleSize,g=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,l,0,p,0,0,0,0,s>>>8&255,255&s,0,0]);return f.box(f.types.fLaC,g,f.dfLa(c))},f.dfLa=function(c){var l=new Uint8Array(Ic([0,0,0,0],c.config));return f.box(f.types.dfLa,l)},f.avc1=function(c){var l=c.avcc,s=c.codecWidth,p=c.codecHeight,g=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,s>>>8&255,255&s,p>>>8&255,255&p,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return f.box(f.types.avc1,g,f.box(f.types.avcC,l))},f.hvc1=function(c){var l=c.hvcc,s=c.codecWidth,p=c.codecHeight,g=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,s>>>8&255,255&s,p>>>8&255,255&p,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return f.box(f.types.hvc1,g,f.box(f.types.hvcC,l))},f.av01=function(c){var l=c.av1c,s=c.codecWidth||192,p=c.codecHeight||108,g=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,s>>>8&255,255&s,p>>>8&255,255&p,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return f.box(f.types.av01,g,f.box(f.types.av1C,l))},f.mvex=function(c){return f.box(f.types.mvex,f.trex(c))},f.trex=function(c){var l=c.id,s=new Uint8Array([0,0,0,0,l>>>24&255,l>>>16&255,l>>>8&255,255&l,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return f.box(f.types.trex,s)},f.moof=function(c,l){return f.box(f.types.moof,f.mfhd(c.sequenceNumber),f.traf(c,l))},f.mfhd=function(c){var l=new Uint8Array([0,0,0,0,c>>>24&255,c>>>16&255,c>>>8&255,255&c]);return f.box(f.types.mfhd,l)},f.traf=function(c,l){var s=c.id,p=f.box(f.types.tfhd,new Uint8Array([0,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,255&s])),g=f.box(f.types.tfdt,new Uint8Array([0,0,0,0,l>>>24&255,l>>>16&255,l>>>8&255,255&l])),m=f.sdtp(c),b=f.trun(c,m.byteLength+16+16+8+16+8+8);return f.box(f.types.traf,p,g,b,m)},f.sdtp=function(c){for(var l=c.samples||[],s=l.length,p=new Uint8Array(4+s),g=0;g<s;g++){var m=l[g].flags;p[g+4]=m.isLeading<<6|m.dependsOn<<4|m.isDependedOn<<2|m.hasRedundancy}return f.box(f.types.sdtp,p)},f.trun=function(c,l){var s=c.samples||[],p=s.length,g=12+16*p,m=new Uint8Array(g);l+=8+g,m.set([0,0,15,1,p>>>24&255,p>>>16&255,p>>>8&255,255&p,l>>>24&255,l>>>16&255,l>>>8&255,255&l],0);for(var b=0;b<p;b++){var O=s[b].duration,D=s[b].size,B=s[b].flags,V=s[b].cts;m.set([O>>>24&255,O>>>16&255,O>>>8&255,255&O,D>>>24&255,D>>>16&255,D>>>8&255,255&D,B.isLeading<<2|B.dependsOn,B.isDependedOn<<6|B.hasRedundancy<<4|B.isNonSync,0,0,V>>>24&255,V>>>16&255,V>>>8&255,255&V],12+16*b)}return f.box(f.types.trun,m)},f.mdat=function(c){return f.box(f.types.mdat,c)},f}();Nc.init();var Cr=Nc,Bc=function(){function f(){}return f.getSilentFrame=function(c,l){if(c==="mp4a.40.2"){if(l===1)return new Uint8Array([0,200,0,128,35,128]);if(l===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(l===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(l===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(l===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(l===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(l===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(l===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(l===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},f}(),vn=i(11),Uc=function(){function f(c){this.TAG="MP4Remuxer",this._config=c,this._isLive=c.isLive===!0,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._videoNextDts=void 0,this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new vn.c("audio"),this._videoSegmentInfoList=new vn.c("video"),this._onInitSegment=null,this._onMediaSegment=null,this._forceFirstIDR=!(!d.a.chrome||!(d.a.version.major<50||d.a.version.major===50&&d.a.version.build<2661)),this._fillSilentAfterSeek=d.a.msedge||d.a.msie,this._mp3UseMpegAudio=!d.a.firefox,this._fillAudioTimestampGap=this._config.fixAudioTimestampGap}return f.prototype.destroy=function(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null,this._onInitSegment=null,this._onMediaSegment=null},f.prototype.bindDataSource=function(c){return c.onDataAvailable=this.remux.bind(this),c.onTrackMetadata=this._onTrackMetadataReceived.bind(this),this},Object.defineProperty(f.prototype,"onInitSegment",{get:function(){return this._onInitSegment},set:function(c){this._onInitSegment=c},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onMediaSegment",{get:function(){return this._onMediaSegment},set:function(c){this._onMediaSegment=c},enumerable:!1,configurable:!0}),f.prototype.insertDiscontinuity=function(){this._audioNextDts=this._videoNextDts=void 0},f.prototype.seek=function(c){this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._videoSegmentInfoList.clear(),this._audioSegmentInfoList.clear()},f.prototype.remux=function(c,l){if(!this._onMediaSegment)throw new v.a("MP4Remuxer: onMediaSegment callback must be specificed!");this._dtsBaseInited||this._calculateDtsBase(c,l),l&&this._remuxVideo(l),c&&this._remuxAudio(c)},f.prototype._onTrackMetadataReceived=function(c,l){var s=null,p="mp4",g=l.codec;if(c==="audio")this._audioMeta=l,l.codec==="mp3"&&this._mp3UseMpegAudio?(p="mpeg",g="",s=new Uint8Array):s=Cr.generateInitSegment(l);else{if(c!=="video")return;this._videoMeta=l,s=Cr.generateInitSegment(l)}if(!this._onInitSegment)throw new v.a("MP4Remuxer: onInitSegment callback must be specified!");this._onInitSegment(c,{type:c,data:s.buffer,codec:g,container:"".concat(c,"/").concat(p),mediaDuration:l.duration})},f.prototype._calculateDtsBase=function(c,l){this._dtsBaseInited||(c&&c.samples&&c.samples.length&&(this._audioDtsBase=c.samples[0].dts),l&&l.samples&&l.samples.length&&(this._videoDtsBase=l.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)},f.prototype.getTimestampBase=function(){if(this._dtsBaseInited)return this._dtsBase},f.prototype.flushStashedSamples=function(){var c=this._videoStashedLastSample,l=this._audioStashedLastSample,s={type:"video",id:1,sequenceNumber:0,samples:[],length:0};c!=null&&(s.samples.push(c),s.length=c.length);var p={type:"audio",id:2,sequenceNumber:0,samples:[],length:0};l!=null&&(p.samples.push(l),p.length=l.length),this._videoStashedLastSample=null,this._audioStashedLastSample=null,this._remuxVideo(s,!0),this._remuxAudio(p,!0)},f.prototype._remuxAudio=function(c,l){if(this._audioMeta!=null){var s,p=c,g=p.samples,m=void 0,b=-1,O=this._audioMeta.refSampleDuration,D=this._audioMeta.codec==="mp3"&&this._mp3UseMpegAudio,B=this._dtsBaseInited&&this._audioNextDts===void 0,V=!1;if(g&&g.length!==0&&(g.length!==1||l)){var j=0,G=null,K=0;D?(j=0,K=p.length):(j=8,K=8+p.length);var re=null;if(g.length>1&&(K-=(re=g.pop()).length),this._audioStashedLastSample!=null){var X=this._audioStashedLastSample;this._audioStashedLastSample=null,g.unshift(X),K+=X.length}re!=null&&(this._audioStashedLastSample=re);var ue=g[0].dts-this._dtsBase;if(this._audioNextDts)m=ue-this._audioNextDts;else if(this._audioSegmentInfoList.isEmpty())m=0,this._fillSilentAfterSeek&&!this._videoSegmentInfoList.isEmpty()&&this._audioMeta.originalCodec!=="mp3"&&(V=!0);else{var se=this._audioSegmentInfoList.getLastSampleBefore(ue);if(se!=null){var ae=ue-(se.originalDts+se.duration);ae<=3&&(ae=0),m=ue-(se.dts+se.duration+ae)}else m=0}if(V){var ge=ue-m,ke=this._videoSegmentInfoList.getLastSegmentBefore(ue);if(ke!=null&&ke.beginDts<ge){if(Ze=Bc.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount)){var le=ke.beginDts,me=ge-ke.beginDts;u.a.v(this.TAG,"InsertPrefixSilentAudio: dts: ".concat(le,", duration: ").concat(me)),g.unshift({unit:Ze,dts:le,pts:le}),K+=Ze.byteLength}}else V=!1}for(var Re=[],ve=0;ve<g.length;ve++){var Ee=(X=g[ve]).unit,Me=X.dts-this._dtsBase,Ne=(le=Me,!1),we=null,xe=0;if(!(Me<-.001)){if(this._audioMeta.codec!=="mp3"&&O!=null){var Ue=Me;if(this._audioNextDts&&(Ue=this._audioNextDts),(m=Me-Ue)<=-3*O){u.a.w(this.TAG,"Dropping 1 audio frame (originalDts: ".concat(Me," ms ,curRefDts: ").concat(Ue," ms)  due to dtsCorrection: ").concat(m," ms overlap."));continue}if(m>=3*O&&this._fillAudioTimestampGap&&!d.a.safari){Ne=!0;var Ze,Jt=Math.floor(m/O);u.a.w(this.TAG,`Large audio timestamp gap detected, may cause AV sync to drift. Silent frames will be generated to avoid unsync.
`+"originalDts: ".concat(Me," ms, curRefDts: ").concat(Ue," ms, ")+"dtsCorrection: ".concat(Math.round(m)," ms, generate: ").concat(Jt," frames")),le=Math.floor(Ue),xe=Math.floor(Ue+O)-le,(Ze=Bc.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount))==null&&(u.a.w(this.TAG,"Unable to generate silent frame for "+"".concat(this._audioMeta.originalCodec," with ").concat(this._audioMeta.channelCount," channels, repeat last frame")),Ze=Ee),we=[];for(var pt=0;pt<Jt;pt++){Ue+=O;var It=Math.floor(Ue),wt=Math.floor(Ue+O)-It,_t={dts:It,pts:It,cts:0,unit:Ze,size:Ze.byteLength,duration:wt,originalDts:Me,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}};we.push(_t),K+=_t.size}this._audioNextDts=Ue+O}else le=Math.floor(Ue),xe=Math.floor(Ue+O)-le,this._audioNextDts=Ue+O}else le=Me-m,ve!==g.length-1?xe=g[ve+1].dts-this._dtsBase-m-le:re!=null?xe=re.dts-this._dtsBase-m-le:xe=Re.length>=1?Re[Re.length-1].duration:Math.floor(O),this._audioNextDts=le+xe;b===-1&&(b=le),Re.push({dts:le,pts:le,cts:0,unit:X.unit,size:X.unit.byteLength,duration:xe,originalDts:Me,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}),Ne&&Re.push.apply(Re,we)}}if(Re.length===0)return p.samples=[],void(p.length=0);for(D?G=new Uint8Array(K):((G=new Uint8Array(K))[0]=K>>>24&255,G[1]=K>>>16&255,G[2]=K>>>8&255,G[3]=255&K,G.set(Cr.types.mdat,4)),ve=0;ve<Re.length;ve++)Ee=Re[ve].unit,G.set(Ee,j),j+=Ee.byteLength;var bt=Re[Re.length-1];s=bt.dts+bt.duration;var Ie=new vn.b;Ie.beginDts=b,Ie.endDts=s,Ie.beginPts=b,Ie.endPts=s,Ie.originalBeginDts=Re[0].originalDts,Ie.originalEndDts=bt.originalDts+bt.duration,Ie.firstSample=new vn.d(Re[0].dts,Re[0].pts,Re[0].duration,Re[0].originalDts,!1),Ie.lastSample=new vn.d(bt.dts,bt.pts,bt.duration,bt.originalDts,!1),this._isLive||this._audioSegmentInfoList.append(Ie),p.samples=Re,p.sequenceNumber++;var yn=null;yn=D?new Uint8Array:Cr.moof(p,b),p.samples=[],p.length=0;var Sn={type:"audio",data:this._mergeBoxes(yn,G).buffer,sampleCount:Re.length,info:Ie};D&&B&&(Sn.timestampOffset=b),this._onMediaSegment("audio",Sn)}}},f.prototype._remuxVideo=function(c,l){if(this._videoMeta!=null){var s,p,g=c,m=g.samples,b=void 0,O=-1,D=-1;if(m&&m.length!==0&&(m.length!==1||l)){var B=8,V=null,j=8+c.length,G=null;if(m.length>1&&(j-=(G=m.pop()).length),this._videoStashedLastSample!=null){var K=this._videoStashedLastSample;this._videoStashedLastSample=null,m.unshift(K),j+=K.length}G!=null&&(this._videoStashedLastSample=G);var re=m[0].dts-this._dtsBase;if(this._videoNextDts)b=re-this._videoNextDts;else if(this._videoSegmentInfoList.isEmpty())b=0;else{var X=this._videoSegmentInfoList.getLastSampleBefore(re);if(X!=null){var ue=re-(X.originalDts+X.duration);ue<=3&&(ue=0),b=re-(X.dts+X.duration+ue)}else b=0}for(var se=new vn.b,ae=[],ge=0;ge<m.length;ge++){var ke=(K=m[ge]).dts-this._dtsBase,le=K.isKeyframe,me=ke-b,Re=K.cts,ve=me+Re;O===-1&&(O=me,D=ve);var Ee=0;if(ge!==m.length-1?Ee=m[ge+1].dts-this._dtsBase-b-me:G!=null?Ee=G.dts-this._dtsBase-b-me:Ee=ae.length>=1?ae[ae.length-1].duration:Math.floor(this._videoMeta.refSampleDuration),le){var Me=new vn.d(me,ve,Ee,K.dts,!0);Me.fileposition=K.fileposition,se.appendSyncPoint(Me)}ae.push({dts:me,pts:ve,cts:Re,units:K.units,size:K.length,isKeyframe:le,duration:Ee,originalDts:ke,flags:{isLeading:0,dependsOn:le?2:1,isDependedOn:le?1:0,hasRedundancy:0,isNonSync:le?0:1}})}for((V=new Uint8Array(j))[0]=j>>>24&255,V[1]=j>>>16&255,V[2]=j>>>8&255,V[3]=255&j,V.set(Cr.types.mdat,4),ge=0;ge<ae.length;ge++)for(var Ne=ae[ge].units;Ne.length;){var we=Ne.shift().data;V.set(we,B),B+=we.byteLength}var xe=ae[ae.length-1];if(s=xe.dts+xe.duration,p=xe.pts+xe.duration,this._videoNextDts=s,se.beginDts=O,se.endDts=s,se.beginPts=D,se.endPts=p,se.originalBeginDts=ae[0].originalDts,se.originalEndDts=xe.originalDts+xe.duration,se.firstSample=new vn.d(ae[0].dts,ae[0].pts,ae[0].duration,ae[0].originalDts,ae[0].isKeyframe),se.lastSample=new vn.d(xe.dts,xe.pts,xe.duration,xe.originalDts,xe.isKeyframe),this._isLive||this._videoSegmentInfoList.append(se),g.samples=ae,g.sequenceNumber++,this._forceFirstIDR){var Ue=ae[0].flags;Ue.dependsOn=2,Ue.isNonSync=0}var Ze=Cr.moof(g,O);g.samples=[],g.length=0,this._onMediaSegment("video",{type:"video",data:this._mergeBoxes(Ze,V).buffer,sampleCount:ae.length,info:se})}}},f.prototype._mergeBoxes=function(c,l){var s=new Uint8Array(c.byteLength+l.byteLength);return s.set(c,0),s.set(l,c.byteLength),s},f}(),Km=i(14),tt=i(1),Ym=(i(2),function(){function f(c,l){this.TAG="TransmuxingController",this._emitter=new a.a,this._config=l,c.segments||(c.segments=[{duration:c.duration,filesize:c.filesize,url:c.url}]),typeof c.cors!="boolean"&&(c.cors=!0),typeof c.withCredentials!="boolean"&&(c.withCredentials=!1),this._mediaDataSource=c,this._currentSegmentIndex=0;var s=0;this._mediaDataSource.segments.forEach(function(p){p.timestampBase=s,s+=p.duration,p.cors=c.cors,p.withCredentials=c.withCredentials,l.referrerPolicy&&(p.referrerPolicy=l.referrerPolicy)}),isNaN(s)||this._mediaDataSource.duration===s||(this._mediaDataSource.duration=s),this._mediaInfo=null,this._demuxer=null,this._remuxer=null,this._ioctl=null,this._pendingSeekTime=null,this._pendingResolveSeekPoint=null,this._statisticsReporter=null}return f.prototype.destroy=function(){this._mediaInfo=null,this._mediaDataSource=null,this._statisticsReporter&&this._disableStatisticsReporter(),this._ioctl&&(this._ioctl.destroy(),this._ioctl=null),this._demuxer&&(this._demuxer.destroy(),this._demuxer=null),this._remuxer&&(this._remuxer.destroy(),this._remuxer=null),this._emitter.removeAllListeners(),this._emitter=null},f.prototype.on=function(c,l){this._emitter.addListener(c,l)},f.prototype.off=function(c,l){this._emitter.removeListener(c,l)},f.prototype.start=function(){this._loadSegment(0),this._enableStatisticsReporter()},f.prototype._loadSegment=function(c,l){this._currentSegmentIndex=c;var s=this._mediaDataSource.segments[c],p=this._ioctl=new Km.a(s,this._config,c);p.onError=this._onIOException.bind(this),p.onSeeked=this._onIOSeeked.bind(this),p.onComplete=this._onIOComplete.bind(this),p.onRedirect=this._onIORedirect.bind(this),p.onRecoveredEarlyEof=this._onIORecoveredEarlyEof.bind(this),l?this._demuxer.bindDataSource(this._ioctl):p.onDataArrival=this._onInitChunkArrival.bind(this),p.open(l)},f.prototype.stop=function(){this._internalAbort(),this._disableStatisticsReporter()},f.prototype._internalAbort=function(){this._ioctl&&(this._ioctl.destroy(),this._ioctl=null)},f.prototype.pause=function(){this._ioctl&&this._ioctl.isWorking()&&(this._ioctl.pause(),this._disableStatisticsReporter())},f.prototype.resume=function(){this._ioctl&&this._ioctl.isPaused()&&(this._ioctl.resume(),this._enableStatisticsReporter())},f.prototype.seek=function(c){if(this._mediaInfo!=null&&this._mediaInfo.isSeekable()){var l=this._searchSegmentIndexContains(c);if(l===this._currentSegmentIndex){var s=this._mediaInfo.segments[l];if(s==null)this._pendingSeekTime=c;else{var p=s.getNearestKeyframe(c);this._remuxer.seek(p.milliseconds),this._ioctl.seek(p.fileposition),this._pendingResolveSeekPoint=p.milliseconds}}else{var g=this._mediaInfo.segments[l];g==null?(this._pendingSeekTime=c,this._internalAbort(),this._remuxer.seek(),this._remuxer.insertDiscontinuity(),this._loadSegment(l)):(p=g.getNearestKeyframe(c),this._internalAbort(),this._remuxer.seek(c),this._remuxer.insertDiscontinuity(),this._demuxer.resetMediaInfo(),this._demuxer.timestampBase=this._mediaDataSource.segments[l].timestampBase,this._loadSegment(l,p.fileposition),this._pendingResolveSeekPoint=p.milliseconds,this._reportSegmentMediaInfo(l))}this._enableStatisticsReporter()}},f.prototype._searchSegmentIndexContains=function(c){for(var l=this._mediaDataSource.segments,s=l.length-1,p=0;p<l.length;p++)if(c<l[p].timestampBase){s=p-1;break}return s},f.prototype._onInitChunkArrival=function(c,l){var s=this,p=0;if(l>0)this._demuxer.bindDataSource(this._ioctl),this._demuxer.timestampBase=this._mediaDataSource.segments[this._currentSegmentIndex].timestampBase,p=this._demuxer.parseChunks(c,l);else{var g=null;(g=P.probe(c)).match&&(this._setupFLVDemuxerRemuxer(g),p=this._demuxer.parseChunks(c,l)),g.match||g.needMoreData||(g=Oc.probe(c)).match&&(this._setupTSDemuxerRemuxer(g),p=this._demuxer.parseChunks(c,l)),g.match||g.needMoreData||(g=null,u.a.e(this.TAG,"Non MPEG-TS/FLV, Unsupported media type!"),Promise.resolve().then(function(){s._internalAbort()}),this._emitter.emit(tt.a.DEMUX_ERROR,E.a.FORMAT_UNSUPPORTED,"Non MPEG-TS/FLV, Unsupported media type!"))}return p},f.prototype._setupFLVDemuxerRemuxer=function(c){this._demuxer=new P(c,this._config),this._remuxer||(this._remuxer=new Uc(this._config));var l=this._mediaDataSource;l.duration==null||isNaN(l.duration)||(this._demuxer.overridedDuration=l.duration),typeof l.hasAudio=="boolean"&&(this._demuxer.overridedHasAudio=l.hasAudio),typeof l.hasVideo=="boolean"&&(this._demuxer.overridedHasVideo=l.hasVideo),this._demuxer.timestampBase=l.segments[this._currentSegmentIndex].timestampBase,this._demuxer.onError=this._onDemuxException.bind(this),this._demuxer.onMediaInfo=this._onMediaInfo.bind(this),this._demuxer.onMetaDataArrived=this._onMetaDataArrived.bind(this),this._demuxer.onScriptDataArrived=this._onScriptDataArrived.bind(this),this._remuxer.bindDataSource(this._demuxer.bindDataSource(this._ioctl)),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this)},f.prototype._setupTSDemuxerRemuxer=function(c){var l=this._demuxer=new Oc(c,this._config);this._remuxer||(this._remuxer=new Uc(this._config)),l.onError=this._onDemuxException.bind(this),l.onMediaInfo=this._onMediaInfo.bind(this),l.onMetaDataArrived=this._onMetaDataArrived.bind(this),l.onTimedID3Metadata=this._onTimedID3Metadata.bind(this),l.onSynchronousKLVMetadata=this._onSynchronousKLVMetadata.bind(this),l.onAsynchronousKLVMetadata=this._onAsynchronousKLVMetadata.bind(this),l.onSMPTE2038Metadata=this._onSMPTE2038Metadata.bind(this),l.onSCTE35Metadata=this._onSCTE35Metadata.bind(this),l.onPESPrivateDataDescriptor=this._onPESPrivateDataDescriptor.bind(this),l.onPESPrivateData=this._onPESPrivateData.bind(this),this._remuxer.bindDataSource(this._demuxer),this._demuxer.bindDataSource(this._ioctl),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this)},f.prototype._onMediaInfo=function(c){var l=this;this._mediaInfo==null&&(this._mediaInfo=Object.assign({},c),this._mediaInfo.keyframesIndex=null,this._mediaInfo.segments=[],this._mediaInfo.segmentCount=this._mediaDataSource.segments.length,Object.setPrototypeOf(this._mediaInfo,h.a.prototype));var s=Object.assign({},c);Object.setPrototypeOf(s,h.a.prototype),this._mediaInfo.segments[this._currentSegmentIndex]=s,this._reportSegmentMediaInfo(this._currentSegmentIndex),this._pendingSeekTime!=null&&Promise.resolve().then(function(){var p=l._pendingSeekTime;l._pendingSeekTime=null,l.seek(p)})},f.prototype._onMetaDataArrived=function(c){this._emitter.emit(tt.a.METADATA_ARRIVED,c)},f.prototype._onScriptDataArrived=function(c){this._emitter.emit(tt.a.SCRIPTDATA_ARRIVED,c)},f.prototype._onTimedID3Metadata=function(c){var l=this._remuxer.getTimestampBase();l!=null&&(c.pts!=null&&(c.pts-=l),c.dts!=null&&(c.dts-=l),this._emitter.emit(tt.a.TIMED_ID3_METADATA_ARRIVED,c))},f.prototype._onSynchronousKLVMetadata=function(c){var l=this._remuxer.getTimestampBase();l!=null&&(c.pts!=null&&(c.pts-=l),c.dts!=null&&(c.dts-=l),this._emitter.emit(tt.a.SYNCHRONOUS_KLV_METADATA_ARRIVED,c))},f.prototype._onAsynchronousKLVMetadata=function(c){this._emitter.emit(tt.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED,c)},f.prototype._onSMPTE2038Metadata=function(c){var l=this._remuxer.getTimestampBase();l!=null&&(c.pts!=null&&(c.pts-=l),c.dts!=null&&(c.dts-=l),c.nearest_pts!=null&&(c.nearest_pts-=l),this._emitter.emit(tt.a.SMPTE2038_METADATA_ARRIVED,c))},f.prototype._onSCTE35Metadata=function(c){var l=this._remuxer.getTimestampBase();l!=null&&(c.pts!=null&&(c.pts-=l),c.nearest_pts!=null&&(c.nearest_pts-=l),this._emitter.emit(tt.a.SCTE35_METADATA_ARRIVED,c))},f.prototype._onPESPrivateDataDescriptor=function(c){this._emitter.emit(tt.a.PES_PRIVATE_DATA_DESCRIPTOR,c)},f.prototype._onPESPrivateData=function(c){var l=this._remuxer.getTimestampBase();l!=null&&(c.pts!=null&&(c.pts-=l),c.nearest_pts!=null&&(c.nearest_pts-=l),c.dts!=null&&(c.dts-=l),this._emitter.emit(tt.a.PES_PRIVATE_DATA_ARRIVED,c))},f.prototype._onIOSeeked=function(){this._remuxer.insertDiscontinuity()},f.prototype._onIOComplete=function(c){var l=c+1;l<this._mediaDataSource.segments.length?(this._internalAbort(),this._remuxer&&this._remuxer.flushStashedSamples(),this._loadSegment(l)):(this._remuxer&&this._remuxer.flushStashedSamples(),this._emitter.emit(tt.a.LOADING_COMPLETE),this._disableStatisticsReporter())},f.prototype._onIORedirect=function(c){var l=this._ioctl.extraData;this._mediaDataSource.segments[l].redirectedURL=c},f.prototype._onIORecoveredEarlyEof=function(){this._emitter.emit(tt.a.RECOVERED_EARLY_EOF)},f.prototype._onIOException=function(c,l){u.a.e(this.TAG,"IOException: type = ".concat(c,", code = ").concat(l.code,", msg = ").concat(l.msg)),this._emitter.emit(tt.a.IO_ERROR,c,l),this._disableStatisticsReporter()},f.prototype._onDemuxException=function(c,l){u.a.e(this.TAG,"DemuxException: type = ".concat(c,", info = ").concat(l)),this._emitter.emit(tt.a.DEMUX_ERROR,c,l)},f.prototype._onRemuxerInitSegmentArrival=function(c,l){this._emitter.emit(tt.a.INIT_SEGMENT,c,l)},f.prototype._onRemuxerMediaSegmentArrival=function(c,l){if(this._pendingSeekTime==null&&(this._emitter.emit(tt.a.MEDIA_SEGMENT,c,l),this._pendingResolveSeekPoint!=null&&c==="video")){var s=l.info.syncPoints,p=this._pendingResolveSeekPoint;this._pendingResolveSeekPoint=null,d.a.safari&&s.length>0&&s[0].originalDts===p&&(p=s[0].pts),this._emitter.emit(tt.a.RECOMMEND_SEEKPOINT,p)}},f.prototype._enableStatisticsReporter=function(){this._statisticsReporter==null&&(this._statisticsReporter=self.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval))},f.prototype._disableStatisticsReporter=function(){this._statisticsReporter&&(self.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},f.prototype._reportSegmentMediaInfo=function(c){var l=this._mediaInfo.segments[c],s=Object.assign({},l);s.duration=this._mediaInfo.duration,s.segmentCount=this._mediaInfo.segmentCount,delete s.segments,delete s.keyframesIndex,this._emitter.emit(tt.a.MEDIA_INFO,s)},f.prototype._reportStatisticsInfo=function(){var c={};c.url=this._ioctl.currentURL,c.hasRedirect=this._ioctl.hasRedirect,c.hasRedirect&&(c.redirectedURL=this._ioctl.currentRedirectedURL),c.speed=this._ioctl.currentSpeed,c.loaderType=this._ioctl.loaderType,c.currentSegmentIndex=this._currentSegmentIndex,c.totalSegmentCount=this._mediaDataSource.segments.length,this._emitter.emit(tt.a.STATISTICS_INFO,c)},f}());r.a=Ym},function(n,r,i){var o,a=i(0),u=function(){function U(){this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now}return U.prototype.reset=function(){this._firstCheckpoint=this._lastCheckpoint=0,this._totalBytes=this._intervalBytes=0,this._lastSecondBytes=0},U.prototype.addBytes=function(R){this._firstCheckpoint===0?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=R,this._totalBytes+=R):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=R,this._totalBytes+=R):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=R,this._totalBytes+=R,this._lastCheckpoint=this._now())},Object.defineProperty(U.prototype,"currentKBps",{get:function(){this.addBytes(0);var R=(this._now()-this._lastCheckpoint)/1e3;return R==0&&(R=1),this._intervalBytes/R/1024},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"lastSecondKBps",{get:function(){return this.addBytes(0),this._lastSecondBytes!==0?this._lastSecondBytes/1024:this._now()-this._lastCheckpoint>=500?this.currentKBps:0},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"averageKBps",{get:function(){var R=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/R/1024},enumerable:!1,configurable:!0}),U}(),d=i(2),h=i(5),_=i(3),S=(o=function(U,R){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,k){C.__proto__=k}||function(C,k){for(var P in k)Object.prototype.hasOwnProperty.call(k,P)&&(C[P]=k[P])})(U,R)},function(U,R){if(typeof R!="function"&&R!==null)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");function C(){this.constructor=U}o(U,R),U.prototype=R===null?Object.create(R):(C.prototype=R.prototype,new C)}),y=function(U){function R(C,k){var P=U.call(this,"fetch-stream-loader")||this;return P.TAG="FetchStreamLoader",P._seekHandler=C,P._config=k,P._needStash=!0,P._requestAbort=!1,P._abortController=null,P._contentLength=null,P._receivedLength=0,P}return S(R,U),R.isSupported=function(){try{var C=h.a.msedge&&h.a.version.minor>=15048,k=!h.a.msedge||C;return self.fetch&&self.ReadableStream&&k}catch{return!1}},R.prototype.destroy=function(){this.isWorking()&&this.abort(),U.prototype.destroy.call(this)},R.prototype.open=function(C,k){var P=this;this._dataSource=C,this._range=k;var Y=C.url;this._config.reuseRedirectedURL&&C.redirectedURL!=null&&(Y=C.redirectedURL);var J=this._seekHandler.getConfig(Y,k),q=new self.Headers;if(typeof J.headers=="object"){var ne=J.headers;for(var ce in ne)ne.hasOwnProperty(ce)&&q.append(ce,ne[ce])}var be={method:"GET",headers:q,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};if(typeof this._config.headers=="object")for(var ce in this._config.headers)q.append(ce,this._config.headers[ce]);C.cors===!1&&(be.mode="same-origin"),C.withCredentials&&(be.credentials="include"),C.referrerPolicy&&(be.referrerPolicy=C.referrerPolicy),self.AbortController&&(this._abortController=new self.AbortController,be.signal=this._abortController.signal),this._status=d.c.kConnecting,self.fetch(J.url,be).then(function(Z){if(P._requestAbort)return P._status=d.c.kIdle,void Z.body.cancel();if(Z.ok&&Z.status>=200&&Z.status<=299){if(Z.url!==J.url&&P._onURLRedirect){var I=P._seekHandler.removeURLParameters(Z.url);P._onURLRedirect(I)}var L=Z.headers.get("Content-Length");return L!=null&&(P._contentLength=parseInt(L),P._contentLength!==0&&P._onContentLengthKnown&&P._onContentLengthKnown(P._contentLength)),P._pump.call(P,Z.body.getReader())}if(P._status=d.c.kError,!P._onError)throw new _.d("FetchStreamLoader: Http code invalid, "+Z.status+" "+Z.statusText);P._onError(d.b.HTTP_STATUS_CODE_INVALID,{code:Z.status,msg:Z.statusText})}).catch(function(Z){if(!P._abortController||!P._abortController.signal.aborted){if(P._status=d.c.kError,!P._onError)throw Z;P._onError(d.b.EXCEPTION,{code:-1,msg:Z.message})}})},R.prototype.abort=function(){if(this._requestAbort=!0,(this._status!==d.c.kBuffering||!h.a.chrome)&&this._abortController)try{this._abortController.abort()}catch{}},R.prototype._pump=function(C){var k=this;return C.read().then(function(P){if(P.done)if(k._contentLength!==null&&k._receivedLength<k._contentLength){k._status=d.c.kError;var Y=d.b.EARLY_EOF,J={code:-1,msg:"Fetch stream meet Early-EOF"};if(!k._onError)throw new _.d(J.msg);k._onError(Y,J)}else k._status=d.c.kComplete,k._onComplete&&k._onComplete(k._range.from,k._range.from+k._receivedLength-1);else{if(k._abortController&&k._abortController.signal.aborted)return void(k._status=d.c.kComplete);if(k._requestAbort===!0)return k._status=d.c.kComplete,C.cancel();k._status=d.c.kBuffering;var q=P.value.buffer,ne=k._range.from+k._receivedLength;k._receivedLength+=q.byteLength,k._onDataArrival&&k._onDataArrival(q,ne,k._receivedLength),k._pump(C)}}).catch(function(P){if(k._abortController&&k._abortController.signal.aborted)k._status=d.c.kComplete;else if(P.code!==11||!h.a.msedge){k._status=d.c.kError;var Y=0,J=null;if(P.code!==19&&P.message!=="network error"||!(k._contentLength===null||k._contentLength!==null&&k._receivedLength<k._contentLength)?(Y=d.b.EXCEPTION,J={code:P.code,msg:P.message}):(Y=d.b.EARLY_EOF,J={code:P.code,msg:"Fetch stream meet Early-EOF"}),!k._onError)throw new _.d(J.msg);k._onError(Y,J)}})},R}(d.a),v=function(){var U=function(R,C){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,P){k.__proto__=P}||function(k,P){for(var Y in P)Object.prototype.hasOwnProperty.call(P,Y)&&(k[Y]=P[Y])})(R,C)};return function(R,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function k(){this.constructor=R}U(R,C),R.prototype=C===null?Object.create(C):(k.prototype=C.prototype,new k)}}(),x=function(U){function R(C,k){var P=U.call(this,"xhr-moz-chunked-loader")||this;return P.TAG="MozChunkedLoader",P._seekHandler=C,P._config=k,P._needStash=!0,P._xhr=null,P._requestAbort=!1,P._contentLength=null,P._receivedLength=0,P}return v(R,U),R.isSupported=function(){try{var C=new XMLHttpRequest;return C.open("GET","https://example.com",!0),C.responseType="moz-chunked-arraybuffer",C.responseType==="moz-chunked-arraybuffer"}catch(k){return a.a.w("MozChunkedLoader",k.message),!1}},R.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onloadend=null,this._xhr.onerror=null,this._xhr=null),U.prototype.destroy.call(this)},R.prototype.open=function(C,k){this._dataSource=C,this._range=k;var P=C.url;this._config.reuseRedirectedURL&&C.redirectedURL!=null&&(P=C.redirectedURL);var Y=this._seekHandler.getConfig(P,k);this._requestURL=Y.url;var J=this._xhr=new XMLHttpRequest;if(J.open("GET",Y.url,!0),J.responseType="moz-chunked-arraybuffer",J.onreadystatechange=this._onReadyStateChange.bind(this),J.onprogress=this._onProgress.bind(this),J.onloadend=this._onLoadEnd.bind(this),J.onerror=this._onXhrError.bind(this),C.withCredentials&&(J.withCredentials=!0),typeof Y.headers=="object"){var q=Y.headers;for(var ne in q)q.hasOwnProperty(ne)&&J.setRequestHeader(ne,q[ne])}if(typeof this._config.headers=="object"){q=this._config.headers;for(var ne in q)q.hasOwnProperty(ne)&&J.setRequestHeader(ne,q[ne])}this._status=d.c.kConnecting,J.send()},R.prototype.abort=function(){this._requestAbort=!0,this._xhr&&this._xhr.abort(),this._status=d.c.kComplete},R.prototype._onReadyStateChange=function(C){var k=C.target;if(k.readyState===2){if(k.responseURL!=null&&k.responseURL!==this._requestURL&&this._onURLRedirect){var P=this._seekHandler.removeURLParameters(k.responseURL);this._onURLRedirect(P)}if(k.status!==0&&(k.status<200||k.status>299)){if(this._status=d.c.kError,!this._onError)throw new _.d("MozChunkedLoader: Http code invalid, "+k.status+" "+k.statusText);this._onError(d.b.HTTP_STATUS_CODE_INVALID,{code:k.status,msg:k.statusText})}else this._status=d.c.kBuffering}},R.prototype._onProgress=function(C){if(this._status!==d.c.kError){this._contentLength===null&&C.total!==null&&C.total!==0&&(this._contentLength=C.total,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength));var k=C.target.response,P=this._range.from+this._receivedLength;this._receivedLength+=k.byteLength,this._onDataArrival&&this._onDataArrival(k,P,this._receivedLength)}},R.prototype._onLoadEnd=function(C){this._requestAbort!==!0?this._status!==d.c.kError&&(this._status=d.c.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1)):this._requestAbort=!1},R.prototype._onXhrError=function(C){this._status=d.c.kError;var k=0,P=null;if(this._contentLength&&C.loaded<this._contentLength?(k=d.b.EARLY_EOF,P={code:-1,msg:"Moz-Chunked stream meet Early-Eof"}):(k=d.b.EXCEPTION,P={code:-1,msg:C.constructor.name+" "+C.type}),!this._onError)throw new _.d(P.msg);this._onError(k,P)},R}(d.a),w=function(){var U=function(R,C){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,P){k.__proto__=P}||function(k,P){for(var Y in P)Object.prototype.hasOwnProperty.call(P,Y)&&(k[Y]=P[Y])})(R,C)};return function(R,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function k(){this.constructor=R}U(R,C),R.prototype=C===null?Object.create(C):(k.prototype=C.prototype,new k)}}(),N=(function(U){function R(C,k){var P=U.call(this,"xhr-msstream-loader")||this;return P.TAG="MSStreamLoader",P._seekHandler=C,P._config=k,P._needStash=!0,P._xhr=null,P._reader=null,P._totalRange=null,P._currentRange=null,P._currentRequestURL=null,P._currentRedirectedURL=null,P._contentLength=null,P._receivedLength=0,P._bufferLimit=16777216,P._lastTimeBufferSize=0,P._isReconnecting=!1,P}w(R,U),R.isSupported=function(){try{if(self.MSStream===void 0||self.MSStreamReader===void 0)return!1;var C=new XMLHttpRequest;return C.open("GET","https://example.com",!0),C.responseType="ms-stream",C.responseType==="ms-stream"}catch(k){return a.a.w("MSStreamLoader",k.message),!1}},R.prototype.destroy=function(){this.isWorking()&&this.abort(),this._reader&&(this._reader.onprogress=null,this._reader.onload=null,this._reader.onerror=null,this._reader=null),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr=null),U.prototype.destroy.call(this)},R.prototype.open=function(C,k){this._internalOpen(C,k,!1)},R.prototype._internalOpen=function(C,k,P){this._dataSource=C,P?this._currentRange=k:this._totalRange=k;var Y=C.url;this._config.reuseRedirectedURL&&(this._currentRedirectedURL!=null?Y=this._currentRedirectedURL:C.redirectedURL!=null&&(Y=C.redirectedURL));var J=this._seekHandler.getConfig(Y,k);this._currentRequestURL=J.url;var q=this._reader=new self.MSStreamReader;q.onprogress=this._msrOnProgress.bind(this),q.onload=this._msrOnLoad.bind(this),q.onerror=this._msrOnError.bind(this);var ne=this._xhr=new XMLHttpRequest;if(ne.open("GET",J.url,!0),ne.responseType="ms-stream",ne.onreadystatechange=this._xhrOnReadyStateChange.bind(this),ne.onerror=this._xhrOnError.bind(this),C.withCredentials&&(ne.withCredentials=!0),typeof J.headers=="object"){var ce=J.headers;for(var be in ce)ce.hasOwnProperty(be)&&ne.setRequestHeader(be,ce[be])}if(typeof this._config.headers=="object"){ce=this._config.headers;for(var be in ce)ce.hasOwnProperty(be)&&ne.setRequestHeader(be,ce[be])}this._isReconnecting?this._isReconnecting=!1:this._status=d.c.kConnecting,ne.send()},R.prototype.abort=function(){this._internalAbort(),this._status=d.c.kComplete},R.prototype._internalAbort=function(){this._reader&&(this._reader.readyState===1&&this._reader.abort(),this._reader.onprogress=null,this._reader.onload=null,this._reader.onerror=null,this._reader=null),this._xhr&&(this._xhr.abort(),this._xhr.onreadystatechange=null,this._xhr=null)},R.prototype._xhrOnReadyStateChange=function(C){var k=C.target;if(k.readyState===2)if(k.status>=200&&k.status<=299){if(this._status=d.c.kBuffering,k.responseURL!=null){var P=this._seekHandler.removeURLParameters(k.responseURL);k.responseURL!==this._currentRequestURL&&P!==this._currentRedirectedURL&&(this._currentRedirectedURL=P,this._onURLRedirect&&this._onURLRedirect(P))}var Y=k.getResponseHeader("Content-Length");if(Y!=null&&this._contentLength==null){var J=parseInt(Y);J>0&&(this._contentLength=J,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength))}}else{if(this._status=d.c.kError,!this._onError)throw new _.d("MSStreamLoader: Http code invalid, "+k.status+" "+k.statusText);this._onError(d.b.HTTP_STATUS_CODE_INVALID,{code:k.status,msg:k.statusText})}else if(k.readyState===3&&k.status>=200&&k.status<=299){this._status=d.c.kBuffering;var q=k.response;this._reader.readAsArrayBuffer(q)}},R.prototype._xhrOnError=function(C){this._status=d.c.kError;var k=d.b.EXCEPTION,P={code:-1,msg:C.constructor.name+" "+C.type};if(!this._onError)throw new _.d(P.msg);this._onError(k,P)},R.prototype._msrOnProgress=function(C){var k=C.target.result;if(k!=null){var P=k.slice(this._lastTimeBufferSize);this._lastTimeBufferSize=k.byteLength;var Y=this._totalRange.from+this._receivedLength;this._receivedLength+=P.byteLength,this._onDataArrival&&this._onDataArrival(P,Y,this._receivedLength),k.byteLength>=this._bufferLimit&&(a.a.v(this.TAG,"MSStream buffer exceeded max size near ".concat(Y+P.byteLength,", reconnecting...")),this._doReconnectIfNeeded())}else this._doReconnectIfNeeded()},R.prototype._doReconnectIfNeeded=function(){if(this._contentLength==null||this._receivedLength<this._contentLength){this._isReconnecting=!0,this._lastTimeBufferSize=0,this._internalAbort();var C={from:this._totalRange.from+this._receivedLength,to:-1};this._internalOpen(this._dataSource,C,!0)}},R.prototype._msrOnLoad=function(C){this._status=d.c.kComplete,this._onComplete&&this._onComplete(this._totalRange.from,this._totalRange.from+this._receivedLength-1)},R.prototype._msrOnError=function(C){this._status=d.c.kError;var k=0,P=null;if(this._contentLength&&this._receivedLength<this._contentLength?(k=d.b.EARLY_EOF,P={code:-1,msg:"MSStream meet Early-Eof"}):(k=d.b.EARLY_EOF,P={code:-1,msg:C.constructor.name+" "+C.type}),!this._onError)throw new _.d(P.msg);this._onError(k,P)}}(d.a),function(){var U=function(R,C){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,P){k.__proto__=P}||function(k,P){for(var Y in P)Object.prototype.hasOwnProperty.call(P,Y)&&(k[Y]=P[Y])})(R,C)};return function(R,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function k(){this.constructor=R}U(R,C),R.prototype=C===null?Object.create(C):(k.prototype=C.prototype,new k)}}()),A=function(U){function R(C,k){var P=U.call(this,"xhr-range-loader")||this;return P.TAG="RangeLoader",P._seekHandler=C,P._config=k,P._needStash=!1,P._chunkSizeKBList=[128,256,384,512,768,1024,1536,2048,3072,4096,5120,6144,7168,8192],P._currentChunkSizeKB=384,P._currentSpeedNormalized=0,P._zeroSpeedChunkCount=0,P._xhr=null,P._speedSampler=new u,P._requestAbort=!1,P._waitForTotalLength=!1,P._totalLengthReceived=!1,P._currentRequestURL=null,P._currentRedirectedURL=null,P._currentRequestRange=null,P._totalLength=null,P._contentLength=null,P._receivedLength=0,P._lastTimeLoaded=0,P}return N(R,U),R.isSupported=function(){try{var C=new XMLHttpRequest;return C.open("GET","https://example.com",!0),C.responseType="arraybuffer",C.responseType==="arraybuffer"}catch(k){return a.a.w("RangeLoader",k.message),!1}},R.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr=null),U.prototype.destroy.call(this)},Object.defineProperty(R.prototype,"currentSpeed",{get:function(){return this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),R.prototype.open=function(C,k){this._dataSource=C,this._range=k,this._status=d.c.kConnecting;var P=!1;this._dataSource.filesize!=null&&this._dataSource.filesize!==0&&(P=!0,this._totalLength=this._dataSource.filesize),this._totalLengthReceived||P?this._openSubRange():(this._waitForTotalLength=!0,this._internalOpen(this._dataSource,{from:0,to:-1}))},R.prototype._openSubRange=function(){var C=1024*this._currentChunkSizeKB,k=this._range.from+this._receivedLength,P=k+C;this._contentLength!=null&&P-this._range.from>=this._contentLength&&(P=this._range.from+this._contentLength-1),this._currentRequestRange={from:k,to:P},this._internalOpen(this._dataSource,this._currentRequestRange)},R.prototype._internalOpen=function(C,k){this._lastTimeLoaded=0;var P=C.url;this._config.reuseRedirectedURL&&(this._currentRedirectedURL!=null?P=this._currentRedirectedURL:C.redirectedURL!=null&&(P=C.redirectedURL));var Y=this._seekHandler.getConfig(P,k);this._currentRequestURL=Y.url;var J=this._xhr=new XMLHttpRequest;if(J.open("GET",Y.url,!0),J.responseType="arraybuffer",J.onreadystatechange=this._onReadyStateChange.bind(this),J.onprogress=this._onProgress.bind(this),J.onload=this._onLoad.bind(this),J.onerror=this._onXhrError.bind(this),C.withCredentials&&(J.withCredentials=!0),typeof Y.headers=="object"){var q=Y.headers;for(var ne in q)q.hasOwnProperty(ne)&&J.setRequestHeader(ne,q[ne])}if(typeof this._config.headers=="object"){q=this._config.headers;for(var ne in q)q.hasOwnProperty(ne)&&J.setRequestHeader(ne,q[ne])}J.send()},R.prototype.abort=function(){this._requestAbort=!0,this._internalAbort(),this._status=d.c.kComplete},R.prototype._internalAbort=function(){this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr.abort(),this._xhr=null)},R.prototype._onReadyStateChange=function(C){var k=C.target;if(k.readyState===2){if(k.responseURL!=null){var P=this._seekHandler.removeURLParameters(k.responseURL);k.responseURL!==this._currentRequestURL&&P!==this._currentRedirectedURL&&(this._currentRedirectedURL=P,this._onURLRedirect&&this._onURLRedirect(P))}if(k.status>=200&&k.status<=299){if(this._waitForTotalLength)return;this._status=d.c.kBuffering}else{if(this._status=d.c.kError,!this._onError)throw new _.d("RangeLoader: Http code invalid, "+k.status+" "+k.statusText);this._onError(d.b.HTTP_STATUS_CODE_INVALID,{code:k.status,msg:k.statusText})}}},R.prototype._onProgress=function(C){if(this._status!==d.c.kError){if(this._contentLength===null){var k=!1;if(this._waitForTotalLength){this._waitForTotalLength=!1,this._totalLengthReceived=!0,k=!0;var P=C.total;this._internalAbort(),P!=null&P!==0&&(this._totalLength=P)}if(this._range.to===-1?this._contentLength=this._totalLength-this._range.from:this._contentLength=this._range.to-this._range.from+1,k)return void this._openSubRange();this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)}var Y=C.loaded-this._lastTimeLoaded;this._lastTimeLoaded=C.loaded,this._speedSampler.addBytes(Y)}},R.prototype._normalizeSpeed=function(C){var k=this._chunkSizeKBList,P=k.length-1,Y=0,J=0,q=P;if(C<k[0])return k[0];for(;J<=q;){if((Y=J+Math.floor((q-J)/2))===P||C>=k[Y]&&C<k[Y+1])return k[Y];k[Y]<C?J=Y+1:q=Y-1}},R.prototype._onLoad=function(C){if(this._status!==d.c.kError)if(this._waitForTotalLength)this._waitForTotalLength=!1;else{this._lastTimeLoaded=0;var k=this._speedSampler.lastSecondKBps;if(k===0&&(this._zeroSpeedChunkCount++,this._zeroSpeedChunkCount>=3&&(k=this._speedSampler.currentKBps)),k!==0){var P=this._normalizeSpeed(k);this._currentSpeedNormalized!==P&&(this._currentSpeedNormalized=P,this._currentChunkSizeKB=P)}var Y=C.target.response,J=this._range.from+this._receivedLength;this._receivedLength+=Y.byteLength;var q=!1;this._contentLength!=null&&this._receivedLength<this._contentLength?this._openSubRange():q=!0,this._onDataArrival&&this._onDataArrival(Y,J,this._receivedLength),q&&(this._status=d.c.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1))}},R.prototype._onXhrError=function(C){this._status=d.c.kError;var k=0,P=null;if(this._contentLength&&this._receivedLength>0&&this._receivedLength<this._contentLength?(k=d.b.EARLY_EOF,P={code:-1,msg:"RangeLoader meet Early-Eof"}):(k=d.b.EXCEPTION,P={code:-1,msg:C.constructor.name+" "+C.type}),!this._onError)throw new _.d(P.msg);this._onError(k,P)},R}(d.a),E=function(){var U=function(R,C){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,P){k.__proto__=P}||function(k,P){for(var Y in P)Object.prototype.hasOwnProperty.call(P,Y)&&(k[Y]=P[Y])})(R,C)};return function(R,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function k(){this.constructor=R}U(R,C),R.prototype=C===null?Object.create(C):(k.prototype=C.prototype,new k)}}(),T=function(U){function R(){var C=U.call(this,"websocket-loader")||this;return C.TAG="WebSocketLoader",C._needStash=!0,C._ws=null,C._requestAbort=!1,C._receivedLength=0,C}return E(R,U),R.isSupported=function(){try{return self.WebSocket!==void 0}catch{return!1}},R.prototype.destroy=function(){this._ws&&this.abort(),U.prototype.destroy.call(this)},R.prototype.open=function(C){try{var k=this._ws=new self.WebSocket(C.url);k.binaryType="arraybuffer",k.onopen=this._onWebSocketOpen.bind(this),k.onclose=this._onWebSocketClose.bind(this),k.onmessage=this._onWebSocketMessage.bind(this),k.onerror=this._onWebSocketError.bind(this),this._status=d.c.kConnecting}catch(Y){this._status=d.c.kError;var P={code:Y.code,msg:Y.message};if(!this._onError)throw new _.d(P.msg);this._onError(d.b.EXCEPTION,P)}},R.prototype.abort=function(){var C=this._ws;!C||C.readyState!==0&&C.readyState!==1||(this._requestAbort=!0,C.close()),this._ws=null,this._status=d.c.kComplete},R.prototype._onWebSocketOpen=function(C){this._status=d.c.kBuffering},R.prototype._onWebSocketClose=function(C){this._requestAbort!==!0?(this._status=d.c.kComplete,this._onComplete&&this._onComplete(0,this._receivedLength-1)):this._requestAbort=!1},R.prototype._onWebSocketMessage=function(C){var k=this;if(C.data instanceof ArrayBuffer)this._dispatchArrayBuffer(C.data);else if(C.data instanceof Blob){var P=new FileReader;P.onload=function(){k._dispatchArrayBuffer(P.result)},P.readAsArrayBuffer(C.data)}else{this._status=d.c.kError;var Y={code:-1,msg:"Unsupported WebSocket message type: "+C.data.constructor.name};if(!this._onError)throw new _.d(Y.msg);this._onError(d.b.EXCEPTION,Y)}},R.prototype._dispatchArrayBuffer=function(C){var k=C,P=this._receivedLength;this._receivedLength+=k.byteLength,this._onDataArrival&&this._onDataArrival(k,P,this._receivedLength)},R.prototype._onWebSocketError=function(C){this._status=d.c.kError;var k={code:C.code,msg:C.message};if(!this._onError)throw new _.d(k.msg);this._onError(d.b.EXCEPTION,k)},R}(d.a),M=function(){function U(R){this._zeroStart=R||!1}return U.prototype.getConfig=function(R,C){var k={};if(C.from!==0||C.to!==-1){var P=void 0;P=C.to!==-1?"bytes=".concat(C.from.toString(),"-").concat(C.to.toString()):"bytes=".concat(C.from.toString(),"-"),k.Range=P}else this._zeroStart&&(k.Range="bytes=0-");return{url:R,headers:k}},U.prototype.removeURLParameters=function(R){return R},U}(),z=function(){function U(R,C){this._startName=R,this._endName=C}return U.prototype.getConfig=function(R,C){var k=R;if(C.from!==0||C.to!==-1){var P=!0;k.indexOf("?")===-1&&(k+="?",P=!1),P&&(k+="&"),k+="".concat(this._startName,"=").concat(C.from.toString()),C.to!==-1&&(k+="&".concat(this._endName,"=").concat(C.to.toString()))}return{url:k,headers:{}}},U.prototype.removeURLParameters=function(R){var C=R.split("?")[0],k=void 0,P=R.indexOf("?");P!==-1&&(k=R.substring(P+1));var Y="";if(k!=null&&k.length>0)for(var J=k.split("&"),q=0;q<J.length;q++){var ne=J[q].split("="),ce=q>0;ne[0]!==this._startName&&ne[0]!==this._endName&&(ce&&(Y+="&"),Y+=J[q])}return Y.length===0?C:C+"?"+Y},U}(),H=function(){function U(R,C,k){this.TAG="IOController",this._config=C,this._extraData=k,this._stashInitialSize=65536,C.stashInitialSize!=null&&C.stashInitialSize>0&&(this._stashInitialSize=C.stashInitialSize),this._stashUsed=0,this._stashSize=this._stashInitialSize,this._bufferSize=Math.max(this._stashSize,3145728),this._stashBuffer=new ArrayBuffer(this._bufferSize),this._stashByteStart=0,this._enableStash=!0,C.enableStashBuffer===!1&&(this._enableStash=!1),this._loader=null,this._loaderClass=null,this._seekHandler=null,this._dataSource=R,this._isWebSocketURL=/wss?:\/\/(.+?)/.test(R.url),this._refTotalLength=R.filesize?R.filesize:null,this._totalLength=this._refTotalLength,this._fullRequestFlag=!1,this._currentRange=null,this._redirectedURL=null,this._speedNormalized=0,this._speedSampler=new u,this._speedNormalizeList=[32,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096],this._isEarlyEofReconnecting=!1,this._paused=!1,this._resumeFrom=0,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._selectSeekHandler(),this._selectLoader(),this._createLoader()}return U.prototype.destroy=function(){this._loader.isWorking()&&this._loader.abort(),this._loader.destroy(),this._loader=null,this._loaderClass=null,this._dataSource=null,this._stashBuffer=null,this._stashUsed=this._stashSize=this._bufferSize=this._stashByteStart=0,this._currentRange=null,this._speedSampler=null,this._isEarlyEofReconnecting=!1,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._extraData=null},U.prototype.isWorking=function(){return this._loader&&this._loader.isWorking()&&!this._paused},U.prototype.isPaused=function(){return this._paused},Object.defineProperty(U.prototype,"status",{get:function(){return this._loader.status},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"extraData",{get:function(){return this._extraData},set:function(R){this._extraData=R},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(R){this._onDataArrival=R},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onSeeked",{get:function(){return this._onSeeked},set:function(R){this._onSeeked=R},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onError",{get:function(){return this._onError},set:function(R){this._onError=R},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onComplete",{get:function(){return this._onComplete},set:function(R){this._onComplete=R},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onRedirect",{get:function(){return this._onRedirect},set:function(R){this._onRedirect=R},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onRecoveredEarlyEof",{get:function(){return this._onRecoveredEarlyEof},set:function(R){this._onRecoveredEarlyEof=R},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"currentURL",{get:function(){return this._dataSource.url},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"hasRedirect",{get:function(){return this._redirectedURL!=null||this._dataSource.redirectedURL!=null},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"currentRedirectedURL",{get:function(){return this._redirectedURL||this._dataSource.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"currentSpeed",{get:function(){return this._loaderClass===A?this._loader.currentSpeed:this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"loaderType",{get:function(){return this._loader.type},enumerable:!1,configurable:!0}),U.prototype._selectSeekHandler=function(){var R=this._config;if(R.seekType==="range")this._seekHandler=new M(this._config.rangeLoadZeroStart);else if(R.seekType==="param"){var C=R.seekParamStart||"bstart",k=R.seekParamEnd||"bend";this._seekHandler=new z(C,k)}else{if(R.seekType!=="custom")throw new _.b("Invalid seekType in config: ".concat(R.seekType));if(typeof R.customSeekHandler!="function")throw new _.b("Custom seekType specified in config but invalid customSeekHandler!");this._seekHandler=new R.customSeekHandler}},U.prototype._selectLoader=function(){if(this._config.customLoader!=null)this._loaderClass=this._config.customLoader;else if(this._isWebSocketURL)this._loaderClass=T;else if(y.isSupported())this._loaderClass=y;else if(x.isSupported())this._loaderClass=x;else{if(!A.isSupported())throw new _.d("Your browser doesn't support xhr with arraybuffer responseType!");this._loaderClass=A}},U.prototype._createLoader=function(){this._loader=new this._loaderClass(this._seekHandler,this._config),this._loader.needStashBuffer===!1&&(this._enableStash=!1),this._loader.onContentLengthKnown=this._onContentLengthKnown.bind(this),this._loader.onURLRedirect=this._onURLRedirect.bind(this),this._loader.onDataArrival=this._onLoaderChunkArrival.bind(this),this._loader.onComplete=this._onLoaderComplete.bind(this),this._loader.onError=this._onLoaderError.bind(this)},U.prototype.open=function(R){this._currentRange={from:0,to:-1},R&&(this._currentRange.from=R),this._speedSampler.reset(),R||(this._fullRequestFlag=!0),this._loader.open(this._dataSource,Object.assign({},this._currentRange))},U.prototype.abort=function(){this._loader.abort(),this._paused&&(this._paused=!1,this._resumeFrom=0)},U.prototype.pause=function(){this.isWorking()&&(this._loader.abort(),this._stashUsed!==0?(this._resumeFrom=this._stashByteStart,this._currentRange.to=this._stashByteStart-1):this._resumeFrom=this._currentRange.to+1,this._stashUsed=0,this._stashByteStart=0,this._paused=!0)},U.prototype.resume=function(){if(this._paused){this._paused=!1;var R=this._resumeFrom;this._resumeFrom=0,this._internalSeek(R,!0)}},U.prototype.seek=function(R){this._paused=!1,this._stashUsed=0,this._stashByteStart=0,this._internalSeek(R,!0)},U.prototype._internalSeek=function(R,C){this._loader.isWorking()&&this._loader.abort(),this._flushStashBuffer(C),this._loader.destroy(),this._loader=null;var k={from:R,to:-1};this._currentRange={from:k.from,to:-1},this._speedSampler.reset(),this._stashSize=this._stashInitialSize,this._createLoader(),this._loader.open(this._dataSource,k),this._onSeeked&&this._onSeeked()},U.prototype.updateUrl=function(R){if(!R||typeof R!="string"||R.length===0)throw new _.b("Url must be a non-empty string!");this._dataSource.url=R},U.prototype._expandBuffer=function(R){for(var C=this._stashSize;C+1048576<R;)C*=2;if((C+=1048576)!==this._bufferSize){var k=new ArrayBuffer(C);if(this._stashUsed>0){var P=new Uint8Array(this._stashBuffer,0,this._stashUsed);new Uint8Array(k,0,C).set(P,0)}this._stashBuffer=k,this._bufferSize=C}},U.prototype._normalizeSpeed=function(R){var C=this._speedNormalizeList,k=C.length-1,P=0,Y=0,J=k;if(R<C[0])return C[0];for(;Y<=J;){if((P=Y+Math.floor((J-Y)/2))===k||R>=C[P]&&R<C[P+1])return C[P];C[P]<R?Y=P+1:J=P-1}},U.prototype._adjustStashSize=function(R){var C=0;(C=this._config.isLive?R/8:R<512?R:R>=512&&R<=1024?Math.floor(1.5*R):2*R)>8192&&(C=8192);var k=1024*C+1048576;this._bufferSize<k&&this._expandBuffer(k),this._stashSize=1024*C},U.prototype._dispatchChunks=function(R,C){return this._currentRange.to=C+R.byteLength-1,this._onDataArrival(R,C)},U.prototype._onURLRedirect=function(R){this._redirectedURL=R,this._onRedirect&&this._onRedirect(R)},U.prototype._onContentLengthKnown=function(R){R&&this._fullRequestFlag&&(this._totalLength=R,this._fullRequestFlag=!1)},U.prototype._onLoaderChunkArrival=function(R,C,k){if(!this._onDataArrival)throw new _.a("IOController: No existing consumer (onDataArrival) callback!");if(!this._paused){this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,this._onRecoveredEarlyEof&&this._onRecoveredEarlyEof()),this._speedSampler.addBytes(R.byteLength);var P=this._speedSampler.lastSecondKBps;if(P!==0){var Y=this._normalizeSpeed(P);this._speedNormalized!==Y&&(this._speedNormalized=Y,this._adjustStashSize(Y))}if(this._enableStash)if(this._stashUsed===0&&this._stashByteStart===0&&(this._stashByteStart=C),this._stashUsed+R.byteLength<=this._stashSize)(ne=new Uint8Array(this._stashBuffer,0,this._stashSize)).set(new Uint8Array(R),this._stashUsed),this._stashUsed+=R.byteLength;else if(ne=new Uint8Array(this._stashBuffer,0,this._bufferSize),this._stashUsed>0){var J=this._stashBuffer.slice(0,this._stashUsed);(ce=this._dispatchChunks(J,this._stashByteStart))<J.byteLength?ce>0&&(be=new Uint8Array(J,ce),ne.set(be,0),this._stashUsed=be.byteLength,this._stashByteStart+=ce):(this._stashUsed=0,this._stashByteStart+=ce),this._stashUsed+R.byteLength>this._bufferSize&&(this._expandBuffer(this._stashUsed+R.byteLength),ne=new Uint8Array(this._stashBuffer,0,this._bufferSize)),ne.set(new Uint8Array(R),this._stashUsed),this._stashUsed+=R.byteLength}else(ce=this._dispatchChunks(R,C))<R.byteLength&&((q=R.byteLength-ce)>this._bufferSize&&(this._expandBuffer(q),ne=new Uint8Array(this._stashBuffer,0,this._bufferSize)),ne.set(new Uint8Array(R,ce),0),this._stashUsed+=q,this._stashByteStart=C+ce);else if(this._stashUsed===0){var q;(ce=this._dispatchChunks(R,C))<R.byteLength&&((q=R.byteLength-ce)>this._bufferSize&&this._expandBuffer(q),(ne=new Uint8Array(this._stashBuffer,0,this._bufferSize)).set(new Uint8Array(R,ce),0),this._stashUsed+=q,this._stashByteStart=C+ce)}else{var ne,ce;if(this._stashUsed+R.byteLength>this._bufferSize&&this._expandBuffer(this._stashUsed+R.byteLength),(ne=new Uint8Array(this._stashBuffer,0,this._bufferSize)).set(new Uint8Array(R),this._stashUsed),this._stashUsed+=R.byteLength,(ce=this._dispatchChunks(this._stashBuffer.slice(0,this._stashUsed),this._stashByteStart))<this._stashUsed&&ce>0){var be=new Uint8Array(this._stashBuffer,ce);ne.set(be,0)}this._stashUsed-=ce,this._stashByteStart+=ce}}},U.prototype._flushStashBuffer=function(R){if(this._stashUsed>0){var C=this._stashBuffer.slice(0,this._stashUsed),k=this._dispatchChunks(C,this._stashByteStart),P=C.byteLength-k;if(k<C.byteLength){if(!R){if(k>0){var Y=new Uint8Array(this._stashBuffer,0,this._bufferSize),J=new Uint8Array(C,k);Y.set(J,0),this._stashUsed=J.byteLength,this._stashByteStart+=k}return 0}a.a.w(this.TAG,"".concat(P," bytes unconsumed data remain when flush buffer, dropped"))}return this._stashUsed=0,this._stashByteStart=0,P}return 0},U.prototype._onLoaderComplete=function(R,C){this._flushStashBuffer(!0),this._onComplete&&this._onComplete(this._extraData)},U.prototype._onLoaderError=function(R,C){switch(a.a.e(this.TAG,"Loader error, code = ".concat(C.code,", msg = ").concat(C.msg)),this._flushStashBuffer(!1),this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,R=d.b.UNRECOVERABLE_EARLY_EOF),R){case d.b.EARLY_EOF:if(!this._config.isLive&&this._totalLength){var k=this._currentRange.to+1;return void(k<this._totalLength&&(a.a.w(this.TAG,"Connection lost, trying reconnect..."),this._isEarlyEofReconnecting=!0,this._internalSeek(k,!1)))}R=d.b.UNRECOVERABLE_EARLY_EOF;break;case d.b.UNRECOVERABLE_EARLY_EOF:case d.b.CONNECTING_TIMEOUT:case d.b.HTTP_STATUS_CODE_INVALID:case d.b.EXCEPTION:}if(!this._onError)throw new _.d("IOException: "+C.msg);this._onError(R,C)},U}();r.a=H},function(n,r,i){var o=function(){function a(){}return a.install=function(){Object.setPrototypeOf=Object.setPrototypeOf||function(u,d){return u.__proto__=d,u},Object.assign=Object.assign||function(u){if(u==null)throw new TypeError("Cannot convert undefined or null to object");for(var d=Object(u),h=1;h<arguments.length;h++){var _=arguments[h];if(_!=null)for(var S in _)_.hasOwnProperty(S)&&(d[S]=_[S])}return d},String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(u,d){var h=d>0?0|d:0;return this.substring(h,h+u.length)===u}}),typeof self.Promise!="function"&&i(21).polyfill()},a}();o.install(),r.a=o},function(n,r,i){var o=i(9),a=i.n(o),u=i(0),d=i(5),h=i(7),_=i(3),S=function(){function y(v){this.TAG="MSEController",this._config=v,this._emitter=new a.a,this._config.isLive&&this._config.autoCleanupSourceBuffer==null&&(this._config.autoCleanupSourceBuffer=!0),this.e={onSourceOpen:this._onSourceOpen.bind(this),onSourceEnded:this._onSourceEnded.bind(this),onSourceClose:this._onSourceClose.bind(this),onStartStreaming:this._onStartStreaming.bind(this),onEndStreaming:this._onEndStreaming.bind(this),onQualityChange:this._onQualityChange.bind(this),onSourceBufferError:this._onSourceBufferError.bind(this),onSourceBufferUpdateEnd:this._onSourceBufferUpdateEnd.bind(this)},this._useManagedMediaSource="ManagedMediaSource"in self&&!("MediaSource"in self),this._mediaSource=null,this._mediaSourceObjectURL=null,this._mediaElementProxy=null,this._isBufferFull=!1,this._hasPendingEos=!1,this._requireSetMediaDuration=!1,this._pendingMediaDuration=0,this._pendingSourceBufferInit=[],this._mimeTypes={video:null,audio:null},this._sourceBuffers={video:null,audio:null},this._lastInitSegments={video:null,audio:null},this._pendingSegments={video:[],audio:[]},this._pendingRemoveRanges={video:[],audio:[]}}return y.prototype.destroy=function(){this._mediaSource&&this.shutdown(),this._mediaSourceObjectURL&&this.revokeObjectURL(),this.e=null,this._emitter.removeAllListeners(),this._emitter=null},y.prototype.on=function(v,x){this._emitter.addListener(v,x)},y.prototype.off=function(v,x){this._emitter.removeListener(v,x)},y.prototype.initialize=function(v){if(this._mediaSource)throw new _.a("MediaSource has been attached to an HTMLMediaElement!");this._useManagedMediaSource&&u.a.v(this.TAG,"Using ManagedMediaSource");var x=this._mediaSource=this._useManagedMediaSource?new self.ManagedMediaSource:new self.MediaSource;x.addEventListener("sourceopen",this.e.onSourceOpen),x.addEventListener("sourceended",this.e.onSourceEnded),x.addEventListener("sourceclose",this.e.onSourceClose),this._useManagedMediaSource&&(x.addEventListener("startstreaming",this.e.onStartStreaming),x.addEventListener("endstreaming",this.e.onEndStreaming),x.addEventListener("qualitychange",this.e.onQualityChange)),this._mediaElementProxy=v},y.prototype.shutdown=function(){if(this._mediaSource){var v=this._mediaSource;for(var x in this._sourceBuffers){var w=this._pendingSegments[x];w.splice(0,w.length),this._pendingSegments[x]=null,this._pendingRemoveRanges[x]=null,this._lastInitSegments[x]=null;var N=this._sourceBuffers[x];if(N){if(v.readyState!=="closed"){try{v.removeSourceBuffer(N)}catch(A){u.a.e(this.TAG,A.message)}N.removeEventListener("error",this.e.onSourceBufferError),N.removeEventListener("updateend",this.e.onSourceBufferUpdateEnd)}this._mimeTypes[x]=null,this._sourceBuffers[x]=null}}if(v.readyState==="open")try{v.endOfStream()}catch(A){u.a.e(this.TAG,A.message)}this._mediaElementProxy=null,v.removeEventListener("sourceopen",this.e.onSourceOpen),v.removeEventListener("sourceended",this.e.onSourceEnded),v.removeEventListener("sourceclose",this.e.onSourceClose),this._useManagedMediaSource&&(v.removeEventListener("startstreaming",this.e.onStartStreaming),v.removeEventListener("endstreaming",this.e.onEndStreaming),v.removeEventListener("qualitychange",this.e.onQualityChange)),this._pendingSourceBufferInit=[],this._isBufferFull=!1,this._mediaSource=null}},y.prototype.isManagedMediaSource=function(){return this._useManagedMediaSource},y.prototype.getObject=function(){if(!this._mediaSource)throw new _.a("MediaSource has not been initialized yet!");return this._mediaSource},y.prototype.getHandle=function(){if(!this._mediaSource)throw new _.a("MediaSource has not been initialized yet!");return this._mediaSource.handle},y.prototype.getObjectURL=function(){if(!this._mediaSource)throw new _.a("MediaSource has not been initialized yet!");return this._mediaSourceObjectURL==null&&(this._mediaSourceObjectURL=URL.createObjectURL(this._mediaSource)),this._mediaSourceObjectURL},y.prototype.revokeObjectURL=function(){this._mediaSourceObjectURL&&(URL.revokeObjectURL(this._mediaSourceObjectURL),this._mediaSourceObjectURL=null)},y.prototype.appendInitSegment=function(v,x){if(x===void 0&&(x=void 0),!this._mediaSource||this._mediaSource.readyState!=="open"||this._mediaSource.streaming===!1)return this._pendingSourceBufferInit.push(v),void this._pendingSegments[v.type].push(v);var w=v,N="".concat(w.container);w.codec&&w.codec.length>0&&(w.codec==="opus"&&d.a.safari&&(w.codec="Opus"),N+=";codecs=".concat(w.codec));var A=!1;if(u.a.v(this.TAG,"Received Initialization Segment, mimeType: "+N),this._lastInitSegments[w.type]=w,N!==this._mimeTypes[w.type]){if(this._mimeTypes[w.type])u.a.v(this.TAG,"Notice: ".concat(w.type," mimeType changed, origin: ").concat(this._mimeTypes[w.type],", target: ").concat(N));else{A=!0;try{var E=this._sourceBuffers[w.type]=this._mediaSource.addSourceBuffer(N);E.addEventListener("error",this.e.onSourceBufferError),E.addEventListener("updateend",this.e.onSourceBufferUpdateEnd)}catch(T){return u.a.e(this.TAG,T.message),void this._emitter.emit(h.a.ERROR,{code:T.code,msg:T.message})}}this._mimeTypes[w.type]=N}x||this._pendingSegments[w.type].push(w),A||this._sourceBuffers[w.type]&&!this._sourceBuffers[w.type].updating&&this._doAppendSegments(),d.a.safari&&w.container==="audio/mpeg"&&w.mediaDuration>0&&(this._requireSetMediaDuration=!0,this._pendingMediaDuration=w.mediaDuration/1e3,this._updateMediaSourceDuration())},y.prototype.appendMediaSegment=function(v){var x=v;this._pendingSegments[x.type].push(x),this._config.autoCleanupSourceBuffer&&this._needCleanupSourceBuffer()&&this._doCleanupSourceBuffer();var w=this._sourceBuffers[x.type];!w||w.updating||this._hasPendingRemoveRanges()||this._doAppendSegments()},y.prototype.flush=function(){for(var v in this._sourceBuffers)if(this._sourceBuffers[v]){var x=this._sourceBuffers[v];if(this._mediaSource.readyState==="open")try{x.abort()}catch(M){u.a.e(this.TAG,M.message)}var w=this._pendingSegments[v];if(w.splice(0,w.length),this._mediaSource.readyState!=="closed"){for(var N=0;N<x.buffered.length;N++){var A=x.buffered.start(N),E=x.buffered.end(N);this._pendingRemoveRanges[v].push({start:A,end:E})}if(x.updating||this._doRemoveRanges(),d.a.safari){var T=this._lastInitSegments[v];T&&(this._pendingSegments[v].push(T),x.updating||this._doAppendSegments())}}}},y.prototype.endOfStream=function(){var v=this._mediaSource,x=this._sourceBuffers;v&&v.readyState==="open"?x.video&&x.video.updating||x.audio&&x.audio.updating?this._hasPendingEos=!0:(this._hasPendingEos=!1,v.endOfStream()):v&&v.readyState==="closed"&&this._hasPendingSegments()&&(this._hasPendingEos=!0)},y.prototype._needCleanupSourceBuffer=function(){if(!this._config.autoCleanupSourceBuffer)return!1;var v=this._mediaElementProxy.getCurrentTime();for(var x in this._sourceBuffers){var w=this._sourceBuffers[x];if(w){var N=w.buffered;if(N.length>=1&&v-N.start(0)>=this._config.autoCleanupMaxBackwardDuration)return!0}}return!1},y.prototype._doCleanupSourceBuffer=function(){var v=this._mediaElementProxy.getCurrentTime();for(var x in this._sourceBuffers){var w=this._sourceBuffers[x];if(w){for(var N=w.buffered,A=!1,E=0;E<N.length;E++){var T=N.start(E),M=N.end(E);if(T<=v&&v<M+3){if(v-T>=this._config.autoCleanupMaxBackwardDuration){A=!0;var z=v-this._config.autoCleanupMinBackwardDuration;this._pendingRemoveRanges[x].push({start:T,end:z})}}else M<v&&(A=!0,this._pendingRemoveRanges[x].push({start:T,end:M}))}A&&!w.updating&&this._doRemoveRanges()}}},y.prototype._updateMediaSourceDuration=function(){var v=this._sourceBuffers;if(this._mediaElementProxy.getReadyState()!==0&&this._mediaSource.readyState==="open"&&!(v.video&&v.video.updating||v.audio&&v.audio.updating)){var x=this._mediaSource.duration,w=this._pendingMediaDuration;w>0&&(isNaN(x)||w>x)&&(u.a.v(this.TAG,"Update MediaSource duration from ".concat(x," to ").concat(w)),this._mediaSource.duration=w),this._requireSetMediaDuration=!1,this._pendingMediaDuration=0}},y.prototype._doRemoveRanges=function(){for(var v in this._pendingRemoveRanges)if(this._sourceBuffers[v]&&!this._sourceBuffers[v].updating)for(var x=this._sourceBuffers[v],w=this._pendingRemoveRanges[v];w.length&&!x.updating;){var N=w.shift();x.remove(N.start,N.end)}},y.prototype._doAppendSegments=function(){var v=this._pendingSegments;for(var x in v)if(this._sourceBuffers[x]&&!this._sourceBuffers[x].updating&&this._mediaSource.streaming!==!1&&v[x].length>0){var w=v[x].shift();if(typeof w.timestampOffset=="number"&&isFinite(w.timestampOffset)){var N=this._sourceBuffers[x].timestampOffset,A=w.timestampOffset/1e3;Math.abs(N-A)>.1&&(u.a.v(this.TAG,"Update MPEG audio timestampOffset from ".concat(N," to ").concat(A)),this._sourceBuffers[x].timestampOffset=A),delete w.timestampOffset}if(!w.data||w.data.byteLength===0)continue;try{this._sourceBuffers[x].appendBuffer(w.data),this._isBufferFull=!1}catch(E){this._pendingSegments[x].unshift(w),E.code===22?(this._isBufferFull||this._emitter.emit(h.a.BUFFER_FULL),this._isBufferFull=!0):(u.a.e(this.TAG,E.message),this._emitter.emit(h.a.ERROR,{code:E.code,msg:E.message}))}}},y.prototype._onSourceOpen=function(){if(u.a.v(this.TAG,"MediaSource onSourceOpen"),this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._pendingSourceBufferInit.length>0)for(var v=this._pendingSourceBufferInit;v.length;){var x=v.shift();this.appendInitSegment(x,!0)}this._hasPendingSegments()&&this._doAppendSegments(),this._emitter.emit(h.a.SOURCE_OPEN)},y.prototype._onStartStreaming=function(){u.a.v(this.TAG,"ManagedMediaSource onStartStreaming"),this._emitter.emit(h.a.START_STREAMING)},y.prototype._onEndStreaming=function(){u.a.v(this.TAG,"ManagedMediaSource onEndStreaming"),this._emitter.emit(h.a.END_STREAMING)},y.prototype._onQualityChange=function(){u.a.v(this.TAG,"ManagedMediaSource onQualityChange")},y.prototype._onSourceEnded=function(){u.a.v(this.TAG,"MediaSource onSourceEnded")},y.prototype._onSourceClose=function(){u.a.v(this.TAG,"MediaSource onSourceClose"),this._mediaSource&&this.e!=null&&(this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this._mediaSource.removeEventListener("sourceclose",this.e.onSourceClose),this._useManagedMediaSource&&(this._mediaSource.removeEventListener("startstreaming",this.e.onStartStreaming),this._mediaSource.removeEventListener("endstreaming",this.e.onEndStreaming),this._mediaSource.removeEventListener("qualitychange",this.e.onQualityChange)))},y.prototype._hasPendingSegments=function(){var v=this._pendingSegments;return v.video.length>0||v.audio.length>0},y.prototype._hasPendingRemoveRanges=function(){var v=this._pendingRemoveRanges;return v.video.length>0||v.audio.length>0},y.prototype._onSourceBufferUpdateEnd=function(){this._requireSetMediaDuration?this._updateMediaSourceDuration():this._hasPendingRemoveRanges()?this._doRemoveRanges():this._hasPendingSegments()?this._doAppendSegments():this._hasPendingEos&&this.endOfStream(),this._emitter.emit(h.a.UPDATE_END)},y.prototype._onSourceBufferError=function(v){u.a.e(this.TAG,"SourceBuffer Error: ".concat(v))},y}();r.a=S},function(n,r,i){var o=i(9),a=i.n(o),u=i(18),d=i.n(u),h=i(0),_=i(8),S=i(13),y=i(1),v=(i(19),i(12)),x=function(){function w(N,A){if(this.TAG="Transmuxer",this._emitter=new a.a,A.enableWorker&&typeof Worker<"u")try{this._worker=d()(19),this._workerDestroying=!1,this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",param:[N,A]}),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this)},_.a.registerListener(this.e.onLoggingConfigChanged),this._worker.postMessage({cmd:"logging_config",param:_.a.getConfig()})}catch{h.a.e(this.TAG,"Error while initialize transmuxing worker, fallback to inline transmuxing"),this._worker=null,this._controller=new S.a(N,A)}else this._controller=new S.a(N,A);if(this._controller){var E=this._controller;E.on(y.a.IO_ERROR,this._onIOError.bind(this)),E.on(y.a.DEMUX_ERROR,this._onDemuxError.bind(this)),E.on(y.a.INIT_SEGMENT,this._onInitSegment.bind(this)),E.on(y.a.MEDIA_SEGMENT,this._onMediaSegment.bind(this)),E.on(y.a.LOADING_COMPLETE,this._onLoadingComplete.bind(this)),E.on(y.a.RECOVERED_EARLY_EOF,this._onRecoveredEarlyEof.bind(this)),E.on(y.a.MEDIA_INFO,this._onMediaInfo.bind(this)),E.on(y.a.METADATA_ARRIVED,this._onMetaDataArrived.bind(this)),E.on(y.a.SCRIPTDATA_ARRIVED,this._onScriptDataArrived.bind(this)),E.on(y.a.TIMED_ID3_METADATA_ARRIVED,this._onTimedID3MetadataArrived.bind(this)),E.on(y.a.SYNCHRONOUS_KLV_METADATA_ARRIVED,this._onSynchronousKLVMetadataArrived.bind(this)),E.on(y.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED,this._onAsynchronousKLVMetadataArrived.bind(this)),E.on(y.a.SMPTE2038_METADATA_ARRIVED,this._onSMPTE2038MetadataArrived.bind(this)),E.on(y.a.SCTE35_METADATA_ARRIVED,this._onSCTE35MetadataArrived.bind(this)),E.on(y.a.PES_PRIVATE_DATA_DESCRIPTOR,this._onPESPrivateDataDescriptor.bind(this)),E.on(y.a.PES_PRIVATE_DATA_ARRIVED,this._onPESPrivateDataArrived.bind(this)),E.on(y.a.STATISTICS_INFO,this._onStatisticsInfo.bind(this)),E.on(y.a.RECOMMEND_SEEKPOINT,this._onRecommendSeekpoint.bind(this))}}return w.prototype.destroy=function(){this._worker?this._workerDestroying||(this._workerDestroying=!0,this._worker.postMessage({cmd:"destroy"}),_.a.removeListener(this.e.onLoggingConfigChanged),this.e=null):(this._controller.destroy(),this._controller=null),this._emitter.removeAllListeners(),this._emitter=null},w.prototype.on=function(N,A){this._emitter.addListener(N,A)},w.prototype.off=function(N,A){this._emitter.removeListener(N,A)},w.prototype.hasWorker=function(){return this._worker!=null},w.prototype.open=function(){this._worker?this._worker.postMessage({cmd:"start"}):this._controller.start()},w.prototype.close=function(){this._worker?this._worker.postMessage({cmd:"stop"}):this._controller.stop()},w.prototype.seek=function(N){this._worker?this._worker.postMessage({cmd:"seek",param:N}):this._controller.seek(N)},w.prototype.pause=function(){this._worker?this._worker.postMessage({cmd:"pause"}):this._controller.pause()},w.prototype.resume=function(){this._worker?this._worker.postMessage({cmd:"resume"}):this._controller.resume()},w.prototype._onInitSegment=function(N,A){var E=this;Promise.resolve().then(function(){E._emitter.emit(y.a.INIT_SEGMENT,N,A)})},w.prototype._onMediaSegment=function(N,A){var E=this;Promise.resolve().then(function(){E._emitter.emit(y.a.MEDIA_SEGMENT,N,A)})},w.prototype._onLoadingComplete=function(){var N=this;Promise.resolve().then(function(){N._emitter.emit(y.a.LOADING_COMPLETE)})},w.prototype._onRecoveredEarlyEof=function(){var N=this;Promise.resolve().then(function(){N._emitter.emit(y.a.RECOVERED_EARLY_EOF)})},w.prototype._onMediaInfo=function(N){var A=this;Promise.resolve().then(function(){A._emitter.emit(y.a.MEDIA_INFO,N)})},w.prototype._onMetaDataArrived=function(N){var A=this;Promise.resolve().then(function(){A._emitter.emit(y.a.METADATA_ARRIVED,N)})},w.prototype._onScriptDataArrived=function(N){var A=this;Promise.resolve().then(function(){A._emitter.emit(y.a.SCRIPTDATA_ARRIVED,N)})},w.prototype._onTimedID3MetadataArrived=function(N){var A=this;Promise.resolve().then(function(){A._emitter.emit(y.a.TIMED_ID3_METADATA_ARRIVED,N)})},w.prototype._onSynchronousKLVMetadataArrived=function(N){var A=this;Promise.resolve().then(function(){A._emitter.emit(y.a.SYNCHRONOUS_KLV_METADATA_ARRIVED,N)})},w.prototype._onAsynchronousKLVMetadataArrived=function(N){var A=this;Promise.resolve().then(function(){A._emitter.emit(y.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED,N)})},w.prototype._onSMPTE2038MetadataArrived=function(N){var A=this;Promise.resolve().then(function(){A._emitter.emit(y.a.SMPTE2038_METADATA_ARRIVED,N)})},w.prototype._onSCTE35MetadataArrived=function(N){var A=this;Promise.resolve().then(function(){A._emitter.emit(y.a.SCTE35_METADATA_ARRIVED,N)})},w.prototype._onPESPrivateDataDescriptor=function(N){var A=this;Promise.resolve().then(function(){A._emitter.emit(y.a.PES_PRIVATE_DATA_DESCRIPTOR,N)})},w.prototype._onPESPrivateDataArrived=function(N){var A=this;Promise.resolve().then(function(){A._emitter.emit(y.a.PES_PRIVATE_DATA_ARRIVED,N)})},w.prototype._onStatisticsInfo=function(N){var A=this;Promise.resolve().then(function(){A._emitter.emit(y.a.STATISTICS_INFO,N)})},w.prototype._onIOError=function(N,A){var E=this;Promise.resolve().then(function(){E._emitter.emit(y.a.IO_ERROR,N,A)})},w.prototype._onDemuxError=function(N,A){var E=this;Promise.resolve().then(function(){E._emitter.emit(y.a.DEMUX_ERROR,N,A)})},w.prototype._onRecommendSeekpoint=function(N){var A=this;Promise.resolve().then(function(){A._emitter.emit(y.a.RECOMMEND_SEEKPOINT,N)})},w.prototype._onLoggingConfigChanged=function(N){this._worker&&this._worker.postMessage({cmd:"logging_config",param:N})},w.prototype._onWorkerMessage=function(N){var A=N.data,E=A.data;if(A.msg==="destroyed"||this._workerDestroying)return this._workerDestroying=!1,this._worker.terminate(),void(this._worker=null);switch(A.msg){case y.a.INIT_SEGMENT:case y.a.MEDIA_SEGMENT:this._emitter.emit(A.msg,E.type,E.data);break;case y.a.LOADING_COMPLETE:case y.a.RECOVERED_EARLY_EOF:this._emitter.emit(A.msg);break;case y.a.MEDIA_INFO:Object.setPrototypeOf(E,v.a.prototype),this._emitter.emit(A.msg,E);break;case y.a.METADATA_ARRIVED:case y.a.SCRIPTDATA_ARRIVED:case y.a.TIMED_ID3_METADATA_ARRIVED:case y.a.SYNCHRONOUS_KLV_METADATA_ARRIVED:case y.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED:case y.a.SMPTE2038_METADATA_ARRIVED:case y.a.SCTE35_METADATA_ARRIVED:case y.a.PES_PRIVATE_DATA_DESCRIPTOR:case y.a.PES_PRIVATE_DATA_ARRIVED:case y.a.STATISTICS_INFO:this._emitter.emit(A.msg,E);break;case y.a.IO_ERROR:case y.a.DEMUX_ERROR:this._emitter.emit(A.msg,E.type,E.info);break;case y.a.RECOMMEND_SEEKPOINT:this._emitter.emit(A.msg,E);break;case"logcat_callback":h.a.emitter.emit("log",E.type,E.logcat)}},w}();r.a=x},function(n,r,i){function o(h){var _={};function S(v){if(_[v])return _[v].exports;var x=_[v]={i:v,l:!1,exports:{}};return h[v].call(x.exports,x,x.exports,S),x.l=!0,x.exports}S.m=h,S.c=_,S.i=function(v){return v},S.d=function(v,x,w){S.o(v,x)||Object.defineProperty(v,x,{configurable:!1,enumerable:!0,get:w})},S.r=function(v){Object.defineProperty(v,"__esModule",{value:!0})},S.n=function(v){var x=v&&v.__esModule?function(){return v.default}:function(){return v};return S.d(x,"a",x),x},S.o=function(v,x){return Object.prototype.hasOwnProperty.call(v,x)},S.p="/",S.oe=function(v){throw console.error(v),v};var y=S(S.s=ENTRY_MODULE);return y.default||y}function a(h){return(h+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function u(h,_,S){var y={};y[S]=[];var v=_.toString(),x=v.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!x)return y;for(var w,N=x[1],A=new RegExp("(\\\\n|\\W)"+a(N)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");w=A.exec(v);)w[3]!=="dll-reference"&&y[S].push(w[3]);for(A=new RegExp("\\("+a(N)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");w=A.exec(v);)h[w[2]]||(y[S].push(w[1]),h[w[2]]=i(w[1]).m),y[w[2]]=y[w[2]]||[],y[w[2]].push(w[4]);for(var E,T=Object.keys(y),M=0;M<T.length;M++)for(var z=0;z<y[T[M]].length;z++)E=y[T[M]][z],isNaN(1*E)||(y[T[M]][z]=1*y[T[M]][z]);return y}function d(h){return Object.keys(h).reduce(function(_,S){return _||h[S].length>0},!1)}n.exports=function(h,_){_=_||{};var S={main:i.m},y=_.all?{main:Object.keys(S.main)}:function(A,E){for(var T={main:[E]},M={main:[]},z={main:{}};d(T);)for(var H=Object.keys(T),U=0;U<H.length;U++){var R=H[U],C=T[R].pop();if(z[R]=z[R]||{},!z[R][C]&&A[R][C]){z[R][C]=!0,M[R]=M[R]||[],M[R].push(C);for(var k=u(A,A[R][C],R),P=Object.keys(k),Y=0;Y<P.length;Y++)T[P[Y]]=T[P[Y]]||[],T[P[Y]]=T[P[Y]].concat(k[P[Y]])}}return M}(S,h),v="";Object.keys(y).filter(function(A){return A!=="main"}).forEach(function(A){for(var E=0;y[A][E];)E++;y[A].push(E),S[A][E]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",v=v+"var "+A+" = ("+o.toString().replace("ENTRY_MODULE",JSON.stringify(E))+")({"+y[A].map(function(T){return JSON.stringify(T)+": "+S[A][T].toString()}).join(",")+`});
`}),v=v+"new (("+o.toString().replace("ENTRY_MODULE",JSON.stringify(h))+")({"+y.main.map(function(A){return JSON.stringify(A)+": "+S.main[A].toString()}).join(",")+"}))(self);";var x=new self.Blob([v],{type:"text/javascript"});if(_.bare)return x;var w=(self.URL||self.webkitURL||self.mozURL||self.msURL).createObjectURL(x),N=new self.Worker(w);return N.objectURL=w,N}},function(n,r,i){i.r(r),i(0);var o=i(8),a=i(15),u=i(13),d=i(1);r.default=function(h){var _=null,S=(function(q,ne){h.postMessage({msg:"logcat_callback",data:{type:q,logcat:ne}})}).bind(this);function y(q,ne){var ce={msg:d.a.INIT_SEGMENT,data:{type:q,data:ne}};h.postMessage(ce,[ne.data])}function v(q,ne){var ce={msg:d.a.MEDIA_SEGMENT,data:{type:q,data:ne}};h.postMessage(ce,[ne.data])}function x(){var q={msg:d.a.LOADING_COMPLETE};h.postMessage(q)}function w(){var q={msg:d.a.RECOVERED_EARLY_EOF};h.postMessage(q)}function N(q){var ne={msg:d.a.MEDIA_INFO,data:q};h.postMessage(ne)}function A(q){var ne={msg:d.a.METADATA_ARRIVED,data:q};h.postMessage(ne)}function E(q){var ne={msg:d.a.SCRIPTDATA_ARRIVED,data:q};h.postMessage(ne)}function T(q){var ne={msg:d.a.TIMED_ID3_METADATA_ARRIVED,data:q};h.postMessage(ne)}function M(q){var ne={msg:d.a.SYNCHRONOUS_KLV_METADATA_ARRIVED,data:q};h.postMessage(ne)}function z(q){var ne={msg:d.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED,data:q};h.postMessage(ne)}function H(q){var ne={msg:d.a.SMPTE2038_METADATA_ARRIVED,data:q};h.postMessage(ne)}function U(q){var ne={msg:d.a.SCTE35_METADATA_ARRIVED,data:q};h.postMessage(ne)}function R(q){var ne={msg:d.a.PES_PRIVATE_DATA_DESCRIPTOR,data:q};h.postMessage(ne)}function C(q){var ne={msg:d.a.PES_PRIVATE_DATA_ARRIVED,data:q};h.postMessage(ne)}function k(q){var ne={msg:d.a.STATISTICS_INFO,data:q};h.postMessage(ne)}function P(q,ne){h.postMessage({msg:d.a.IO_ERROR,data:{type:q,info:ne}})}function Y(q,ne){h.postMessage({msg:d.a.DEMUX_ERROR,data:{type:q,info:ne}})}function J(q){h.postMessage({msg:d.a.RECOMMEND_SEEKPOINT,data:q})}a.a.install(),h.addEventListener("message",function(q){switch(q.data.cmd){case"init":(_=new u.a(q.data.param[0],q.data.param[1])).on(d.a.IO_ERROR,P.bind(this)),_.on(d.a.DEMUX_ERROR,Y.bind(this)),_.on(d.a.INIT_SEGMENT,y.bind(this)),_.on(d.a.MEDIA_SEGMENT,v.bind(this)),_.on(d.a.LOADING_COMPLETE,x.bind(this)),_.on(d.a.RECOVERED_EARLY_EOF,w.bind(this)),_.on(d.a.MEDIA_INFO,N.bind(this)),_.on(d.a.METADATA_ARRIVED,A.bind(this)),_.on(d.a.SCRIPTDATA_ARRIVED,E.bind(this)),_.on(d.a.TIMED_ID3_METADATA_ARRIVED,T.bind(this)),_.on(d.a.SYNCHRONOUS_KLV_METADATA_ARRIVED,M.bind(this)),_.on(d.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED,z.bind(this)),_.on(d.a.SMPTE2038_METADATA_ARRIVED,H.bind(this)),_.on(d.a.SCTE35_METADATA_ARRIVED,U.bind(this)),_.on(d.a.PES_PRIVATE_DATA_DESCRIPTOR,R.bind(this)),_.on(d.a.PES_PRIVATE_DATA_ARRIVED,C.bind(this)),_.on(d.a.STATISTICS_INFO,k.bind(this)),_.on(d.a.RECOMMEND_SEEKPOINT,J.bind(this));break;case"destroy":_&&(_.destroy(),_=null),h.postMessage({msg:"destroyed"});break;case"start":_.start();break;case"stop":_.stop();break;case"seek":_.seek(q.data.param);break;case"pause":_.pause();break;case"resume":_.resume();break;case"logging_config":var ne=q.data.param;o.a.applyConfig(ne),ne.enableCallback===!0?o.a.addLogListener(S):o.a.removeLogListener(S)}})}},function(n,r,i){n.exports=i(25).default},function(n,r,i){(function(o,a){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */var u;u=function(){function d(ee){return typeof ee=="function"}var h=Array.isArray?Array.isArray:function(ee){return Object.prototype.toString.call(ee)==="[object Array]"},_=0,S=void 0,y=void 0,v=function(ee,oe){M[_]=ee,M[_+1]=oe,(_+=2)===2&&(y?y(z):k())},x=typeof window<"u"?window:void 0,w=x||{},N=w.MutationObserver||w.WebKitMutationObserver,A=typeof self>"u"&&o!==void 0&&{}.toString.call(o)==="[object process]",E=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function T(){var ee=setTimeout;return function(){return ee(z,1)}}var M=new Array(1e3);function z(){for(var ee=0;ee<_;ee+=2)(0,M[ee])(M[ee+1]),M[ee]=void 0,M[ee+1]=void 0;_=0}var H,U,R,C,k=void 0;function P(ee,oe){var _e=this,ye=new this.constructor(q);ye[J]===void 0&&pe(ye);var Se=_e._state;if(Se){var Le=arguments[Se-1];v(function(){return Q(Se,ye,Le,_e._result)})}else L(_e,ye,ee,oe);return ye}function Y(ee){if(ee&&typeof ee=="object"&&ee.constructor===this)return ee;var oe=new this(q);return ce(oe,ee),oe}A?k=function(){return o.nextTick(z)}:N?(U=0,R=new N(z),C=document.createTextNode(""),R.observe(C,{characterData:!0}),k=function(){C.data=U=++U%2}):E?((H=new MessageChannel).port1.onmessage=z,k=function(){return H.port2.postMessage(0)}):k=x===void 0?function(){try{var ee=Function("return this")().require("vertx");return(S=ee.runOnLoop||ee.runOnContext)!==void 0?function(){S(z)}:T()}catch{return T()}}():T();var J=Math.random().toString(36).substring(2);function q(){}function ne(ee,oe,_e){oe.constructor===ee.constructor&&_e===P&&oe.constructor.resolve===Y?function(ye,Se){Se._state===1?Z(ye,Se._result):Se._state===2?I(ye,Se._result):L(Se,void 0,function(Le){return ce(ye,Le)},function(Le){return I(ye,Le)})}(ee,oe):_e===void 0?Z(ee,oe):d(_e)?function(ye,Se,Le){v(function(ot){var ct=!1,cn=function(Ge,mi,bo,ms){try{Ge.call(mi,bo,ms)}catch(gs){return gs}}(Le,Se,function(Ge){ct||(ct=!0,Se!==Ge?ce(ot,Ge):Z(ot,Ge))},function(Ge){ct||(ct=!0,I(ot,Ge))},ot._label);!ct&&cn&&(ct=!0,I(ot,cn))},ye)}(ee,oe,_e):Z(ee,oe)}function ce(ee,oe){if(ee===oe)I(ee,new TypeError("You cannot resolve a promise with itself"));else if(Se=typeof(ye=oe),ye===null||Se!=="object"&&Se!=="function")Z(ee,oe);else{var _e=void 0;try{_e=oe.then}catch(Le){return void I(ee,Le)}ne(ee,oe,_e)}var ye,Se}function be(ee){ee._onerror&&ee._onerror(ee._result),$(ee)}function Z(ee,oe){ee._state===void 0&&(ee._result=oe,ee._state=1,ee._subscribers.length!==0&&v($,ee))}function I(ee,oe){ee._state===void 0&&(ee._state=2,ee._result=oe,v(be,ee))}function L(ee,oe,_e,ye){var Se=ee._subscribers,Le=Se.length;ee._onerror=null,Se[Le]=oe,Se[Le+1]=_e,Se[Le+2]=ye,Le===0&&ee._state&&v($,ee)}function $(ee){var oe=ee._subscribers,_e=ee._state;if(oe.length!==0){for(var ye=void 0,Se=void 0,Le=ee._result,ot=0;ot<oe.length;ot+=3)ye=oe[ot],Se=oe[ot+_e],ye?Q(_e,ye,Se,Le):Se(Le);ee._subscribers.length=0}}function Q(ee,oe,_e,ye){var Se=d(_e),Le=void 0,ot=void 0,ct=!0;if(Se){try{Le=_e(ye)}catch(cn){ct=!1,ot=cn}if(oe===Le)return void I(oe,new TypeError("A promises callback cannot return that same promise."))}else Le=ye;oe._state!==void 0||(Se&&ct?ce(oe,Le):ct===!1?I(oe,ot):ee===1?Z(oe,Le):ee===2&&I(oe,Le))}var de=0;function pe(ee){ee[J]=de++,ee._state=void 0,ee._result=void 0,ee._subscribers=[]}var Oe=function(){function ee(oe,_e){this._instanceConstructor=oe,this.promise=new oe(q),this.promise[J]||pe(this.promise),h(_e)?(this.length=_e.length,this._remaining=_e.length,this._result=new Array(this.length),this.length===0?Z(this.promise,this._result):(this.length=this.length||0,this._enumerate(_e),this._remaining===0&&Z(this.promise,this._result))):I(this.promise,new Error("Array Methods must be provided an Array"))}return ee.prototype._enumerate=function(oe){for(var _e=0;this._state===void 0&&_e<oe.length;_e++)this._eachEntry(oe[_e],_e)},ee.prototype._eachEntry=function(oe,_e){var ye=this._instanceConstructor,Se=ye.resolve;if(Se===Y){var Le=void 0,ot=void 0,ct=!1;try{Le=oe.then}catch(Ge){ct=!0,ot=Ge}if(Le===P&&oe._state!==void 0)this._settledAt(oe._state,_e,oe._result);else if(typeof Le!="function")this._remaining--,this._result[_e]=oe;else if(ye===Ae){var cn=new ye(q);ct?I(cn,ot):ne(cn,oe,Le),this._willSettleAt(cn,_e)}else this._willSettleAt(new ye(function(Ge){return Ge(oe)}),_e)}else this._willSettleAt(Se(oe),_e)},ee.prototype._settledAt=function(oe,_e,ye){var Se=this.promise;Se._state===void 0&&(this._remaining--,oe===2?I(Se,ye):this._result[_e]=ye),this._remaining===0&&Z(Se,this._result)},ee.prototype._willSettleAt=function(oe,_e){var ye=this;L(oe,void 0,function(Se){return ye._settledAt(1,_e,Se)},function(Se){return ye._settledAt(2,_e,Se)})},ee}(),Ae=function(){function ee(oe){this[J]=de++,this._result=this._state=void 0,this._subscribers=[],q!==oe&&(typeof oe!="function"&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof ee?function(_e,ye){try{ye(function(Se){ce(_e,Se)},function(Se){I(_e,Se)})}catch(Se){I(_e,Se)}}(this,oe):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return ee.prototype.catch=function(oe){return this.then(null,oe)},ee.prototype.finally=function(oe){var _e=this.constructor;return d(oe)?this.then(function(ye){return _e.resolve(oe()).then(function(){return ye})},function(ye){return _e.resolve(oe()).then(function(){throw ye})}):this.then(oe,oe)},ee}();return Ae.prototype.then=P,Ae.all=function(ee){return new Oe(this,ee).promise},Ae.race=function(ee){var oe=this;return h(ee)?new oe(function(_e,ye){for(var Se=ee.length,Le=0;Le<Se;Le++)oe.resolve(ee[Le]).then(_e,ye)}):new oe(function(_e,ye){return ye(new TypeError("You must pass an array to race."))})},Ae.resolve=Y,Ae.reject=function(ee){var oe=new this(q);return I(oe,ee),oe},Ae._setScheduler=function(ee){y=ee},Ae._setAsap=function(ee){v=ee},Ae._asap=v,Ae.polyfill=function(){var ee=void 0;if(a!==void 0)ee=a;else if(typeof self<"u")ee=self;else try{ee=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var oe=ee.Promise;if(oe){var _e=null;try{_e=Object.prototype.toString.call(oe.resolve())}catch{}if(_e==="[object Promise]"&&!oe.cast)return}ee.Promise=Ae},Ae.Promise=Ae,Ae},n.exports=u()}).call(this,i(22),i(23))},function(n,r){var i,o,a=n.exports={};function u(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}function h(E){if(i===setTimeout)return setTimeout(E,0);if((i===u||!i)&&setTimeout)return i=setTimeout,setTimeout(E,0);try{return i(E,0)}catch{try{return i.call(null,E,0)}catch{return i.call(this,E,0)}}}(function(){try{i=typeof setTimeout=="function"?setTimeout:u}catch{i=u}try{o=typeof clearTimeout=="function"?clearTimeout:d}catch{o=d}})();var _,S=[],y=!1,v=-1;function x(){y&&_&&(y=!1,_.length?S=_.concat(S):v=-1,S.length&&w())}function w(){if(!y){var E=h(x);y=!0;for(var T=S.length;T;){for(_=S,S=[];++v<T;)_&&_[v].run();v=-1,T=S.length}_=null,y=!1,function(M){if(o===clearTimeout)return clearTimeout(M);if((o===d||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(M);try{o(M)}catch{try{return o.call(null,M)}catch{return o.call(this,M)}}}(E)}}function N(E,T){this.fun=E,this.array=T}function A(){}a.nextTick=function(E){var T=new Array(arguments.length-1);if(arguments.length>1)for(var M=1;M<arguments.length;M++)T[M-1]=arguments[M];S.push(new N(E,T)),S.length!==1||y||h(w)},N.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=A,a.addListener=A,a.once=A,a.off=A,a.removeListener=A,a.removeAllListeners=A,a.emit=A,a.prependListener=A,a.prependOnceListener=A,a.listeners=function(E){return[]},a.binding=function(E){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(E){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(n,r){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch{typeof window=="object"&&(i=window)}n.exports=i},function(n,r,i){i.r(r);var o=i(0),a=i(8),u=i(3),d=i(7),h=i(16),_=i(17),S=i(1),y=i(4),v=i(10);r.default=function(x){var w="PlayerEngineWorker",N=(function(I,L){x.postMessage({msg:"logcat_callback",type:I,logcat:L})}).bind(void 0),A=null,E=null,T=null,M=null,z=!1,H=!1,U=0,R=0,C=!1;function k(){T&&(T.shutdown(),T.destroy(),T=null)}function P(){if(A==null||E==null)throw new u.a("Worker not initialized");if(M)throw new u.a("Transmuxer has been initialized");H||(!E.deferLoadAfterSourceOpen||z?((M=new _.a(A,E)).on(S.a.INIT_SEGMENT,function(I,L){T.appendInitSegment(L)}),M.on(S.a.MEDIA_SEGMENT,function(I,L){T.appendMediaSegment(L),x.postMessage({msg:"buffered_position_changed",buffered_position_milliseconds:L.info.endDts})}),M.on(S.a.LOADING_COMPLETE,function(){T.endOfStream(),x.postMessage({msg:"player_event",event:y.a.LOADING_COMPLETE})}),M.on(S.a.RECOVERED_EARLY_EOF,function(){x.postMessage({msg:"player_event",event:y.a.RECOVERED_EARLY_EOF})}),M.on(S.a.IO_ERROR,function(I,L){x.postMessage({msg:"player_event",event:y.a.ERROR,error_type:v.b.NETWORK_ERROR,error_detail:I,info:L})}),M.on(S.a.DEMUX_ERROR,function(I,L){x.postMessage({msg:"player_event",event:y.a.ERROR,error_type:v.b.MEDIA_ERROR,error_detail:I,info:L})}),M.on(S.a.MEDIA_INFO,function(I){be(S.a.MEDIA_INFO,I)}),M.on(S.a.STATISTICS_INFO,function(I){be(S.a.STATISTICS_INFO,I)}),M.on(S.a.RECOMMEND_SEEKPOINT,function(I){(function(L){x.postMessage({msg:"transmuxing_event",event:S.a.RECOMMEND_SEEKPOINT,milliseconds:L})})(I)}),M.on(S.a.METADATA_ARRIVED,function(I){Z(y.a.METADATA_ARRIVED,I)}),M.on(S.a.SCRIPTDATA_ARRIVED,function(I){Z(y.a.SCRIPTDATA_ARRIVED,I)}),M.on(S.a.TIMED_ID3_METADATA_ARRIVED,function(I){Z(y.a.TIMED_ID3_METADATA_ARRIVED,I)}),M.on(S.a.SYNCHRONOUS_KLV_METADATA_ARRIVED,function(I){Z(y.a.SYNCHRONOUS_KLV_METADATA_ARRIVED,I)}),M.on(S.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED,function(I){Z(y.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED,I)}),M.on(S.a.SMPTE2038_METADATA_ARRIVED,function(I){Z(y.a.SMPTE2038_METADATA_ARRIVED,I)}),M.on(S.a.SCTE35_METADATA_ARRIVED,function(I){Z(y.a.SCTE35_METADATA_ARRIVED,I)}),M.on(S.a.PES_PRIVATE_DATA_DESCRIPTOR,function(I){Z(y.a.PES_PRIVATE_DATA_DESCRIPTOR,I)}),M.on(S.a.PES_PRIVATE_DATA_ARRIVED,function(I){Z(y.a.PES_PRIVATE_DATA_ARRIVED,I)}),M.open()):H=!0)}function Y(){T&&T.flush(),M&&(M.close(),M.destroy(),M=null)}function J(){z=!0,H&&(H=!1,P())}function q(){x.postMessage({msg:"mse_event",event:d.a.UPDATE_END})}function ne(){o.a.v(w,"MSE SourceBuffer is full, report to main thread"),x.postMessage({msg:"mse_event",event:d.a.BUFFER_FULL})}function ce(I){x.postMessage({msg:"player_event",event:y.a.ERROR,error_type:v.b.MEDIA_ERROR,error_detail:v.b.MEDIA_MSE_ERROR,info:I})}function be(I,L){x.postMessage({msg:"transmuxing_event",event:I,info:L})}function Z(I,L){x.postMessage({msg:"player_event",event:I,extraData:L})}x.addEventListener("message",function(I){if(!C){var L=I.data;switch(L.cmd){case"logging_config":var $=L;a.a.applyConfig($.logging_config),$.logging_config.enableCallback===!0?a.a.addLogListener(N):a.a.removeLogListener(N);break;case"init":A=($=L).media_data_source,E=$.config;break;case"destroy":(function(){M&&Y(),T&&k(),C=!0,x.postMessage({msg:"destroyed"})})();break;case"initialize_mse":(function(){o.a.v(w,"Initializing MediaSource in DedicatedWorker"),(T=new h.a(E)).on(d.a.SOURCE_OPEN,J.bind(this)),T.on(d.a.UPDATE_END,q.bind(this)),T.on(d.a.BUFFER_FULL,ne.bind(this)),T.on(d.a.ERROR,ce.bind(this)),T.initialize({getCurrentTime:function(){return U},getReadyState:function(){return R}});var Q=T.getHandle();x.postMessage({msg:"mse_init",handle:Q},[Q])})();break;case"shutdown_mse":k();break;case"load":P();break;case"unload":Y();break;case"unbuffered_seek":$=L,T.flush(),M.seek($.milliseconds);break;case"timeupdate":U=($=L).current_time;break;case"readystatechange":R=($=L).ready_state;break;case"pause_transmuxer":M.pause();break;case"resume_transmuxer":M.resume()}}})}},function(n,r,i){i.r(r);var o=i(15),a=i(14),u={enableWorker:!1,enableWorkerForMSE:!1,enableStashBuffer:!0,stashInitialSize:void 0,isLive:!1,liveBufferLatencyChasing:!1,liveBufferLatencyChasingOnPaused:!1,liveBufferLatencyMaxLatency:1.5,liveBufferLatencyMinRemain:.5,liveSync:!1,liveSyncMaxLatency:1.2,liveSyncTargetLatency:.8,liveSyncPlaybackRate:1.2,lazyLoad:!0,lazyLoadMaxDuration:180,lazyLoadRecoverDuration:30,deferLoadAfterSourceOpen:!0,autoCleanupMaxBackwardDuration:180,autoCleanupMinBackwardDuration:120,statisticsInfoReportInterval:600,fixAudioTimestampGap:!0,accurateSeek:!1,seekType:"range",seekParamStart:"bstart",seekParamEnd:"bend",rangeLoadZeroStart:!1,customSeekHandler:void 0,reuseRedirectedURL:!1,headers:void 0,customLoader:void 0};function d(){return Object.assign({},u)}var h=function(){function I(){}return I.supportMSEH264Playback=function(){var L=self.MediaSource&&self.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),$=self.ManagedMediaSource&&self.ManagedMediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"');return L||$},I.supportMSEH265Playback=function(){var L=self.MediaSource&&self.MediaSource.isTypeSupported('video/mp4; codecs="hvc1.1.6.L93.B0"'),$=self.ManagedMediaSource&&self.ManagedMediaSource.isTypeSupported('video/mp4; codecs="hvc1.1.6.L93.B0"');return L||$},I.supportNetworkStreamIO=function(){var L=new a.a({},d()),$=L.loaderType;return L.destroy(),$=="fetch-stream-loader"||$=="xhr-moz-chunked-loader"},I.getNetworkLoaderTypeName=function(){var L=new a.a({},d()),$=L.loaderType;return L.destroy(),$},I.supportNativeMediaPlayback=function(L){I.videoElement==null&&(I.videoElement=window.document.createElement("video"));var $=I.videoElement.canPlayType(L);return $==="probably"||$=="maybe"},I.getFeatureList=function(){var L={msePlayback:!1,mseLivePlayback:!1,mseH265Playback:!1,networkStreamIO:!1,networkLoaderName:"",nativeMP4H264Playback:!1,nativeMP4H265Playback:!1,nativeWebmVP8Playback:!1,nativeWebmVP9Playback:!1};return L.msePlayback=I.supportMSEH264Playback(),L.networkStreamIO=I.supportNetworkStreamIO(),L.networkLoaderName=I.getNetworkLoaderTypeName(),L.mseLivePlayback=L.msePlayback&&L.networkStreamIO,L.mseH265Playback=I.supportMSEH265Playback(),L.nativeMP4H264Playback=I.supportNativeMediaPlayback('video/mp4; codecs="avc1.42001E, mp4a.40.2"'),L.nativeMP4H265Playback=I.supportNativeMediaPlayback('video/mp4; codecs="hvc1.1.6.L93.B0"'),L.nativeWebmVP8Playback=I.supportNativeMediaPlayback('video/webm; codecs="vp8.0, vorbis"'),L.nativeWebmVP9Playback=I.supportNativeMediaPlayback('video/webm; codecs="vp9"'),L},I}(),_=i(2),S=i(0),y=i(9),v=i.n(y),x=i(16),w=i(4),N=i(17),A=i(7),E=i(10),T=i(3),M=i(1),z=i(5),H=i(11),U=function(){function I(L,$,Q){this.TAG="SeekingHandler",this._config=null,this._media_element=null,this._always_seek_keyframe=!1,this._on_unbuffered_seek=null,this._request_set_current_time=!1,this._seek_request_record_clocktime=null,this._idr_sample_list=new H.a,this.e=null,this._config=L,this._media_element=$,this._on_unbuffered_seek=Q,this.e={onMediaSeeking:this._onMediaSeeking.bind(this)};var de=z.a.chrome&&(z.a.version.major<50||z.a.version.major===50&&z.a.version.build<2661);this._always_seek_keyframe=!!(de||z.a.msedge||z.a.msie),this._always_seek_keyframe&&(this._config.accurateSeek=!1),this._media_element.addEventListener("seeking",this.e.onMediaSeeking)}return I.prototype.destroy=function(){this._idr_sample_list.clear(),this._idr_sample_list=null,this._media_element.removeEventListener("seeking",this.e.onMediaSeeking),this._media_element=null,this._on_unbuffered_seek=null},I.prototype.seek=function(L){var $=this._isPositionBuffered(L),Q=!1;if(L<1&&this._media_element.buffered.length>0){var de=this._media_element.buffered.start(0);(de<1&&L<de||z.a.safari)&&(Q=!0,L=z.a.safari?.1:de)}if(Q)this.directSeek(L);else if($)if(this._always_seek_keyframe){var pe=this._getNearestKeyframe(Math.floor(1e3*L));pe!=null&&(L=pe.dts/1e3),this.directSeek(L)}else this.directSeek(L);else this._idr_sample_list.clear(),this._on_unbuffered_seek(Math.floor(1e3*L)),this._config.accurateSeek&&this.directSeek(L)},I.prototype.directSeek=function(L){this._request_set_current_time=!0,this._media_element.currentTime=L},I.prototype.appendSyncPoints=function(L){this._idr_sample_list.appendArray(L)},I.prototype._onMediaSeeking=function(L){if(this._request_set_current_time)this._request_set_current_time=!1;else{var $=this._media_element.currentTime,Q=this._media_element.buffered;if($<1&&Q.length>0){var de=Q.start(0);if(de<1&&$<de||z.a.safari){var pe=z.a.safari?.1:de;return void this.directSeek(pe)}}if(this._isPositionBuffered($)){if(this._always_seek_keyframe){var Oe=this._getNearestKeyframe(Math.floor(1e3*$));Oe!=null&&($=Oe.dts/1e3,this.directSeek($))}}else this._seek_request_record_clocktime=I._getClockTime(),window.setTimeout(this._pollAndApplyUnbufferedSeek.bind(this),50)}},I.prototype._pollAndApplyUnbufferedSeek=function(){if(this._seek_request_record_clocktime!=null)if(this._seek_request_record_clocktime<=I._getClockTime()-100){var L=this._media_element.currentTime;this._seek_request_record_clocktime=null,this._isPositionBuffered(L)||(this._idr_sample_list.clear(),this._on_unbuffered_seek(Math.floor(1e3*L)),this._config.accurateSeek&&this.directSeek(L))}else window.setTimeout(this._pollAndApplyUnbufferedSeek.bind(this),50)},I.prototype._isPositionBuffered=function(L){for(var $=this._media_element.buffered,Q=0;Q<$.length;Q++){var de=$.start(Q),pe=$.end(Q);if(L>=de&&L<pe)return!0}return!1},I.prototype._getNearestKeyframe=function(L){return this._idr_sample_list.getLastSyncPointBeforeDts(L)},I._getClockTime=function(){return self.performance&&self.performance.now?self.performance.now():Date.now()},I}(),R=function(){function I(L,$,Q,de){this.TAG="LoadingController",this._config=null,this._media_element=null,this._on_pause_transmuxer=null,this._on_resume_transmuxer=null,this._paused=!1,this.e=null,this._config=L,this._media_element=$,this._on_pause_transmuxer=Q,this._on_resume_transmuxer=de,this.e={onMediaTimeUpdate:this._onMediaTimeUpdate.bind(this)}}return I.prototype.destroy=function(){this._media_element.removeEventListener("timeupdate",this.e.onMediaTimeUpdate),this.e=null,this._media_element=null,this._config=null,this._on_pause_transmuxer=null,this._on_resume_transmuxer=null},I.prototype.notifyBufferedPositionChanged=function(L){!this._config.isLive&&this._config.lazyLoad&&(L==null?this._suspendTransmuxerIfNeeded():this._suspendTransmuxerIfBufferedPositionExceeded(L))},I.prototype._onMediaTimeUpdate=function(L){this._paused&&this._resumeTransmuxerIfNeeded()},I.prototype._suspendTransmuxerIfNeeded=function(){for(var L=this._media_element.buffered,$=this._media_element.currentTime,Q=0,de=0;de<L.length;de++){var pe=L.start(de),Oe=L.end(de);if(pe<=$&&$<Oe){Q=Oe;break}}Q>0&&this._suspendTransmuxerIfBufferedPositionExceeded(Q)},I.prototype._suspendTransmuxerIfBufferedPositionExceeded=function(L){L>=this._media_element.currentTime+this._config.lazyLoadMaxDuration&&!this._paused&&(S.a.v(this.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),this.suspendTransmuxer(),this._media_element.addEventListener("timeupdate",this.e.onMediaTimeUpdate))},I.prototype.suspendTransmuxer=function(){this._paused=!0,this._on_pause_transmuxer()},I.prototype._resumeTransmuxerIfNeeded=function(){for(var L=this._media_element.buffered,$=this._media_element.currentTime,Q=this._config.lazyLoadRecoverDuration,de=!1,pe=0;pe<L.length;pe++){var Oe=L.start(pe),Ae=L.end(pe);if($>=Oe&&$<Ae){$>=Ae-Q&&(de=!0);break}}de&&(S.a.v(this.TAG,"Continue loading from paused position"),this.resumeTransmuxer(),this._media_element.removeEventListener("timeupdate",this.e.onMediaTimeUpdate))},I.prototype.resumeTransmuxer=function(){this._paused=!1,this._on_resume_transmuxer()},I}(),C=function(){function I(L,$){this.TAG="StartupStallJumper",this._media_element=null,this._on_direct_seek=null,this._canplay_received=!1,this.e=null,this._media_element=L,this._on_direct_seek=$,this.e={onMediaCanPlay:this._onMediaCanPlay.bind(this),onMediaStalled:this._onMediaStalled.bind(this),onMediaProgress:this._onMediaProgress.bind(this)},this._media_element.addEventListener("canplay",this.e.onMediaCanPlay),this._media_element.addEventListener("stalled",this.e.onMediaStalled),this._media_element.addEventListener("progress",this.e.onMediaProgress)}return I.prototype.destroy=function(){this._media_element.removeEventListener("canplay",this.e.onMediaCanPlay),this._media_element.removeEventListener("stalled",this.e.onMediaStalled),this._media_element.removeEventListener("progress",this.e.onMediaProgress),this._media_element=null,this._on_direct_seek=null},I.prototype._onMediaCanPlay=function(L){this._canplay_received=!0,this._media_element.removeEventListener("canplay",this.e.onMediaCanPlay)},I.prototype._onMediaStalled=function(L){this._detectAndFixStuckPlayback(!0)},I.prototype._onMediaProgress=function(L){this._detectAndFixStuckPlayback()},I.prototype._detectAndFixStuckPlayback=function(L){var $=this._media_element,Q=$.buffered;L||!this._canplay_received||$.readyState<2?Q.length>0&&$.currentTime<Q.start(0)&&(S.a.w(this.TAG,"Playback seems stuck at ".concat($.currentTime,", seek to ").concat(Q.start(0))),this._on_direct_seek(Q.start(0)),this._media_element.removeEventListener("progress",this.e.onMediaProgress)):this._media_element.removeEventListener("progress",this.e.onMediaProgress)},I}(),k=function(){function I(L,$,Q){this._config=null,this._media_element=null,this._on_direct_seek=null,this._config=L,this._media_element=$,this._on_direct_seek=Q}return I.prototype.destroy=function(){this._on_direct_seek=null,this._media_element=null,this._config=null},I.prototype.notifyBufferedRangeUpdate=function(){this._chaseLiveLatency()},I.prototype._chaseLiveLatency=function(){var L=this._media_element.buffered,$=this._media_element.currentTime,Q=this._media_element.paused;if(this._config.isLive&&this._config.liveBufferLatencyChasing&&L.length!=0&&(this._config.liveBufferLatencyChasingOnPaused||!Q)){var de=L.end(L.length-1);if(de>this._config.liveBufferLatencyMaxLatency&&de-$>this._config.liveBufferLatencyMaxLatency){var pe=de-this._config.liveBufferLatencyMinRemain;this._on_direct_seek(pe)}}},I}(),P=function(){function I(L,$){this._config=null,this._media_element=null,this.e=null,this._config=L,this._media_element=$,this.e={onMediaTimeUpdate:this._onMediaTimeUpdate.bind(this)},this._media_element.addEventListener("timeupdate",this.e.onMediaTimeUpdate)}return I.prototype.destroy=function(){this._media_element.removeEventListener("timeupdate",this.e.onMediaTimeUpdate),this._media_element=null,this._config=null},I.prototype._onMediaTimeUpdate=function(L){if(this._config.isLive&&this._config.liveSync){var $=this._getCurrentLatency();if($>this._config.liveSyncMaxLatency){var Q=Math.min(2,Math.max(1,this._config.liveSyncPlaybackRate));this._media_element.playbackRate=Q}else $>this._config.liveSyncTargetLatency||this._media_element.playbackRate!==1&&this._media_element.playbackRate!==0&&(this._media_element.playbackRate=1)}},I.prototype._getCurrentLatency=function(){if(!this._media_element)return 0;var L=this._media_element.buffered,$=this._media_element.currentTime;return L.length==0?0:L.end(L.length-1)-$},I}(),Y=function(){function I(L,$){this.TAG="PlayerEngineMainThread",this._emitter=new y,this._media_element=null,this._mse_controller=null,this._transmuxer=null,this._pending_seek_time=null,this._seeking_handler=null,this._loading_controller=null,this._startup_stall_jumper=null,this._live_latency_chaser=null,this._live_latency_synchronizer=null,this._mse_source_opened=!1,this._has_pending_load=!1,this._loaded_metadata_received=!1,this._media_info=null,this._statistics_info=null,this.e=null,this._media_data_source=L,this._config=d(),typeof $=="object"&&Object.assign(this._config,$),L.isLive===!0&&(this._config.isLive=!0),this.e={onMediaLoadedMetadata:this._onMediaLoadedMetadata.bind(this)}}return I.prototype.destroy=function(){this._emitter.emit(w.a.DESTROYING),this._transmuxer&&this.unload(),this._media_element&&this.detachMediaElement(),this.e=null,this._media_data_source=null,this._emitter.removeAllListeners(),this._emitter=null},I.prototype.on=function(L,$){var Q=this;this._emitter.addListener(L,$),L===w.a.MEDIA_INFO&&this._media_info?Promise.resolve().then(function(){return Q._emitter.emit(w.a.MEDIA_INFO,Q.mediaInfo)}):L==w.a.STATISTICS_INFO&&this._statistics_info&&Promise.resolve().then(function(){return Q._emitter.emit(w.a.STATISTICS_INFO,Q.statisticsInfo)})},I.prototype.off=function(L,$){this._emitter.removeListener(L,$)},I.prototype.attachMediaElement=function(L){var $=this;this._media_element=L,L.src="",L.removeAttribute("src"),L.srcObject=null,L.load(),L.addEventListener("loadedmetadata",this.e.onMediaLoadedMetadata),this._mse_controller=new x.a(this._config),this._mse_controller.on(A.a.UPDATE_END,this._onMSEUpdateEnd.bind(this)),this._mse_controller.on(A.a.BUFFER_FULL,this._onMSEBufferFull.bind(this)),this._mse_controller.on(A.a.SOURCE_OPEN,this._onMSESourceOpen.bind(this)),this._mse_controller.on(A.a.ERROR,this._onMSEError.bind(this)),this._mse_controller.on(A.a.START_STREAMING,this._onMSEStartStreaming.bind(this)),this._mse_controller.on(A.a.END_STREAMING,this._onMSEEndStreaming.bind(this)),this._mse_controller.initialize({getCurrentTime:function(){return $._media_element.currentTime},getReadyState:function(){return $._media_element.readyState}}),this._mse_controller.isManagedMediaSource()?(L.disableRemotePlayback=!0,L.srcObject=this._mse_controller.getObject()):L.src=this._mse_controller.getObjectURL()},I.prototype.detachMediaElement=function(){this._media_element&&(this._mse_controller.shutdown(),this._media_element.removeEventListener("loadedmetadata",this.e.onMediaLoadedMetadata),this._media_element.src="",this._media_element.removeAttribute("src"),this._media_element.srcObject=null,this._media_element.load(),this._media_element=null,this._mse_controller.revokeObjectURL()),this._mse_controller&&(this._mse_controller.destroy(),this._mse_controller=null)},I.prototype.load=function(){var L=this;if(!this._media_element)throw new T.a("HTMLMediaElement must be attached before load()!");if(this._transmuxer)throw new T.a("load() has been called, please call unload() first!");this._has_pending_load||(!this._config.deferLoadAfterSourceOpen||this._mse_source_opened?(this._transmuxer=new N.a(this._media_data_source,this._config),this._transmuxer.on(M.a.INIT_SEGMENT,function($,Q){L._mse_controller.appendInitSegment(Q)}),this._transmuxer.on(M.a.MEDIA_SEGMENT,function($,Q){L._mse_controller.appendMediaSegment(Q),!L._config.isLive&&$==="video"&&Q.data&&Q.data.byteLength>0&&"info"in Q&&L._seeking_handler.appendSyncPoints(Q.info.syncPoints),L._loading_controller.notifyBufferedPositionChanged(Q.info.endDts/1e3)}),this._transmuxer.on(M.a.LOADING_COMPLETE,function(){L._mse_controller.endOfStream(),L._emitter.emit(w.a.LOADING_COMPLETE)}),this._transmuxer.on(M.a.RECOVERED_EARLY_EOF,function(){L._emitter.emit(w.a.RECOVERED_EARLY_EOF)}),this._transmuxer.on(M.a.IO_ERROR,function($,Q){L._emitter.emit(w.a.ERROR,E.b.NETWORK_ERROR,$,Q)}),this._transmuxer.on(M.a.DEMUX_ERROR,function($,Q){L._emitter.emit(w.a.ERROR,E.b.MEDIA_ERROR,$,Q)}),this._transmuxer.on(M.a.MEDIA_INFO,function($){L._media_info=$,L._emitter.emit(w.a.MEDIA_INFO,Object.assign({},$))}),this._transmuxer.on(M.a.STATISTICS_INFO,function($){L._statistics_info=L._fillStatisticsInfo($),L._emitter.emit(w.a.STATISTICS_INFO,Object.assign({},$))}),this._transmuxer.on(M.a.RECOMMEND_SEEKPOINT,function($){L._media_element&&!L._config.accurateSeek&&L._seeking_handler.directSeek($/1e3)}),this._transmuxer.on(M.a.METADATA_ARRIVED,function($){L._emitter.emit(w.a.METADATA_ARRIVED,$)}),this._transmuxer.on(M.a.SCRIPTDATA_ARRIVED,function($){L._emitter.emit(w.a.SCRIPTDATA_ARRIVED,$)}),this._transmuxer.on(M.a.TIMED_ID3_METADATA_ARRIVED,function($){L._emitter.emit(w.a.TIMED_ID3_METADATA_ARRIVED,$)}),this._transmuxer.on(M.a.SYNCHRONOUS_KLV_METADATA_ARRIVED,function($){L._emitter.emit(w.a.SYNCHRONOUS_KLV_METADATA_ARRIVED,$)}),this._transmuxer.on(M.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED,function($){L._emitter.emit(w.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED,$)}),this._transmuxer.on(M.a.SMPTE2038_METADATA_ARRIVED,function($){L._emitter.emit(w.a.SMPTE2038_METADATA_ARRIVED,$)}),this._transmuxer.on(M.a.SCTE35_METADATA_ARRIVED,function($){L._emitter.emit(w.a.SCTE35_METADATA_ARRIVED,$)}),this._transmuxer.on(M.a.PES_PRIVATE_DATA_DESCRIPTOR,function($){L._emitter.emit(w.a.PES_PRIVATE_DATA_DESCRIPTOR,$)}),this._transmuxer.on(M.a.PES_PRIVATE_DATA_ARRIVED,function($){L._emitter.emit(w.a.PES_PRIVATE_DATA_ARRIVED,$)}),this._seeking_handler=new U(this._config,this._media_element,this._onRequiredUnbufferedSeek.bind(this)),this._loading_controller=new R(this._config,this._media_element,this._onRequestPauseTransmuxer.bind(this),this._onRequestResumeTransmuxer.bind(this)),this._startup_stall_jumper=new C(this._media_element,this._onRequestDirectSeek.bind(this)),this._config.isLive&&this._config.liveBufferLatencyChasing&&(this._live_latency_chaser=new k(this._config,this._media_element,this._onRequestDirectSeek.bind(this))),this._config.isLive&&this._config.liveSync&&(this._live_latency_synchronizer=new P(this._config,this._media_element)),this._media_element.readyState>0&&this._seeking_handler.directSeek(0),this._transmuxer.open()):this._has_pending_load=!0)},I.prototype.unload=function(){var L,$,Q,de,pe,Oe,Ae,ee,oe;(L=this._media_element)===null||L===void 0||L.pause(),($=this._live_latency_synchronizer)===null||$===void 0||$.destroy(),this._live_latency_synchronizer=null,(Q=this._live_latency_chaser)===null||Q===void 0||Q.destroy(),this._live_latency_chaser=null,(de=this._startup_stall_jumper)===null||de===void 0||de.destroy(),this._startup_stall_jumper=null,(pe=this._loading_controller)===null||pe===void 0||pe.destroy(),this._loading_controller=null,(Oe=this._seeking_handler)===null||Oe===void 0||Oe.destroy(),this._seeking_handler=null,(Ae=this._mse_controller)===null||Ae===void 0||Ae.flush(),(ee=this._transmuxer)===null||ee===void 0||ee.close(),(oe=this._transmuxer)===null||oe===void 0||oe.destroy(),this._transmuxer=null},I.prototype.play=function(){return this._media_element.play()},I.prototype.pause=function(){this._media_element.pause()},I.prototype.seek=function(L){this._media_element&&this._seeking_handler?this._seeking_handler.seek(L):this._pending_seek_time=L},Object.defineProperty(I.prototype,"mediaInfo",{get:function(){return Object.assign({},this._media_info)},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"statisticsInfo",{get:function(){return Object.assign({},this._statistics_info)},enumerable:!1,configurable:!0}),I.prototype._onMSESourceOpen=function(){this._mse_source_opened=!0,this._has_pending_load&&(this._has_pending_load=!1,this.load())},I.prototype._onMSEUpdateEnd=function(){this._config.isLive&&this._config.liveBufferLatencyChasing&&this._live_latency_chaser&&this._live_latency_chaser.notifyBufferedRangeUpdate(),this._loading_controller.notifyBufferedPositionChanged()},I.prototype._onMSEBufferFull=function(){S.a.v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),this._loading_controller.suspendTransmuxer()},I.prototype._onMSEError=function(L){this._emitter.emit(w.a.ERROR,E.b.MEDIA_ERROR,E.a.MEDIA_MSE_ERROR,L)},I.prototype._onMSEStartStreaming=function(){this._loaded_metadata_received&&(this._config.isLive||(S.a.v(this.TAG,"Resume transmuxing task due to ManagedMediaSource onStartStreaming"),this._loading_controller.resumeTransmuxer()))},I.prototype._onMSEEndStreaming=function(){this._config.isLive||(S.a.v(this.TAG,"Suspend transmuxing task due to ManagedMediaSource onEndStreaming"),this._loading_controller.suspendTransmuxer())},I.prototype._onMediaLoadedMetadata=function(L){this._loaded_metadata_received=!0,this._pending_seek_time!=null&&(this._seeking_handler.seek(this._pending_seek_time),this._pending_seek_time=null)},I.prototype._onRequestDirectSeek=function(L){this._seeking_handler.directSeek(L)},I.prototype._onRequiredUnbufferedSeek=function(L){this._mse_controller.flush(),this._transmuxer.seek(L)},I.prototype._onRequestPauseTransmuxer=function(){this._transmuxer.pause()},I.prototype._onRequestResumeTransmuxer=function(){this._transmuxer.resume()},I.prototype._fillStatisticsInfo=function(L){if(L.playerType="MSEPlayer",!(this._media_element instanceof HTMLVideoElement))return L;var $=!0,Q=0,de=0;if(this._media_element.getVideoPlaybackQuality){var pe=this._media_element.getVideoPlaybackQuality();Q=pe.totalVideoFrames,de=pe.droppedVideoFrames}else this._media_element.webkitDecodedFrameCount!=null?(Q=this._media_element.webkitDecodedFrameCount,de=this._media_element.webkitDroppedFrameCount):$=!1;return $&&(L.decodedFrames=Q,L.droppedFrames=de),L},I}(),J=i(18),q=i(8),ne=function(){function I(L,$){this.TAG="PlayerEngineDedicatedThread",this._emitter=new y,this._media_element=null,this._worker_destroying=!1,this._seeking_handler=null,this._loading_controller=null,this._startup_stall_jumper=null,this._live_latency_chaser=null,this._live_latency_synchronizer=null,this._pending_seek_time=null,this._media_info=null,this._statistics_info=null,this.e=null,this._media_data_source=L,this._config=d(),typeof $=="object"&&Object.assign(this._config,$),L.isLive===!0&&(this._config.isLive=!0),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this),onMediaLoadedMetadata:this._onMediaLoadedMetadata.bind(this),onMediaTimeUpdate:this._onMediaTimeUpdate.bind(this),onMediaReadyStateChanged:this._onMediaReadyStateChange.bind(this)},q.a.registerListener(this.e.onLoggingConfigChanged),this._worker=J(24,{all:!0}),this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",media_data_source:this._media_data_source,config:this._config}),this._worker.postMessage({cmd:"logging_config",logging_config:q.a.getConfig()})}return I.isSupported=function(){return!!self.Worker&&(!(!self.MediaSource||!("canConstructInDedicatedWorker"in self.MediaSource)||self.MediaSource.canConstructInDedicatedWorker!==!0)||!(!self.ManagedMediaSource||!("canConstructInDedicatedWorker"in self.ManagedMediaSource)||self.ManagedMediaSource.canConstructInDedicatedWorker!==!0))},I.prototype.destroy=function(){this._emitter.emit(w.a.DESTROYING),this.unload(),this.detachMediaElement(),this._worker_destroying=!0,this._worker.postMessage({cmd:"destroy"}),q.a.removeListener(this.e.onLoggingConfigChanged),this.e=null,this._media_data_source=null,this._emitter.removeAllListeners(),this._emitter=null},I.prototype.on=function(L,$){var Q=this;this._emitter.addListener(L,$),L===w.a.MEDIA_INFO&&this._media_info?Promise.resolve().then(function(){return Q._emitter.emit(w.a.MEDIA_INFO,Q.mediaInfo)}):L==w.a.STATISTICS_INFO&&this._statistics_info&&Promise.resolve().then(function(){return Q._emitter.emit(w.a.STATISTICS_INFO,Q.statisticsInfo)})},I.prototype.off=function(L,$){this._emitter.removeListener(L,$)},I.prototype.attachMediaElement=function(L){this._media_element=L,this._media_element.src="",this._media_element.removeAttribute("src"),this._media_element.srcObject=null,this._media_element.load(),this._media_element.addEventListener("loadedmetadata",this.e.onMediaLoadedMetadata),this._media_element.addEventListener("timeupdate",this.e.onMediaTimeUpdate),this._media_element.addEventListener("readystatechange",this.e.onMediaReadyStateChanged),this._worker.postMessage({cmd:"initialize_mse"})},I.prototype.detachMediaElement=function(){this._worker.postMessage({cmd:"shutdown_mse"}),this._media_element&&(this._media_element.removeEventListener("loadedmetadata",this.e.onMediaLoadedMetadata),this._media_element.removeEventListener("timeupdate",this.e.onMediaTimeUpdate),this._media_element.removeEventListener("readystatechange",this.e.onMediaReadyStateChanged),this._media_element.src="",this._media_element.removeAttribute("src"),this._media_element.srcObject=null,this._media_element.load(),this._media_element=null)},I.prototype.load=function(){this._worker.postMessage({cmd:"load"}),this._seeking_handler=new U(this._config,this._media_element,this._onRequiredUnbufferedSeek.bind(this)),this._loading_controller=new R(this._config,this._media_element,this._onRequestPauseTransmuxer.bind(this),this._onRequestResumeTransmuxer.bind(this)),this._startup_stall_jumper=new C(this._media_element,this._onRequestDirectSeek.bind(this)),this._config.isLive&&this._config.liveBufferLatencyChasing&&(this._live_latency_chaser=new k(this._config,this._media_element,this._onRequestDirectSeek.bind(this))),this._config.isLive&&this._config.liveSync&&(this._live_latency_synchronizer=new P(this._config,this._media_element)),this._media_element.readyState>0&&this._seeking_handler.directSeek(0)},I.prototype.unload=function(){var L,$,Q,de,pe,Oe;(L=this._media_element)===null||L===void 0||L.pause(),this._worker.postMessage({cmd:"unload"}),($=this._live_latency_synchronizer)===null||$===void 0||$.destroy(),this._live_latency_synchronizer=null,(Q=this._live_latency_chaser)===null||Q===void 0||Q.destroy(),this._live_latency_chaser=null,(de=this._startup_stall_jumper)===null||de===void 0||de.destroy(),this._startup_stall_jumper=null,(pe=this._loading_controller)===null||pe===void 0||pe.destroy(),this._loading_controller=null,(Oe=this._seeking_handler)===null||Oe===void 0||Oe.destroy(),this._seeking_handler=null},I.prototype.play=function(){return this._media_element.play()},I.prototype.pause=function(){this._media_element.pause()},I.prototype.seek=function(L){this._media_element&&this._seeking_handler?this._seeking_handler.seek(L):this._pending_seek_time=L},Object.defineProperty(I.prototype,"mediaInfo",{get:function(){return Object.assign({},this._media_info)},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"statisticsInfo",{get:function(){return Object.assign({},this._statistics_info)},enumerable:!1,configurable:!0}),I.prototype._onLoggingConfigChanged=function(L){var $;($=this._worker)===null||$===void 0||$.postMessage({cmd:"logging_config",logging_config:L})},I.prototype._onMSEUpdateEnd=function(){this._config.isLive&&this._config.liveBufferLatencyChasing&&this._live_latency_chaser&&this._live_latency_chaser.notifyBufferedRangeUpdate(),this._loading_controller.notifyBufferedPositionChanged()},I.prototype._onMSEBufferFull=function(){S.a.v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),this._loading_controller.suspendTransmuxer()},I.prototype._onMediaLoadedMetadata=function(L){this._pending_seek_time!=null&&(this._seeking_handler.seek(this._pending_seek_time),this._pending_seek_time=null)},I.prototype._onRequestDirectSeek=function(L){this._seeking_handler.directSeek(L)},I.prototype._onRequiredUnbufferedSeek=function(L){this._worker.postMessage({cmd:"unbuffered_seek",milliseconds:L})},I.prototype._onRequestPauseTransmuxer=function(){this._worker.postMessage({cmd:"pause_transmuxer"})},I.prototype._onRequestResumeTransmuxer=function(){this._worker.postMessage({cmd:"resume_transmuxer"})},I.prototype._onMediaTimeUpdate=function(L){this._worker.postMessage({cmd:"timeupdate",current_time:L.target.currentTime})},I.prototype._onMediaReadyStateChange=function(L){this._worker.postMessage({cmd:"readystatechange",ready_state:L.target.readyState})},I.prototype._onWorkerMessage=function(L){var $,Q=L.data,de=Q.msg;if(de=="destroyed"||this._worker_destroying)return this._worker_destroying=!1,($=this._worker)===null||$===void 0||$.terminate(),void(this._worker=null);switch(de){case"mse_init":var pe=Q;"ManagedMediaSource"in self&&!("MediaSource"in self)&&(this._media_element.disableRemotePlayback=!0),this._media_element.srcObject=pe.handle;break;case"mse_event":(pe=Q).event==A.a.UPDATE_END?this._onMSEUpdateEnd():pe.event==A.a.BUFFER_FULL&&this._onMSEBufferFull();break;case"transmuxing_event":if((pe=Q).event==M.a.MEDIA_INFO){var Oe=Q;this._media_info=Oe.info,this._emitter.emit(w.a.MEDIA_INFO,Object.assign({},Oe.info))}else if(pe.event==M.a.STATISTICS_INFO){var Ae=Q;this._statistics_info=this._fillStatisticsInfo(Ae.info),this._emitter.emit(w.a.STATISTICS_INFO,Object.assign({},Ae.info))}else if(pe.event==M.a.RECOMMEND_SEEKPOINT){var ee=Q;this._media_element&&!this._config.accurateSeek&&this._seeking_handler.directSeek(ee.milliseconds/1e3)}break;case"player_event":if((pe=Q).event==w.a.ERROR){var oe=Q;this._emitter.emit(w.a.ERROR,oe.error_type,oe.error_detail,oe.info)}else if("extraData"in pe){var _e=Q;this._emitter.emit(_e.event,_e.extraData)}break;case"logcat_callback":pe=Q,S.a.emitter.emit("log",pe.type,pe.logcat);break;case"buffered_position_changed":pe=Q,this._loading_controller.notifyBufferedPositionChanged(pe.buffered_position_milliseconds/1e3)}},I.prototype._fillStatisticsInfo=function(L){if(L.playerType="MSEPlayer",!(this._media_element instanceof HTMLVideoElement))return L;var $=!0,Q=0,de=0;if(this._media_element.getVideoPlaybackQuality){var pe=this._media_element.getVideoPlaybackQuality();Q=pe.totalVideoFrames,de=pe.droppedVideoFrames}else this._media_element.webkitDecodedFrameCount!=null?(Q=this._media_element.webkitDecodedFrameCount,de=this._media_element.webkitDroppedFrameCount):$=!1;return $&&(L.decodedFrames=Q,L.droppedFrames=de),L},I}(),ce=function(){function I(L,$){this.TAG="MSEPlayer",this._type="MSEPlayer",this._media_element=null,this._player_engine=null;var Q=L.type.toLowerCase();if(Q!=="mse"&&Q!=="mpegts"&&Q!=="m2ts"&&Q!=="flv")throw new T.b("MSEPlayer requires an mpegts/m2ts/flv MediaDataSource input!");if($&&$.enableWorkerForMSE&&ne.isSupported())try{this._player_engine=new ne(L,$)}catch{S.a.e(this.TAG,"Error while initializing PlayerEngineDedicatedThread, fallback to PlayerEngineMainThread"),this._player_engine=new Y(L,$)}else this._player_engine=new Y(L,$)}return I.prototype.destroy=function(){this._player_engine.destroy(),this._player_engine=null,this._media_element=null},I.prototype.on=function(L,$){this._player_engine.on(L,$)},I.prototype.off=function(L,$){this._player_engine.off(L,$)},I.prototype.attachMediaElement=function(L){this._media_element=L,this._player_engine.attachMediaElement(L)},I.prototype.detachMediaElement=function(){this._media_element=null,this._player_engine.detachMediaElement()},I.prototype.load=function(){this._player_engine.load()},I.prototype.unload=function(){this._player_engine.unload()},I.prototype.play=function(){return this._player_engine.play()},I.prototype.pause=function(){this._player_engine.pause()},Object.defineProperty(I.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"buffered",{get:function(){return this._media_element.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"duration",{get:function(){return this._media_element.duration},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"volume",{get:function(){return this._media_element.volume},set:function(L){this._media_element.volume=L},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"muted",{get:function(){return this._media_element.muted},set:function(L){this._media_element.muted=L},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"currentTime",{get:function(){return this._media_element?this._media_element.currentTime:0},set:function(L){this._player_engine.seek(L)},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"mediaInfo",{get:function(){return this._player_engine.mediaInfo},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"statisticsInfo",{get:function(){return this._player_engine.statisticsInfo},enumerable:!1,configurable:!0}),I}(),be=function(){function I(L,$){this.TAG="NativePlayer",this._type="NativePlayer",this._emitter=new v.a,this._config=d(),typeof $=="object"&&Object.assign(this._config,$);var Q=L.type.toLowerCase();if(Q==="mse"||Q==="mpegts"||Q==="m2ts"||Q==="flv")throw new T.b("NativePlayer does't support mse/mpegts/m2ts/flv MediaDataSource input!");if(L.hasOwnProperty("segments"))throw new T.b("NativePlayer(".concat(L.type,") doesn't support multipart playback!"));this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this)},this._pendingSeekTime=null,this._statisticsReporter=null,this._mediaDataSource=L,this._mediaElement=null}return I.prototype.destroy=function(){this._emitter.emit(w.a.DESTROYING),this._mediaElement&&(this.unload(),this.detachMediaElement()),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},I.prototype.on=function(L,$){var Q=this;L===w.a.MEDIA_INFO?this._mediaElement!=null&&this._mediaElement.readyState!==0&&Promise.resolve().then(function(){Q._emitter.emit(w.a.MEDIA_INFO,Q.mediaInfo)}):L===w.a.STATISTICS_INFO&&this._mediaElement!=null&&this._mediaElement.readyState!==0&&Promise.resolve().then(function(){Q._emitter.emit(w.a.STATISTICS_INFO,Q.statisticsInfo)}),this._emitter.addListener(L,$)},I.prototype.off=function(L,$){this._emitter.removeListener(L,$)},I.prototype.attachMediaElement=function(L){if(this._mediaElement=L,L.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._pendingSeekTime!=null)try{L.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch{}},I.prototype.detachMediaElement=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement=null),this._statisticsReporter!=null&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},I.prototype.load=function(){if(!this._mediaElement)throw new T.a("HTMLMediaElement must be attached before load()!");this._mediaElement.src=this._mediaDataSource.url,this._mediaElement.readyState>0&&(this._mediaElement.currentTime=0),this._mediaElement.preload="auto",this._mediaElement.load(),this._statisticsReporter=window.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval)},I.prototype.unload=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src")),this._statisticsReporter!=null&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},I.prototype.play=function(){return this._mediaElement.play()},I.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(I.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(L){this._mediaElement.volume=L},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(L){this._mediaElement.muted=L},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(L){this._mediaElement?this._mediaElement.currentTime=L:this._pendingSeekTime=L},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"mediaInfo",{get:function(){var L={mimeType:(this._mediaElement instanceof HTMLAudioElement?"audio/":"video/")+this._mediaDataSource.type};return this._mediaElement&&(L.duration=Math.floor(1e3*this._mediaElement.duration),this._mediaElement instanceof HTMLVideoElement&&(L.width=this._mediaElement.videoWidth,L.height=this._mediaElement.videoHeight)),L},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"statisticsInfo",{get:function(){var L={playerType:this._type,url:this._mediaDataSource.url};if(!(this._mediaElement instanceof HTMLVideoElement))return L;var $=!0,Q=0,de=0;if(this._mediaElement.getVideoPlaybackQuality){var pe=this._mediaElement.getVideoPlaybackQuality();Q=pe.totalVideoFrames,de=pe.droppedVideoFrames}else this._mediaElement.webkitDecodedFrameCount!=null?(Q=this._mediaElement.webkitDecodedFrameCount,de=this._mediaElement.webkitDroppedFrameCount):$=!1;return $&&(L.decodedFrames=Q,L.droppedFrames=de),L},enumerable:!1,configurable:!0}),I.prototype._onvLoadedMetadata=function(L){this._pendingSeekTime!=null&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null),this._emitter.emit(w.a.MEDIA_INFO,this.mediaInfo)},I.prototype._reportStatisticsInfo=function(){this._emitter.emit(w.a.STATISTICS_INFO,this.statisticsInfo)},I}();o.a.install();var Z={createPlayer:function(I,L){var $=I;if($==null||typeof $!="object")throw new T.b("MediaDataSource must be an javascript object!");if(!$.hasOwnProperty("type"))throw new T.b("MediaDataSource must has type field to indicate video file type!");switch($.type){case"mse":case"mpegts":case"m2ts":case"flv":return new ce($,L);default:return new be($,L)}},isSupported:function(){return h.supportMSEH264Playback()},getFeatureList:function(){return h.getFeatureList()}};Z.BaseLoader=_.a,Z.LoaderStatus=_.c,Z.LoaderErrors=_.b,Z.Events=w.a,Z.ErrorTypes=E.b,Z.ErrorDetails=E.a,Z.MSEPlayer=ce,Z.NativePlayer=be,Z.LoggingControl=q.a,Object.defineProperty(Z,"version",{enumerable:!0,get:function(){return"1.8.0"}}),r.default=Z}])})})(Em);var Mw=Em.exports;const qo=eg(Mw),Pw="placeos-prod.avit.it.ucla.edu";function Dw({systemId:e,recordingModuleIp:t,channelId:n}){const r=W.useRef(null),i=W.useRef(null),[o,a]=W.useState(null),[u,d]=W.useState("Loading..."),[h,_]=W.useState(0),[S,y]=W.useState(!1);return W.useEffect(()=>{if(!n||!t){a("No channel selected");return}const v=r.current;if(!v)return;if(i.current&&(i.current.destroy(),i.current=null),qo.getFeatureList().mseLivePlayback){const N={type:"mpegts",isLive:!0,url:`https://${Pw}/epiphan/https/${t}/streams/${n}/ts`},A={enableWorker:!0,enableStashBuffer:!0,stashInitialSize:384,liveBufferLatencyChasing:!0,liveBufferLatencyMaxLatency:3,liveBufferLatencyMinRemain:1,liveBufferLatencyChaseOnStalled:!1,liveSyncDurationCount:5,fixAudioTimestampGap:!0,autoCleanupSourceBuffer:!0,autoCleanupMaxBackwardDuration:10,autoCleanupMinBackwardDuration:5},E=qo.createPlayer(N,A);i.current=E,E.attachMediaElement(v),E.on(qo.Events.LOADING_COMPLETE,()=>{d("Stream ready"),a(null)}),E.on(qo.Events.ERROR,M=>{console.error("Stream error:",M),a(`Error: ${M.type||"Unknown error"}`)}),v.addEventListener("waiting",()=>{console.log("Buffering..."),y(!0),d("Buffering...")}),v.addEventListener("playing",()=>{console.log("Playing"),y(!1),d("Playing")}),v.addEventListener("canplay",()=>{y(!1)}),E.load();const T=E.play();T!==void 0&&T.catch(()=>{console.log("Autoplay prevented, click play button"),d("Click play to start")})}else a("Browser does not support MSE");const x=setInterval(()=>{if(r.current&&r.current.buffered.length>0){const w=r.current.buffered.end(0),N=r.current.currentTime,A=w-N;_(Number(A.toFixed(2))),A>5&&!r.current.paused&&(console.log("Buffer very large, jumping to reduce latency"),r.current.currentTime=w-2)}},2e3);return()=>{clearInterval(x),i.current&&(i.current.destroy(),i.current=null)}},[n,t,e]),n?F.jsx("div",{className:"card bg-base-200",children:F.jsxs("div",{className:"card-body",children:[F.jsxs("div",{className:"flex items-center justify-between mb-4",children:[F.jsx("h2",{className:"card-title",children:"Live Stream"}),F.jsxs("div",{className:"text-sm space-x-4 flex items-center",children:[F.jsxs("span",{children:["Status: ",u]}),F.jsxs("span",{children:["Buffer: ",h,"s"]}),S&&F.jsx("span",{className:"loading loading-spinner loading-sm"})]})]}),o&&F.jsx("div",{className:"alert alert-error mb-4",children:F.jsx("span",{children:o})}),F.jsx("div",{className:"aspect-video bg-base-300 rounded-lg overflow-hidden",children:F.jsx("video",{ref:r,controls:!0,muted:!0,className:"w-full h-full",playsInline:!0})})]})}):F.jsx("div",{className:"card bg-base-200",children:F.jsx("div",{className:"card-body",children:F.jsx("div",{className:"alert alert-info",children:F.jsx("span",{children:"Select a camera to view live stream"})})})})}function Ow({systemId:e,cameraModule:t,moduleInfo:n}){const[r,i]=W.useState(!1),[o,a]=W.useState({x:0,y:0}),[u,d]=W.useState(!1),[h,_]=W.useState(0),[S,y]=W.useState(!1),v=W.useRef(null),x=W.useRef(null),w=W.useRef(null),N=W.useRef(null),A=W.useRef(""),E=W.useRef(""),T=async(q,ne=[])=>{try{await kw(e,t,q,ne)}catch(ce){console.error("PTZ command failed:",ce)}},M=(q,ne)=>{const ce=Math.atan2(ne,q)*(180/Math.PI);return Math.sqrt(q*q+ne*ne)<10?null:ce>=-45&&ce<45?"right":ce>=45&&ce<135?"down":ce>=-135&&ce<-45?"up":"left"},z=q=>{d(!0),R(q.clientX,q.clientY)},H=q=>{u&&R(q.clientX,q.clientY)},U=()=>{d(!1),a({x:0,y:0}),T("stop"),w.current&&(clearInterval(w.current),w.current=null),A.current=""},R=(q,ne)=>{if(!v.current)return;const ce=v.current.getBoundingClientRect(),be=ce.left+ce.width/2,Z=ce.top+ce.height/2;let I=q-be,L=ne-Z;const $=80,Q=Math.sqrt(I*I+L*L);Q>$&&(I=I/Q*$,L=L/Q*$),a({x:I,y:L});const de=M(I,L);if(de){const pe=de==="up"||de==="down"?"tilt":"pan",Oe=de==="up"?"up":de==="down"?"down":de==="left"?"left":"right",Ae=`${pe}-${Oe}`;A.current!==Ae&&(A.current=Ae,T(pe,[Oe]),w.current&&clearInterval(w.current),w.current=setInterval(()=>{T(pe,[Oe])},100))}};W.useEffect(()=>(u&&(window.addEventListener("mousemove",H),window.addEventListener("mouseup",U)),()=>{window.removeEventListener("mousemove",H),window.removeEventListener("mouseup",U)}),[u]),W.useEffect(()=>()=>{w.current&&clearInterval(w.current),N.current&&clearInterval(N.current)},[]);const C=q=>{y(!0),Y(q.clientY)},k=q=>{S&&Y(q.clientY)},P=()=>{y(!1),_(0),T("stop"),N.current&&(clearInterval(N.current),N.current=null),E.current=""},Y=q=>{if(!x.current)return;const ne=x.current.getBoundingClientRect(),ce=ne.top+ne.height/2;let be=q-ce;const Z=80;if(Math.abs(be)>Z&&(be=be/Math.abs(be)*Z),_(be),Math.abs(be)>10){const I=be<0?"in":"out",L=`zoom-${I}`;E.current!==L&&(E.current=L,T("zoom",[I]),N.current&&clearInterval(N.current),N.current=setInterval(()=>{T("zoom",[I])},100))}};W.useEffect(()=>(S&&(window.addEventListener("mousemove",k),window.addEventListener("mouseup",P)),()=>{window.removeEventListener("mousemove",k),window.removeEventListener("mouseup",P)}),[S]);const J=()=>{i(!0),T("home").finally(()=>i(!1))};return F.jsxs("div",{className:"space-y-6",children:[F.jsxs("div",{children:[F.jsx("h3",{className:"text-lg font-semibold mb-3",children:"PTZ Controls"}),F.jsxs("div",{className:"bg-base-300 rounded-lg p-4 space-y-2",children:[F.jsxs("div",{className:"flex items-center justify-between",children:[F.jsx("span",{className:"text-xs font-semibold text-base-content/60 uppercase tracking-wider",children:"Target Module"}),F.jsx("div",{className:"badge badge-primary badge-sm",children:"Active"})]}),n?F.jsxs("div",{className:"space-y-2",children:[F.jsx("div",{children:F.jsx("div",{className:"text-sm font-medium",children:n.custom_name||n.name||"Unnamed Module"})}),F.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[F.jsxs("div",{className:"col-span-2",children:[F.jsx("span",{className:"text-base-content/60",children:"Module ID:"}),F.jsx("div",{className:"font-mono text-base-content/90 truncate mt-0.5",children:n.id})]}),n.ip&&F.jsxs("div",{children:[F.jsx("span",{className:"text-base-content/60",children:"IP Address:"}),F.jsxs("div",{className:"font-mono text-base-content/90 mt-0.5",children:[n.ip,n.port&&`:${n.port}`]})]}),n.edge_id&&F.jsxs("div",{children:[F.jsx("span",{className:"text-base-content/60",children:"Edge:"}),F.jsx("div",{className:"font-mono text-base-content/90 truncate mt-0.5",children:n.edge_id})]}),n.driver_id&&F.jsxs("div",{className:"col-span-2",children:[F.jsx("span",{className:"text-base-content/60",children:"Driver:"}),F.jsx("div",{className:"font-mono text-base-content/90 truncate mt-0.5",children:n.driver_id})]}),n.role!==void 0&&F.jsxs("div",{children:[F.jsx("span",{className:"text-base-content/60",children:"Role:"}),F.jsx("div",{className:"text-base-content/90 mt-0.5",children:n.role})]}),(n.connected!==void 0||n.running!==void 0)&&F.jsxs("div",{className:"col-span-2",children:[F.jsx("span",{className:"text-base-content/60",children:"Status:"}),F.jsxs("div",{className:"flex gap-1 mt-0.5",children:[n.connected!==void 0&&F.jsx("span",{className:`badge badge-xs ${n.connected?"badge-success":"badge-error"}`,children:n.connected?"Connected":"Disconnected"}),n.running!==void 0&&F.jsx("span",{className:`badge badge-xs ${n.running?"badge-info":"badge-warning"}`,children:n.running?"Running":"Stopped"}),n.has_runtime_error&&F.jsx("span",{className:"badge badge-xs badge-error",children:"Error"})]})]})]})]}):F.jsxs("div",{className:"text-xs",children:[F.jsx("div",{className:"text-base-content/60",children:"Module ID:"}),F.jsx("div",{className:"font-mono text-base-content/90 truncate mt-1",children:t})]})]})]}),F.jsxs("div",{className:"flex items-center justify-center gap-8",children:[F.jsxs("div",{className:"flex flex-col items-center gap-3",children:[F.jsx("div",{className:"text-xs font-semibold text-base-content/60 uppercase tracking-wider mb-2",children:"Zoom"}),F.jsxs("svg",{ref:x,width:"100",height:"280",viewBox:"0 0 100 280",className:"drop-shadow-lg",onMouseDown:C,style:{cursor:S?"grabbing":"grab"},children:[F.jsx("rect",{x:"30",y:"20",width:"40",height:"240",rx:"20",fill:"rgba(30,30,40,0.8)",stroke:"rgba(255,255,255,0.15)",strokeWidth:"2"}),F.jsx("path",{d:"M 50 30 L 60 50 L 40 50 Z",fill:"rgba(255,255,255,0.9)"}),F.jsx("text",{x:"50",y:"20",textAnchor:"middle",fill:"rgba(255,255,255,0.7)",fontSize:"10",fontWeight:"bold",children:"IN"}),F.jsx("path",{d:"M 50 250 L 60 230 L 40 230 Z",fill:"rgba(255,255,255,0.9)"}),F.jsx("text",{x:"50",y:"273",textAnchor:"middle",fill:"rgba(255,255,255,0.7)",fontSize:"10",fontWeight:"bold",children:"OUT"}),F.jsx("line",{x1:"30",y1:"140",x2:"70",y2:"140",stroke:"rgba(255,255,255,0.3)",strokeWidth:"1",strokeDasharray:"3,3"}),F.jsx("rect",{x:"25",y:135+h,width:"50",height:"10",rx:"5",fill:"rgba(255,255,255,0.95)",filter:"drop-shadow(0 4px 6px rgba(0,0,0,0.3))",style:{cursor:S?"grabbing":"grab"}})]})]}),F.jsx("div",{className:"relative select-none",children:F.jsxs("svg",{ref:v,width:"280",height:"280",viewBox:"0 0 280 280",className:"drop-shadow-lg",onMouseDown:z,style:{cursor:u?"grabbing":"grab"},children:[F.jsx("circle",{cx:"140",cy:"140",r:"130",fill:"rgba(30,30,40,0.8)",stroke:"rgba(255,255,255,0.15)",strokeWidth:"2"}),F.jsx("path",{d:"M 140 20 L 155 55 L 125 55 Z",fill:"rgba(255,255,255,0.9)"}),F.jsx("path",{d:"M 140 260 L 155 225 L 125 225 Z",fill:"rgba(255,255,255,0.9)"}),F.jsx("path",{d:"M 20 140 L 55 125 L 55 155 Z",fill:"rgba(255,255,255,0.9)"}),F.jsx("path",{d:"M 260 140 L 225 125 L 225 155 Z",fill:"rgba(255,255,255,0.9)"}),F.jsx("rect",{x:"90",y:"90",width:"10",height:"10",fill:"rgba(255,255,255,0.5)"}),F.jsx("rect",{x:"180",y:"90",width:"10",height:"10",fill:"rgba(255,255,255,0.5)"}),F.jsx("rect",{x:"90",y:"180",width:"10",height:"10",fill:"rgba(255,255,255,0.5)"}),F.jsx("rect",{x:"180",y:"180",width:"10",height:"10",fill:"rgba(255,255,255,0.5)"}),F.jsx("circle",{cx:140+o.x,cy:140+o.y,r:"32",fill:"rgba(255,255,255,0.95)",filter:"drop-shadow(0 4px 6px rgba(0,0,0,0.3))",style:{cursor:u?"grabbing":"grab"}}),F.jsx("circle",{cx:140+o.x,cy:140+o.y,r:"20",fill:"rgba(200,200,200,0.4)",pointerEvents:"none"})]})})]}),F.jsxs("button",{onClick:J,className:"btn btn-outline btn-block gap-2",disabled:r,title:"Home Position",children:[F.jsx(m1,{size:18}),F.jsx("span",{children:"Home Position"})]})]})}function Iw({cameraPreviews:e,selectedCamera:t,onCameraSelect:n}){const[r,i]=W.useState(0),o=e.length;return W.useEffect(()=>{const a=setInterval(()=>{i(u=>u+1)},3e3);return()=>clearInterval(a)},[]),F.jsx("div",{className:"card bg-base-200",children:F.jsxs("div",{className:"card-body",children:[F.jsxs("h2",{className:"card-title",children:["Available Cameras (",o,")"]}),F.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:e.map((a,u)=>F.jsxs("button",{onClick:()=>n(a.module),className:`w-48 h-48 rounded-lg overflow-hidden bg-base-300 relative group hover:ring-4 hover:ring-primary transition-all ${t===a.module?"ring-4 ring-primary":""}`,children:[F.jsx("img",{src:`${a.url}&t=${r}`,alt:a.label,className:"w-full h-full object-cover"}),F.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-3",children:[F.jsx("div",{className:"text-white text-sm font-medium truncate",children:a.label}),F.jsx("div",{className:"text-white/60 text-xs font-mono truncate mt-1",children:a.module})]}),t===a.module&&F.jsx("div",{className:"absolute top-2 right-2 badge badge-primary badge-sm",children:"Active"})]},u))})]})})}function Nw(){const{id:e}=d0(),n=ln().state,[r,i]=i1(),[o,a]=W.useState((n==null?void 0:n.system)||null),[u,d]=W.useState((n==null?void 0:n.modules)||[]),[h,_]=W.useState((n==null?void 0:n.cameraPreviews)||[]),[S,y]=W.useState([]),[v,x]=W.useState(!(n!=null&&n.system)),[w,N]=W.useState(null),[A,E]=W.useState(null);W.useEffect(()=>{e&&!(n!=null&&n.system)&&z(e)},[e,n]),W.useEffect(()=>{o&&u.length>0&&h.length===0&&M()},[o,u,h.length]),W.useEffect(()=>{if(h.length>0){const J=r.get("camera");E(J||h[0].module)}},[h,r]),W.useEffect(()=>{h.length>0&&H()&&T()},[h,u]);const T=async()=>{if(o)try{const q=om(o.id,"Recording_1").binding("channels");q.bind();const be=(await wo(gm(q.listen().pipe(mm(I=>Array.isArray(I))),_m(3e3).pipe(pm(()=>[]))))).filter(I=>I.name.toLowerCase().includes("view"));console.log("[fetchChannelMappings] View channels:",be);const Z=h.map((I,L)=>{const $=be[L]||null;return{cameraModule:I.module,ndiInput:L+1,channelId:($==null?void 0:$.id)||null,channelName:($==null?void 0:$.name)||null}});console.log("[fetchChannelMappings] Mappings:",Z),y(Z)}catch(J){console.error("Failed to fetch channel mappings:",J)}},M=async()=>{if(o)try{const J=await Sm(o.id,u);_(J)}catch(J){console.error("Failed to generate camera previews:",J)}},z=async J=>{try{x(!0),N(null);const q=await bw(J);if(a(q),q.modules&&q.modules.length>0){const ne=await ym([...q.modules]);d(ne)}}catch(q){console.error("Error loading system:",q),N(q instanceof Error?q.message:"Failed to load system")}finally{x(!1)}},H=()=>u.filter(q=>q.name==="Recording")[0],U=()=>{const J=H();if(!J)return null;if(J.ip)return J.ip;if(J.uri)try{return new URL(J.uri).hostname}catch{return null}return null},R=J=>{const q=S.find(ne=>ne.cameraModule===J);return(q==null?void 0:q.channelId)||null},C=J=>{E(J),i({camera:J})};if(v)return F.jsx("div",{className:"flex items-center justify-center h-full",children:F.jsx("span",{className:"loading loading-spinner loading-lg"})});if(w)return F.jsx("div",{className:"p-6",children:F.jsx("div",{className:"alert alert-error",children:F.jsx("span",{children:w})})});if(!o)return F.jsx("div",{className:"p-6",children:F.jsx("div",{className:"alert alert-warning",children:F.jsx("span",{children:"System not found"})})});const k=h.find(J=>J.module===A),P=H(),Y=U();return F.jsxs("div",{className:"h-full flex flex-col",children:[F.jsx("div",{className:"p-6 border-b border-base-300",children:F.jsxs("div",{className:"flex items-center gap-4",children:[F.jsx(Er,{to:"/systems",className:"btn btn-ghost btn-circle",children:F.jsx(f1,{size:20})}),F.jsxs("div",{className:"flex-1",children:[F.jsx("h1",{className:"text-2xl font-bold",children:o.display_name||o.name}),k&&F.jsxs("p",{className:"text-sm text-base-content/60 mt-1",children:["Viewing: ",k.label]})]})]})}),F.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:F.jsxs("div",{className:"space-y-6",children:[h.length>0&&P&&Y&&F.jsxs(F.Fragment,{children:[F.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[A&&F.jsx("div",{className:"flex-1 min-w-0",children:F.jsx(Dw,{systemId:o.id,recordingModuleIp:Y,channelId:R(A)})}),A&&F.jsx("div",{className:"lg:w-[420px] flex-shrink-0",children:F.jsx("div",{className:"card bg-base-200",children:F.jsx("div",{className:"card-body",children:F.jsx(Ow,{systemId:o.id,cameraModule:P.id,moduleInfo:P})})})})]}),h.length>1&&F.jsx(Iw,{cameraPreviews:h,selectedCamera:A,onCameraSelect:C})]}),h.length===0&&F.jsx("div",{className:"alert alert-info",children:F.jsx("span",{children:"No active camera feeds available for this system"})})]})})]})}function fn({title:e}){return F.jsx("div",{className:"h-full flex items-center justify-center",children:F.jsxs("div",{className:"text-center",children:[F.jsx(_1,{className:"mx-auto mb-4 text-base-content/40",size:64}),F.jsx("h1",{className:"text-2xl font-bold mb-2",children:e}),F.jsx("p",{className:"text-base-content/60",children:"This page is under construction"})]})})}const wm=W.createContext(null);function Bw(e){const t=e.domain||location.hostname,n=e.port||location.port,r=location.origin,i=(location.pathname+"/").replace("//","/"),o=location.href.includes("mock=true")||localStorage.getItem("mock")==="true",a={auth_type:"auth_code",scope:"public",host:`${t}${n?":"+n:""}`,auth_uri:`${r}/auth/oauth/authorize`,token_uri:`${r}/auth/oauth/token`,redirect_uri:`${location.origin}${i}oauth-resp.html`,handle_login:!0,use_iframe:!0,mock:o};return localStorage&&localStorage.setItem("mock",`${!!o&&!location.href.includes("mock=false")}`),IS(a)}const Uw=({children:e})=>{const[t,n]=W.useState(null),[r,i]=W.useState(!1),[o,a]=W.useState(!0);W.useEffect(()=>{window.debug=!0,(async()=>{try{await Bw({route:"/control",use_domain:!1,local_login:!1,mock:!1});const _=await gw(dE("current"));n(_),i(!0)}catch{n(null),i(!1)}finally{a(!1)}})()},[]);const d={user:t,isAuthenticated:r,loading:o,logOut:()=>NS()};return F.jsx(wm.Provider,{value:d,children:!o&&e})},jw=()=>W.useContext(wm);function Fw(){const{isAuthenticated:e,loading:t}=jw();return t?F.jsx("div",{className:"flex h-screen items-center justify-center",children:F.jsx("div",{className:"h-16 w-16 animate-spin rounded-full border-b-2 border-indigo-600"})}):F.jsx(J0,{children:F.jsx(C0,{children:F.jsx(At,{path:"/",element:F.jsx(S1,{}),children:e&&F.jsxs(F.Fragment,{children:[F.jsx(At,{index:!0,element:F.jsx(k0,{to:"/systems",replace:!0})}),F.jsx(At,{path:"systems",element:F.jsx(Lw,{})}),F.jsx(At,{path:"systems/:id",element:F.jsx(Nw,{})}),F.jsx(At,{path:"modules",element:F.jsx(fn,{title:"Modules"})}),F.jsx(At,{path:"zones",element:F.jsx(fn,{title:"Zones"})}),F.jsx(At,{path:"drivers",element:F.jsx(fn,{title:"Drivers"})}),F.jsx(At,{path:"repositories",element:F.jsx(fn,{title:"Repositories"})}),F.jsx(At,{path:"triggers",element:F.jsx(fn,{title:"Triggers"})}),F.jsx(At,{path:"alerts",element:F.jsx(fn,{title:"Alerts"})}),F.jsx(At,{path:"metrics",element:F.jsx(fn,{title:"Metrics"})}),F.jsx(At,{path:"users",element:F.jsx(fn,{title:"Users"})}),F.jsx(At,{path:"domains",element:F.jsx(fn,{title:"Domains"})}),F.jsx(At,{path:"manage",element:F.jsx(fn,{title:"Manage Instance"})})]})})})})}Hp(document.getElementById("root")).render(F.jsx(W.StrictMode,{children:F.jsx(Uw,{children:F.jsx(Fw,{})})}));
